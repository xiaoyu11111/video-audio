<html>
<p>test</p>

<input id="file-input" type="file" />
<br>
<label for="option_width" >Size:</label>
<input type="text" id="option_width" value="640"/> &times;

<input type="text" id="option_height" value="480"/>
<br>
<!-- <button id="button_start"  >Start streaming</button> -->
<!-- <button id="button_stop"  >Stop streaming</button> -->
<div>
	<p id="output_message"></p>

	<!-- <video id="output_video" autoplay=true></video> -->
<!-- <video class="real1" autoplay controls></video> -->
<!-- <video class="real2" controls></video> -->
</div>
</html>

<script>
const constraints = {video: true};

const video1 = document.querySelector('.real1');
const video2 = document.querySelector('.real2');

var blobList = [];

var gCurrentTime = 0;
var mediaRecorder;
var streamother;
var state;
var	height=option_height.value;
var	width=option_width.value;
var button_start=document.getElementById('button_start');
var button_stop=document.getElementById('button_stop');
var worker = new Worker('worker-test.js');
var inputElement = document.getElementById("file-input");
inputElement.addEventListener("change", handleFiles, false);
worker.onmessage = function (event) {
  var message = event.data;
  if (message.type == "stdout") {
    console.log(message.data, 'stdout====')
  } else if (message.type == "start") {
    console.log(message.data, 'start====')
  } else if (message.type == "done") {
    console.log(message.data, 'done====')
  }
};
function handleFiles() {
var fileList = this.files;
 worker.postMessage({
    type: "command",
    arguments: ['-i', '/input/' + fileList[0].name, '-s' ,'360x240' , 'out.mpeg'],
    files: fileList
  });
// worker.postMessage(fileList);
}
//worker.postMessage("SampleVideo_1280x720_1mb.mp4");
//worker.postMessage({'cmd': 'start', 'msg': 'Hi'});
//worker.postMessage('/SampleVideo_1280x720_1mb.mp4');
</script>
