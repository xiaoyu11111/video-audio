(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},i={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var p=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1071:function(e,t,n){},2371:function(e,t,n){},"30c3":function(e,t,n){},"31eb":function(e,t,n){"use strict";var r=n("6a9e"),i=n.n(r);i.a},"37b2":function(e,t,n){},"3a10":function(e,t,n){},"3b14":function(e,t,n){"use strict";var r=n("2371"),i=n.n(r);i.a},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="4678"},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("a026"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],a=(n("8e6e"),n("2397"),n("4f7f"),n("ade3")),s=(n("96cf"),n("1da1")),c=n("3835"),u=n("bee2"),p=n("d4ec"),l=n("257e"),d=n("262e"),f=n("99de"),m=n("7e84"),h=n("9072"),v=(n("f576"),n("20d6"),n("b6e4"),n("15ac"),n("386d"),n("f559"),n("aef6"),n("7514"),n("6762"),n("2fdb"),n("456d"),n("28a5"),n("4917"),n("6c7b"),n("c5f6"),n("b05c"),n("f400"),n("63d9"),n("5df3"),n("7f7f"),n("55dd"),n("ac6a"),n("9c29"),n("34ef"),n("3b2b"),n("a481"),n("fd24"),n("6b54"),n("53ca"));n("ac4d"),n("8a81");function g(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function b(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}return function(){var n,r=Object(m["a"])(e);if(t()){var i=Object(m["a"])(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f["a"])(this,n)}}!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==Object(v["a"])(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){window.SpeechSDK=n(1)},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);n(4).Events.instance.attachListener(new o.ConsoleLoggingListener),i(n(61),t)},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(3),t),i(n(51),t),i(n(52),t),i(n(229),t),i(n(230),t),i(n(231),t),i(n(232),t),i(n(245),t),i(n(246),t),i(n(247),t),i(n(207),t)},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleLoggingListener=void 0;var r=n(4),i=function(e){var t=this;void 0===e&&(e=r.EventType.Warning),this.onEvent=function(e){if(e.eventType>=t.privLogLevelFilter){var n=t.toString(e);switch(e.eventType){case r.EventType.Debug:console.debug(n);break;case r.EventType.Info:console.info(n);break;case r.EventType.Warning:console.warn(n);break;case r.EventType.Error:console.error(n);break;default:console.log(n)}}},this.toString=function(e){var t=[""+e.EventTime,""+e.Name];for(var n in e)if(n&&e.hasOwnProperty(n)&&"eventTime"!==n&&"eventType"!==n&&"eventId"!==n&&"name"!==n&&"constructor"!==n){var r=e[n],i="<NULL>";null!=r&&(i="number"==typeof r||"string"==typeof r?r.toString():JSON.stringify(r)),t.push(n+": "+i)}return t.join(" | ")},this.privLogLevelFilter=e};t.ConsoleLoggingListener=i},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(5),t),i(n(23),t),i(n(24),t),i(n(26),t),i(n(27),t),i(n(25),t),i(n(28),t),i(n(29),t),i(n(7),t),i(n(30),t),i(n(31),t),i(n(32),t),i(n(33),t),i(n(34),t),i(n(35),t),i(n(36),t),i(n(37),t),i(n(38),t),i(n(39),t),i(n(6),t),i(n(40),t),i(n(41),t),i(n(42),t),i(n(43),t),i(n(44),t);var o=n(45);Object.defineProperty(t,"TranslationStatus",{enumerable:!0,get:function(){return o.TranslationStatus}}),i(n(46),t),i(n(47),t),i(n(48),t),i(n(49),t),i(n(50),t)},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamNodeErrorEvent=t.AudioStreamNodeDetachedEvent=t.AudioStreamNodeAttachedEvent=t.AudioStreamNodeAttachingEvent=t.AudioStreamNodeEvent=t.AudioSourceErrorEvent=t.AudioSourceOffEvent=t.AudioSourceReadyEvent=t.AudioSourceInitializingEvent=t.AudioSourceEvent=void 0;var o=n(6),a=function(e){function t(t,n,r){void 0===r&&(r=o.EventType.Info);var i=e.call(this,t,r)||this;return i.privAudioSourceId=n,i}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.AudioSourceEvent=a;var s=function(e){function t(t){return e.call(this,"AudioSourceInitializingEvent",t)||this}return i(t,e),t}(a);t.AudioSourceInitializingEvent=s;var c=function(e){function t(t){return e.call(this,"AudioSourceReadyEvent",t)||this}return i(t,e),t}(a);t.AudioSourceReadyEvent=c;var u=function(e){function t(t){return e.call(this,"AudioSourceOffEvent",t)||this}return i(t,e),t}(a);t.AudioSourceOffEvent=u;var p=function(e){function t(t,n){var r=e.call(this,"AudioSourceErrorEvent",t,o.EventType.Error)||this;return r.privError=n,r}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(a);t.AudioSourceErrorEvent=p;var l=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.privAudioNodeId=r,i}return i(t,e),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(a);t.AudioStreamNodeEvent=l;var d=function(e){function t(t,n){return e.call(this,"AudioStreamNodeAttachingEvent",t,n)||this}return i(t,e),t}(l);t.AudioStreamNodeAttachingEvent=d;var f=function(e){function t(t,n){return e.call(this,"AudioStreamNodeAttachedEvent",t,n)||this}return i(t,e),t}(l);t.AudioStreamNodeAttachedEvent=f;var m=function(e){function t(t,n){return e.call(this,"AudioStreamNodeDetachedEvent",t,n)||this}return i(t,e),t}(l);t.AudioStreamNodeDetachedEvent=m;var h=function(e){function t(t,n,r){var i=e.call(this,"AudioStreamNodeErrorEvent",t,n)||this;return i.privError=r,i}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(l);t.AudioStreamNodeErrorEvent=h},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PlatformEvent=t.EventType=void 0;var r=n(7);!function(e){e[e.Debug=0]="Debug",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(t.EventType||(t.EventType={}));var i=function(){function e(e,t){this.privName=e,this.privEventId=r.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.privName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventId",{get:function(){return this.privEventId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventTime",{get:function(){return this.privEventTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"eventType",{get:function(){return this.privEventType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();t.PlatformEvent=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createNoDashGuid=t.createGuid=void 0;var r=n(8),i=function(){return r.v4()};t.createGuid=i,t.createNoDashGuid=function(){return i().replace(new RegExp("-","g"),"").toUpperCase()}},function(e,t,n){n.r(t);var r=n(9);n.d(t,"v1",function(){return r.default});var i=n(14);n.d(t,"v3",function(){return i.default});var o=n(18);n.d(t,"v4",function(){return o.default});var a=n(19);n.d(t,"v5",function(){return a.default});var s=n(21);n.d(t,"NIL",function(){return s.default});var c=n(22);n.d(t,"version",function(){return c.default});var u=n(12);n.d(t,"validate",function(){return u.default});var p=n(11);n.d(t,"stringify",function(){return p.default});var l=n(16);n.d(t,"parse",function(){return l.default})},function(e,t,n){n.r(t);var r,i,o=n(10),a=n(11),s=0,c=0;t.default=function(e,t,n){var u=t&&n||0,p=t||new Array(16),l=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==l||null==d){var f=e.random||(e.rng||o.default)();null==l&&(l=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var m=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:c+1,v=m-s+(h-c)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||m>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=m,c=h,i=d;var g=(1e4*(268435455&(m+=122192928e5))+h)%4294967296;p[u++]=g>>>24&255,p[u++]=g>>>16&255,p[u++]=g>>>8&255,p[u++]=255&g;var y=m/4294967296*1e4&268435455;p[u++]=y>>>8&255,p[u++]=255&y,p[u++]=y>>>24&15|16,p[u++]=y>>>16&255,p[u++]=d>>>8|128,p[u++]=255&d;for(var b=0;b<6;++b)p[u+b]=l[b];return t||Object(a.default)(p)}},function(e,t,n){var r;n.r(t),n.d(t,"default",function(){return o});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}},function(e,t,n){n.r(t);for(var r=n(12),i=[],o=0;o<256;++o)i.push((o+256).toString(16).substr(1));t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]).toLowerCase();if(!Object(r.default)(n))throw TypeError("Stringified UUID is invalid");return n}},function(e,t,n){n.r(t);var r=n(13);t.default=function(e){return"string"==typeof e&&r.default.test(e)}},function(e,t,n){n.r(t),t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},function(e,t,n){n.r(t);var r=n(15),i=n(17),o=Object(r.default)("v3",48,i.default);t.default=o},function(e,t,n){n.r(t),n.d(t,"DNS",function(){return o}),n.d(t,"URL",function(){return a});var r=n(11),i=n(16),o="6ba7b810-9dad-11d1-80b4-00c04fd430c8",a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.default=function(e,t,n){function s(e,o,a,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof o&&(o=Object(i.default)(o)),16!==o.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+e.length);if(c.set(o),c.set(e,o.length),(c=n(c))[6]=15&c[6]|t,c[8]=63&c[8]|128,a){s=s||0;for(var u=0;u<16;++u)a[s+u]=c[u];return a}return Object(r.default)(c)}try{s.name=e}catch(e){}return s.DNS=o,s.URL=a,s}},function(e,t,n){n.r(t);var r=n(12);t.default=function(e){if(!Object(r.default)(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},function(e,t,n){function r(e){return 14+(e+64>>>9<<4)+1}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,r,o,a){return i((s=i(i(t,e),i(r,a)))<<(c=o)|s>>>32-c,n);var s,c}function a(e,t,n,r,i,a,s){return o(t&n|~t&r,e,t,i,a,s)}function s(e,t,n,r,i,a,s){return o(t&r|n&~r,e,t,i,a,s)}function c(e,t,n,r,i,a,s){return o(t^n^r,e,t,i,a,s)}function u(e,t,n,r,i,a,s){return o(n^(t|~r),e,t,i,a,s)}n.r(t),t.default=function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){for(var t=[],n=32*e.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=e[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[r(t)-1]=t;for(var n=1732584193,o=-271733879,p=-1732584194,l=271733878,d=0;d<e.length;d+=16){var f=n,m=o,h=p,v=l;n=a(n,o,p,l,e[d],7,-680876936),l=a(l,n,o,p,e[d+1],12,-389564586),p=a(p,l,n,o,e[d+2],17,606105819),o=a(o,p,l,n,e[d+3],22,-1044525330),n=a(n,o,p,l,e[d+4],7,-176418897),l=a(l,n,o,p,e[d+5],12,1200080426),p=a(p,l,n,o,e[d+6],17,-1473231341),o=a(o,p,l,n,e[d+7],22,-45705983),n=a(n,o,p,l,e[d+8],7,1770035416),l=a(l,n,o,p,e[d+9],12,-1958414417),p=a(p,l,n,o,e[d+10],17,-42063),o=a(o,p,l,n,e[d+11],22,-1990404162),n=a(n,o,p,l,e[d+12],7,1804603682),l=a(l,n,o,p,e[d+13],12,-40341101),p=a(p,l,n,o,e[d+14],17,-1502002290),n=s(n,o=a(o,p,l,n,e[d+15],22,1236535329),p,l,e[d+1],5,-165796510),l=s(l,n,o,p,e[d+6],9,-1069501632),p=s(p,l,n,o,e[d+11],14,643717713),o=s(o,p,l,n,e[d],20,-373897302),n=s(n,o,p,l,e[d+5],5,-701558691),l=s(l,n,o,p,e[d+10],9,38016083),p=s(p,l,n,o,e[d+15],14,-660478335),o=s(o,p,l,n,e[d+4],20,-405537848),n=s(n,o,p,l,e[d+9],5,568446438),l=s(l,n,o,p,e[d+14],9,-1019803690),p=s(p,l,n,o,e[d+3],14,-187363961),o=s(o,p,l,n,e[d+8],20,1163531501),n=s(n,o,p,l,e[d+13],5,-1444681467),l=s(l,n,o,p,e[d+2],9,-51403784),p=s(p,l,n,o,e[d+7],14,1735328473),n=c(n,o=s(o,p,l,n,e[d+12],20,-1926607734),p,l,e[d+5],4,-378558),l=c(l,n,o,p,e[d+8],11,-2022574463),p=c(p,l,n,o,e[d+11],16,1839030562),o=c(o,p,l,n,e[d+14],23,-35309556),n=c(n,o,p,l,e[d+1],4,-1530992060),l=c(l,n,o,p,e[d+4],11,1272893353),p=c(p,l,n,o,e[d+7],16,-155497632),o=c(o,p,l,n,e[d+10],23,-1094730640),n=c(n,o,p,l,e[d+13],4,681279174),l=c(l,n,o,p,e[d],11,-358537222),p=c(p,l,n,o,e[d+3],16,-722521979),o=c(o,p,l,n,e[d+6],23,76029189),n=c(n,o,p,l,e[d+9],4,-640364487),l=c(l,n,o,p,e[d+12],11,-421815835),p=c(p,l,n,o,e[d+15],16,530742520),n=u(n,o=c(o,p,l,n,e[d+2],23,-995338651),p,l,e[d],6,-198630844),l=u(l,n,o,p,e[d+7],10,1126891415),p=u(p,l,n,o,e[d+14],15,-1416354905),o=u(o,p,l,n,e[d+5],21,-57434055),n=u(n,o,p,l,e[d+12],6,1700485571),l=u(l,n,o,p,e[d+3],10,-1894986606),p=u(p,l,n,o,e[d+10],15,-1051523),o=u(o,p,l,n,e[d+1],21,-2054922799),n=u(n,o,p,l,e[d+8],6,1873313359),l=u(l,n,o,p,e[d+15],10,-30611744),p=u(p,l,n,o,e[d+6],15,-1560198380),o=u(o,p,l,n,e[d+13],21,1309151649),n=u(n,o,p,l,e[d+4],6,-145523070),l=u(l,n,o,p,e[d+11],10,-1120210379),p=u(p,l,n,o,e[d+2],15,718787259),o=u(o,p,l,n,e[d+9],21,-343485551),n=i(n,f),o=i(o,m),p=i(p,h),l=i(l,v)}return[n,o,p,l]}(function(e){if(0===e.length)return[];for(var t=8*e.length,n=new Uint32Array(r(t)),i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))}},function(e,t,n){n.r(t);var r=n(10),i=n(11);t.default=function(e,t,n){var o=(e=e||{}).random||(e.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=o[a];return t}return Object(i.default)(o)}},function(e,t,n){n.r(t);var r=n(15),i=n(20),o=Object(r.default)("v5",80,i.default);t.default=o},function(e,t,n){function r(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function i(e,t){return e<<t|e>>>32-t}n.r(t),t.default=function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var o=unescape(encodeURIComponent(e));e=[];for(var a=0;a<o.length;++a)e.push(o.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,c=Math.ceil(s/16),u=new Array(c),p=0;p<c;++p){for(var l=new Uint32Array(16),d=0;d<16;++d)l[d]=e[64*p+4*d]<<24|e[64*p+4*d+1]<<16|e[64*p+4*d+2]<<8|e[64*p+4*d+3];u[p]=l}u[c-1][14]=8*(e.length-1)/Math.pow(2,32),u[c-1][14]=Math.floor(u[c-1][14]),u[c-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<c;++f){for(var m=new Uint32Array(80),h=0;h<16;++h)m[h]=u[f][h];for(var v=16;v<80;++v)m[v]=i(m[v-3]^m[v-8]^m[v-14]^m[v-16],1);for(var g=n[0],y=n[1],b=n[2],_=n[3],S=n[4],C=0;C<80;++C){var P=Math.floor(C/20),w=i(g,5)+r(P,y,b,_)+S+t[P]+m[C]>>>0;S=_,_=b,b=i(y,30)>>>0,y=g,g=w}n[0]=n[0]+g>>>0,n[1]=n[1]+y>>>0,n[2]=n[2]+b>>>0,n[3]=n[3]+_>>>0,n[4]=n[4]+S>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}},function(e,t,n){n.r(t),t.default="00000000-0000-0000-0000-000000000000"},function(e,t,n){n.r(t);var r=n(12);t.default=function(e){if(!Object(r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageSentEvent=t.ConnectionMessageReceivedEvent=t.ConnectionEstablishErrorEvent=t.ConnectionErrorEvent=t.ConnectionClosedEvent=t.ConnectionEstablishedEvent=t.ConnectionStartEvent=t.ConnectionEvent=t.ServiceEvent=void 0;var o=n(6),a=function(e){function t(t,n,r){void 0===r&&(r=o.EventType.Info);var i=e.call(this,t,r)||this;return i.privJsonResult=n,i}return i(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.ServiceEvent=a;var s=function(e){function t(t,n,r){void 0===r&&(r=o.EventType.Info);var i=e.call(this,t,r)||this;return i.privConnectionId=n,i}return i(t,e),Object.defineProperty(t.prototype,"connectionId",{get:function(){return this.privConnectionId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.ConnectionEvent=s;var c=function(e){function t(t,n,r){var i=e.call(this,"ConnectionStartEvent",t)||this;return i.privUri=n,i.privHeaders=r,i}return i(t,e),Object.defineProperty(t.prototype,"uri",{get:function(){return this.privUri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),t}(s);t.ConnectionStartEvent=c;var u=function(e){function t(t,n){return e.call(this,"ConnectionEstablishedEvent",t)||this}return i(t,e),t}(s);t.ConnectionEstablishedEvent=u;var p=function(e){function t(t,n,r){var i=e.call(this,"ConnectionClosedEvent",t,o.EventType.Debug)||this;return i.privReason=r,i.privStatusCode=n,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(s);t.ConnectionClosedEvent=p;var l=function(e){function t(t,n,r){var i=e.call(this,"ConnectionErrorEvent",t,o.EventType.Debug)||this;return i.privMessage=n,i.privType=r,i}return i(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.privType},enumerable:!1,configurable:!0}),t}(s);t.ConnectionErrorEvent=l;var d=function(e){function t(t,n,r){var i=e.call(this,"ConnectionEstablishErrorEvent",t,o.EventType.Error)||this;return i.privStatusCode=n,i.privReason=r,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),t}(s);t.ConnectionEstablishErrorEvent=d;var f=function(e){function t(t,n,r){var i=e.call(this,"ConnectionMessageReceivedEvent",t)||this;return i.privNetworkReceivedTime=n,i.privMessage=r,i}return i(t,e),Object.defineProperty(t.prototype,"networkReceivedTime",{get:function(){return this.privNetworkReceivedTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(s);t.ConnectionMessageReceivedEvent=f;var m=function(e){function t(t,n,r){var i=e.call(this,"ConnectionMessageSentEvent",t)||this;return i.privNetworkSentTime=n,i.privMessage=r,i}return i(t,e),Object.defineProperty(t.prototype,"networkSentTime",{get:function(){return this.privNetworkSentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.privMessage},enumerable:!1,configurable:!0}),t}(s);t.ConnectionMessageSentEvent=m},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessage=t.MessageType=void 0;var r,i=n(25),o=n(7);!function(e){e[e.Text=0]="Text",e[e.Binary=1]="Binary"}(r=t.MessageType||(t.MessageType={}));var a=function(){function e(e,t,n,a){if(this.privBody=null,e===r.Text&&t&&"string"!=typeof t)throw new i.InvalidOperationError("Payload must be a string");if(e===r.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=e,this.privBody=t,this.privHeaders=n||{},this.privId=a||o.createNoDashGuid(),this.messageType){case r.Binary:this.privSize=null!==this.binaryBody?this.binaryBody.byteLength:0;break;case r.Text:this.privSize=this.textBody.length}}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBody",{get:function(){if(this.privMessageType===r.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){if(this.privMessageType===r.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();t.ConnectionMessage=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDisposedError=t.InvalidOperationError=t.ArgumentNullError=void 0;var o=function(e){function t(t){var n=e.call(this,t)||this;return n.name="ArgumentNull",n.message=t,n}return i(t,e),t}(Error);t.ArgumentNullError=o;var a=function(e){function t(t){var n=e.call(this,t)||this;return n.name="InvalidOperation",n.message=t,n}return i(t,e),t}(Error);t.InvalidOperationError=a;var s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t+"ObjectDisposed",r.message=n,r}return i(t,e),t}(Error);t.ObjectDisposedError=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionOpenResponse=void 0;var r=function(){function e(e,t){this.privStatusCode=e,this.privReason=t}return Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.ConnectionOpenResponse=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SendingAgentContextMessageEvent=t.DialogEvent=void 0;var o=n(6),a=function(e){function t(t,n){return void 0===n&&(n=o.EventType.Info),e.call(this,t,n)||this}return i(t,e),t}(o.PlatformEvent);t.DialogEvent=a;var s=function(e){function t(t){var n=e.call(this,"SendingAgentContextMessageEvent")||this;return n.privAgentConfig=t,n}return i(t,e),Object.defineProperty(t.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),t}(a);t.SendingAgentContextMessageEvent=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Events=void 0;var r=n(25),i=n(29),o=function(){function e(){}return Object.defineProperty(e,"instance",{get:function(){return e.privInstance},enumerable:!1,configurable:!0}),e.privInstance=new i.EventSource,e.setEventSource=function(t){if(!t)throw new r.ArgumentNullError("eventSource");e.privInstance=t},e}();t.Events=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EventSource=void 0;var r=n(25),i=n(7),o=function(){function e(e){var t=this;this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=function(e){if(t.isDisposed())throw new r.ObjectDisposedError("EventSource");if(t.metadata)for(var n in t.metadata)n&&e.metadata&&(e.metadata[n]||(e.metadata[n]=t.metadata[n]));for(var i in t.privEventListeners)i&&t.privEventListeners[i]&&t.privEventListeners[i](e)},this.attach=function(e){var n=i.createNoDashGuid();return t.privEventListeners[n]=e,{detach:function(){return delete t.privEventListeners[n],Promise.resolve()}}},this.attachListener=function(e){return t.attach(e.onEvent)},this.isDisposed=function(){return t.privIsDisposed},this.dispose=function(){t.privEventListeners=null,t.privIsDisposed=!0},this.privMetadata=e}return Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!1,configurable:!0}),e}();t.EventSource=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionState=void 0,function(e){e[e.None=0]="None",e[e.Connected=1]="Connected",e[e.Connecting=2]="Connecting",e[e.Disconnected=3]="Disconnected"}(t.ConnectionState||(t.ConnectionState={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;var r=n(25),i=function e(t){var n=this;if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=function(e){return n.throwIfDisposed(),n.privList[e]},this.first=function(){return n.get(0)},this.last=function(){return n.get(n.length()-1)},this.add=function(e){n.throwIfDisposed(),n.insertAt(n.privList.length,e)},this.insertAt=function(e,t){n.throwIfDisposed(),0===e?n.privList.unshift(t):e===n.privList.length?n.privList.push(t):n.privList.splice(e,0,t),n.triggerSubscriptions(n.privAddSubscriptions)},this.removeFirst=function(){return n.throwIfDisposed(),n.removeAt(0)},this.removeLast=function(){return n.throwIfDisposed(),n.removeAt(n.length()-1)},this.removeAt=function(e){return n.throwIfDisposed(),n.remove(e,1)[0]},this.remove=function(e,t){n.throwIfDisposed();var r=n.privList.splice(e,t);return n.triggerSubscriptions(n.privRemoveSubscriptions),r},this.clear=function(){n.throwIfDisposed(),n.remove(0,n.length())},this.length=function(){return n.throwIfDisposed(),n.privList.length},this.onAdded=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privAddSubscriptions[t]=e,{detach:function(){return delete n.privAddSubscriptions[t],Promise.resolve()}}},this.onRemoved=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privRemoveSubscriptions[t]=e,{detach:function(){return delete n.privRemoveSubscriptions[t],Promise.resolve()}}},this.onDisposed=function(e){n.throwIfDisposed();var t=n.privSubscriptionIdCounter++;return n.privDisposedSubscriptions[t]=e,{detach:function(){return delete n.privDisposedSubscriptions[t],Promise.resolve()}}},this.join=function(e){return n.throwIfDisposed(),n.privList.join(e)},this.toArray=function(){var e=Array();return n.privList.forEach(function(t){e.push(t)}),e},this.any=function(e){return n.throwIfDisposed(),e?n.where(e).length()>0:n.length()>0},this.all=function(e){return n.throwIfDisposed(),n.where(e).length()===n.length()},this.forEach=function(e){n.throwIfDisposed();for(var t=0;t<n.length();t++)e(n.privList[t],t)},this.select=function(t){n.throwIfDisposed();for(var r=[],i=0;i<n.privList.length;i++)r.push(t(n.privList[i],i));return new e(r)},this.where=function(t){n.throwIfDisposed();for(var r=new e,i=0;i<n.privList.length;i++)t(n.privList[i],i)&&r.add(n.privList[i]);return r},this.orderBy=function(t){return n.throwIfDisposed(),new e(n.toArray().sort(t))},this.orderByDesc=function(e){return n.throwIfDisposed(),n.orderBy(function(t,n){return e(n,t)})},this.clone=function(){return n.throwIfDisposed(),new e(n.toArray())},this.concat=function(t){return n.throwIfDisposed(),new e(n.privList.concat(t.toArray()))},this.concatArray=function(t){return n.throwIfDisposed(),new e(n.privList.concat(t))},this.isDisposed=function(){return null==n.privList},this.dispose=function(e){n.isDisposed()||(n.privDisposeReason=e,n.privList=null,n.privAddSubscriptions=null,n.privRemoveSubscriptions=null,n.triggerSubscriptions(n.privDisposedSubscriptions))},this.throwIfDisposed=function(){if(n.isDisposed())throw new r.ObjectDisposedError("List",n.privDisposeReason)},this.triggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},this.privList=[],t)for(var i=0,o=t;i<o.length;i++){var a=o[i];this.privList.push(a)}};t.List=i},function(e,t,n){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.marshalPromiseToCallbacks=t.Sink=t.Deferred=t.PromiseResultEventSource=t.PromiseResult=t.PromiseState=void 0,function(e){e[e.None=0]="None",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected"}(r=t.PromiseState||(t.PromiseState={}));var i=function(){function e(e){var t=this;this.throwIfError=function(){if(t.isError)throw t.error},e.on(function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!1,t.privResult=e)},function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!0,t.privError=e)})}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this.privIsCompleted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return this.privIsError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();t.PromiseResult=i;var o=function(){var e=this;this.setResult=function(t){e.privOnSetResult(t)},this.setError=function(t){e.privOnSetError(t)},this.on=function(t,n){e.privOnSetResult=t,e.privOnSetError=n}};t.PromiseResultEventSource=o;var a=function(){function e(){var e=this;this.resolve=function(t){return e.privResolve(t),e},this.reject=function(t){return e.privReject(t),e},this.privPromise=new Promise(function(t,n){e.privResolve=t,e.privReject=n})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this.privPromise},enumerable:!1,configurable:!0}),e}();t.Deferred=a;var s=function(){function e(){var e=this;this.privState=r.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.resolve=function(t){if(e.privState!==r.None)throw new Error("'Cannot resolve a completed promise'");e.privState=r.Resolved,e.privPromiseResultEvents.setResult(t);for(var n=0;n<e.privSuccessHandlers.length;n++)e.executeSuccessCallback(t,e.privSuccessHandlers[n],e.privErrorHandlers[n]);e.detachHandlers()},this.reject=function(t){if(e.privState!==r.None)throw new Error("'Cannot reject a completed promise'");e.privState=r.Rejected,e.privPromiseResultEvents.setError(t);for(var n=0,i=e.privErrorHandlers;n<i.length;n++){var o=i[n];e.executeErrorCallback(t,o)}e.detachHandlers()},this.on=function(t,n){null==t&&(t=function(e){}),e.privState===r.None?(e.privSuccessHandlers.push(t),e.privErrorHandlers.push(n)):(e.privState===r.Resolved?e.executeSuccessCallback(e.privPromiseResult.result,t,n):e.privState===r.Rejected&&e.executeErrorCallback(e.privPromiseResult.error,n),e.detachHandlers())},this.executeSuccessCallback=function(t,n,r){try{n(t)}catch(t){e.executeErrorCallback("'Unhandled callback error: "+t+"'",r)}},this.executeErrorCallback=function(e,t){if(!t)throw new Error("'Unhandled error: "+e+"'");try{t(e)}catch(t){throw new Error("'Unhandled callback error: "+t+". InnerError: "+e+"'")}},this.detachHandlers=function(){e.privErrorHandlers=[],e.privSuccessHandlers=[]},this.privPromiseResultEvents=new o,this.privPromiseResult=new i(this.privPromiseResultEvents)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privPromiseResult},enumerable:!1,configurable:!0}),e}();t.Sink=s,t.marshalPromiseToCallbacks=function(e,t,n){e.then(function(e){try{t&&t(e)}catch(e){if(n)try{if(e instanceof Error){var r=e;n(r.name+": "+r.message)}else n(e)}catch(e){}}},function(e){if(n)try{if(e instanceof Error){var t=e;n(t.name+": "+t.message)}else n(e)}catch(e){}})}},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Queue=void 0;var o,a=n(25),s=n(39),c=n(40);!function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"}(o||(o={}));var u=function(){function e(e){var t=this;this.privPromiseStore=new s.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=function(e){t.throwIfDispose(),t.enqueueFromPromise(new Promise(function(t,n){t(e)}))},this.enqueueFromPromise=function(e){t.throwIfDispose(),e.then(function(e){t.privList.add(e)},function(e){})},this.dequeue=function(){t.throwIfDispose();var e=new c.Deferred;return t.privSubscribers&&(t.privSubscribers.add({deferral:e,type:o.Dequeue}),t.drain()),e.promise},this.peek=function(){t.throwIfDispose();var e=new c.Deferred;return t.privSubscribers&&(t.privSubscribers.add({deferral:e,type:o.Peek}),t.drain()),e.promise},this.length=function(){return t.throwIfDispose(),t.privList.length()},this.isDisposed=function(){return null==t.privSubscribers},this.drain=function(){if(!t.privIsDrainInProgress&&!t.privIsDisposing){t.privIsDrainInProgress=!0;var e=t.privSubscribers,n=t.privList;if(e&&n){for(;n.length()>0&&e.length()>0&&!t.privIsDisposing;){var r=e.removeFirst();if(r.type===o.Peek)r.deferral.resolve(n.first());else{var i=n.removeFirst();r.deferral.resolve(i)}}t.privSubscribers===e&&(t.privSubscribers=e),t.privList===n&&(t.privList=n)}t.privIsDrainInProgress=!1}},this.throwIfDispose=function(){if(t.isDisposed()){if(t.privDisposeReason)throw new a.InvalidOperationError(t.privDisposeReason);throw new a.ObjectDisposedError("Queue")}if(t.privIsDisposing)throw new a.InvalidOperationError("Queue disposing")},this.privList=e||new s.List,this.privDetachables=[],this.privSubscribers=new s.List,this.privDetachables.push(this.privList.onAdded(this.drain))}return e.prototype.drainAndDispose=function(e,t){return r(this,void 0,void 0,function(){var n,r,o,a,s=this;return i(this,function(i){switch(i.label){case 0:if(this.isDisposed()||this.privIsDisposing)return[3,5];if(this.privDisposeReason=t,this.privIsDisposing=!0,n=this.privSubscribers){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}r=0,o=this.privDetachables,i.label=1;case 1:return r<o.length?[4,o[r].detach()]:[3,4];case 2:i.sent(),i.label=3;case 3:return r++,[3,1];case 4:if(this.privPromiseStore.length()>0&&e)return a=[],this.privPromiseStore.toArray().forEach(function(e){a.push(e)}),[2,Promise.all(a).finally(function(){s.privSubscribers=null,s.privList.forEach(function(t,n){e(t)}),s.privList=null}).then()];this.privSubscribers=null,this.privList=null,i.label=5;case 5:return[2]}})})},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.drainAndDispose(null,e)];case 1:return t.sent(),[2]}})})},e}();t.Queue=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RawWebsocketMessage=void 0;var r=n(24),i=n(25),o=n(7),a=function(){function e(e,t,n){if(this.privPayload=null,!t)throw new i.ArgumentNullError("payload");if(e===r.MessageType.Binary&&"ArrayBuffer"!==t.__proto__.constructor.name)throw new i.InvalidOperationError("Payload must be ArrayBuffer");if(e===r.MessageType.Text&&"string"!=typeof t)throw new i.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=n||o.createNoDashGuid()}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){if(this.privMessageType===r.MessageType.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryContent",{get:function(){if(this.privMessageType===r.MessageType.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e}();t.RawWebsocketMessage=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RiffPcmEncoder=void 0;var r=function(e,t){var n=this;this.encode=function(e){var t=n.downSampleAudioFrame(e,n.privActualSampleRate,n.privDesiredSampleRate);if(!t)return null;var r=2*t.length,i=new ArrayBuffer(r),o=new DataView(i);return n.floatTo16BitPCM(o,0,t),i},this.setString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},this.floatTo16BitPCM=function(e,t,n){for(var r=0;r<n.length;r++,t+=2){var i=Math.max(-1,Math.min(1,n[r]));e.setInt16(t,i<0?32768*i:32767*i,!0)}},this.downSampleAudioFrame=function(e,t,n){if(!e)return null;if(n===t||n>t)return e;for(var r=t/n,i=Math.round(e.length/r),o=new Float32Array(i),a=0,s=0;s<i;){for(var c=Math.round((s+1)*r),u=0,p=0;a<c&&a<e.length;)u+=e[a++],p++;o[s++]=u/p}return o},this.privActualSampleRate=e,this.privDesiredSampleRate=t};t.RiffPcmEncoder=r},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;var o=n(25),a=n(7),s=n(41),c=function(){function e(e){var t=this;this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.read=function(){if(t.privIsReadEnded)throw new o.InvalidOperationError("Stream read has already finished");return t.privReaderQueue.dequeue().then(function(e){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return void 0===e||e.isEnd?[4,this.privReaderQueue.dispose("End of stream reached")]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,e]}})})})},this.readEnded=function(){t.privIsReadEnded||(t.privIsReadEnded=!0,t.privReaderQueue=new s.Queue)},this.throwIfClosed=function(){if(t.privIsWriteEnded)throw new o.InvalidOperationError("Stream closed")},this.privId=e||a.createNoDashGuid(),this.privReaderQueue=new s.Queue}return Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsWriteEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReadEnded",{get:function(){return this.privIsReadEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)},e.prototype.writeStreamChunk=function(e){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(e)}catch(e){}},e}();t.Stream=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationStatus=void 0,function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(t.TranslationStatus||(t.TranslationStatus={}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChunkedArrayBufferStream=void 0;var o=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privTargetChunkSize=t,r.privNextBufferReadyBytes=0,r}return i(t,e),t.prototype.writeStreamChunk=function(t){if(t.isEnd||0===this.privNextBufferReadyBytes&&t.buffer.byteLength===this.privTargetChunkSize)e.prototype.writeStreamChunk.call(this,t);else for(var n=0;n<t.buffer.byteLength;){void 0===this.privNextBufferToWrite&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=t.timeReceived);var r=Math.min(t.buffer.byteLength-n,this.privTargetChunkSize-this.privNextBufferReadyBytes),i=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(t.buffer.slice(n,r+n));i.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=r,n+=r,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}},t.prototype.close=function(){0===this.privNextBufferReadyBytes||this.isClosed||e.prototype.writeStreamChunk.call(this,{buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),e.prototype.close.call(this)},t}(n(4).Stream);t.ChunkedArrayBufferStream=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Timeout=void 0;var r=function(){function e(){}return e.workerTimers=null,e.clearTimeout=function(t){return e.timers().clearTimeout(t)},e.setTimeout=function(t,n){return e.timers().setTimeout(t,n)},e.load=function(t){var n=new Map([[0,function(){}]]),r=new Map,i=new Worker(t);return i.addEventListener("message",function(t){var i=t.data;if(e.isCallNotification(i)){var o=i.params.timerId,a=n.get(o);if("number"==typeof a){if(void 0===(c=r.get(a))||c!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===a)throw new Error("The timer is in an undefined state.");a(),n.delete(o)}}else{if(!e.isClearResponse(i)){var s=i.error.message;throw new Error(s)}var c,u=i.id;if(void 0===(c=r.get(u)))throw new Error("The timer is in an undefined state.");r.delete(u),n.delete(c)}}),{clearTimeout:function(e){var t=Math.random();r.set(t,e),n.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e}})},setTimeout:function(e,t){var r=Math.random();return n.set(r,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:r}}),r}}},e.loadWorkerTimers=function(){return function(){if(null!==e.workerTimers)return e.workerTimers;var t=new Blob(['!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error(\'There is no interval scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error(\'The given method "\'.concat(e.method,\'" is not supported\'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);'],{type:"application/javascript; charset=utf-8"}),n=URL.createObjectURL(t);return e.workerTimers=e.load(n),e.workerTimers.setTimeout(function(){return URL.revokeObjectURL(n)},0),e.workerTimers}},e.timers=e.loadWorkerTimers(),e.isCallNotification=function(e){return void 0!==e.method&&"call"===e.method},e.isClearResponse=function(e){return null===e.error&&"number"==typeof e.id},e}();t.Timeout=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.OCSPCacheUpdateErrorEvent=t.OCSPResponseRetrievedEvent=t.OCSPCacheFetchErrorEvent=t.OCSPVerificationFailedEvent=t.OCSPCacheHitEvent=t.OCSPCacheEntryNeedsRefreshEvent=t.OCSPCacheEntryExpiredEvent=t.OCSPWSUpgradeStartedEvent=t.OCSPStapleReceivedEvent=t.OCSPCacheUpdatehCompleteEvent=t.OCSPDiskCacheStoreEvent=t.OCSPMemoryCacheStoreEvent=t.OCSPCacheUpdateNeededEvent=t.OCSPDiskCacheHitEvent=t.OCSPCacheMissEvent=t.OCSPMemoryCacheHitEvent=t.OCSPEvent=void 0;var o=n(6),a=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.privSignature=r,i}return i(t,e),t}(o.PlatformEvent);t.OCSPEvent=a;var s=function(e){function t(t){return e.call(this,"OCSPMemoryCacheHitEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPMemoryCacheHitEvent=s;var c=function(e){function t(t){return e.call(this,"OCSPCacheMissEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPCacheMissEvent=c;var u=function(e){function t(t){return e.call(this,"OCSPDiskCacheHitEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPDiskCacheHitEvent=u;var p=function(e){function t(t){return e.call(this,"OCSPCacheUpdateNeededEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPCacheUpdateNeededEvent=p;var l=function(e){function t(t){return e.call(this,"OCSPMemoryCacheStoreEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPMemoryCacheStoreEvent=l;var d=function(e){function t(t){return e.call(this,"OCSPDiskCacheStoreEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPDiskCacheStoreEvent=d;var f=function(e){function t(t){return e.call(this,"OCSPCacheUpdatehCompleteEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPCacheUpdatehCompleteEvent=f;var m=function(e){function t(){return e.call(this,"OCSPStapleReceivedEvent",o.EventType.Debug,"")||this}return i(t,e),t}(a);t.OCSPStapleReceivedEvent=m;var h=function(e){function t(t){return e.call(this,"OCSPWSUpgradeStartedEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPWSUpgradeStartedEvent=h;var v=function(e){function t(t,n){var r=e.call(this,"OCSPCacheEntryExpiredEvent",o.EventType.Debug,t)||this;return r.privExpireTime=n,r}return i(t,e),t}(a);t.OCSPCacheEntryExpiredEvent=v;var g=function(e){function t(t,n,r){var i=e.call(this,"OCSPCacheEntryNeedsRefreshEvent",o.EventType.Debug,t)||this;return i.privExpireTime=r,i.privStartTime=n,i}return i(t,e),t}(a);t.OCSPCacheEntryNeedsRefreshEvent=g;var y=function(e){function t(t,n,r){var i=e.call(this,"OCSPCacheHitEvent",o.EventType.Debug,t)||this;return i.privExpireTime=r,i.privExpireTimeString=new Date(r).toLocaleDateString(),i.privStartTime=n,i.privStartTimeString=new Date(n).toLocaleTimeString(),i}return i(t,e),t}(a);t.OCSPCacheHitEvent=y;var b=function(e){function t(t,n){var r=e.call(this,"OCSPVerificationFailedEvent",o.EventType.Debug,t)||this;return r.privError=n,r}return i(t,e),t}(a);t.OCSPVerificationFailedEvent=b;var _=function(e){function t(t,n){var r=e.call(this,"OCSPCacheFetchErrorEvent",o.EventType.Debug,t)||this;return r.privError=n,r}return i(t,e),t}(a);t.OCSPCacheFetchErrorEvent=_;var S=function(e){function t(t){return e.call(this,"OCSPResponseRetrievedEvent",o.EventType.Debug,t)||this}return i(t,e),t}(a);t.OCSPResponseRetrievedEvent=S;var C=function(e){function t(t,n){var r=e.call(this,"OCSPCacheUpdateErrorEvent",o.EventType.Debug,t)||this;return r.privError=n,r}return i(t,e),t}(a);t.OCSPCacheUpdateErrorEvent=C},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundEvent=void 0;var o=n(4),a=function(e){function t(t){var n=e.call(this,"BackgroundEvent",o.EventType.Error)||this;return n.privError=t,n}return i(t,e),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.BackgroundEvent=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.MicAudioSource=t.AudioWorkletSourceURLPropertyName=void 0;var o=n(53),a=n(4),s=n(72);t.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";var c=function(){function e(t,n,o,c){var u=this;this.privRecorder=t,this.deviceId=n,this.privStreams={},this.turnOn=function(){if(u.privInitializeDeferral)return u.privInitializeDeferral.promise;u.privInitializeDeferral=new a.Deferred;try{u.createAudioContext()}catch(t){if(t instanceof Error){var e=t;u.privInitializeDeferral.reject(e.name+": "+e.message)}else u.privInitializeDeferral.reject(t);return u.privInitializeDeferral.promise}var t=window.navigator,n=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia;if(t.mediaDevices&&(n=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n).catch(r)}),n){var r=function(){u.onEvent(new a.AudioSourceInitializingEvent(u.privId)),u.privMediaStream&&u.privMediaStream.active?(u.onEvent(new a.AudioSourceReadyEvent(u.privId)),u.privInitializeDeferral.resolve()):n({audio:!u.deviceId||{deviceId:u.deviceId},video:!1},function(e){u.privMediaStream=e,u.onEvent(new a.AudioSourceReadyEvent(u.privId)),u.privInitializeDeferral.resolve()},function(e){var t="Error occurred during microphone initialization: "+e;u.privInitializeDeferral.reject(t),u.onEvent(new a.AudioSourceErrorEvent(u.privId,t))})};"suspended"===u.privContext.state?u.privContext.resume().then(r).catch(function(e){u.privInitializeDeferral.reject("Failed to initialize audio context: "+e)}):r()}else{var i="Browser does not support getUserMedia.";u.privInitializeDeferral.reject(i),u.onEvent(new a.AudioSourceErrorEvent(i,""))}return u.privInitializeDeferral.promise},this.id=function(){return u.privId},this.attach=function(e){return u.onEvent(new a.AudioStreamNodeAttachingEvent(u.privId,e)),u.listen(e).then(function(t){return u.onEvent(new a.AudioStreamNodeAttachedEvent(u.privId,e)),{detach:function(){return r(u,void 0,void 0,function(){return i(this,function(n){return t.readEnded(),delete this.privStreams[e],this.onEvent(new a.AudioStreamNodeDetachedEvent(this.privId,e)),[2,this.turnOff()]})})},id:function(){return e},read:function(){return t.read()}}})},this.detach=function(e){e&&u.privStreams[e]&&(u.privStreams[e].close(),delete u.privStreams[e],u.onEvent(new a.AudioStreamNodeDetachedEvent(u.privId,e)))},this.listen=function(e){return r(u,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.turnOn()];case 1:n.sent(),t=new a.ChunkedArrayBufferStream(this.privOutputChunkSize,e),this.privStreams[e]=t;try{this.privRecorder.record(this.privContext,this.privMediaStream,t)}catch(t){throw this.onEvent(new a.AudioStreamNodeErrorEvent(this.privId,e,t)),t}return[2,t]}})})},this.onEvent=function(e){u.privEvents.onEvent(e),a.Events.instance.onEvent(e)},this.createAudioContext=function(){u.privContext||(u.privContext=s.AudioStreamFormatImpl.getAudioContext(e.AUDIOFORMAT.samplesPerSec))},this.privOutputChunkSize=e.AUDIOFORMAT.avgBytesPerSec/10,this.privId=o||a.createNoDashGuid(),this.privEvents=new a.EventSource,this.privMediaStream=c||null,this.privIsClosing=!1}return Object.defineProperty(e.prototype,"format",{get:function(){return Promise.resolve(e.AUDIOFORMAT)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blob",{get:function(){return Promise.reject("Not implemented for Mic input")},enumerable:!1,configurable:!0}),e.prototype.turnOff=function(){return r(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:for(e in this.privStreams)e&&(t=this.privStreams[e])&&t.close();return this.onEvent(new a.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral?[4,this.privInitializeDeferral]:[3,2];case 1:n.sent(),this.privInitializeDeferral=null,n.label=2;case 2:return[4,this.destroyAudioContext()];case 3:return n.sent(),[2]}})})},Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceInfo",{get:function(){return this.getMicrophoneLabel().then(function(t){return{bitspersample:e.AUDIOFORMAT.bitsPerSample,channelcount:e.AUDIOFORMAT.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:t,samplerate:e.AUDIOFORMAT.samplesPerSec,type:o.type.Microphones}})},enumerable:!1,configurable:!0}),e.prototype.setProperty=function(e,n){if(e!==t.AudioWorkletSourceURLPropertyName)throw new Error("Property '"+e+"' is not supported on Microphone.");this.privRecorder.setWorkletUrl(n)},e.prototype.getMicrophoneLabel=function(){var e=this,t="microphone";if(void 0!==this.privMicrophoneLabel)return Promise.resolve(this.privMicrophoneLabel);if(void 0===this.privMediaStream||!this.privMediaStream.active)return Promise.resolve(t);this.privMicrophoneLabel=t;var n=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(void 0===n)return Promise.resolve(this.privMicrophoneLabel);var r=new a.Deferred;return navigator.mediaDevices.enumerateDevices().then(function(t){for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.deviceId===n){e.privMicrophoneLabel=a.label;break}}r.resolve(e.privMicrophoneLabel)},function(){return r.resolve(e.privMicrophoneLabel)}),r.promise},e.prototype.destroyAudioContext=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.privContext?(this.privRecorder.releaseMediaResources(this.privContext),e=!1,"close"in this.privContext&&(e=!0),e?this.privIsClosing?[3,2]:(this.privIsClosing=!0,[4,this.privContext.close()]):[3,3]):[2];case 1:t.sent(),this.privContext=null,this.privIsClosing=!1,t.label=2;case 2:return[3,5];case 3:return null===this.privContext||"running"!==this.privContext.state?[3,5]:[4,this.privContext.suspend()];case 4:t.sent(),t.label=5;case 5:return[2]}})})},e.AUDIOFORMAT=s.AudioStreamFormat.getDefaultInputFormat(),e}();t.MicAudioSource=c},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguagesOpenRangeOptionName=t.ForceDictationPropertyName=t.ServicePropertiesPropertyName=t.CancellationErrorCodePropertyName=t.OutputFormatPropertyName=void 0,i(n(54),t),i(n(57),t),i(n(56),t),i(n(58),t),i(n(59),t),i(n(60),t),i(n(168),t),i(n(169),t),i(n(171),t),i(n(172),t),i(n(173),t),i(n(174),t),i(n(175),t),i(n(176),t),i(n(177),t),i(n(178),t),i(n(179),t),i(n(180),t),i(n(181),t),i(n(182),t),i(n(183),t),i(n(184),t),i(n(185),t),i(n(186),t),i(n(187),t),i(n(188),t),i(n(189),t),i(n(190),t),i(n(191),t),i(n(192),t),i(n(193),t),i(n(194),t),i(n(196),t),i(n(197),t),i(n(198),t),i(n(199),t),i(n(203),t),i(n(204),t),i(n(221),t),i(n(222),t),i(n(223),t),i(n(225),t),i(n(226),t),i(n(227),t),i(n(228),t),t.OutputFormatPropertyName="OutputFormat",t.CancellationErrorCodePropertyName="CancellationErrorCode",t.ServicePropertiesPropertyName="ServiceProperties",t.ForceDictationPropertyName="ForceDictation",t.AutoDetectSourceLanguagesOpenRangeOptionName="OpenRange"},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveSubscriptionKeyAuthentication=void 0;var r=n(4),i=n(55),o=n(56),a=function(e){var t=this;if(this.fetch=function(e){return Promise.resolve(t.privAuthInfo)},this.fetchOnExpiry=function(e){return Promise.resolve(t.privAuthInfo)},!e)throw new r.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo(i.HeaderNames.AuthKey,e)};t.CognitiveSubscriptionKeyAuthentication=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderNames=void 0;var r=function(){function e(){}return e.AuthKey="Ocp-Apim-Subscription-Key",e.ConnectionId="X-ConnectionId",e.ContentType="Content-Type",e.CustomCommandsAppId="X-CommandsAppId",e.Path="Path",e.RequestId="X-RequestId",e.RequestStreamId="X-StreamId",e.RequestTimestamp="X-Timestamp",e}();t.HeaderNames=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AuthInfo=void 0;var r=function(){function e(e,t){this.privHeaderName=e,this.privToken=t}return Object.defineProperty(e.prototype,"headerName",{get:function(){return this.privHeaderName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privToken},enumerable:!1,configurable:!0}),e}();t.AuthInfo=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CognitiveTokenAuthentication=void 0;var r=n(4),i=n(56),o="Authorization",a=function(){function e(t,n){var a=this;if(this.fetch=function(t){return a.privFetchCallback(t).then(function(t){return new i.AuthInfo(o,e.privTokenPrefix+t)})},this.fetchOnExpiry=function(t){return a.privFetchOnExpiryCallback(t).then(function(t){return new i.AuthInfo(o,e.privTokenPrefix+t)})},!t)throw new r.ArgumentNullError("fetchCallback");if(!n)throw new r.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=n}return e.privTokenPrefix="bearer ",e}();t.CognitiveTokenAuthentication=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentConnectionFactory=void 0;var o=n(2),a=n(61),s=n(123),c=n(53),u=n(55),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.create=function(e,n,r){var i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint);if(!i){var p=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_IntentRegion),l=s.ConnectionFactoryBase.getHostSuffix(p);i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"wss://"+p+".sr.speech"+l)+"/speech/recognition/interactive/cognitiveservices/v1"}var d={format:"simple",language:e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)};t.setCommonUrlParams(e,d,i);var f={};void 0!==n.token&&""!==n.token&&(f[n.headerName]=n.token),f[u.HeaderNames.ConnectionId]=r,e.parameters.setProperty(a.PropertyId.SpeechServiceConnection_Url,i);var m="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,d,f,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),m,r)},t}return i(t,e),t.prototype.getSpeechRegionFromIntentRegion=function(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}},t}(s.ConnectionFactoryBase);t.IntentConnectionFactory=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(62);Object.defineProperty(t,"AudioConfig",{enumerable:!0,get:function(){return r.AudioConfig}});var i=n(72);Object.defineProperty(t,"AudioStreamFormat",{enumerable:!0,get:function(){return i.AudioStreamFormat}});var o=n(66);Object.defineProperty(t,"AudioInputStream",{enumerable:!0,get:function(){return o.AudioInputStream}}),Object.defineProperty(t,"PullAudioInputStream",{enumerable:!0,get:function(){return o.PullAudioInputStream}}),Object.defineProperty(t,"PushAudioInputStream",{enumerable:!0,get:function(){return o.PushAudioInputStream}});var a=n(73);Object.defineProperty(t,"AudioOutputStream",{enumerable:!0,get:function(){return a.AudioOutputStream}}),Object.defineProperty(t,"PullAudioOutputStream",{enumerable:!0,get:function(){return a.PullAudioOutputStream}}),Object.defineProperty(t,"PushAudioOutputStream",{enumerable:!0,get:function(){return a.PushAudioOutputStream}});var s=n(76);Object.defineProperty(t,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var c=n(77);Object.defineProperty(t,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return c.PullAudioInputStreamCallback}});var u=n(78);Object.defineProperty(t,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return u.PushAudioOutputStreamCallback}});var p=n(79);Object.defineProperty(t,"KeywordRecognitionModel",{enumerable:!0,get:function(){return p.KeywordRecognitionModel}});var l=n(80);Object.defineProperty(t,"SessionEventArgs",{enumerable:!0,get:function(){return l.SessionEventArgs}});var d=n(81);Object.defineProperty(t,"RecognitionEventArgs",{enumerable:!0,get:function(){return d.RecognitionEventArgs}});var f=n(82);Object.defineProperty(t,"OutputFormat",{enumerable:!0,get:function(){return f.OutputFormat}});var m=n(83);Object.defineProperty(t,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return m.IntentRecognitionEventArgs}});var h=n(84);Object.defineProperty(t,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var v=n(85);Object.defineProperty(t,"SpeechRecognitionResult",{enumerable:!0,get:function(){return v.SpeechRecognitionResult}});var g=n(86);Object.defineProperty(t,"IntentRecognitionResult",{enumerable:!0,get:function(){return g.IntentRecognitionResult}});var y=n(87);Object.defineProperty(t,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return y.LanguageUnderstandingModel}});var b=n(88);Object.defineProperty(t,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return b.SpeechRecognitionEventArgs}}),Object.defineProperty(t,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return b.ConversationTranscriptionEventArgs}});var _=n(89);Object.defineProperty(t,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return _.SpeechRecognitionCanceledEventArgs}});var S=n(91);Object.defineProperty(t,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return S.TranslationRecognitionEventArgs}});var C=n(92);Object.defineProperty(t,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=n(93);Object.defineProperty(t,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var w=n(94);Object.defineProperty(t,"TranslationSynthesisResult",{enumerable:!0,get:function(){return w.TranslationSynthesisResult}});var k=n(95);Object.defineProperty(t,"ResultReason",{enumerable:!0,get:function(){return k.ResultReason}});var O=n(96);Object.defineProperty(t,"SpeechConfig",{enumerable:!0,get:function(){return O.SpeechConfig}}),Object.defineProperty(t,"SpeechConfigImpl",{enumerable:!0,get:function(){return O.SpeechConfigImpl}});var R=n(97);Object.defineProperty(t,"SpeechTranslationConfig",{enumerable:!0,get:function(){return R.SpeechTranslationConfig}}),Object.defineProperty(t,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return R.SpeechTranslationConfigImpl}});var T=n(98);Object.defineProperty(t,"PropertyCollection",{enumerable:!0,get:function(){return T.PropertyCollection}});var I=n(99);Object.defineProperty(t,"PropertyId",{enumerable:!0,get:function(){return I.PropertyId}});var A=n(100);Object.defineProperty(t,"Recognizer",{enumerable:!0,get:function(){return A.Recognizer}});var j=n(101);Object.defineProperty(t,"SpeechRecognizer",{enumerable:!0,get:function(){return j.SpeechRecognizer}});var E=n(102);Object.defineProperty(t,"IntentRecognizer",{enumerable:!0,get:function(){return E.IntentRecognizer}});var D=n(103);Object.defineProperty(t,"VoiceProfileType",{enumerable:!0,get:function(){return D.VoiceProfileType}});var x=n(104);Object.defineProperty(t,"TranslationRecognizer",{enumerable:!0,get:function(){return x.TranslationRecognizer}});var M=n(107);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return M.Translations}});var N=n(108);Object.defineProperty(t,"NoMatchReason",{enumerable:!0,get:function(){return N.NoMatchReason}});var L=n(109);Object.defineProperty(t,"NoMatchDetails",{enumerable:!0,get:function(){return L.NoMatchDetails}});var F=n(110);Object.defineProperty(t,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return F.TranslationRecognitionCanceledEventArgs}});var z=n(111);Object.defineProperty(t,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return z.IntentRecognitionCanceledEventArgs}});var B=n(112);Object.defineProperty(t,"CancellationDetailsBase",{enumerable:!0,get:function(){return B.CancellationDetailsBase}});var q=n(113);Object.defineProperty(t,"CancellationDetails",{enumerable:!0,get:function(){return q.CancellationDetails}});var U=n(114);Object.defineProperty(t,"CancellationErrorCode",{enumerable:!0,get:function(){return U.CancellationErrorCode}});var H=n(115);Object.defineProperty(t,"ConnectionEventArgs",{enumerable:!0,get:function(){return H.ConnectionEventArgs}});var W=n(116);Object.defineProperty(t,"ServiceEventArgs",{enumerable:!0,get:function(){return W.ServiceEventArgs}});var K=n(105);Object.defineProperty(t,"Connection",{enumerable:!0,get:function(){return K.Connection}});var G=n(117);Object.defineProperty(t,"PhraseListGrammar",{enumerable:!0,get:function(){return G.PhraseListGrammar}});var V=n(118);Object.defineProperty(t,"DialogServiceConfig",{enumerable:!0,get:function(){return V.DialogServiceConfig}});var J=n(119);Object.defineProperty(t,"BotFrameworkConfig",{enumerable:!0,get:function(){return J.BotFrameworkConfig}});var $=n(120);Object.defineProperty(t,"CustomCommandsConfig",{enumerable:!0,get:function(){return $.CustomCommandsConfig}});var Q=n(121);Object.defineProperty(t,"DialogServiceConnector",{enumerable:!0,get:function(){return Q.DialogServiceConnector}});var Y=n(125);Object.defineProperty(t,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return Y.ActivityReceivedEventArgs}});var Z=n(126);Object.defineProperty(t,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return Z.TurnStatusReceivedEventArgs}});var X=n(128);Object.defineProperty(t,"ServicePropertyChannel",{enumerable:!0,get:function(){return X.ServicePropertyChannel}});var ee=n(129);Object.defineProperty(t,"ProfanityOption",{enumerable:!0,get:function(){return ee.ProfanityOption}});var te=n(130);Object.defineProperty(t,"BaseAudioPlayer",{enumerable:!0,get:function(){return te.BaseAudioPlayer}});var ne=n(131);Object.defineProperty(t,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return ne.ConnectionMessageEventArgs}});var re=n(106);Object.defineProperty(t,"ConnectionMessage",{enumerable:!0,get:function(){return re.ConnectionMessage}});var ie=n(132);Object.defineProperty(t,"VoiceProfile",{enumerable:!0,get:function(){return ie.VoiceProfile}});var oe=n(133);Object.defineProperty(t,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentResult}}),Object.defineProperty(t,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return oe.VoiceProfileEnrollmentCancellationDetails}});var ae=n(134);Object.defineProperty(t,"VoiceProfileResult",{enumerable:!0,get:function(){return ae.VoiceProfileResult}}),Object.defineProperty(t,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return ae.VoiceProfileCancellationDetails}});var se=n(135);Object.defineProperty(t,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return se.VoiceProfilePhraseResult}});var ce=n(136);Object.defineProperty(t,"VoiceProfileClient",{enumerable:!0,get:function(){return ce.VoiceProfileClient}});var ue=n(137);Object.defineProperty(t,"SpeakerRecognizer",{enumerable:!0,get:function(){return ue.SpeakerRecognizer}});var pe=n(138);Object.defineProperty(t,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return pe.SpeakerIdentificationModel}});var le=n(139);Object.defineProperty(t,"SpeakerVerificationModel",{enumerable:!0,get:function(){return le.SpeakerVerificationModel}});var de=n(140);Object.defineProperty(t,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return de.AutoDetectSourceLanguageConfig}});var fe=n(141);Object.defineProperty(t,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return fe.AutoDetectSourceLanguageResult}});var me=n(142);Object.defineProperty(t,"SourceLanguageConfig",{enumerable:!0,get:function(){return me.SourceLanguageConfig}});var he=n(143);Object.defineProperty(t,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return he.SpeakerRecognitionResult}}),Object.defineProperty(t,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return he.SpeakerRecognitionResultType}}),Object.defineProperty(t,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return he.SpeakerRecognitionCancellationDetails}});var ve=n(144);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return ve.Conversation}}),Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return ve.ConversationExpirationEventArgs}}),Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return ve.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return ve.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return ve.ConversationTranslationEventArgs}}),Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return ve.ConversationTranslationResult}}),Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return ve.ConversationTranslator}}),Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return ve.ConversationTranscriber}}),Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return ve.Participant}}),Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return ve.ParticipantChangedReason}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return ve.User}});var ge=n(75);Object.defineProperty(t,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return ge.SpeechSynthesisOutputFormat}});var ye=n(156);Object.defineProperty(t,"SpeechSynthesizer",{enumerable:!0,get:function(){return ye.SpeechSynthesizer}});var be=n(157);Object.defineProperty(t,"SpeechSynthesisResult",{enumerable:!0,get:function(){return be.SpeechSynthesisResult}});var _e=n(158);Object.defineProperty(t,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return _e.SpeechSynthesisEventArgs}});var Se=n(159);Object.defineProperty(t,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return Se.SpeechSynthesisWordBoundaryEventArgs}});var Ce=n(160);Object.defineProperty(t,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return Ce.SpeechSynthesisBookmarkEventArgs}});var Pe=n(161);Object.defineProperty(t,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return Pe.SpeechSynthesisVisemeEventArgs}});var we=n(162);Object.defineProperty(t,"SpeakerAudioDestination",{enumerable:!0,get:function(){return we.SpeakerAudioDestination}});var ke=n(163);Object.defineProperty(t,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return ke.ConversationTranscriptionCanceledEventArgs}});var Oe=n(164);Object.defineProperty(t,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return Oe.PronunciationAssessmentGradingSystem}});var Re=n(165);Object.defineProperty(t,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return Re.PronunciationAssessmentGranularity}});var Te=n(166);Object.defineProperty(t,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return Te.PronunciationAssessmentConfig}});var Ie=n(167);Object.defineProperty(t,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return Ie.PronunciationAssessmentResult}})},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputConfigImpl=t.AudioConfigImpl=t.AudioConfig=void 0;var o=n(2),a=n(63),s=n(61),c=n(64),u=n(66),p=n(73),l=function(){function e(){}return e.fromDefaultMicrophoneInput=function(){var e=new o.PcmRecorder(!0);return new d(new o.MicAudioSource(e))},e.fromMicrophoneInput=function(e){var t=new o.PcmRecorder(!0);return new d(new o.MicAudioSource(t,e))},e.fromWavFileInput=function(e,t){return void 0===t&&(t="unnamedBuffer.wav"),new d(new o.FileAudioSource(e,t))},e.fromStreamInput=function(e){if(e instanceof s.PullAudioInputStreamCallback)return new d(new u.PullAudioInputStreamImpl(e));if(e instanceof s.AudioInputStream)return new d(e);if("undefined"!=typeof MediaStream&&e instanceof MediaStream){var t=new o.PcmRecorder(!1);return new d(new o.MicAudioSource(t,null,null,e))}throw new Error("Not Supported Type")},e.fromDefaultSpeakerOutput=function(){return new f(new s.SpeakerAudioDestination)},e.fromSpeakerOutput=function(t){if(void 0===t)return e.fromDefaultSpeakerOutput();if(t instanceof s.SpeakerAudioDestination)return new f(t);throw new Error("Not Supported Type")},e.fromAudioFileOutput=function(e){return new f(new c.AudioFileWriter(e))},e.fromStreamOutput=function(e){if(e instanceof s.PushAudioOutputStreamCallback)return new f(new p.PushAudioOutputStreamImpl(e));if(e instanceof s.PushAudioOutputStream)return new f(e);if(e instanceof s.PullAudioOutputStream)return new f(e);throw new Error("Not Supported Type")},e}();t.AudioConfig=l;var d=function(e){function t(t){var n=e.call(this)||this;return n.privSource=t,n}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return this.privSource.format},enumerable:!1,configurable:!0}),t.prototype.close=function(e,t){this.privSource.turnOff().then(function(){e&&e()},function(e){t&&t(e)})},t.prototype.id=function(){return this.privSource.id()},Object.defineProperty(t.prototype,"blob",{get:function(){return this.privSource.blob},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){return this.privSource.turnOn()},t.prototype.attach=function(e){return this.privSource.attach(e)},t.prototype.detach=function(e){return this.privSource.detach(e)},t.prototype.turnOff=function(){return this.privSource.turnOff()},Object.defineProperty(t.prototype,"events",{get:function(){return this.privSource.events},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){if(a.Contracts.throwIfNull(t,"value"),void 0===this.privSource.setProperty)throw new Error("This AudioConfig instance does not support setting properties.");this.privSource.setProperty(e,t)},t.prototype.getProperty=function(e,t){if(void 0!==this.privSource.getProperty)return this.privSource.getProperty(e,t);throw new Error("This AudioConfig instance does not support getting properties.")},Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return this.privSource.deviceInfo},enumerable:!1,configurable:!0}),t}(l);t.AudioConfigImpl=d;var f=function(e){function t(t){var n=e.call(this)||this;return n.privDestination=t,n}return i(t,e),Object.defineProperty(t.prototype,"format",{set:function(e){this.privDestination.format=e},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privDestination.write(e)},t.prototype.close=function(){this.privDestination.close()},t.prototype.id=function(){return this.privDestination.id()},t.prototype.setProperty=function(e,t){throw new Error("This AudioConfig instance does not support setting properties.")},t.prototype.getProperty=function(e,t){throw new Error("This AudioConfig instance does not support getting properties.")},t}(l);t.AudioOutputConfigImpl=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Contracts=void 0;var r=function(){function e(){}return e.throwIfNullOrUndefined=function(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)},e.throwIfNull=function(e,t){if(null===e)throw new Error("throwIfNull:"+t)},e.throwIfNullOrWhitespace=function(t,n){if(e.throwIfNullOrUndefined(t,n),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+n)},e.throwIfDisposed=function(e){if(e)throw new Error("the object is already disposed")},e.throwIfArrayEmptyOrWhitespace=function(t,n){if(e.throwIfNullOrUndefined(t,n),0===t.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+n);for(var r=0,i=t;r<i.length;r++){var o=i[r];e.throwIfNullOrWhitespace(o,n)}},e.throwIfFileDoesNotExist=function(t,n){e.throwIfNullOrWhitespace(t,n)},e.throwIfNotUndefined=function(e,t){if(void 0!==e)throw new Error("throwIfNotUndefined:"+t)},e}();t.Contracts=r},function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.AudioFileWriter=void 0;var a=o(n(65)),s=n(63),c=function(){function e(e){var t=this;this.id=function(){return t.privId},s.Contracts.throwIfNullOrUndefined(a.openSync,"\nFile System access not available, please use Push or PullAudioOutputStream"),this.privFd=a.openSync(e,"w")}return Object.defineProperty(e.prototype,"format",{set:function(e){s.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=e;var t=0;this.privAudioFormat.hasHeader&&(t=this.privAudioFormat.header.byteLength),void 0!==this.privFd&&(this.privWriteStream=a.createWriteStream("",{fd:this.privFd,start:t,autoClose:!1}))},enumerable:!1,configurable:!0}),e.prototype.write=function(e){s.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),void 0!==this.privWriteStream&&this.privWriteStream.write(new Uint8Array(e.slice(0)))},e.prototype.close=function(){var e=this;void 0!==this.privFd&&(this.privWriteStream.on("finish",function(){e.privAudioFormat.hasHeader&&(e.privAudioFormat.updateHeader(e.privWriteStream.bytesWritten),a.writeSync(e.privFd,new Int8Array(e.privAudioFormat.header),0,e.privAudioFormat.header.byteLength,0)),a.closeSync(e.privFd),e.privFd=void 0}),this.privWriteStream.end())},e}();t.AudioFileWriter=c},function(e,t){},function(e,t,n){(function(e){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamImpl=t.PullAudioInputStream=t.PushAudioInputStreamImpl=t.PushAudioInputStream=t.AudioInputStream=void 0;var s=n(53),c=n(4),u=n(7),p=n(61),l=n(72),d=function(){function e(){}return e.createPushStream=function(e){return f.create(e)},e.createPullStream=function(e,t){return h.create(e,t)},e}();t.AudioInputStream=d;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.create=function(e){return new m(e)},t}(d);t.PushAudioInputStream=f;var m=function(t){function n(e){var n=t.call(this)||this;return n.onEvent=function(e){n.privEvents.onEvent(e),c.Events.instance.onEvent(e)},n.privFormat=void 0===e?l.AudioStreamFormatImpl.getDefaultInputFormat():e,n.privEvents=new c.EventSource,n.privId=u.createNoDashGuid(),n.privStream=new c.ChunkedArrayBufferStream(n.privFormat.avgBytesPerSec/10),n}return i(n,t),Object.defineProperty(n.prototype,"format",{get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),n.prototype.write=function(e){this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},n.prototype.close=function(){this.privStream.close()},n.prototype.id=function(){return this.privId},Object.defineProperty(n.prototype,"blob",{get:function(){var t=this;return this.attach("id").then(function(n){var r=[],i=e.from(""),o=function o(){return n.read().then(function(n){return!n||n.isEnd?"undefined"!=typeof XMLHttpRequest&&"undefined"!=typeof Blob?Promise.resolve(new Blob(r)):Promise.resolve(e.from(i)):("undefined"!=typeof Blob?r.push(n.buffer):i=e.concat([i,t.toBuffer(n.buffer)]),o())})};return o()})},enumerable:!1,configurable:!0}),n.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},n.prototype.attach=function(e){return o(this,void 0,void 0,function(){var t,n=this;return a(this,function(r){switch(r.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.turnOn()];case 1:return r.sent(),t=this.privStream,this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2,{detach:function(){return o(n,void 0,void 0,function(){return a(this,function(t){return this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e)),[2,this.turnOff()]})})},id:function(){return e},read:function(){return t.read()}}]}})})},n.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},n.prototype.turnOff=function(){},Object.defineProperty(n.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:s.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:s.type.Stream})},enumerable:!1,configurable:!0}),n.prototype.toBuffer=function(t){for(var n=e.alloc(t.byteLength),r=new Uint8Array(t),i=0;i<n.length;++i)n[i]=r[i];return n},n}(f);t.PushAudioInputStreamImpl=m;var h=function(e){function t(){return e.call(this)||this}return i(t,e),t.create=function(e,t){return new v(e,t)},t}(d);t.PullAudioInputStream=h;var v=function(e){function t(t,n){var r=e.call(this)||this;return r.onEvent=function(e){r.privEvents.onEvent(e),c.Events.instance.onEvent(e)},r.privFormat=void 0===n?p.AudioStreamFormat.getDefaultInputFormat():n,r.privEvents=new c.EventSource,r.privId=u.createNoDashGuid(),r.privCallback=t,r.privIsClosed=!1,r.privBufferSize=r.privFormat.avgBytesPerSec/10,r}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return Promise.resolve(this.privFormat)},enumerable:!1,configurable:!0}),t.prototype.close=function(){this.privIsClosed=!0,this.privCallback.close()},t.prototype.id=function(){return this.privId},Object.defineProperty(t.prototype,"blob",{get:function(){return Promise.reject("Not implemented")},enumerable:!1,configurable:!0}),t.prototype.turnOn=function(){this.onEvent(new c.AudioSourceInitializingEvent(this.privId)),this.onEvent(new c.AudioSourceReadyEvent(this.privId))},t.prototype.attach=function(e){return o(this,void 0,void 0,function(){var t=this;return a(this,function(n){switch(n.label){case 0:return this.onEvent(new c.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.turnOn()];case 1:return n.sent(),this.onEvent(new c.AudioStreamNodeAttachedEvent(this.privId,e)),[2,{detach:function(){return t.privCallback.close(),t.onEvent(new c.AudioStreamNodeDetachedEvent(t.privId,e)),t.turnOff()},id:function(){return e},read:function(){for(var e,n=0;n<t.privBufferSize;){var r=new ArrayBuffer(t.privBufferSize-n),i=t.privCallback.read(r);if(void 0===e?e=r:new Int8Array(e).set(new Int8Array(r),n),0===i)break;n+=i}return Promise.resolve({buffer:e.slice(0,n),isEnd:t.privIsClosed||0===n,timeReceived:Date.now()})}}]}})})},t.prototype.detach=function(e){this.onEvent(new c.AudioStreamNodeDetachedEvent(this.privId,e))},t.prototype.turnOff=function(){},Object.defineProperty(t.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deviceInfo",{get:function(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:s.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:s.type.Stream})},enumerable:!1,configurable:!0}),t}(h);t.PullAudioInputStreamImpl=v}).call(this,n(67).Buffer)},function(e,t,n){(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(69),i=n(70),o=n(71);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=d(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|m(t,n),i=(e=s(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function p(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t){if(p(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function d(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return T(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return k(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var p=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===p?0:o-p)){if(-1===p&&(p=o),o-p+1===c)return p*a}else-1!==p&&(o-=o-p),p=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var l=!0,d=0;d<c;d++)if(u(e,o+d)!==u(t,d)){l=!1;break}if(l)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function _(e,t,n,r){return H(q(t,e.length-n),e,n,r)}function S(e,t,n,r){return H(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return S(e,t,n,r)}function P(e,t,n,r){return H(U(t),e,n,r)}function w(e,t,n,r){return H(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function k(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],p=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l<=n)switch(l){case 1:u<128&&(p=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(p=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(p=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(p=c)}null===p?(p=65533,l=1):p>65535&&(p-=65536,r.push(p>>>10&1023|55296),p=56320|1023&p),r.push(p),i+=l}return function(e){var t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=R));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return p(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return l(null,e)},c.allocUnsafeSlow=function(e){return l(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=m,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):h.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),p=e.slice(t,n),l=0;l<s;++l)if(u[l]!==p[l]){o=u[l],a=p[l];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return S(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return P(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var R=4096;function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function I(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=B(e[o]);return i}function j(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function E(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function x(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,o){return o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||E(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||E(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||E(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||D(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):x(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:q(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function H(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(68))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==("undefined"===typeof window?"undefined":Object(v["a"])(window))&&(n=window)}e.exports=n},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),p=0,l=s>0?a-4:a;for(n=0;n<l;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[p++]=t>>16&255,c[p++]=t>>8&255,c[p++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[p++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[p++]=t>>8&255,c[p++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(p(e,s,s+a>c?c:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function p(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,p=-7,l=n?i-1:0,d=n?-1:1,f=e[t+l];for(l+=d,o=f&(1<<-p)-1,f>>=-p,p+=s;p>0;o=256*o+e[t+l],l+=d,p-=8);for(a=o&(1<<-p)-1,o>>=-p,p+=r;p>0;a=256*a+e[t+l],l+=d,p-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,p=(1<<u)-1,l=p>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,m=r?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=p):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+l>=1?d/c:d*Math.pow(2,1-l))*c>=2&&(a++,c/=2),a+l>=p?(s=0,a=p):a+l>=1?(s=(t*c-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=m,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=m,a/=256,u-=8);e[n+f-m]|=128*h}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r,i,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioStreamFormatImpl=t.AudioStreamFormat=t.AudioFormatTag=void 0,function(e){e[e.PCM=1]="PCM",e[e.MuLaw=2]="MuLaw",e[e.Siren=3]="Siren",e[e.MP3=4]="MP3",e[e.SILKSkype=5]="SILKSkype",e[e.OGG_OPUS=6]="OGG_OPUS",e[e.WEBM_OPUS=7]="WEBM_OPUS",e[e.ALaw=8]="ALaw",e[e.FLAC=9]="FLAC"}(i=t.AudioFormatTag||(t.AudioFormatTag={}));var a=function(){function e(){}return e.getDefaultInputFormat=function(){return s.getDefaultInputFormat()},e.getWaveFormatPCM=function(e,t,n){return new s(e,t,n)},e}();t.AudioStreamFormat=a;var s=function(e){function t(t,n,r,o){void 0===t&&(t=16e3),void 0===n&&(n=16),void 0===r&&(r=1),void 0===o&&(o=i.PCM);var a=e.call(this)||this;switch(a.setString=function(e,t,n){for(var r=0;r<n.length;r++)e.setUint8(t+r,n.charCodeAt(r))},o){case i.PCM:a.formatTag=1;break;case i.ALaw:a.formatTag=6;break;case i.MuLaw:a.formatTag=7}a.bitsPerSample=n,a.samplesPerSec=t,a.channels=r,a.avgBytesPerSec=a.samplesPerSec*a.channels*(a.bitsPerSample/8),a.blockAlign=a.channels*Math.max(a.bitsPerSample,8),a.privHeader=new ArrayBuffer(44);var s=new DataView(a.privHeader);return a.setString(s,0,"RIFF"),s.setUint32(4,0,!0),a.setString(s,8,"WAVEfmt "),s.setUint32(16,16,!0),s.setUint16(20,a.formatTag,!0),s.setUint16(22,a.channels,!0),s.setUint32(24,a.samplesPerSec,!0),s.setUint32(28,a.avgBytesPerSec,!0),s.setUint16(32,a.channels*(a.bitsPerSample/8),!0),s.setUint16(34,a.bitsPerSample,!0),a.setString(s,36,"data"),s.setUint32(40,0,!0),a}return o(t,e),t.getDefaultInputFormat=function(){return new t},t.getAudioContext=function(e){var t=window.AudioContext||window.webkitAudioContext||!1;if(t)return void 0!==e&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new t({sampleRate:e}):new t;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")},t.prototype.close=function(){},Object.defineProperty(t.prototype,"header",{get:function(){return this.privHeader},enumerable:!1,configurable:!0}),t}(a);t.AudioStreamFormatImpl=s},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamImpl=t.PushAudioOutputStream=t.PullAudioOutputStreamImpl=t.PullAudioOutputStream=t.AudioOutputStream=void 0;var s=n(4),c=n(63),u=n(74),p=function(){function e(){}return e.createPullStream=function(){return l.create()},e}();t.AudioOutputStream=p;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.create=function(){return new d},t}(p);t.PullAudioOutputStream=l;var d=function(e){function t(){var t=e.call(this)||this;return t.privId=s.createNoDashGuid(),t.privStream=new s.Stream,t}return i(t,e),Object.defineProperty(t.prototype,"format",{get:function(){return this.privFormat},set:function(e){null==e&&(this.privFormat=u.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isClosed",{get:function(){return this.privStream.isClosed},enumerable:!1,configurable:!0}),t.prototype.id=function(){return this.privId},t.prototype.read=function(e){return o(this,void 0,void 0,function(){var t,n,r,i;return a(this,function(o){switch(o.label){case 0:if(t=new Int8Array(e),n=0,void 0!==this.privLastChunkView){if(this.privLastChunkView.length>e.byteLength)return t.set(this.privLastChunkView.slice(0,e.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(e.byteLength),[2,Promise.resolve(e.byteLength)];t.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}o.label=1;case 1:return n<e.byteLength&&!this.privStream.isReadEnded?[4,this.privStream.read()]:[3,6];case 2:return void 0===(r=o.sent())||r.isEnd?[3,3]:(i=void 0,r.buffer.byteLength>e.byteLength-n?(i=r.buffer.slice(0,e.byteLength-n),this.privLastChunkView=new Int8Array(r.buffer.slice(e.byteLength-n))):i=r.buffer,t.set(new Int8Array(i),n),n+=i.byteLength,[3,5]);case 3:return[4,this.privStream.readEnded()];case 4:o.sent(),o.label=5;case 5:return[3,1];case 6:return[2,n]}})})},t.prototype.write=function(e){c.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()})},t.prototype.close=function(){this.privStream.close()},t}(l);t.PullAudioOutputStreamImpl=d;var f=function(e){function t(){return e.call(this)||this}return i(t,e),t.create=function(e){return new m(e)},t}(p);t.PushAudioOutputStream=f;var m=function(e){function t(t){var n=e.call(this)||this;return n.privId=s.createNoDashGuid(),n.privCallback=t,n}return i(t,e),Object.defineProperty(t.prototype,"format",{set:function(e){},enumerable:!1,configurable:!0}),t.prototype.write=function(e){this.privCallback.write&&this.privCallback.write(e)},t.prototype.close=function(){this.privCallback.close&&this.privCallback.close()},t.prototype.id=function(){return this.privId},t}(f);t.PushAudioOutputStreamImpl=m},function(e,t,n){var r,i,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.AudioOutputFormatImpl=void 0;var a=n(75),s=n(72),c=function(e){function t(t,n,r,i,o,a,s,c,u){var p=e.call(this,r,a,n,t)||this;return p.formatTag=t,p.avgBytesPerSec=i,p.blockAlign=o,p.priAudioFormatString=s,p.priRequestAudioFormatString=c,p.priHasHeader=u,p}return o(t,e),t.fromSpeechSynthesisOutputFormat=function(e){return void 0===e?t.getDefaultOutputFormat():t.fromSpeechSynthesisOutputFormatString(t.SpeechSynthesisOutputFormatToString[e])},t.fromSpeechSynthesisOutputFormatString=function(e){switch(e){case"raw-8khz-8bit-mono-mulaw":return new t(s.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,e,!1);case"riff-16khz-16kbps-mono-siren":return new t(s.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new t(s.AudioFormatTag.Siren,1,16e3,2e3,40,0,e,e,!1);case"audio-16khz-32kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,4096,2,16,e,e,!1);case"audio-16khz-128kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,16384,2,16,e,e,!1);case"audio-16khz-64kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,16e3,8192,2,16,e,e,!1);case"audio-24khz-48kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,6144,2,16,e,e,!1);case"audio-24khz-96kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,12288,2,16,e,e,!1);case"audio-24khz-160kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,24e3,20480,2,16,e,e,!1);case"raw-16khz-16bit-mono-truesilk":return new t(s.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,e,e,!1);case"riff-8khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new t(s.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,16e3,32e3,2,16,e,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,24e3,48e3,2,16,e,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,8e3,16e3,2,16,e,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,e,e,!1);case"ogg-24khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,e,e,!1);case"raw-48khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new t(s.AudioFormatTag.PCM,1,48e3,96e3,2,16,e,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,48e3,12288,2,16,e,e,!1);case"audio-48khz-192kbitrate-mono-mp3":return new t(s.AudioFormatTag.MP3,1,48e3,24576,2,16,e,e,!1);case"ogg-48khz-16bit-mono-opus":return new t(s.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,e,e,!1);case"webm-16khz-16bit-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,16e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,24e3,8e3,2,16,e,e,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new t(s.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,e,e,!1);case"audio-24khz-16bit-mono-flac":return new t(s.AudioFormatTag.FLAC,1,24e3,24e3,2,16,e,e,!1);case"audio-48khz-16bit-mono-flac":return new t(s.AudioFormatTag.FLAC,1,48e3,3e4,2,16,e,e,!1);case"raw-24khz-16bit-mono-truesilk":return new t(s.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,e,e,!1);case"raw-8khz-8bit-mono-alaw":return new t(s.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,e,!1);case"riff-8khz-8bit-mono-alaw":return new t(s.AudioFormatTag.ALaw,1,8e3,8e3,1,8,e,"raw-8khz-8bit-mono-alaw",!0);case"riff-16khz-16bit-mono-pcm":default:return new t(s.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}},t.getDefaultOutputFormat=function(){return t.fromSpeechSynthesisOutputFormatString("undefined"!=typeof window?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")},Object.defineProperty(t.prototype,"hasHeader",{get:function(){return this.priHasHeader},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){if(this.hasHeader)return this.privHeader},enumerable:!1,configurable:!0}),t.prototype.updateHeader=function(e){this.priHasHeader&&new DataView(this.privHeader).setUint32(40,e,!0)},Object.defineProperty(t.prototype,"requestAudioFormatString",{get:function(){return this.priRequestAudioFormatString},enumerable:!1,configurable:!0}),t.SpeechSynthesisOutputFormatToString=((i={})[a.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]="raw-8khz-8bit-mono-mulaw",i[a.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]="riff-16khz-16kbps-mono-siren",i[a.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]="audio-16khz-16kbps-mono-siren",i[a.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]="audio-16khz-32kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]="audio-16khz-128kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]="audio-16khz-64kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]="audio-24khz-48kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]="audio-24khz-96kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]="audio-24khz-160kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]="raw-16khz-16bit-mono-truesilk",i[a.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]="riff-16khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]="riff-8khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]="riff-24khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]="riff-8khz-8bit-mono-mulaw",i[a.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]="raw-16khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]="raw-24khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]="raw-8khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]="ogg-16khz-16bit-mono-opus",i[a.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]="ogg-24khz-16bit-mono-opus",i[a.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]="raw-48khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]="riff-48khz-16bit-mono-pcm",i[a.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]="audio-48khz-96kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]="audio-48khz-192kbitrate-mono-mp3",i[a.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]="ogg-48khz-16bit-mono-opus",i[a.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]="webm-16khz-16bit-mono-opus",i[a.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]="webm-24khz-16bit-mono-opus",i[a.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]="webm-24khz-16bit-24kbps-mono-opus",i[a.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]="raw-24khz-16bit-mono-truesilk",i[a.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]="raw-8khz-8bit-mono-alaw",i[a.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]="riff-8khz-8bit-mono-alaw",i),t}(s.AudioStreamFormatImpl);t.AudioOutputFormatImpl=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisOutputFormat=void 0,function(e){e[e.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",e[e.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",e[e.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",e[e.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",e[e.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",e[e.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",e[e.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",e[e.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",e[e.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",e[e.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",e[e.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",e[e.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",e[e.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",e[e.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",e[e.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",e[e.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",e[e.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",e[e.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",e[e.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",e[e.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",e[e.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",e[e.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",e[e.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",e[e.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",e[e.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",e[e.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",e[e.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",e[e.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",e[e.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",e[e.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus"}(t.SpeechSynthesisOutputFormat||(t.SpeechSynthesisOutputFormat={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationReason=void 0,function(e){e[e.Error=0]="Error",e[e.EndOfStream=1]="EndOfStream"}(t.CancellationReason||(t.CancellationReason={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PullAudioInputStreamCallback=void 0;var r=function(){};t.PullAudioInputStreamCallback=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PushAudioOutputStreamCallback=void 0;var r=function(){};t.PushAudioOutputStreamCallback=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.KeywordRecognitionModel=void 0;var r=n(63),i=function(){function e(){this.privDisposed=!1}return e.fromFile=function(e){throw r.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")},e.fromStream=function(e){throw r.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")},e.prototype.close=function(){this.privDisposed||(this.privDisposed=!0)},e}();t.KeywordRecognitionModel=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEventArgs=void 0;var r=function(){function e(e){this.privSessionId=e}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();t.SessionEventArgs=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEventArgs=void 0;var o=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privOffset=t,r}return i(t,e),Object.defineProperty(t.prototype,"offset",{get:function(){return this.privOffset},enumerable:!1,configurable:!0}),t}(n(61).SessionEventArgs);t.RecognitionEventArgs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.OutputFormat=void 0,function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.OutputFormat||(t.OutputFormat={}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(n(61).RecognitionEventArgs);t.IntentRecognitionEventArgs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionResult=void 0;var r=function(){function e(e,t,n,r,i,o,a,s,c,u){this.privResultId=e,this.privReason=t,this.privText=n,this.privDuration=r,this.privOffset=i,this.privLanguage=o,this.privLanguageDetectionConfidence=a,this.privErrorDetails=s,this.privJson=c,this.privProperties=u}return Object.defineProperty(e.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.privDuration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.privOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this.privJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.RecognitionResult=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionResult=void 0;var o=function(e){function t(t,n,r,i,o,a,s,c,u,p,l){var d=e.call(this,t,n,r,i,o,a,s,u,p,l)||this;return d.privSpeakerId=c,d}return i(t,e),Object.defineProperty(t.prototype,"speakerId",{get:function(){return this.privSpeakerId},enumerable:!1,configurable:!0}),t}(n(61).RecognitionResult);t.SpeechRecognitionResult=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionResult=void 0;var o=function(e){function t(t,n,r,i,o,a,s,c,u,p,l){var d=e.call(this,n,r,i,o,a,s,c,void 0,u,p,l)||this;return d.privIntentId=t,d}return i(t,e),Object.defineProperty(t.prototype,"intentId",{get:function(){return this.privIntentId},enumerable:!1,configurable:!0}),t}(n(61).SpeechRecognitionResult);t.IntentRecognitionResult=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageUnderstandingModelImpl=t.LanguageUnderstandingModel=void 0;var o=n(63),a=function(){function e(){}return e.fromEndpoint=function(e){o.Contracts.throwIfNull(e,"uri"),o.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");var t=new s,n=e.host.indexOf(".");if(-1===n)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,n);var r=e.pathname.lastIndexOf("/")+1;if(-1===r)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(r),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t},e.fromAppId=function(e){o.Contracts.throwIfNullOrWhitespace(e,"appId");var t=new s;return t.appId=e,t},e.fromSubscription=function(e,t,n){o.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),o.Contracts.throwIfNullOrWhitespace(t,"appId"),o.Contracts.throwIfNullOrWhitespace(n,"region");var r=new s;return r.appId=t,r.region=n,r.subscriptionKey=e,r},e}();t.LanguageUnderstandingModel=a;var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(a);t.LanguageUnderstandingModelImpl=s},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionEventArgs=t.SpeechRecognitionEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(n(61).RecognitionEventArgs);t.SpeechRecognitionEventArgs=o;var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(o);t.ConversationTranscriptionEventArgs=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognitionCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(90).CancellationEventArgsBase);t.SpeechRecognitionCanceledEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationEventArgsBase=void 0;var o=function(e){function t(t,n,r,i,o){var a=e.call(this,i,o)||this;return a.privReason=t,a.privErrorDetails=n,a.privErrorCode=r,a}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(n(61).RecognitionEventArgs);t.CancellationEventArgsBase=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(n(61).RecognitionEventArgs);t.TranslationRecognitionEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEventArgs=void 0;var o=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privResult=t,r}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(n(61).SessionEventArgs);t.TranslationSynthesisEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionResult=void 0;var o=function(e){function t(t,n,r,i,o,a,s,c,u){var p=e.call(this,n,r,i,o,a,void 0,void 0,void 0,s,c,u)||this;return p.privTranslations=t,p}return i(t,e),Object.defineProperty(t.prototype,"translations",{get:function(){return this.privTranslations},enumerable:!1,configurable:!0}),t}(n(61).SpeechRecognitionResult);t.TranslationRecognitionResult=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisResult=void 0;var r=function(){function e(e,t){this.privReason=e,this.privAudio=t}return Object.defineProperty(e.prototype,"audio",{get:function(){return this.privAudio},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.TranslationSynthesisResult=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ResultReason=void 0,function(e){e[e.NoMatch=0]="NoMatch",e[e.Canceled=1]="Canceled",e[e.RecognizingSpeech=2]="RecognizingSpeech",e[e.RecognizedSpeech=3]="RecognizedSpeech",e[e.RecognizedKeyword=4]="RecognizedKeyword",e[e.RecognizingIntent=5]="RecognizingIntent",e[e.RecognizedIntent=6]="RecognizedIntent",e[e.TranslatingSpeech=7]="TranslatingSpeech",e[e.TranslatedSpeech=8]="TranslatedSpeech",e[e.SynthesizingAudio=9]="SynthesizingAudio",e[e.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",e[e.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",e[e.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",e[e.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",e[e.RecognizedSpeakers=14]="RecognizedSpeakers",e[e.RecognizedSpeaker=15]="RecognizedSpeaker",e[e.ResetVoiceProfile=16]="ResetVoiceProfile",e[e.DeletedVoiceProfile=17]="DeletedVoiceProfile"}(t.ResultReason||(t.ResultReason={}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConfigImpl=t.SpeechConfig=void 0;var o=n(53),a=n(63),s=n(61),c=function(){function e(){}return e.fromSubscription=function(e,t){a.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),a.Contracts.throwIfNullOrWhitespace(t,"region");var n=new u;return n.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),n.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),n},e.fromEndpoint=function(e,t){a.Contracts.throwIfNull(e,"endpoint");var n=new u;return n.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),void 0!==t&&n.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n},e.fromHost=function(e,t){a.Contracts.throwIfNull(e,"hostName");var n=new u;return n.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n},e.fromAuthorizationToken=function(e,t){a.Contracts.throwIfNull(e,"authorizationToken"),a.Contracts.throwIfNullOrWhitespace(t,"region");var n=new u;return n.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n.setProperty(s.PropertyId.SpeechServiceConnection_IntentRegion,t),n.authorizationToken=e,n},e.prototype.close=function(){},e}();t.SpeechConfig=c;var u=function(e){function t(){var t=e.call(this)||this;return t.privProperties=new s.PropertyCollection,t.speechRecognitionLanguage="en-US",t.outputFormat=s.OutputFormat.Simple,t}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endPoint",{get:function(){return new URL(this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Key)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"autoDetectSourceLanguages",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return s.OutputFormat[this.privProperties.getProperty(o.OutputFormatPropertyName,void 0)]},set:function(e){this.privProperties.setProperty(o.OutputFormatPropertyName,s.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){a.Contracts.throwIfNull(t,"value"),this.privProperties.setProperty(e,t)},t.prototype.getProperty=function(e,t){return this.privProperties.getProperty(e,t)},t.prototype.setProxy=function(e,t,n,r){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],r)},t.prototype.setServiceProperty=function(e,t,n){var r=JSON.parse(this.privProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(r))},t.prototype.setProfanity=function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privProperties.setProperty(o.ForceDictationPropertyName,"true")},t.prototype.clone=function(){var e=new t;return e.privProperties=this.privProperties.clone(),e},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){return s.SpeechSynthesisOutputFormat[this.privProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(c);t.SpeechConfigImpl=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechTranslationConfigImpl=t.SpeechTranslationConfig=void 0;var o=n(53),a=n(63),s=n(61),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t){a.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),a.Contracts.throwIfNullOrWhitespace(t,"region");var n=new u;return n.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),n.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n},t.fromAuthorizationToken=function(e,t){a.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),a.Contracts.throwIfNullOrWhitespace(t,"region");var n=new u;return n.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),n.properties.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n},t.fromHost=function(e,t){a.Contracts.throwIfNull(e,"hostName");var n=new u;return n.setProperty(s.PropertyId.SpeechServiceConnection_Host,e.protocol+"//"+e.hostname+(""===e.port?"":":"+e.port)),void 0!==t&&n.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n},t.fromEndpoint=function(e,t){a.Contracts.throwIfNull(e,"endpoint"),a.Contracts.throwIfNull(t,"subscriptionKey");var n=new u;return n.properties.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.href),n.properties.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n},t}(s.SpeechConfig);t.SpeechTranslationConfig=c;var u=function(e){function t(){var t=e.call(this)||this;return t.privSpeechProperties=new s.PropertyCollection,t.outputFormat=s.OutputFormat.Simple,t}return i(t,e),Object.defineProperty(t.prototype,"authorizationToken",{set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"subscriptionKey",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return s.OutputFormat[this.privSpeechProperties.getProperty(o.OutputFormatPropertyName,void 0)]},set:function(e){this.privSpeechProperties.setProperty(o.OutputFormatPropertyName,s.OutputFormat[e])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endpointId",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!1,configurable:!0}),t.prototype.addTargetLanguage=function(e){a.Contracts.throwIfNullOrWhitespace(e,"value");var t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))},Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return void 0!==this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return this.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice])},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"region",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_Region)},enumerable:!1,configurable:!0}),t.prototype.setProxy=function(e,t,n,r){this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyHostName],e),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPort],t),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyUserName],n),this.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_ProxyPassword],r)},t.prototype.getProperty=function(e,t){return this.privSpeechProperties.getProperty(e,t)},t.prototype.setProperty=function(e,t){this.privSpeechProperties.setProperty(e,t)},Object.defineProperty(t.prototype,"properties",{get:function(){return this.privSpeechProperties},enumerable:!1,configurable:!0}),t.prototype.close=function(){},t.prototype.setServiceProperty=function(e,t,n){var r=JSON.parse(this.privSpeechProperties.getProperty(o.ServicePropertiesPropertyName,"{}"));r[e]=t,this.privSpeechProperties.setProperty(o.ServicePropertiesPropertyName,JSON.stringify(r))},t.prototype.setProfanity=function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_ProfanityOption,s.ProfanityOption[e])},t.prototype.enableAudioLogging=function(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")},t.prototype.requestWordLevelTimestamps=function(){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")},t.prototype.enableDictation=function(){this.privSpeechProperties.setProperty(o.ForceDictationPropertyName,"true")},Object.defineProperty(t.prototype,"speechSynthesisLanguage",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage)},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthLanguage,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisVoiceName",{get:function(){return this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthVoice)},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthVoice,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechSynthesisOutputFormat",{get:function(){return s.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]},set:function(e){this.privSpeechProperties.setProperty(s.PropertyId.SpeechServiceConnection_SynthOutputFormat,s.SpeechSynthesisOutputFormat[e])},enumerable:!1,configurable:!0}),t}(c);t.SpeechTranslationConfigImpl=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyCollection=void 0;var r=n(61),i=function(){function e(){this.privKeys=[],this.privValues=[]}return e.prototype.getProperty=function(e,t){var n;n="string"==typeof e?e:r.PropertyId[e];for(var i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return this.privValues[i];return t},e.prototype.setProperty=function(e,t){var n;n="string"==typeof e?e:r.PropertyId[e];for(var i=0;i<this.privKeys.length;i++)if(this.privKeys[i]===n)return void(this.privValues[i]=t);this.privKeys.push(n),this.privValues.push(t)},e.prototype.clone=function(){for(var t=new e,n=0;n<this.privKeys.length;n++)t.privKeys.push(this.privKeys[n]),t.privValues.push(this.privValues[n]);return t},e.prototype.mergeTo=function(e){var t=this;this.privKeys.forEach(function(n){if(void 0===e.getProperty(n,void 0)){var r=t.getProperty(n);e.setProperty(n,r)}})},Object.defineProperty(e.prototype,"keys",{get:function(){return this.privKeys},enumerable:!1,configurable:!0}),e}();t.PropertyCollection=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyId=void 0,function(e){e[e.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",e[e.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",e[e.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",e[e.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",e[e.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",e[e.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",e[e.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",e[e.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",e[e.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",e[e.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",e[e.SpeechServiceConnection_ProxyHostName=10]="SpeechServiceConnection_ProxyHostName",e[e.SpeechServiceConnection_ProxyPort=11]="SpeechServiceConnection_ProxyPort",e[e.SpeechServiceConnection_ProxyUserName=12]="SpeechServiceConnection_ProxyUserName",e[e.SpeechServiceConnection_ProxyPassword=13]="SpeechServiceConnection_ProxyPassword",e[e.SpeechServiceConnection_RecoMode=14]="SpeechServiceConnection_RecoMode",e[e.SpeechServiceConnection_RecoLanguage=15]="SpeechServiceConnection_RecoLanguage",e[e.Speech_SessionId=16]="Speech_SessionId",e[e.SpeechServiceConnection_SynthLanguage=17]="SpeechServiceConnection_SynthLanguage",e[e.SpeechServiceConnection_SynthVoice=18]="SpeechServiceConnection_SynthVoice",e[e.SpeechServiceConnection_SynthOutputFormat=19]="SpeechServiceConnection_SynthOutputFormat",e[e.SpeechServiceConnection_AutoDetectSourceLanguages=20]="SpeechServiceConnection_AutoDetectSourceLanguages",e[e.SpeechServiceResponse_RequestDetailedResultTrueFalse=21]="SpeechServiceResponse_RequestDetailedResultTrueFalse",e[e.SpeechServiceResponse_RequestProfanityFilterTrueFalse=22]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",e[e.SpeechServiceResponse_JsonResult=23]="SpeechServiceResponse_JsonResult",e[e.SpeechServiceResponse_JsonErrorDetails=24]="SpeechServiceResponse_JsonErrorDetails",e[e.CancellationDetails_Reason=25]="CancellationDetails_Reason",e[e.CancellationDetails_ReasonText=26]="CancellationDetails_ReasonText",e[e.CancellationDetails_ReasonDetailedText=27]="CancellationDetails_ReasonDetailedText",e[e.LanguageUnderstandingServiceResponse_JsonResult=28]="LanguageUnderstandingServiceResponse_JsonResult",e[e.SpeechServiceConnection_Url=29]="SpeechServiceConnection_Url",e[e.SpeechServiceConnection_InitialSilenceTimeoutMs=30]="SpeechServiceConnection_InitialSilenceTimeoutMs",e[e.SpeechServiceConnection_EndSilenceTimeoutMs=31]="SpeechServiceConnection_EndSilenceTimeoutMs",e[e.SpeechServiceConnection_EnableAudioLogging=32]="SpeechServiceConnection_EnableAudioLogging",e[e.SpeechServiceResponse_ProfanityOption=33]="SpeechServiceResponse_ProfanityOption",e[e.SpeechServiceResponse_PostProcessingOption=34]="SpeechServiceResponse_PostProcessingOption",e[e.SpeechServiceResponse_RequestWordLevelTimestamps=35]="SpeechServiceResponse_RequestWordLevelTimestamps",e[e.SpeechServiceResponse_StablePartialResultThreshold=36]="SpeechServiceResponse_StablePartialResultThreshold",e[e.SpeechServiceResponse_OutputFormatOption=37]="SpeechServiceResponse_OutputFormatOption",e[e.SpeechServiceResponse_TranslationRequestStablePartialResult=38]="SpeechServiceResponse_TranslationRequestStablePartialResult",e[e.Conversation_ApplicationId=39]="Conversation_ApplicationId",e[e.Conversation_DialogType=40]="Conversation_DialogType",e[e.Conversation_Initial_Silence_Timeout=41]="Conversation_Initial_Silence_Timeout",e[e.Conversation_From_Id=42]="Conversation_From_Id",e[e.Conversation_Conversation_Id=43]="Conversation_Conversation_Id",e[e.Conversation_Custom_Voice_Deployment_Ids=44]="Conversation_Custom_Voice_Deployment_Ids",e[e.Conversation_Speech_Activity_Template=45]="Conversation_Speech_Activity_Template",e[e.Conversation_Request_Bot_Status_Messages=46]="Conversation_Request_Bot_Status_Messages",e[e.Conversation_Agent_Connection_Id=47]="Conversation_Agent_Connection_Id",e[e.SpeechServiceConnection_Host=48]="SpeechServiceConnection_Host",e[e.ConversationTranslator_Host=49]="ConversationTranslator_Host",e[e.ConversationTranslator_Name=50]="ConversationTranslator_Name",e[e.ConversationTranslator_CorrelationId=51]="ConversationTranslator_CorrelationId",e[e.ConversationTranslator_Token=52]="ConversationTranslator_Token",e[e.PronunciationAssessment_ReferenceText=53]="PronunciationAssessment_ReferenceText",e[e.PronunciationAssessment_GradingSystem=54]="PronunciationAssessment_GradingSystem",e[e.PronunciationAssessment_Granularity=55]="PronunciationAssessment_Granularity",e[e.PronunciationAssessment_EnableMiscue=56]="PronunciationAssessment_EnableMiscue",e[e.PronunciationAssessment_Json=57]="PronunciationAssessment_Json",e[e.PronunciationAssessment_Params=58]="PronunciationAssessment_Params",e[e.SpeakerRecognition_Api_Version=59]="SpeakerRecognition_Api_Version"}(t.PropertyId||(t.PropertyId={}))},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Recognizer=void 0;var o=n(53),a=n(4),s=n(63),c=n(61),u=function(){function e(e,t,n){this.audioConfig=void 0!==e?e:c.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=t.clone(),this.privConnectionFactory=n,this.implCommonRecognizerSetup()}return e.prototype.close=function(e,t){s.Contracts.throwIfDisposed(this.privDisposed),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{get:function(){return this.privReco},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.privDisposed?[2]:(this.privDisposed=!0,e&&this.privReco?[4,this.privReco.audioSource.turnOff()]:[3,3]);case 1:return t.sent(),[4,this.privReco.dispose()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Object.defineProperty(e,"telemetryEnabled",{get:function(){return o.ServiceRecognizerBase.telemetryDataEnabled},enumerable:!1,configurable:!0}),e.enableTelemetry=function(e){o.ServiceRecognizerBase.telemetryDataEnabled=e},e.prototype.implCommonRecognizerSetup=function(){var t="undefined"!=typeof window?"Browser":"Node",n="unknown",r="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);var i=this.createRecognizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,n,r))));this.privReco=this.createServiceRecognizer(e.getAuthFromProperties(this.privProperties),this.privConnectionFactory,this.audioConfig,i)},e.prototype.recognizeOnceAsyncImpl=function(e){return r(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),t=new a.Deferred,[4,this.implRecognizerStop()];case 1:return r.sent(),[4,this.privReco.recognize(e,t.resolve,t.reject)];case 2:return r.sent(),[4,t.promise];case 3:return n=r.sent(),[4,this.implRecognizerStop()];case 4:return r.sent(),[2,n]}})})},e.prototype.startContinuousRecognitionAsyncImpl=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),[4,this.implRecognizerStop()];case 1:return t.sent(),[4,this.privReco.recognize(e,void 0,void 0)];case 2:return t.sent(),[2]}})})},e.prototype.stopContinuousRecognitionAsyncImpl=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return s.Contracts.throwIfDisposed(this.privDisposed),[4,this.implRecognizerStop()];case 1:return e.sent(),[2]}})})},e.prototype.implRecognizerStop=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.privReco?[4,this.privReco.stopRecognizing()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.getAuthFromProperties=function(e){var t=e.getProperty(c.PropertyId.SpeechServiceConnection_Key,void 0);return t&&""!==t?new o.CognitiveSubscriptionKeyAuthentication(t):new o.CognitiveTokenAuthentication(function(t){var n=e.getProperty(c.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)},function(t){var n=e.getProperty(c.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)})},e}();t.Recognizer=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechRecognizer=void 0;var s=n(53),c=n(4),u=n(63),p=n(61),l=function(e){function t(t,n){var r=this,i=t;return u.Contracts.throwIfNull(i,"speechConfig"),u.Contracts.throwIfNullOrWhitespace(i.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),(r=e.call(this,n,i.properties,new s.SpeechConnectionFactory)||this).privDisposedRecognizer=!1,r}return i(t,e),t.FromConfig=function(e,n,r){var i=e;return n.properties.mergeTo(i.properties),new t(e,r)},Object.defineProperty(t.prototype,"endpointId",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){u.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(s.OutputFormatPropertyName,p.OutputFormat[p.OutputFormat.Simple])===p.OutputFormat[p.OutputFormat.Simple]?p.OutputFormat.Simple:p.OutputFormat.Detailed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Interactive),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.startKeywordRecognitionAsync=function(e,t,n){u.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privDisposedRecognizer?[2]:t?(this.privDisposedRecognizer=!0,[4,this.implRecognizerStop()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[4,e.prototype.dispose.call(this,t)];case 3:return n.sent(),[2]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new s.SpeechServiceRecognizer(e,t,i,r,this)},t}(p.Recognizer);t.SpeechRecognizer=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognizer=void 0;var s=n(53),c=n(4),u=n(63),p=n(61),l=function(e){function t(t,n){var r=this;u.Contracts.throwIfNullOrUndefined(t,"speechConfig");var i=t;return u.Contracts.throwIfNullOrUndefined(i,"speechConfig"),(r=e.call(this,n,i.properties,new s.IntentConnectionFactory)||this).privAddedIntents=[],r.privAddedLmIntents={},r.privDisposedIntentRecognizer=!1,r.privProperties=i.properties,u.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),p.PropertyId[p.PropertyId.SpeechServiceConnection_RecoLanguage]),r}return i(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(p.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(p.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){if(u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var n=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",n.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(n.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Interactive),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){if(0!==Object.keys(this.privAddedLmIntents).length||void 0!==this.privUmbrellaIntent){var n=this.buildSpeechContext();this.privReco.speechContext.setSection("intent",n.Intent),this.privReco.dynamicGrammar.addReferenceGrammar(n.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.startKeywordRecognitionAsync=function(e,t,n){u.Contracts.throwIfNull(e,"model"),n&&n("Not yet implemented.")},t.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},t.prototype.addIntent=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),u.Contracts.throwIfNullOrWhitespace(t,"intentId"),u.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])},t.prototype.addIntentWithLanguageModel=function(e,t,n){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),u.Contracts.throwIfNullOrWhitespace(e,"intentId"),u.Contracts.throwIfNull(t,"model");var r=t;u.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privAddedLmIntents[e]=new s.AddedLmIntent(r,n)},t.prototype.addAllIntents=function(e,t){u.Contracts.throwIfNull(e,"model");var n=e;u.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privUmbrellaIntent=new s.AddedLmIntent(n,t)},t.prototype.close=function(e,t){u.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new s.IntentServiceRecognizer(e,t,i,r,this)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privDisposedIntentRecognizer?[2]:t?(this.privDisposedIntentRecognizer=!0,[4,e.prototype.dispose.call(this,t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.buildSpeechContext=function(){var e,t,n,r=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,n=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(var i=0,o=Object.keys(this.privAddedLmIntents);i<o.length;i++){var a=o[i],s=this.privAddedLmIntents[a];if(void 0===e)e=s.modelImpl.appId;else if(e!==s.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=s.modelImpl.region;else if(t!==s.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===n)n=s.modelImpl.subscriptionKey;else if(n!==s.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");var c="luis/"+e+"-PRODUCTION#"+a;r.push(c)}return{Intent:{id:e,key:void 0===n?this.privProperties.getProperty(p.PropertyId[p.PropertyId.SpeechServiceConnection_Key]):n,provider:"LUIS"},ReferenceGrammars:void 0===this.privUmbrellaIntent?r:["luis/"+e+"-PRODUCTION"]}},t}(p.Recognizer);t.IntentRecognizer=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileType=void 0,function(e){e[e.TextIndependentIdentification=0]="TextIndependentIdentification",e[e.TextDependentVerification=1]="TextDependentVerification",e[e.TextIndependentVerification=2]="TextIndependentVerification"}(t.VoiceProfileType||(t.VoiceProfileType={}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognizer=void 0;var s=n(53),c=n(4),u=n(105),p=n(63),l=n(61),d=function(e){function t(t,n){var r=this,i=t;return p.Contracts.throwIfNull(i,"speechConfig"),(r=e.call(this,n,i.properties,new s.TranslationConnectionFactory)||this).privDisposedTranslationRecognizer=!1,void 0!==r.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&p.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationVoice]),p.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages),l.PropertyId[l.PropertyId.SpeechServiceConnection_TranslationToLanguages]),p.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage),l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage]),r}return i(t,e),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return p.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetLanguages",{get:function(){return p.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"voiceName",{get:function(){return p.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.recognizeOnceAsync=function(e,t){p.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),c.marshalPromiseToCallbacks(this.recognizeOnceAsyncImpl(s.RecognitionMode.Conversation),e,t)},t.prototype.startContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(s.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){c.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.removeTargetLanguage=function(e){if(p.Contracts.throwIfNullOrUndefined(e,"language to be removed"),void 0!==this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)){var t=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),n=t.indexOf(e);n>-1&&(t.splice(n,1),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(",")),this.updateLanguages(t))}},t.prototype.addTargetLanguage=function(e){p.Contracts.throwIfNullOrUndefined(e,"language to be added");var t=[];void 0!==this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?(t=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")).includes(e)||(t.push(e),this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))):(this.properties.setProperty(l.PropertyId.SpeechServiceConnection_TranslationToLanguages,e),t=[e]),this.updateLanguages(t)},t.prototype.close=function(e,t){p.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),c.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.onConnection=function(){},t.prototype.onDisconnection=function(){return o(this,void 0,void 0,function(){return a(this,function(e){return[2]})})},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privDisposedTranslationRecognizer?[2]:(this.privDisposedTranslationRecognizer=!0,t?[4,this.implRecognizerStop()]:[3,3]);case 1:return n.sent(),[4,e.prototype.dispose.call(this,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new s.TranslationServiceRecognizer(e,t,i,r,this)},t.prototype.updateLanguages=function(e){var t=u.Connection.fromRecognizer(this);t&&(t.setMessageProperty("speech.context","translationcontext",{to:e}),t.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:e})))},t}(l.Recognizer);t.TranslationRecognizer=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var r=n(53),i=n(4),o=n(106),a=n(63),s=n(61),c=function(){function e(){}return e.fromRecognizer=function(t){var n=t.internalData,r=new e;return r.privInternalData=n,r.setupEvents(),r},e.fromSynthesizer=function(t){var n=t.internalData,r=new e;return r.privInternalData=n,r.setupEvents(),r},e.prototype.openConnection=function(e,t){i.marshalPromiseToCallbacks(this.privInternalData.connect(),e,t)},e.prototype.closeConnection=function(e,t){if(this.privInternalData instanceof r.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");i.marshalPromiseToCallbacks(this.privInternalData.disconnect(),e,t)},e.prototype.setMessageProperty=function(e,t,n){if(a.Contracts.throwIfNullOrWhitespace(t,"propertyName"),this.privInternalData instanceof r.ServiceRecognizerBase){if("speech.context"!==e.toLowerCase())throw new Error("Only speech.context message property sets are currently supported for recognizer");this.privInternalData.speechContext.setSection(t,n)}else if(this.privInternalData instanceof r.SynthesisAdapterBase){if("synthesis.context"!==e.toLowerCase())throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(t,n)}},e.prototype.sendMessageAsync=function(e,t,n,r){i.marshalPromiseToCallbacks(this.privInternalData.sendNetworkMessage(e,t),n,r)},e.prototype.close=function(){},e.prototype.setupEvents=function(){var e=this;this.privEventListener=this.privInternalData.connectionEvents.attach(function(t){"ConnectionEstablishedEvent"===t.name?e.connected&&e.connected(new s.ConnectionEventArgs(t.connectionId)):"ConnectionClosedEvent"===t.name?e.disconnected&&e.disconnected(new s.ConnectionEventArgs(t.connectionId)):"ConnectionMessageSentEvent"===t.name?e.messageSent&&e.messageSent(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message))):"ConnectionMessageReceivedEvent"===t.name&&e.messageReceived&&e.messageReceived(new s.ConnectionMessageEventArgs(new o.ConnectionMessageImpl(t.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(function(t){e.receivedServiceMessage&&e.receivedServiceMessage(new s.ServiceEventArgs(t.jsonString,t.name))})},e}();t.Connection=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageImpl=t.ConnectionMessage=void 0;var r=n(55),i=n(4),o=n(98),a=n(99),s=function(){};t.ConnectionMessage=s;var c=function(){function e(e){var t=this;this.privConnectionMessage=e,this.privProperties=new o.PropertyCollection,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]&&this.privProperties.setProperty(a.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[r.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(function(e,n,r){t.privProperties.setProperty(e,t.privConnectionMessage.headers[e])})}return Object.defineProperty(e.prototype,"path",{get:function(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(function(e){return e.toLowerCase()==="path".toLowerCase()})]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTextMessage",{get:function(){return this.privConnectionMessage.messageType===i.MessageType.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isBinaryMessage",{get:function(){return this.privConnectionMessage.messageType===i.MessageType.Binary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TextMessage",{get:function(){return this.privConnectionMessage.textBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binaryMessage",{get:function(){return this.privConnectionMessage.binaryBody},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return""},e}();t.ConnectionMessageImpl=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;var r=n(61),i=function(){function e(){this.privMap=new r.PropertyCollection}return e.prototype.get=function(e,t){return this.privMap.getProperty(e,t)},e.prototype.set=function(e,t){this.privMap.setProperty(e,t)},Object.defineProperty(e.prototype,"languages",{get:function(){return this.privMap.keys},enumerable:!1,configurable:!0}),e}();t.Translations=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchReason=void 0,function(e){e[e.NotRecognized=0]="NotRecognized",e[e.InitialSilenceTimeout=1]="InitialSilenceTimeout",e[e.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(t.NoMatchReason||(t.NoMatchReason={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchDetails=void 0;var r=n(53),i=n(61),o=function(){function e(e){this.privReason=e}return e.fromResult=function(t){var n=r.SimpleSpeechPhrase.fromJSON(t.json),o=i.NoMatchReason.NotRecognized;switch(n.RecognitionStatus){case r.RecognitionStatus.BabbleTimeout:o=i.NoMatchReason.InitialBabbleTimeout;break;case r.RecognitionStatus.InitialSilenceTimeout:o=i.NoMatchReason.InitialSilenceTimeout;break;default:o=i.NoMatchReason.NotRecognized}return new e(o)},Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),e}();t.NoMatchDetails=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationRecognitionCanceledEventArgs=void 0;var r=function(){function e(e,t,n,r,i){this.privCancelReason=t,this.privErrorDetails=n,this.privResult=i,this.privSessionId=e,this.privErrorCode=r}return Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privCancelReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();t.TranslationRecognitionCanceledEventArgs=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.IntentRecognitionCanceledEventArgs=void 0;var o=function(e){function t(t,n,r,i,o,a){var s=e.call(this,i,o,a)||this;return s.privReason=t,s.privErrorDetails=n,s.privErrorCode=r,s}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),t}(n(61).IntentRecognitionEventArgs);t.IntentRecognitionCanceledEventArgs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetailsBase=void 0;var r=function(){function e(e,t,n){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=n}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ErrorCode",{get:function(){return this.privErrorCode},enumerable:!1,configurable:!0}),e}();t.CancellationDetailsBase=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationDetails=void 0;var o=n(53),a=n(112),s=n(61),c=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.fromResult=function(e){var n=s.CancellationReason.Error,r=s.CancellationErrorCode.NoError;if(e instanceof s.RecognitionResult&&e.json){var i=o.SimpleSpeechPhrase.fromJSON(e.json);n=o.EnumTranslation.implTranslateCancelResult(i.RecognitionStatus)}return e.properties&&(r=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new t(n,e.errorDetails||o.EnumTranslation.implTranslateErrorDetails(r),r)},t}(a.CancellationDetailsBase);t.CancellationDetails=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CancellationErrorCode=void 0,function(e){e[e.NoError=0]="NoError",e[e.AuthenticationFailure=1]="AuthenticationFailure",e[e.BadRequestParameters=2]="BadRequestParameters",e[e.TooManyRequests=3]="TooManyRequests",e[e.ConnectionFailure=4]="ConnectionFailure",e[e.ServiceTimeout=5]="ServiceTimeout",e[e.ServiceError=6]="ServiceError",e[e.RuntimeError=7]="RuntimeError",e[e.Forbidden=8]="Forbidden"}(t.CancellationErrorCode||(t.CancellationErrorCode={}))},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(61).SessionEventArgs);t.ConnectionEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,r)||this;return i.privJsonResult=t,i.privEventName=n,i}return i(t,e),Object.defineProperty(t.prototype,"jsonString",{get:function(){return this.privJsonResult},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"eventName",{get:function(){return this.privEventName},enumerable:!1,configurable:!0}),t}(n(61).SessionEventArgs);t.ServiceEventArgs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PhraseListGrammar=void 0;var r=function(){function e(e){this.privGrammerBuilder=e.dynamicGrammar}return e.fromRecognizer=function(t){return new e(t.internalData)},e.prototype.addPhrase=function(e){this.privGrammerBuilder.addPhrase(e)},e.prototype.addPhrases=function(e){this.privGrammerBuilder.addPhrase(e)},e.prototype.clear=function(){this.privGrammerBuilder.clearPhrases()},e}();t.PhraseListGrammar=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConfigImpl=t.DialogServiceConfig=void 0;var o=n(63),a=n(61),s=function(){function e(){}var t;return Object.defineProperty(e.prototype,"applicationId",{set:function(e){},enumerable:!1,configurable:!0}),e.DialogTypes=((t=function(){}).BotFramework="bot_framework",t.CustomCommands="custom_commands",t),e}();t.DialogServiceConfig=s;var c=function(e){function t(){var t=e.call(this)||this;return t.privSpeechConfig=new a.SpeechConfigImpl,t}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privSpeechConfig.properties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechConfig.speechRecognitionLanguage},set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechConfig.speechRecognitionLanguage=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"outputFormat",{get:function(){return this.privSpeechConfig.outputFormat},set:function(e){this.privSpeechConfig.outputFormat=e},enumerable:!1,configurable:!0}),t.prototype.setProperty=function(e,t){this.privSpeechConfig.setProperty(e,t)},t.prototype.getProperty=function(e,t){return this.privSpeechConfig.getProperty(e)},t.prototype.setProxy=function(e,t,n,r){this.setProperty(a.PropertyId.SpeechServiceConnection_ProxyHostName,e),this.setProperty(a.PropertyId.SpeechServiceConnection_ProxyPort,""+t),n&&this.setProperty(a.PropertyId.SpeechServiceConnection_ProxyUserName,n),r&&this.setProperty(a.PropertyId.SpeechServiceConnection_ProxyPassword,r)},t.prototype.setServiceProperty=function(e,t,n){this.privSpeechConfig.setServiceProperty(e,t,n)},t.prototype.close=function(){},t}(s);t.DialogServiceConfigImpl=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BotFrameworkConfig=void 0;var o=n(63),a=n(118),s=n(61),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t,n){o.Contracts.throwIfNullOrWhitespace(e,"subscription"),o.Contracts.throwIfNullOrWhitespace(t,"region");var r=new a.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(s.PropertyId.SpeechServiceConnection_Key,e),r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n&&r.setProperty(s.PropertyId.Conversation_ApplicationId,n),r},t.fromAuthorizationToken=function(e,t,n){o.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(t,"region");var r=new a.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.BotFramework),r.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e),r.setProperty(s.PropertyId.SpeechServiceConnection_Region,t),n&&r.setProperty(s.PropertyId.Conversation_ApplicationId,n),r},t.fromHost=function(e,t,n){o.Contracts.throwIfNullOrUndefined(e,"host");var r=e instanceof URL?e:new URL("wss://"+e+".convai.speech.azure.us");o.Contracts.throwIfNullOrUndefined(r,"resolvedHost");var i=new a.DialogServiceConfigImpl;return i.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.BotFramework),i.setProperty(s.PropertyId.SpeechServiceConnection_Host,r.toString()),void 0!==t&&i.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),i},t.fromEndpoint=function(e,t){o.Contracts.throwIfNull(e,"endpoint");var n=new a.DialogServiceConfigImpl;return n.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.BotFramework),n.setProperty(s.PropertyId.SpeechServiceConnection_Endpoint,e.toString()),void 0!==t&&n.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),n},t}(a.DialogServiceConfigImpl);t.BotFrameworkConfig=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCommandsConfig=void 0;var o=n(63),a=n(118),s=n(61),c=function(e){function t(){return e.call(this)||this}return i(t,e),t.fromSubscription=function(e,t,n){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"subscription"),o.Contracts.throwIfNullOrWhitespace(n,"region");var r=new a.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.CustomCommands),r.setProperty(s.PropertyId.Conversation_ApplicationId,e),r.setProperty(s.PropertyId.SpeechServiceConnection_Key,t),r.setProperty(s.PropertyId.SpeechServiceConnection_Region,n),r},t.fromAuthorizationToken=function(e,t,n){o.Contracts.throwIfNullOrWhitespace(e,"applicationId"),o.Contracts.throwIfNullOrWhitespace(t,"authorizationToken"),o.Contracts.throwIfNullOrWhitespace(n,"region");var r=new a.DialogServiceConfigImpl;return r.setProperty(s.PropertyId.Conversation_DialogType,a.DialogServiceConfig.DialogTypes.CustomCommands),r.setProperty(s.PropertyId.Conversation_ApplicationId,e),r.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,t),r.setProperty(s.PropertyId.SpeechServiceConnection_Region,n),r},Object.defineProperty(t.prototype,"applicationId",{get:function(){return this.getProperty(s.PropertyId.Conversation_ApplicationId)},set:function(e){o.Contracts.throwIfNullOrWhitespace(e,"value"),this.setProperty(s.PropertyId.Conversation_ApplicationId,e)},enumerable:!1,configurable:!0}),t}(a.DialogServiceConfigImpl);t.CustomCommandsConfig=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceConnector=void 0;var s=n(122),c=n(53),u=n(4),p=n(63),l=n(61),d=n(99),f=function(e){function t(t,n){var r=this,i=t;p.Contracts.throwIfNull(t,"dialogConfig"),(r=e.call(this,n,i.properties,new s.DialogConnectionFactory)||this).isTurnComplete=!0,r.privIsDisposed=!1,r.privProperties=i.properties.clone();var o=r.buildAgentConfig();return r.privReco.agentConfig.set(o),r}return i(t,e),t.prototype.connect=function(e,t){u.marshalPromiseToCallbacks(this.privReco.connect(),e,t)},t.prototype.disconnect=function(e,t){u.marshalPromiseToCallbacks(this.privReco.disconnect(),e,t)},Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(d.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(d.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechActivityTemplate",{get:function(){return this.properties.getProperty(d.PropertyId.Conversation_Speech_Activity_Template)},set:function(e){this.properties.setProperty(d.PropertyId.Conversation_Speech_Activity_Template,e)},enumerable:!1,configurable:!0}),t.prototype.listenOnceAsync=function(e,t){var n=this;if(this.isTurnComplete){p.Contracts.throwIfDisposed(this.privIsDisposed);var r=o(n,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return[4,this.privReco.connect()];case 1:return n.sent(),[4,this.implRecognizerStop()];case 2:return n.sent(),this.isTurnComplete=!1,e=new u.Deferred,[4,this.privReco.recognize(c.RecognitionMode.Conversation,e.resolve,e.reject)];case 3:return n.sent(),[4,e.promise];case 4:return t=n.sent(),[4,this.implRecognizerStop()];case 5:return n.sent(),[2,t]}})});r.catch(function(){n.dispose(!0).catch(function(){})}),u.marshalPromiseToCallbacks(r.finally(function(){n.isTurnComplete=!0}),e,t)}},t.prototype.sendActivityAsync=function(e,t,n){u.marshalPromiseToCallbacks(this.privReco.sendMessage(e),t,n)},t.prototype.close=function(e,t){p.Contracts.throwIfDisposed(this.privIsDisposed),u.marshalPromiseToCallbacks(this.dispose(!0),e,t)},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privIsDisposed?[2]:t?(this.privIsDisposed=!0,[4,this.implRecognizerStop()]):[3,3];case 1:return n.sent(),[4,e.prototype.dispose.call(this,t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.createRecognizerConfig=function(e){return new c.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new c.DialogServiceAdapter(e,t,i,r,this)},t.prototype.buildAgentConfig=function(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(d.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(d.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(d.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(d.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}},t}(l.Recognizer);t.DialogServiceConnector=f},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.DialogConnectionFactory=void 0;var o=n(2),a=n(53),s=n(61),c=n(123),u=n(53),p=n(55),l=n(124),d=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.create=function(e,r,i){var d=e.parameters.getProperty(s.PropertyId.Conversation_ApplicationId,""),f=e.parameters.getProperty(s.PropertyId.Conversation_DialogType),m=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region),h=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),v=e.parameters.getProperty(s.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),g={};g[p.HeaderNames.ConnectionId]=i,g[l.QueryParameterNames.Format]=e.parameters.getProperty(a.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase(),g[l.QueryParameterNames.Language]=h,g[l.QueryParameterNames.RequestBotStatusMessages]=v,d&&(g[l.QueryParameterNames.BotId]=d,f===s.DialogServiceConfig.DialogTypes.CustomCommands&&(g[p.HeaderNames.CustomCommandsAppId]=d));var y=f===s.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",b=f===s.DialogServiceConfig.DialogTypes.CustomCommands?"v1":f===s.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",_={};null!=r.token&&""!==r.token&&(_[r.headerName]=r.token);var S=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,"");if(!S){var C=c.ConnectionFactoryBase.getHostSuffix(m),P=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+m+"."+t.Constants.BaseUrl+C);S=""+(P.endsWith("/")?P:P+"/")+y+t.Constants.ApiKey+"/"+b}n.setCommonUrlParams(e,g,S);var w="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(S,g,_,new u.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),w,i)},n}var n;return i(t,e),t.Constants=((n=function(){}).ApiKey="api",n.BaseUrl="convai.speech",n),t}(c.ConnectionFactoryBase);t.DialogConnectionFactory=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionFactoryBase=void 0;var r=n(53),i=n(61),o=n(124),a=function(){function e(){}return e.getHostSuffix=function(e){if(e){if(e.toLowerCase().startsWith("china"))return".azure.cn";if(e.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"},e.prototype.setCommonUrlParams=function(e,t,n){this.setUrlParameter(i.PropertyId.SpeechServiceConnection_EnableAudioLogging,o.QueryParameterNames.EnableAudioLogging,e,t,n),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,o.QueryParameterNames.EnableWordLevelTimestamps,e,t,n),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_ProfanityOption,o.QueryParameterNames.Profanity,e,t,n),this.setUrlParameter(i.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,o.QueryParameterNames.InitialSilenceTimeoutMs,e,t,n),this.setUrlParameter(i.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,o.QueryParameterNames.EndSilenceTimeoutMs,e,t,n),this.setUrlParameter(i.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,o.QueryParameterNames.StableIntermediateThreshold,e,t,n);var a=JSON.parse(e.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(a).forEach(function(e,n,r){t[e]=a[e]})},e.prototype.setUrlParameter=function(e,t,n,r,i){var o=n.parameters.getProperty(e,void 0);!o||i&&-1!==i.search(t)||(r[t]=o.toLocaleLowerCase())},e}();t.ConnectionFactoryBase=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.QueryParameterNames=void 0;var r=function(){function e(){}return e.BotId="botid",e.CustomSpeechDeploymentId="cid",e.CustomVoiceDeploymentId="deploymentId",e.EnableAudioLogging="storeAudio",e.EnableLanguageId="lidEnabled",e.EnableWordLevelTimestamps="wordLevelTimestamps",e.EndSilenceTimeoutMs="endSilenceTimeoutMs",e.Format="format",e.InitialSilenceTimeoutMs="initialSilenceTimeoutMs",e.Language="language",e.Profanity="profanity",e.RequestBotStatusMessages="enableBotMessageStatus",e.StableIntermediateThreshold="stableIntermediateThreshold",e.StableTranslation="stableTranslation",e.TestHooks="testhooks",e}();t.QueryParameterNames=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityReceivedEventArgs=void 0;var r=function(){function e(e,t){this.privActivity=e,this.privAudioStream=t}return Object.defineProperty(e.prototype,"activity",{get:function(){return this.privActivity},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioStream",{get:function(){return this.privAudioStream},enumerable:!1,configurable:!0}),e}();t.ActivityReceivedEventArgs=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusReceivedEventArgs=void 0;var r=n(127),i=function(){function e(e){this.privTurnStatus=r.TurnStatusResponsePayload.fromJSON(e)}return Object.defineProperty(e.prototype,"interactionId",{get:function(){return this.privTurnStatus.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privTurnStatus.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privTurnStatus.statusCode},enumerable:!1,configurable:!0}),e}();t.TurnStatusReceivedEventArgs=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TurnStatusResponsePayload=void 0;var r=function(){function e(e){this.privMessageStatusResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"interactionId",{get:function(){return this.privMessageStatusResponse.interactionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privMessageStatusResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}},enumerable:!1,configurable:!0}),e}();t.TurnStatusResponsePayload=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServicePropertyChannel=void 0,function(e){e[e.UriQueryParameter=0]="UriQueryParameter"}(t.ServicePropertyChannel||(t.ServicePropertyChannel={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProfanityOption=void 0,function(e){e[e.Masked=0]="Masked",e[e.Removed=1]="Removed",e[e.Raw=2]="Raw"}(t.ProfanityOption||(t.ProfanityOption={}))},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseAudioPlayer=void 0;var o=n(25),a=n(40),s=n(61),c=n(72),u=function(){function e(e){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,void 0===e&&(e=s.AudioStreamFormat.getDefaultInputFormat()),this.init(e)}return e.prototype.playAudioSample=function(e,t,n){var o=this;a.marshalPromiseToCallbacks(r(o,void 0,void 0,function(){var t,n;return i(this,function(r){return this.ensureInitializedContext(),t=this.formatAudioData(e),(n=new Float32Array(this.samples.length+t.length)).set(this.samples,0),n.set(t,this.samples.length),this.samples=n,[2]})}),t,n)},e.prototype.stopAudio=function(e,t){null!==this.audioContext&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(function(){e&&e()},function(e){t&&t(e)}),this.audioContext=null)},e.prototype.init=function(e){this.audioFormat=e,this.samples=new Float32Array},e.prototype.ensureInitializedContext=function(){var e=this;null===this.audioContext&&(this.createAudioContext(),this.autoUpdateBufferTimer=setInterval(function(){e.updateAudioBuffer()},200))},e.prototype.createAudioContext=function(){this.audioContext=c.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime},e.prototype.formatAudioData=function(e){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(e),128);case 16:return this.formatArrayBuffer(new Int16Array(e),32768);case 32:return this.formatArrayBuffer(new Int32Array(e),2147483648);default:throw new o.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}},e.prototype.formatArrayBuffer=function(e,t){for(var n=new Float32Array(e.length),r=0;r<e.length;r++)n[r]=e[r]/t;return n},e.prototype.updateAudioBuffer=function(){if(0!==this.samples.length){for(var e=this.audioFormat.channels,t=this.audioContext.createBufferSource(),n=this.samples.length/e,r=this.audioContext.createBuffer(e,n,this.audioFormat.samplesPerSec),i=0;i<e;i++)for(var o=i,a=r.getChannelData(i),s=0;s<this.samples.length;s++,o+=e)a[s]=this.samples[o];this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),t.buffer=r,t.connect(this.gainNode),t.start(this.startTime),this.startTime+=r.duration,this.samples=new Float32Array}},e.prototype.playAudio=function(e){return r(this,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return null===this.audioContext&&this.createAudioContext(),t=this.audioContext.createBufferSource(),n=this.audioContext.destination,[4,this.audioContext.decodeAudioData(e,function(e){t.buffer=e,t.connect(n),t.start(0)})];case 1:return r.sent(),[2]}})})},e}();t.BaseAudioPlayer=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectionMessageEventArgs=void 0;var r=function(){function e(e){this.privConnectionMessage=e}return Object.defineProperty(e.prototype,"message",{get:function(){return this.privConnectionMessage},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Message: "+this.privConnectionMessage.toString()},e}();t.ConnectionMessageEventArgs=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfile=void 0;var r=function(){function e(e,t){this.privId=e,this.privProfileType=t}return Object.defineProperty(e.prototype,"profileId",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileType",{get:function(){return this.privProfileType},enumerable:!1,configurable:!0}),e}();t.VoiceProfile=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileEnrollmentCancellationDetails=t.VoiceProfileEnrollmentResult=void 0;var o=n(53),a=n(61),s=function(){function e(e,t,n){this.privReason=e,this.privProperties=new a.PropertyCollection,this.privReason!==a.ResultReason.Canceled?t&&(this.privDetails=JSON.parse(t),"enrolling"===this.privDetails.enrollmentStatus.toLowerCase()&&(this.privReason=a.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=n,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.ServiceError]))}return e.FromIdentificationProfileList=function(t){for(var n=[],r=0,i=t.value;r<i.length;r++){var o=i[r],s=new e("enrolling"===o.enrollmentStatus.toLowerCase()?a.ResultReason.EnrollingVoiceProfile:"enrolled"===o.enrollmentStatus.toLowerCase()?a.ResultReason.EnrolledVoiceProfile:a.ResultReason.Canceled,null,null);s.privDetails=this.getIdentificationDetails(o),n.push(s)}return n},e.FromVerificationProfileList=function(t){for(var n=[],r=0,i=t.value;r<i.length;r++){var o=i[r],s=new e("enrolling"===o.enrollmentStatus.toLowerCase()?a.ResultReason.EnrollingVoiceProfile:"enrolled"===o.enrollmentStatus.toLowerCase()?a.ResultReason.EnrolledVoiceProfile:a.ResultReason.Canceled,null,null);s.privDetails=this.getVerificationDetails(o),n.push(s)}return n},Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsCount",{get:function(){return this.privDetails.enrollmentsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentsLengthInSec",{get:function(){return this.privDetails.enrollmentsLengthInSec},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enrollmentResultDetails",{get:function(){return this.privDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e.getIdentificationDetails=function(e){return{audioLengthInSec:e.audioLengthInSec?parseFloat(e.audioLengthInSec):0,audioSpeechLengthInSec:e.audioSpeechLengthInSec?parseFloat(e.audioSpeechLengthInSec):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount||0,enrollmentsLengthInSec:e.enrollmentsLengthInSec?parseFloat(e.enrollmentsLengthInSec):0,enrollmentsSpeechLengthInSec:e.enrollmentsSpeechLengthInSec?parseFloat(e.enrollmentsSpeechLengthInSec):0,profileId:e.profileId||e.identificationProfileId,remainingEnrollmentsSpeechLengthInSec:e.remainingEnrollmentsSpeechLengthInSec?parseFloat(e.remainingEnrollmentsSpeechLengthInSec):0}},e.getVerificationDetails=function(e){return{audioLengthInSec:e.audioLengthInSec?parseFloat(e.audioLengthInSec):0,audioSpeechLengthInSec:e.audioSpeechLengthInSec?parseFloat(e.audioSpeechLengthInSec):0,enrollmentStatus:e.enrollmentStatus,enrollmentsCount:e.enrollmentsCount,enrollmentsLengthInSec:e.enrollmentsLengthInSec?parseFloat(e.enrollmentsLengthInSec):0,enrollmentsSpeechLengthInSec:e.enrollmentsSpeechLengthInSec?parseFloat(e.enrollmentsSpeechLengthInSec):0,profileId:e.profileId||e.verificationProfileId,remainingEnrollmentsCount:e.remainingEnrollments||e.remainingEnrollmentsCount,remainingEnrollmentsSpeechLengthInSec:e.remainingEnrollmentsSpeechLengthInSec?parseFloat(e.remainingEnrollmentsSpeechLengthInSec):0}},e}();t.VoiceProfileEnrollmentResult=s;var c=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.fromResult=function(e){var n=a.CancellationReason.Error,r=a.CancellationErrorCode.NoError;return e.properties&&(r=a.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,a.CancellationErrorCode[a.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)},t}(a.CancellationDetailsBase);t.VoiceProfileEnrollmentCancellationDetails=c},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileCancellationDetails=t.VoiceProfileResult=void 0;var o=n(53),a=n(63),s=n(61),c=function(){function e(e,t){this.privReason=e,this.privProperties=new s.PropertyCollection,e===s.ResultReason.Canceled&&(a.Contracts.throwIfNullOrUndefined(t,"statusText"),this.privErrorDetails=t,this.privProperties.setProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.ServiceError]))}return Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),e}();t.VoiceProfileResult=c;var u=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.fromResult=function(e){var n=s.CancellationReason.Error,r=s.CancellationErrorCode.NoError;return e.properties&&(r=s.CancellationErrorCode[e.properties.getProperty(o.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)},t}(s.CancellationDetailsBase);t.VoiceProfileCancellationDetails=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfilePhraseResult=void 0;var o=n(63),a=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;if(i.privPhrases=[],o.Contracts.throwIfNullOrUndefined(r,"phrase result JSON"),r.value&&r.value[0])for(var a=0,s=r.value;a<s.length;a++){var c=s[a];i.privPhrases.push(c.passPhrase||c.activationPhrase)}return i}return i(t,e),Object.defineProperty(t.prototype,"phrases",{get:function(){return this.privPhrases},enumerable:!1,configurable:!0}),t}(n(61).VoiceProfileResult);t.VoiceProfilePhraseResult=a},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VoiceProfileClient=void 0;var o=n(53),a=n(63),s=n(61),c=function(){function e(e){var t=e;a.Contracts.throwIfNull(t,"speechConfig"),this.privProperties=t.properties.clone(),this.implClientSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.createProfileAsync=function(e,t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return[4,this.privAdapter.createProfile(e,t)];case 1:if(!(n=i.sent()).ok)throw new Error("createProfileAsync failed with code: "+n.status+", message: "+n.statusText);return r=n.json,[2,new s.VoiceProfile(r.profileId,e)]}})})},e.prototype.retrieveEnrollmentResultAsync=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.privAdapter.getProfileStatus(e)];case 1:return t=n.sent(),[2,new s.VoiceProfileEnrollmentResult(t.ok?s.ResultReason.EnrolledVoiceProfile:s.ResultReason.Canceled,t.data,t.statusText)]}})})},e.prototype.getAllProfilesAsync=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.privAdapter.getProfiles(e)];case 1:return t=n.sent(),e===s.VoiceProfileType.TextIndependentIdentification?[2,s.VoiceProfileEnrollmentResult.FromIdentificationProfileList(t.json)]:[2,s.VoiceProfileEnrollmentResult.FromVerificationProfileList(t.json)]}})})},e.prototype.getActivationPhrasesAsync=function(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return[4,this.privAdapter.getPhrases(e,t)];case 1:return n=r.sent(),[2,new s.VoiceProfilePhraseResult(n.ok?s.ResultReason.EnrollingVoiceProfile:s.ResultReason.Canceled,n.statusText,n.json)]}})})},e.prototype.enrollProfileAsync=function(e,t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return n=t,a.Contracts.throwIfNullOrUndefined(n,"audioConfig"),[4,this.privAdapter.createEnrollment(e,n)];case 1:return r=i.sent(),[2,new s.VoiceProfileEnrollmentResult(r.ok?s.ResultReason.EnrolledVoiceProfile:s.ResultReason.Canceled,r.data,r.statusText)]}})})},e.prototype.deleteProfileAsync=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.privAdapter.deleteProfile(e)];case 1:return t=n.sent(),[2,this.getResult(t,s.ResultReason.DeletedVoiceProfile)]}})})},e.prototype.resetProfileAsync=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.privAdapter.resetProfile(e)];case 1:return t=n.sent(),[2,this.getResult(t,s.ResultReason.ResetVoiceProfile)]}})})},e.prototype.close=function(){},e.prototype.implClientSetup=function(){var e="undefined"!=typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);var r=new o.SpeakerRecognitionConfig(new o.Context(new o.OS(e,t,n)),this.privProperties);this.privAdapter=new o.SpeakerIdMessageAdapter(r)},e.prototype.getResult=function(e,t,n){return new s.VoiceProfileResult(e.ok?t:s.ResultReason.Canceled,e.statusText)},e}();t.VoiceProfileClient=c},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognizer=void 0;var o=n(53),a=n(63),s=n(61),c=function(){function e(e,t){var n=e;a.Contracts.throwIfNull(n,"speechConfig"),this.privAudioConfigImpl=t,a.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privProperties=n.properties.clone(),this.implSRSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.recognizeOnceAsync=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){if(e instanceof s.SpeakerIdentificationModel)return t=this.privAdapter.identifySpeaker(e,this.privAudioConfigImpl),[2,this.getResult(t,s.SpeakerRecognitionResultType.Identify,void 0)];if(e instanceof s.SpeakerVerificationModel)return t=this.privAdapter.verifySpeaker(e,this.privAudioConfigImpl),[2,this.getResult(t,s.SpeakerRecognitionResultType.Verify,e.voiceProfile.profileId)];throw new Error("SpeakerRecognizer.recognizeOnce: Unexpected model type")})})},e.prototype.close=function(){},e.prototype.implSRSetup=function(){var e="undefined"!=typeof window?"Browser":"Node",t="unknown",n="unknown";"undefined"!=typeof navigator&&(e=e+"/"+navigator.platform,t=navigator.userAgent,n=navigator.appVersion);var r=new o.SpeakerRecognitionConfig(new o.Context(new o.OS(e,t,n)),this.privProperties);this.privAdapter=new o.SpeakerIdMessageAdapter(r)},e.prototype.getResult=function(e,t,n){return r(this,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return[4,e];case 1:return r=i.sent(),[2,new s.SpeakerRecognitionResult(t,r.data,n,r.ok?s.ResultReason.RecognizedSpeaker:s.ResultReason.Canceled)]}})})},e}();t.SpeakerRecognizer=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdentificationModel=void 0;var r=n(63),i=n(61),o=function(){function e(e){var t=this;if(this.privVoiceProfiles=[],r.Contracts.throwIfNullOrUndefined(e,"VoiceProfiles"),0===e.length)throw new Error("Empty Voice Profiles array");e.forEach(function(e){if(e.profileType!==i.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+e.profileId);t.privVoiceProfiles.push(e)})}return e.fromProfiles=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfileIds",{get:function(){return this.privVoiceProfiles.map(function(e){return e.profileId}).join(",")},enumerable:!1,configurable:!0}),e}();t.SpeakerIdentificationModel=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerVerificationModel=void 0;var r=n(63),i=n(61),o=function(){function e(e){if(r.Contracts.throwIfNullOrUndefined(e,"VoiceProfile"),e.profileType===i.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=e}return e.fromProfile=function(t){return new e(t)},Object.defineProperty(e.prototype,"voiceProfile",{get:function(){return this.privVoiceProfile},enumerable:!1,configurable:!0}),e}();t.SpeakerVerificationModel=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageConfig=void 0;var r=n(53),i=n(63),o=n(61),a=function(){function e(){this.privProperties=new o.PropertyCollection}return e.fromOpenRange=function(){var t=new e;return t.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.AutoDetectSourceLanguagesOpenRangeOptionName),t},e.fromLanguages=function(t){i.Contracts.throwIfArrayEmptyOrWhitespace(t,"languages");var n=new e;return n.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,t.join()),n},e.fromSourceLanguageConfigs=function(t){if(t.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");var n=new e,r=[];return t.forEach(function(e){if(r.push(e.language),void 0!==e.endpointId&&""!==e.endpointId){var t=e.language+o.PropertyId.SpeechServiceConnection_EndpointId.toString();n.properties.setProperty(t,e.endpointId)}}),n.properties.setProperty(o.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,r.join()),n},Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.AutoDetectSourceLanguageConfig=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AutoDetectSourceLanguageResult=void 0;var r=n(63),i=function(){function e(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),r.Contracts.throwIfNullOrUndefined(t,"languageDetectionConfidence"),this.privLanguage=e,this.privLanguageDetectionConfidence=t}return e.fromResult=function(t){return new e(t.language,t.languageDetectionConfidence)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageDetectionConfidence",{get:function(){return this.privLanguageDetectionConfidence},enumerable:!1,configurable:!0}),e}();t.AutoDetectSourceLanguageResult=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceLanguageConfig=void 0;var r=n(63),i=function(){function e(e,t){r.Contracts.throwIfNullOrUndefined(e,"language"),this.privLanguage=e,this.privEndpointId=t}return e.fromLanguage=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"language",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endpointId",{get:function(){return this.privEndpointId},enumerable:!1,configurable:!0}),e}();t.SourceLanguageConfig=i},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionCancellationDetails=t.SpeakerRecognitionResult=t.SpeakerRecognitionResultType=void 0;var o,a=n(53),s=n(63),c=n(61);!function(e){e[e.Verify=0]="Verify",e[e.Identify=1]="Identify"}(o=t.SpeakerRecognitionResultType||(t.SpeakerRecognitionResultType={}));var u=function(){function e(e,t,n,r){if(void 0===r&&(r=c.ResultReason.RecognizedSpeaker),this.privProperties=new c.PropertyCollection,this.privReason=r,this.privReason!==c.ResultReason.Canceled)if(e===o.Identify){var i=JSON.parse(t);s.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privProfileId=i.identifiedProfile.profileId,this.privScore=i.identifiedProfile.score}else i=JSON.parse(t),s.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privScore=i.score,"accept"!==i.recognitionResult.toLowerCase()&&(this.privReason=c.ResultReason.NoMatch),void 0!==n&&""!==n&&(this.privProfileId=n);else i=JSON.parse(t),s.Contracts.throwIfNullOrUndefined(i,"JSON"),this.privErrorDetails=i.statusText,this.privProperties.setProperty(a.CancellationErrorCodePropertyName,c.CancellationErrorCode[c.CancellationErrorCode.ServiceError]);this.privProperties.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,t)}return Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profileId",{get:function(){return this.privProfileId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"score",{get:function(){return this.privScore},enumerable:!1,configurable:!0}),e}();t.SpeakerRecognitionResult=u;var p=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.fromResult=function(e){var n=c.CancellationReason.Error,r=c.CancellationErrorCode.NoError;return e.properties&&(r=c.CancellationErrorCode[e.properties.getProperty(a.CancellationErrorCodePropertyName,c.CancellationErrorCode[c.CancellationErrorCode.NoError])]),new t(n,e.errorDetails,r)},t}(c.CancellationDetailsBase);t.SpeakerRecognitionCancellationDetails=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(145);Object.defineProperty(t,"Conversation",{enumerable:!0,get:function(){return r.Conversation}}),Object.defineProperty(t,"ConversationImpl",{enumerable:!0,get:function(){return r.ConversationImpl}});var i=n(146);Object.defineProperty(t,"ConversationCommon",{enumerable:!0,get:function(){return i.ConversationCommon}});var o=n(147);Object.defineProperty(t,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return o.ConversationExpirationEventArgs}});var a=n(148);Object.defineProperty(t,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return a.ConversationParticipantsChangedEventArgs}});var s=n(149);Object.defineProperty(t,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var c=n(150);Object.defineProperty(t,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return c.ConversationTranslationEventArgs}});var u=n(151);Object.defineProperty(t,"ConversationTranslationResult",{enumerable:!0,get:function(){return u.ConversationTranslationResult}});var p=n(152);Object.defineProperty(t,"ConversationTranslator",{enumerable:!0,get:function(){return p.ConversationTranslator}});var l=n(153);Object.defineProperty(t,"ConversationTranscriber",{enumerable:!0,get:function(){return l.ConversationTranscriber}});var d=n(154);Object.defineProperty(t,"Participant",{enumerable:!0,get:function(){return d.Participant}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return d.User}});var f=n(155);Object.defineProperty(t,"ParticipantChangedReason",{enumerable:!0,get:function(){return f.ParticipantChangedReason}})},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationImpl=t.Conversation=void 0;var c=n(53),u=n(4),p=n(63),l=n(61),d=function(){function e(){}return e.createConversationAsync=function(e,t,n,r){var i,o,a;return p.Contracts.throwIfNullOrUndefined(e,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),p.Contracts.throwIfNullOrUndefined(e.region,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),e.subscriptionKey||e.getProperty(l.PropertyId[l.PropertyId.SpeechServiceAuthorization_Token])||p.Contracts.throwIfNullOrUndefined(e.subscriptionKey,c.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key")),"string"==typeof t?(i=new f(e,t),o=n,a=r):(i=new f(e),o=t,a=n),i.createConversationAsync(function(){o&&o()},function(e){a&&a(e)}),i},e}();t.Conversation=d;var f=function(e){function t(t,n){var r=e.call(this)||this;if(r.privIsDisposed=!1,r.privIsConnected=!1,r.privErrors=c.ConversationConnectionConfig.restErrors,r.privConversationId="",r.onConnected=function(e){var t,n;r.privIsConnected=!0;try{(null===(t=r.privConversationTranslator)||void 0===t?void 0:t.sessionStarted)&&r.privConversationTranslator.sessionStarted(r.privConversationTranslator,e),(null===(n=r.privTranscriberRecognizer)||void 0===n?void 0:n.conversationStarted)&&r.privTranscriberRecognizer.conversationStarted(r.privTranscriberRecognizer,e)}catch(e){}},r.onDisconnected=function(e){return o(r,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,1,2,4]),(null===(t=this.privConversationTranslator)||void 0===t?void 0:t.sessionStopped)&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,e),(null===(n=this.privTranscriberRecognizer)||void 0===n?void 0:n.conversationStopped)&&this.privTranscriberRecognizer.conversationStopped(this.privTranscriberRecognizer,e),[3,4];case 1:return r.sent(),[3,4];case 2:return[4,this.close(!1)];case 3:return r.sent(),[7];case 4:return[2]}})})},r.onCanceled=function(e,t){return o(r,void 0,void 0,function(){var e,n;return a(this,function(r){try{(null===(e=this.privConversationTranslator)||void 0===e?void 0:e.canceled)&&this.privConversationTranslator.canceled(this.privConversationTranslator,t),(null===(n=this.privTranscriberRecognizer)||void 0===n?void 0:n.conversationCanceled)&&this.privTranscriberRecognizer.conversationCanceled(this.privTranscriberRecognizer,t)}catch(e){}return[2]})})},r.onParticipantUpdateCommandReceived=function(e,t){var n,i;try{var o=r.privParticipants.getParticipant(t.id);if(void 0!==o){switch(t.key){case c.ConversationTranslatorCommandTypes.changeNickname:o.displayName=t.value;break;case c.ConversationTranslatorCommandTypes.setUseTTS:o.useTts=t.value;break;case c.ConversationTranslatorCommandTypes.setProfanityFiltering:o.profanity=t.value;break;case c.ConversationTranslatorCommandTypes.setMute:o.isMuted=t.value;break;case c.ConversationTranslatorCommandTypes.setTranslateToLanguages:o.translateToLanguages=t.value}r.privParticipants.addOrUpdateParticipant(o),(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.participantsChanged)&&(null===(i=r.privConversationTranslator)||void 0===i||i.participantsChanged(r.privConversationTranslator,new l.ConversationParticipantsChangedEventArgs(l.ParticipantChangedReason.Updated,[r.toParticipant(o)],t.sessionId)))}}catch(t){}},r.onLockRoomCommandReceived=function(e,t){},r.onMuteAllCommandReceived=function(e,t){var n,i;try{r.privParticipants.participants.forEach(function(e){return e.isMuted=!e.isHost&&t.isMuted}),(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.participantsChanged)&&(null===(i=r.privConversationTranslator)||void 0===i||i.participantsChanged(r.privConversationTranslator,new l.ConversationParticipantsChangedEventArgs(l.ParticipantChangedReason.Updated,r.toParticipants(!1),t.sessionId)))}catch(t){}},r.onParticipantJoinCommandReceived=function(e,t){var n,i;try{var o=r.privParticipants.addOrUpdateParticipant(t.participant);void 0!==o&&(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.participantsChanged)&&(null===(i=r.privConversationTranslator)||void 0===i||i.participantsChanged(r.privConversationTranslator,new l.ConversationParticipantsChangedEventArgs(l.ParticipantChangedReason.JoinedConversation,[r.toParticipant(o)],t.sessionId)))}catch(t){}},r.onParticipantLeaveCommandReceived=function(e,t){var n,i;try{var o=r.privParticipants.getParticipant(t.participant.id);void 0!==o&&(r.privParticipants.deleteParticipant(t.participant.id),(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.participantsChanged)&&(null===(i=r.privConversationTranslator)||void 0===i||i.participantsChanged(r.privConversationTranslator,new l.ConversationParticipantsChangedEventArgs(l.ParticipantChangedReason.LeftConversation,[r.toParticipant(o)],t.sessionId))))}catch(t){}},r.onTranslationReceived=function(e,t){var n,i,o,a,s,u;try{switch(t.command){case c.ConversationTranslatorMessageTypes.final:(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.transcribed)&&(null===(i=r.privConversationTranslator)||void 0===i||i.transcribed(r.privConversationTranslator,new l.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)));break;case c.ConversationTranslatorMessageTypes.partial:(null===(o=r.privConversationTranslator)||void 0===o?void 0:o.transcribing)&&(null===(a=r.privConversationTranslator)||void 0===a||a.transcribing(r.privConversationTranslator,new l.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)));break;case c.ConversationTranslatorMessageTypes.instantMessage:(null===(s=r.privConversationTranslator)||void 0===s?void 0:s.textMessageReceived)&&(null===(u=r.privConversationTranslator)||void 0===u||u.textMessageReceived(r.privConversationTranslator,new l.ConversationTranslationEventArgs(t.payload,void 0,t.sessionId)))}}catch(t){}},r.onParticipantsListReceived=function(e,t){var n,i,o;try{if(void 0!==t.sessionToken&&null!==t.sessionToken&&(r.privRoom.token=t.sessionToken),r.privParticipants.participants=s(t.participants),void 0!==r.privParticipants.me&&(r.privIsReady=!0),(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.participantsChanged)&&(null===(i=r.privConversationTranslator)||void 0===i||i.participantsChanged(r.privConversationTranslator,new l.ConversationParticipantsChangedEventArgs(l.ParticipantChangedReason.JoinedConversation,r.toParticipants(!0),t.sessionId))),r.me.isHost){var a=null===(o=r.privConversationTranslator)||void 0===o?void 0:o.properties.getProperty(l.PropertyId.ConversationTranslator_Name);void 0!==a&&a.length>0&&a!==r.me.displayName&&r.changeNicknameAsync(a)}}catch(t){}},r.onConversationExpiration=function(e,t){var n,i;try{(null===(n=r.privConversationTranslator)||void 0===n?void 0:n.conversationExpiration)&&(null===(i=r.privConversationTranslator)||void 0===i||i.conversationExpiration(r.privConversationTranslator,t))}catch(t){}},r.privProperties=new l.PropertyCollection,r.privManager=new c.ConversationManager,t.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage])||t.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage],c.ConversationConnectionConfig.defaultLanguageCode),r.privLanguage=t.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage]),n)r.privConversationId=n;else{0===t.targetLanguages.length&&t.addTargetLanguage(r.privLanguage),t.getProperty(l.PropertyId[l.PropertyId.SpeechServiceResponse_ProfanityOption])||t.setProfanity(l.ProfanityOption.Masked);var i=t.getProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Name]);(null==i||i.length<=1||i.length>50)&&(i="Host"),t.setProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Name],i)}r.privConfig=t;var u=t;return p.Contracts.throwIfNull(u,"speechConfig"),r.privProperties=u.properties.clone(),r.privIsConnected=!1,r.privParticipants=new c.InternalParticipants,r.privIsReady=!1,r.privTextMessageMaxLength=1e3,r}return i(t,e),Object.defineProperty(t.prototype,"conversationTranslator",{set:function(e){this.privConversationTranslator=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"room",{get:function(){return this.privRoom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"connection",{get:function(){return this.privConversationRecognizer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.privToken},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),this.privToken=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.privConfig},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{get:function(){return this.privRoom?this.privRoom.roomId:this.privConversationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMutedByHost",{get:function(){var e,t;return!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)&&(null===(t=this.privParticipants.me)||void 0===t?void 0:t.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isConnected",{get:function(){return this.privIsConnected&&this.privIsReady},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.toParticipants(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"me",{get:function(){return this.toParticipant(this.privParticipants.me)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"host",{get:function(){return this.toParticipant(this.privParticipants.host)},enumerable:!1,configurable:!0}),t.prototype.createConversationAsync=function(e,t){var n=this;try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),this.privManager.createOrJoin(this.privProperties,void 0,function(r){r||n.handleError(new Error(n.privErrors.permissionDeniedConnect),t),n.privRoom=r,n.handleCallback(e,t)},function(e){n.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.startConversationAsync=function(e,t){var n=this;try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),t),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=c.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,function(){n.handleCallback(e,t)},function(e){n.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.addParticipantAsync=function(e,t,n){p.Contracts.throwIfNullOrUndefined(e,"Participant"),u.marshalPromiseToCallbacks(this.addParticipantImplAsync(e),t,n)},t.prototype.joinConversationAsync=function(e,t,n,r,i){var o=this;try{p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","conversationId")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),p.Contracts.throwIfNullOrWhitespace(n,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,e,function(e){p.Contracts.throwIfNullOrUndefined(e,o.privErrors.permissionDeniedConnect),o.privRoom=e,o.privConfig.authorizationToken=e.cognitiveSpeechAuthToken,r&&r(e.cognitiveSpeechAuthToken)},function(e){o.handleError(e,i)})}catch(e){this.handleError(e,i)}},t.prototype.deleteConversationAsync=function(e,t){u.marshalPromiseToCallbacks(this.deleteConversationImplAsync(),e,t)},t.prototype.deleteConversationImplAsync=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return p.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),p.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),[4,this.privManager.leave(this.privProperties,this.privRoom.token)];case 1:return e.sent(),this.dispose(),[2]}})})},t.prototype.endConversationAsync=function(e,t){u.marshalPromiseToCallbacks(this.endConversationImplAsync(),e,t)},t.prototype.endConversationImplAsync=function(){return this.close(!0)},t.prototype.lockConversationAsync=function(e,t){var n,r=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),t),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getLockCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.muteAllParticipantsAsync=function(e,t){var n,r=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),t),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteAllCommand(!0),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.muteParticipantAsync=function(e,t,n){var r,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteCommand(e,!0),function(){i.handleCallback(t,n)},function(e){i.handleError(e,n)})}catch(e){this.handleError(e,n)}},t.prototype.removeParticipantAsync=function(e,t,n){var r,i=this;try{if(p.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&e.hasOwnProperty("id"))u.marshalPromiseToCallbacks(this.removeParticipantImplAsync(e),t,n);else{p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),n);var o="";"string"==typeof e?o=e:e.hasOwnProperty("id")?o=e.id:e.hasOwnProperty("userId")&&(o=e.userId),p.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),-1===this.participants.findIndex(function(e){return e.id===o})&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getEjectCommand(o),function(){i.handleCallback(t,n)},function(e){i.handleError(e,n)})}}catch(e){this.handleError(e,n)}},t.prototype.unlockConversationAsync=function(e,t){var n,r=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),t),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getLockCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.unmuteAllParticipantsAsync=function(e,t){var n,r=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),t),null===(n=this.privConversationRecognizer)||void 0===n||n.sendRequest(this.getMuteAllCommand(!1),function(){r.handleCallback(e,t)},function(e){r.handleError(e,t)})}catch(e){this.handleError(e,t)}},t.prototype.unmuteParticipantAsync=function(e,t,n){var r,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","userId")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),this.me.isHost||this.me.id===e||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),n),-1===this.privParticipants.getParticipantIndex(e)&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),n),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMuteCommand(e,!1),function(){i.handleCallback(t,n)},function(e){i.handleError(e,n)})}catch(e){this.handleError(e,n)}},t.prototype.sendTextMessageAsync=function(e,t,n){var r,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","message")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),e.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),n),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getMessageCommand(e),function(){i.handleCallback(t,n)},function(e){i.handleError(e,n)})}catch(e){this.handleError(e,n)}},t.prototype.changeNicknameAsync=function(e,t,n){var r,i=this;try{p.Contracts.throwIfDisposed(this.privIsDisposed),p.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}","nickname")),p.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),n),null===(r=this.privConversationRecognizer)||void 0===r||r.sendRequest(this.getChangeNicknameCommand(e),function(){i.handleCallback(t,n)},function(e){i.handleError(e,n)})}catch(e){this.handleError(e,n)}},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(e){var t;this.isDisposed||(this.privIsDisposed=!0,null===(t=this.config)||void 0===t||t.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)},Object.defineProperty(t.prototype,"transcriberRecognizer",{get:function(){return this.privTranscriberRecognizer},enumerable:!1,configurable:!0}),t.prototype.connectTranscriberRecognizer=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.privTranscriberRecognizer?[4,this.privTranscriberRecognizer.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.privTranscriberRecognizer=e,this.privTranscriberRecognizer.conversation=this,[2]}})})},Object.defineProperty(t.prototype,"conversationInfo",{get:function(){for(var e=this.conversationId,t=this.participants.map(function(e){return{id:e.id,preferredLanguage:e.preferredLanguage,voice:e.voice}}),n={},r=0,i=c.ConversationConnectionConfig.transcriptionEventKeys;r<i.length;r++){var o=i[r],a=this.properties.getProperty(o,"");""!==a&&(n[o]=a)}return{id:e,participants:t,conversationProperties:n}},enumerable:!1,configurable:!0}),t.prototype.getKeepAlive=function(){var e=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:e,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.keepAlive})},t.prototype.addParticipantImplAsync=function(e){if(void 0!==this.privParticipants.addOrUpdateParticipant(e)&&this.privTranscriberRecognizer){var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"join")}},t.prototype.removeParticipantImplAsync=function(e){this.privParticipants.deleteParticipant(e.id);var t=this.conversationInfo;return t.participants=[e],this.privTranscriberRecognizer.pushConversationEvent(t,"leave")},t.prototype.close=function(e){var t,n;return o(this,void 0,void 0,function(){return a(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this.privIsConnected=!1,[4,null===(t=this.privConversationRecognizer)||void 0===t?void 0:t.close()];case 1:return r.sent(),this.privConversationRecognizer=void 0,null===(n=this.privConversationTranslator)||void 0===n||n.dispose(),[3,3];case 2:throw r.sent();case 3:return e&&this.dispose(),[2]}})})},Object.defineProperty(t.prototype,"canSend",{get:function(){var e;return this.privIsConnected&&!(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isMuted)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canSendAsHost",{get:function(){var e;return this.privIsConnected&&(null===(e=this.privParticipants.me)||void 0===e?void 0:e.isHost)},enumerable:!1,configurable:!0}),t.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},t.prototype.handleError=function(e,t){if(t)if(e instanceof Error){var n=e;t(n.name+": "+n.message)}else t(e)},t.prototype.toParticipants=function(e){var t=this,n=this.privParticipants.participants.map(function(e){return t.toParticipant(e)});return e?n:n.filter(function(e){return!1===e.isHost})},t.prototype.toParticipant=function(e){return new l.Participant(e.id,e.avatar,e.displayName,e.isHost,e.isMuted,e.isUsingTts,e.preferredLanguage,e.voice)},t.prototype.getMuteAllCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMuteCommand=function(e,t){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setMute,participantId:e,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:t})},t.prototype.getLockCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getEjectCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.ejectParticipant,participantId:e,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand})},t.prototype.getChangeNicknameCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(e,"nickname"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:c.ConversationTranslatorCommandTypes.changeNickname,nickname:e,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:c.ConversationTranslatorMessageTypes.participantCommand,value:e})},t.prototype.getMessageCommand=function(e){return p.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),p.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),p.Contracts.throwIfNullOrWhitespace(e,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:e,type:c.ConversationTranslatorMessageTypes.instantMessage})},t}(d);t.ConversationImpl=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCommon=void 0;var r=function(){function e(e){this.privAudioConfig=e}return e.prototype.handleCallback=function(e,t){if(e){try{e()}catch(e){t&&t(e)}e=void 0}},e.prototype.handleError=function(e,t){if(t)if(e instanceof Error){var n=e;t(n.name+": "+n.message)}else t(e)},e}();t.ConversationCommon=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationExpirationEventArgs=void 0;var o=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privExpirationTime=t,r}return i(t,e),Object.defineProperty(t.prototype,"expirationTime",{get:function(){return this.privExpirationTime},enumerable:!1,configurable:!0}),t}(n(61).SessionEventArgs);t.ConversationExpirationEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationParticipantsChangedEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,r)||this;return i.privReason=t,i.privParticipant=n,i}return i(t,e),Object.defineProperty(t.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(n(61).SessionEventArgs);t.ConversationParticipantsChangedEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(90).CancellationEventArgsBase);t.ConversationTranslationCanceledEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationEventArgs=void 0;var o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.privResult=t,i}return i(t,e),Object.defineProperty(t.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),t}(n(61).RecognitionEventArgs);t.ConversationTranslationEventArgs=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslationResult=void 0;var o=function(e){function t(t,n,r,i,o,a,s,c,u,p,l){var d=e.call(this,n,i,o,a,s,c,u,p,l)||this;return d.privId=t,d.privOrigLang=r,d}return i(t,e),Object.defineProperty(t.prototype,"participantId",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalLang",{get:function(){return this.privOrigLang},enumerable:!1,configurable:!0}),t}(n(93).TranslationRecognitionResult);t.ConversationTranslationResult=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslator=t.SpeechState=void 0;var s,c=n(53),u=n(4),p=n(63),l=n(61),d=n(145),f=n(144);!function(e){e[e.Inactive=0]="Inactive",e[e.Connecting=1]="Connecting",e[e.Connected=2]="Connected"}(s=t.SpeechState||(t.SpeechState={}));var m=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.privSpeechState=s.Inactive,r&&(i.privTranslator=r,i.sessionStarted=function(){i.privSpeechState=s.Connected},i.sessionStopped=function(){i.privSpeechState=s.Inactive},i.recognized=function(e,t){return o(i,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return(null===(e=t.result)||void 0===e?void 0:e.errorDetails)?[4,this.cancelSpeech()]:[3,2];case 1:n.sent(),this.fireCancelEvent(t.result.errorDetails),n.label=2;case 2:return[2]}})})},i.canceled=function(e,t){return o(i,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:if(this.privSpeechState===s.Inactive)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.cancelSpeech()];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.privSpeechState=s.Inactive,[3,4];case 4:return[2]}})})}),i}return i(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this.privSpeechState},set:function(e){this.privSpeechState=e},enumerable:!1,configurable:!0}),t.prototype.onConnection=function(){this.privSpeechState=s.Connected},t.prototype.onDisconnection=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.privSpeechState=s.Inactive,[4,this.cancelSpeech()];case 1:return e.sent(),[2]}})})},t.prototype.fireCancelEvent=function(e){var t,n,r;try{if(this.privTranslator.canceled){var i=new f.ConversationTranslationCanceledEventArgs(null!==(t=null==e?void 0:e.reason)&&void 0!==t?t:l.CancellationReason.Error,null!==(n=null==e?void 0:e.errorDetails)&&void 0!==n?n:e,null!==(r=null==e?void 0:e.errorCode)&&void 0!==r?r:l.CancellationErrorCode.RuntimeError,void 0,null==e?void 0:e.sessionId);this.privTranslator.canceled(this.privTranslator,i)}}catch(e){}},t.prototype.cancelSpeech=function(){var e;return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.stopContinuousRecognitionAsync(),[4,null===(e=this.privReco)||void 0===e?void 0:e.disconnect()];case 1:return t.sent(),this.privSpeechState=s.Inactive,[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})},t}(l.TranslationRecognizer),h=function(e){function t(t){var n=e.call(this,t)||this;return n.privIsDisposed=!1,n.privIsSpeaking=!1,n.privErrors=c.ConversationConnectionConfig.restErrors,n.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",n.privPlaceholderRegion="westus",n.privProperties=new l.PropertyCollection,n}return i(t,e),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){var e;return null===(e=this.privConversation)||void 0===e?void 0:e.participants},enumerable:!1,configurable:!0}),t.prototype.joinConversationAsync=function(e,t,n,r,i){var o=this;try{if("string"==typeof e){p.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),i);var a=n;null!=a&&""!==a||(a=c.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=l.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(l.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(a),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_RecoLanguage],a),this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Name],t);var s=this.privProperties.getProperty(l.PropertyId.ConversationTranslator_Host);s&&this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.ConversationTranslator_Host],s);var u=this.privProperties.getProperty(l.PropertyId.SpeechServiceConnection_Host);u&&this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Host],u),this.privConversation=new d.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(e,t,a,function(e){e||o.handleError(new Error(o.privErrors.permissionDeniedConnect),i),o.privSpeechTranslationConfig.authorizationToken=e,o.privConversation.startConversationAsync(function(){o.handleCallback(r,i)},function(e){o.handleError(e,i)})},function(e){o.handleError(e,i)})}else"object"==Object(v["a"])(e)?(p.Contracts.throwIfNullOrUndefined(e,this.privErrors.invalidArgs.replace("{arg}","conversation id")),p.Contracts.throwIfNullOrWhitespace(t,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(l.PropertyId.ConversationTranslator_Name,t),this.privConversation=e,this.privConversation.conversationTranslator=this,p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),p.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=e.config,this.handleCallback(n,r)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),r)}catch(e){this.handleError(e,"string"==typeof n?i:r)}},t.prototype.leaveConversationAsync=function(e,t){var n=this;u.marshalPromiseToCallbacks(o(n,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.cancelSpeech()];case 1:return e.sent(),[4,this.privConversation.endConversationImplAsync()];case 2:return e.sent(),[4,this.privConversation.deleteConversationImplAsync()];case 3:return e.sent(),this.dispose(),[2]}})}),e,t)},t.prototype.sendTextMessageAsync=function(e,t,n){var r;try{p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrWhitespace(e,this.privErrors.invalidArgs.replace("{arg}",e)),null===(r=this.privConversation)||void 0===r||r.sendTextMessageAsync(e,t,n)}catch(e){this.handleError(e,n)}},t.prototype.startTranscribingAsync=function(e,t){var n=this;u.marshalPromiseToCallbacks(o(n,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,6]),p.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),p.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),void 0!==this.privCTRecognizer?[3,2]:[4,this.connectTranslatorRecognizer()];case 1:n.sent(),n.label=2;case 2:return p.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),t),[4,this.startContinuousRecognition()];case 3:return n.sent(),this.privIsSpeaking=!0,[3,6];case 4:return e=n.sent(),this.privIsSpeaking=!1,[4,this.cancelSpeech()];case 5:throw n.sent(),e;case 6:return[2]}})}),e,t)},t.prototype.stopTranscribingAsync=function(e,t){var n=this;u.marshalPromiseToCallbacks(o(n,void 0,void 0,function(){var e=this;return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,6]),this.privIsSpeaking?[3,2]:[4,this.cancelSpeech()];case 1:return t.sent(),[2];case 2:return this.privIsSpeaking=!1,[4,new Promise(function(t,n){var r;null===(r=e.privCTRecognizer)||void 0===r||r.stopContinuousRecognitionAsync(t,n)})];case 3:return t.sent(),[3,6];case 4:return t.sent(),[4,this.cancelSpeech()];case 5:return t.sent(),[3,6];case 6:return[2]}})}),e,t)},t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.dispose=function(e,t,n){var r=this;u.marshalPromiseToCallbacks(o(r,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return this.isDisposed&&!this.privIsSpeaking?[2]:[4,this.cancelSpeech()];case 1:return n.sent(),this.privIsDisposed=!0,null===(e=this.privSpeechTranslationConfig)||void 0===e||e.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,null===(t=this.privConversation)||void 0===t||t.dispose(),this.privConversation=void 0,[2]}})}),t,n)},t.prototype.cancelSpeech=function(){var e;return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.privIsSpeaking=!1,[4,null===(e=this.privCTRecognizer)||void 0===e?void 0:e.onDisconnection()];case 1:return t.sent(),this.privCTRecognizer=void 0,[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}})})},t.prototype.connectTranslatorRecognizer=function(){return o(this,void 0,void 0,function(){var e,t,n,r;return a(this,function(i){switch(i.label){case 0:return i.trys.push([0,1,,3]),void 0===this.privAudioConfig&&(this.privAudioConfig=l.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Key],""),e=encodeURIComponent(this.privConversation.room.token),t=(t=this.privSpeechTranslationConfig.getProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Host],c.ConversationConnectionConfig.speechHost)).replace("{region}",this.privConversation.room.cognitiveSpeechRegion),n="wss://"+t+c.ConversationConnectionConfig.speechPath+"?"+c.ConversationConnectionConfig.configParams.token+"="+e,this.privSpeechTranslationConfig.setProperty(l.PropertyId[l.PropertyId.SpeechServiceConnection_Endpoint],n),this.privCTRecognizer=new m(this.privSpeechTranslationConfig,this.privAudioConfig,this),[3,3];case 1:return r=i.sent(),[4,this.cancelSpeech()];case 2:throw i.sent(),r;case 3:return[2]}})})},t.prototype.startContinuousRecognition=function(){var e=this;return new Promise(function(t,n){e.privCTRecognizer.startContinuousRecognitionAsync(t,n)})},Object.defineProperty(t.prototype,"canSpeak",{get:function(){return!(!this.privConversation.isConnected||!this.privCTRecognizer)&&!this.privIsSpeaking&&this.privCTRecognizer.state!==s.Connected&&this.privCTRecognizer.state!==s.Connecting&&!this.privConversation.isMutedByHost},enumerable:!1,configurable:!0}),t}(f.ConversationCommon);t.ConversationTranslator=h},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriber=void 0;var o=n(53),a=n(4),s=n(63),c=n(61),u=function(){function e(e){this.privAudioConfig=e,this.privProperties=new c.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}return e.prototype.joinConversationAsync=function(e,t,n){var r=e;s.Contracts.throwIfNullOrUndefined(r,"Conversation"),this.privRecognizer=new o.TranscriberRecognizer(e.config,this.privAudioConfig),s.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectCallbacks(this),a.marshalPromiseToCallbacks(r.connectTranscriberRecognizer(this.privRecognizer),t,n)},Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{get:function(){return s.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.startTranscribingAsync=function(e,t){this.privRecognizer.startContinuousRecognitionAsync(e,t)},e.prototype.stopTranscribingAsync=function(e,t){this.privRecognizer.stopContinuousRecognitionAsync(e,t)},e.prototype.leaveConversationAsync=function(e,t){var n=this;this.privRecognizer.disconnectCallbacks(),a.marshalPromiseToCallbacks(r(n,void 0,void 0,function(){return i(this,function(e){return[2]})}),e,t)},e.prototype.close=function(e,t){s.Contracts.throwIfDisposed(this.privDisposedRecognizer),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.privDisposedRecognizer?[2]:this.privRecognizer?[4,this.privRecognizer.close()]:[3,2];case 1:t.sent(),this.privRecognizer=void 0,t.label=2;case 2:return e&&(this.privDisposedRecognizer=!0),[2]}})})},e}();t.ConversationTranscriber=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Participant=t.User=void 0;var r=n(61),i=function(){function e(e){this.privUserId=e}return Object.defineProperty(e.prototype,"userId",{get:function(){return this.privUserId},enumerable:!1,configurable:!0}),e}();t.User=i;var o=function(){function e(e,t,n,i,o,a,s,c){this.privId=e,this.privAvatar=t,this.privDisplayName=n,this.privIsHost=i,this.privIsMuted=o,this.privIsUsingTts=a,this.privPreferredLanguage=s,this.privVoice=c,this.privProperties=new r.PropertyCollection}return e.From=function(t,n,r){return new e(t,"",t,!1,!1,!1,n,r)},Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privAvatar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return this.privDisplayName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preferredLanguage",{get:function(){return this.privPreferredLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this.privIsHost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsingTts",{get:function(){return this.privIsUsingTts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"voice",{get:function(){return this.privVoice},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.Participant=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantChangedReason=void 0,function(e){e[e.JoinedConversation=0]="JoinedConversation",e[e.LeftConversation=1]="LeftConversation",e[e.Updated=2]="Updated"}(t.ParticipantChangedReason||(t.ParticipantChangedReason={}))},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisRequest=t.SpeechSynthesizer=void 0;var o=n(53),a=n(4),s=n(64),c=n(74),u=n(73),p=n(63),l=n(61),d=function(){function e(e,t){var n=e;p.Contracts.throwIfNull(n,"speechConfig"),null!==t&&(this.audioConfig=void 0===t?"undefined"==typeof window?void 0:l.AudioConfig.fromDefaultSpeakerOutput():t),this.privProperties=n.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.privConnectionFactory=new o.SpeechSynthesisConnectionFactory,this.synthesisRequestQueue=new a.Queue,this.implCommonSynthesizeSetup()}return Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){p.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(l.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguage",{get:function(){return this.properties.getProperty(l.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===o.AutoDetectSourceLanguagesOpenRangeOptionName},enumerable:!1,configurable:!0}),e.FromConfig=function(t,n,r){var i=t;return n.properties.mergeTo(i.properties),new e(t,r)},e.prototype.buildSsml=function(t){var n,r=((n={})["af-ZA"]="af-ZA-AdriNeural",n["am-ET"]="am-ET-AmehaNeural",n["ar-AE"]="ar-AE-FatimaNeural",n["ar-BH"]="ar-BH-AliNeural",n["ar-DZ"]="ar-DZ-AminaNeural",n["ar-EG"]="ar-EG-SalmaNeural",n["ar-IQ"]="ar-IQ-BasselNeural",n["ar-JO"]="ar-JO-SanaNeural",n["ar-KW"]="ar-KW-FahedNeural",n["ar-LY"]="ar-LY-ImanNeural",n["ar-MA"]="ar-MA-JamalNeural",n["ar-QA"]="ar-QA-AmalNeural",n["ar-SA"]="ar-SA-HamedNeural",n["ar-SY"]="ar-SY-AmanyNeural",n["ar-TN"]="ar-TN-HediNeural",n["ar-YE"]="ar-YE-MaryamNeural",n["bg-BG"]="bg-BG-BorislavNeural",n["bn-BD"]="bn-BD-NabanitaNeural",n["ca-ES"]="ca-ES-JoanaNeural",n["cs-CZ"]="cs-CZ-AntoninNeural",n["cy-GB"]="cy-GB-AledNeural",n["da-DK"]="da-DK-ChristelNeural",n["de-AT"]="de-AT-IngridNeural",n["de-CH"]="de-CH-JanNeural",n["de-DE"]="de-DE-KatjaNeural",n["el-GR"]="el-GR-AthinaNeural",n["en-AU"]="en-AU-NatashaNeural",n["en-CA"]="en-CA-ClaraNeural",n["en-GB"]="en-GB-LibbyNeural",n["en-HK"]="en-HK-SamNeural",n["en-IE"]="en-IE-ConnorNeural",n["en-IN"]="en-IN-NeerjaNeural",n["en-KE"]="en-KE-AsiliaNeural",n["en-NG"]="en-NG-AbeoNeural",n["en-NZ"]="en-NZ-MitchellNeural",n["en-PH"]="en-PH-JamesNeural",n["en-SG"]="en-SG-LunaNeural",n["en-TZ"]="en-TZ-ElimuNeural",n["en-US"]="en-US-JennyNeural",n["en-ZA"]="en-ZA-LeahNeural",n["es-AR"]="es-AR-ElenaNeural",n["es-BO"]="es-BO-MarceloNeural",n["es-CL"]="es-CL-CatalinaNeural",n["es-CO"]="es-CO-GonzaloNeural",n["es-CR"]="es-CR-JuanNeural",n["es-CU"]="es-CU-BelkysNeural",n["es-DO"]="es-DO-EmilioNeural",n["es-EC"]="es-EC-AndreaNeural",n["es-ES"]="es-ES-AlvaroNeural",n["es-GQ"]="es-GQ-JavierNeural",n["es-GT"]="es-GT-AndresNeural",n["es-HN"]="es-HN-CarlosNeural",n["es-MX"]="es-MX-DaliaNeural",n["es-NI"]="es-NI-FedericoNeural",n["es-PA"]="es-PA-MargaritaNeural",n["es-PE"]="es-PE-AlexNeural",n["es-PR"]="es-PR-KarinaNeural",n["es-PY"]="es-PY-MarioNeural",n["es-SV"]="es-SV-LorenaNeural",n["es-US"]="es-US-AlonsoNeural",n["es-UY"]="es-UY-MateoNeural",n["es-VE"]="es-VE-PaolaNeural",n["et-EE"]="et-EE-AnuNeural",n["fa-IR"]="fa-IR-DilaraNeural",n["fi-FI"]="fi-FI-SelmaNeural",n["fil-PH"]="fil-PH-AngeloNeural",n["fr-BE"]="fr-BE-CharlineNeural",n["fr-CA"]="fr-CA-SylvieNeural",n["fr-CH"]="fr-CH-ArianeNeural",n["fr-FR"]="fr-FR-DeniseNeural",n["ga-IE"]="ga-IE-ColmNeural",n["gl-ES"]="gl-ES-RoiNeural",n["gu-IN"]="gu-IN-DhwaniNeural",n["he-IL"]="he-IL-AvriNeural",n["hi-IN"]="hi-IN-MadhurNeural",n["hr-HR"]="hr-HR-GabrijelaNeural",n["hu-HU"]="hu-HU-NoemiNeural",n["id-ID"]="id-ID-ArdiNeural",n["it-IT"]="it-IT-IsabellaNeural",n["ja-JP"]="ja-JP-NanamiNeural",n["jv-ID"]="jv-ID-DimasNeural",n["km-KH"]="km-KH-PisethNeural",n["ko-KR"]="ko-KR-SunHiNeural",n["lt-LT"]="lt-LT-LeonasNeural",n["lv-LV"]="lv-LV-EveritaNeural",n["mr-IN"]="mr-IN-AarohiNeural",n["ms-MY"]="ms-MY-OsmanNeural",n["mt-MT"]="mt-MT-GraceNeural",n["my-MM"]="my-MM-NilarNeural",n["nb-NO"]="nb-NO-PernilleNeural",n["nl-BE"]="nl-BE-ArnaudNeural",n["nl-NL"]="nl-NL-ColetteNeural",n["pl-PL"]="pl-PL-AgnieszkaNeural",n["pt-BR"]="pt-BR-FranciscaNeural",n["pt-PT"]="pt-PT-DuarteNeural",n["ro-RO"]="ro-RO-AlinaNeural",n["ru-RU"]="ru-RU-SvetlanaNeural",n["sk-SK"]="sk-SK-LukasNeural",n["sl-SI"]="sl-SI-PetraNeural",n["so-SO"]="so-SO-MuuseNeural",n["su-ID"]="su-ID-JajangNeural",n["sv-SE"]="sv-SE-SofieNeural",n["sw-KE"]="sw-KE-RafikiNeural",n["sw-TZ"]="sw-TZ-DaudiNeural",n["ta-IN"]="ta-IN-PallaviNeural",n["ta-LK"]="ta-LK-KumarNeural",n["ta-SG"]="ta-SG-AnbuNeural",n["te-IN"]="te-IN-MohanNeural",n["th-TH"]="th-TH-PremwadeeNeural",n["tr-TR"]="tr-TR-AhmetNeural",n["uk-UA"]="uk-UA-OstapNeural",n["ur-IN"]="ur-IN-GulNeural",n["ur-PK"]="ur-PK-AsadNeural",n["uz-UZ"]="uz-UZ-MadinaNeural",n["vi-VN"]="vi-VN-HoaiMyNeural",n["zh-CN"]="zh-CN-XiaoxiaoNeural",n["zh-HK"]="zh-HK-HiuMaanNeural",n["zh-TW"]="zh-TW-HsiaoChenNeural",n["zu-ZA"]="zu-ZA-ThandoNeural",n),i=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),o=this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthVoice,""),a=e.XMLEncode(t);return this.autoDetectSourceLanguage?i="en-US":o=o||r[i],o&&(a="<voice name='"+o+"'>"+a+"</voice>"),"<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='"+i+"'>"+a+"</speak>"},e.prototype.speakTextAsync=function(e,t,n,r){this.speakImpl(e,!1,t,n,r)},e.prototype.speakSsmlAsync=function(e,t,n,r){this.speakImpl(e,!0,t,n,r)},e.prototype.close=function(e,t){p.Contracts.throwIfDisposed(this.privDisposed),a.marshalPromiseToCallbacks(this.dispose(!0),e,t)},Object.defineProperty(e.prototype,"internalData",{get:function(){return this.privAdapter},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.privDisposed?[2]:e&&this.privAdapter?[4,this.privAdapter.dispose()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.privDisposed=!0,[2]}})})},e.prototype.createSynthesizerConfig=function(e){return new o.SynthesizerConfig(e,this.privProperties)},e.prototype.createSynthesisAdapter=function(e,t,n,r){return new o.SynthesisAdapterBase(e,t,r,this,this.audioConfig)},e.prototype.implCommonSynthesizeSetup=function(){var e=this,t="undefined"!=typeof window?"Browser":"Node",n="unknown",r="unknown";"undefined"!=typeof navigator&&(t=t+"/"+navigator.platform,n=navigator.userAgent,r=navigator.appVersion);var i=this.createSynthesizerConfig(new o.SpeechServiceConfig(new o.Context(new o.OS(t,n,r)))),a=this.privProperties.getProperty(l.PropertyId.SpeechServiceConnection_Key,void 0),s=a&&""!==a?new o.CognitiveSubscriptionKeyAuthentication(a):new o.CognitiveTokenAuthentication(function(t){var n=e.privProperties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)},function(t){var n=e.privProperties.getProperty(l.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(n)});this.privAdapter=this.createSynthesisAdapter(s,this.privConnectionFactory,this.audioConfig,i),this.privAdapter.audioOutputFormat=c.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(l.SpeechSynthesisOutputFormat[this.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])},e.prototype.speakImpl=function(e,t,n,r,i){var o=this;try{p.Contracts.throwIfDisposed(this.privDisposed);var c=a.createNoDashGuid(),d=void 0;d=i instanceof l.PushAudioOutputStreamCallback?new u.PushAudioOutputStreamImpl(i):i instanceof l.PullAudioOutputStream?i:void 0!==i?new s.AudioFileWriter(i):void 0,this.synthesisRequestQueue.enqueue(new f(c,e,t,function(e){if(o.privSynthesizing=!1,n)try{n(e)}catch(e){r&&r(e)}n=void 0,o.adapterSpeak().catch(function(){})},function(e){r&&r(e)},d)),this.adapterSpeak().catch(function(){})}catch(e){if(r)if(e instanceof Error){var m=e;r(m.name+": "+m.message)}else r(e);this.dispose(!0).catch(function(){})}},e.prototype.adapterSpeak=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.privDisposed||this.privSynthesizing?[3,2]:(this.privSynthesizing=!0,[4,this.synthesisRequestQueue.dequeue()]);case 1:return e=t.sent(),[2,this.privAdapter.Speak(e.text,e.isSSML,e.requestId,e.cb,e.err,e.dataStream)];case 2:return[2]}})})},e.XMLEncode=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},e}();t.SpeechSynthesizer=d;var f=function(e,t,n,r,i,o){this.requestId=e,this.text=t,this.isSSML=n,this.cb=r,this.err=i,this.dataStream=o};t.SynthesisRequest=f},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisResult=void 0;var r=function(){function e(e,t,n,r,i){this.privResultId=e,this.privReason=t,this.privAudioData=n,this.privErrorDetails=r,this.privProperties=i}return Object.defineProperty(e.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioData",{get:function(){return this.privAudioData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisResult=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisEventArgs=void 0;var r=function(){function e(e){this.privResult=e}return Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisEventArgs=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisWordBoundaryEventArgs=void 0;var r=function(){function e(e,t,n,r){this.privAudioOffset=e,this.privText=t,this.privWordLength=n,this.privTextOffset=r}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordLength",{get:function(){return this.privWordLength},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textOffset",{get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisWordBoundaryEventArgs=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisBookmarkEventArgs=void 0;var r=function(){function e(e,t){this.privAudioOffset=e,this.privText=t}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisBookmarkEventArgs=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisVisemeEventArgs=void 0;var r=function(){function e(e,t,n){this.privAudioOffset=e,this.privVisemeId=t,this.privAnimation=n}return Object.defineProperty(e.prototype,"audioOffset",{get:function(){return this.privAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visemeId",{get:function(){return this.privVisemeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"animation",{get:function(){return this.privAnimation},enumerable:!1,configurable:!0}),e}();t.SpeechSynthesisVisemeEventArgs=r},function(e,t,n){var r,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerAudioDestination=void 0;var a=n(53),s=n(4),c=n(73),u=n(72),p=((r={})[u.AudioFormatTag.PCM]="audio/wav",r[u.AudioFormatTag.MuLaw]="audio/x-wav",r[u.AudioFormatTag.MP3]="audio/mpeg",r[u.AudioFormatTag.OGG_OPUS]="audio/ogg",r[u.AudioFormatTag.WEBM_OPUS]="audio/webm; codecs=opus",r[u.AudioFormatTag.ALaw]="audio/x-wav",r[u.AudioFormatTag.FLAC]="audio/flac",r),l=function(){function e(e){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=e||s.createNoDashGuid(),this.privIsPaused=!1,this.privIsClosed=!1}return e.prototype.id=function(){return this.privId},e.prototype.write=function(e,t,n){void 0!==this.privAudioBuffer?(this.privAudioBuffer.push(e),this.updateSourceBuffer().then(function(){t&&t()},function(e){n&&n(e)})):void 0!==this.privAudioOutputStream&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength)},e.prototype.close=function(e,t){var n=this;if(this.privIsClosed=!0,void 0!==this.privSourceBuffer)this.handleSourceBufferUpdateEnd().then(function(){e&&e()},function(e){t&&t(e)});else if(void 0!==this.privAudioOutputStream)if(this.privFormat.formatTag!==u.AudioFormatTag.PCM&&this.privFormat.formatTag!==u.AudioFormatTag.MuLaw&&this.privFormat.formatTag!==u.AudioFormatTag.ALaw||!1!==this.privFormat.hasHeader){var r=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(r).then(function(i){r=a.SynthesisAdapterBase.addHeader(r,n.privFormat);var o=new Blob([r],{type:p[n.privFormat.formatTag]});n.privAudio.src=window.URL.createObjectURL(o),n.notifyPlayback().then(function(){e&&e()},function(e){t&&t(e)})},function(e){t&&t(e)})}else console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else this.onAudioEnd&&this.onAudioEnd(this)},Object.defineProperty(e.prototype,"format",{set:function(e){var t=this;if("undefined"!=typeof AudioContext||void 0!==window.webkitAudioContext){this.privFormat=e;var n=p[this.privFormat.formatTag];void 0===n?console.warn("Unknown mimeType for format "+u.AudioFormatTag[this.privFormat.formatTag]+"; playback is not supported."):"undefined"!=typeof MediaSource&&MediaSource.isTypeSupported(n)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=function(e){t.privMediaSourceOpened=!0,t.privMediaSource.duration=1800,t.privSourceBuffer=t.privMediaSource.addSourceBuffer(n),t.privSourceBuffer.onupdate=function(e){t.updateSourceBuffer().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})},t.privSourceBuffer.onupdateend=function(e){t.handleSourceBufferUpdateEnd().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})},t.privSourceBuffer.onupdatestart=function(e){t.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})):(console.warn("Format "+u.AudioFormatTag[this.privFormat.formatTag]+" could not be played by MSE, streaming playback is not enabled."),this.privAudioOutputStream=new c.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsClosed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return void 0!==this.privAudio?this.privAudio.currentTime:-1},enumerable:!1,configurable:!0}),e.prototype.pause=function(){this.privIsPaused||void 0===this.privAudio||(this.privAudio.pause(),this.privIsPaused=!0)},e.prototype.resume=function(e,t){this.privIsPaused&&void 0!==this.privAudio&&(this.privAudio.play().then(function(){e&&e()},function(e){t&&t(e)}),this.privIsPaused=!1)},Object.defineProperty(e.prototype,"internalAudio",{get:function(){return this.privAudio},enumerable:!1,configurable:!0}),e.prototype.updateSourceBuffer=function(){return i(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(!(void 0!==this.privAudioBuffer&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()))return[3,2];this.privAppendingToBuffer=!0,e=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(e)}catch(t){return this.privAudioBuffer.unshift(e),console.log("buffer filled, pausing addition of binaries until space is made"),[2]}return[4,this.notifyPlayback()];case 1:return t.sent(),[3,4];case 2:return this.canEndStream()?[4,this.handleSourceBufferUpdateEnd()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.handleSourceBufferUpdateEnd=function(){return i(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.canEndStream()&&this.sourceBufferAvailable()?(this.privMediaSource.endOfStream(),[4,this.notifyPlayback()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.notifyPlayback=function(){return i(this,void 0,void 0,function(){var e=this;return o(this,function(t){switch(t.label){case 0:return this.privPlaybackStarted||void 0===this.privAudio?[3,2]:(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=function(){e.onAudioEnd&&e.onAudioEnd(e)},this.privIsPaused?[3,2]:[4,this.privAudio.play()]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.canEndStream=function(){return this.isClosed&&void 0!==this.privSourceBuffer&&0===this.privAudioBuffer.length&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&"open"===this.privMediaSource.readyState},e.prototype.sourceBufferAvailable=function(){return void 0!==this.privSourceBuffer&&!this.privSourceBuffer.updating},e}();t.SpeakerAudioDestination=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranscriptionCanceledEventArgs=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(n(90).CancellationEventArgsBase);t.ConversationTranscriptionCanceledEventArgs=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGradingSystem=void 0,function(e){e[e.FivePoint=1]="FivePoint",e[e.HundredMark=2]="HundredMark"}(t.PronunciationAssessmentGradingSystem||(t.PronunciationAssessmentGradingSystem={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentGranularity=void 0,function(e){e[e.Phoneme=1]="Phoneme",e[e.Word=2]="Word",e[e.FullText=3]="FullText"}(t.PronunciationAssessmentGranularity||(t.PronunciationAssessmentGranularity={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentConfig=void 0;var r=n(63),i=n(61),o=function(){function e(e,t,n,o){void 0===t&&(t=i.PronunciationAssessmentGradingSystem.FivePoint),void 0===n&&(n=i.PronunciationAssessmentGranularity.Phoneme),void 0===o&&(o=!1),r.Contracts.throwIfNullOrUndefined(e,"referenceText"),this.privProperties=new i.PropertyCollection,this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_GradingSystem,i.PronunciationAssessmentGradingSystem[t]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Granularity,i.PronunciationAssessmentGranularity[n]),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}return e.fromJSON=function(t){r.Contracts.throwIfNullOrUndefined(t,"json");var n=new e("");return n.privProperties=new i.PropertyCollection,n.properties.setProperty(i.PropertyId.PronunciationAssessment_Json,t),n},e.prototype.toJSON=function(){return this.updateJson(),this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Params)},e.prototype.applyTo=function(e){this.updateJson(),e.internalData.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(i.PropertyId.PronunciationAssessment_Params))},Object.defineProperty(e.prototype,"referenceText",{get:function(){return this.properties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText)},set:function(e){r.Contracts.throwIfNullOrWhitespace(e,"referenceText"),this.properties.setProperty(i.PropertyId.PronunciationAssessment_ReferenceText,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),e.prototype.updateJson=function(){var e=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Json,"{}"),t=JSON.parse(e),n=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_ReferenceText);n&&(t.referenceText=n);var r=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_GradingSystem);r&&(t.gradingSystem=r);var o=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_Granularity);o&&(t.granularity=o),t.dimension="Comprehensive";var a=this.privProperties.getProperty(i.PropertyId.PronunciationAssessment_EnableMiscue);"true"===a?t.enableMiscue=!0:"false"===a&&(t.enableMiscue=!1),this.privProperties.setProperty(i.PropertyId.PronunciationAssessment_Params,JSON.stringify(t))},e}();t.PronunciationAssessmentConfig=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PronunciationAssessmentResult=void 0;var r=n(63),i=n(61),o=function(){function e(e){var t=JSON.parse(e);r.Contracts.throwIfNullOrUndefined(t.NBest[0],"NBest"),this.privPronJson=t.NBest[0]}return e.fromResult=function(t){r.Contracts.throwIfNullOrUndefined(t,"result");var n=t.properties.getProperty(i.PropertyId.SpeechServiceResponse_JsonResult);return r.Contracts.throwIfNullOrUndefined(n,"json"),new e(n)},Object.defineProperty(e.prototype,"detailResult",{get:function(){return this.privPronJson},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"accuracyScore",{get:function(){return this.detailResult.PronunciationAssessment.AccuracyScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pronunciationScore",{get:function(){return this.detailResult.PronunciationAssessment.PronScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completenessScore",{get:function(){return this.detailResult.PronunciationAssessment.CompletenessScore},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fluencyScore",{get:function(){return this.detailResult.PronunciationAssessment.FluencyScore},enumerable:!1,configurable:!0}),e}();t.PronunciationAssessmentResult=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionEndedEvent=t.RecognitionCompletionStatus=t.RecognitionStartedEvent=t.ConnectingToServiceEvent=t.ListeningStartedEvent=t.RecognitionTriggeredEvent=t.SpeechRecognitionEvent=void 0;var o=n(4),a=function(e){function t(t,n,r,i){void 0===i&&(i=o.EventType.Info);var a=e.call(this,t,i)||this;return a.privRequestId=n,a.privSessionId=r,a}return i(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.SpeechRecognitionEvent=a;var s=function(e){function t(t,n,r,i){var o=e.call(this,"RecognitionTriggeredEvent",t,n)||this;return o.privAudioSourceId=r,o.privAudioNodeId=i,o}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(a);t.RecognitionTriggeredEvent=s;var c=function(e){function t(t,n,r,i){var o=e.call(this,"ListeningStartedEvent",t,n)||this;return o.privAudioSourceId=r,o.privAudioNodeId=i,o}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),t}(a);t.ListeningStartedEvent=c;var u=function(e){function t(t,n,r){var i=e.call(this,"ConnectingToServiceEvent",t,r)||this;return i.privAuthFetchEventid=n,i}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventid",{get:function(){return this.privAuthFetchEventid},enumerable:!1,configurable:!0}),t}(a);t.ConnectingToServiceEvent=u;var p,l=function(e){function t(t,n,r,i,o){var a=e.call(this,"RecognitionStartedEvent",t,o)||this;return a.privAudioSourceId=n,a.privAudioNodeId=r,a.privAuthFetchEventId=i,a}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(a);t.RecognitionStartedEvent=l,function(e){e[e.Success=0]="Success",e[e.AudioSourceError=1]="AudioSourceError",e[e.AudioSourceTimeout=2]="AudioSourceTimeout",e[e.AuthTokenFetchError=3]="AuthTokenFetchError",e[e.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",e[e.UnAuthorized=5]="UnAuthorized",e[e.ConnectTimeout=6]="ConnectTimeout",e[e.ConnectError=7]="ConnectError",e[e.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",e[e.UnknownError=9]="UnknownError"}(p=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}));var d=function(e){function t(t,n,r,i,a,s,c,u){var l=e.call(this,"RecognitionEndedEvent",t,a,c===p.Success?o.EventType.Info:o.EventType.Error)||this;return l.privAudioSourceId=n,l.privAudioNodeId=r,l.privAuthFetchEventId=i,l.privStatus=c,l.privError=u,l.privServiceTag=s,l}return i(t,e),Object.defineProperty(t.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serviceTag",{get:function(){return this.privServiceTag},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.privStatus},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"error",{get:function(){return this.privError},enumerable:!1,configurable:!0}),t}(a);t.RecognitionEndedEvent=d},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceRecognizerBase=void 0;var o=n(2),a=n(4),s=n(61),c=n(53),u=n(170),p=function(){function e(t,n,o,p,l){var d=this;if(this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.recognizeOverride=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendSpeechContext=function(e){var t=d.speechContext.toJSON();if(d.privRequestSession.onSpeechContext(),t)return e.send(new u.SpeechConnectionMessage(a.MessageType.Text,"speech.context",d.privRequestSession.requestId,"application/json",t))},this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSpeechServiceConfig=function(t,n,r){if(!0!==e.telemetryDataEnabled){var i={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(i)}if("true"===d.privRecognizerConfig.parameters.getProperty("TranscriptionService_SingleChannel","false").toLowerCase()){var o=JSON.parse(r);o.context.DisableReferenceChannel="True",o.context.MicSpec="1_0_0",r=JSON.stringify(o)}if(r)return t.send(new u.SpeechConnectionMessage(a.MessageType.Text,"speech.config",n.requestId,"application/json",r))},!t)throw new a.ArgumentNullError("authentication");if(!n)throw new a.ArgumentNullError("connectionFactory");if(!o)throw new a.ArgumentNullError("audioSource");if(!p)throw new a.ArgumentNullError("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=t,this.privConnectionFactory=n,this.privAudioSource=o,this.privRecognizerConfig=p,this.privIsDisposed=!1,this.privRecognizer=l,this.privRequestSession=new c.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new a.EventSource,this.privServiceEvents=new a.EventSource,this.privDynamicGrammar=new c.DynamicGrammarBuilder,this.privSpeechContext=new c.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new c.AgentConfig,"undefined"!=typeof Blob&&"undefined"!=typeof Worker&&(this.privSetTimeout=a.Timeout.setTimeout),this.connectionEvents.attach(function(e){return r(d,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return"ConnectionClosedEvent"!==e.name?[3,2]:1003===(t=e).statusCode||1007===t.statusCode||1002===t.statusCode||4e3===t.statusCode||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount?[4,this.cancelRecognitionLocal(s.CancellationReason.Error,1007===t.statusCode?s.CancellationErrorCode.BadRequestParameters:s.CancellationErrorCode.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})})}return Object.defineProperty(e.prototype,"audioSource",{get:function(){return this.privAudioSource},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"speechContext",{get:function(){return this.privSpeechContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicGrammar",{get:function(){return this.privDynamicGrammar},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"conversationTranslatorToken",{set:function(e){this.privRecognizerConfig.parameters.setProperty(s.PropertyId.ConversationTranslator_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authentication",{set:function(e){this.privAuthentication=this.authentication},enumerable:!1,configurable:!0}),e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:if(this.privIsDisposed=!0,!this.privConnectionConfigurationPromise)return[3,5];t.label=1;case 1:return t.trys.push([1,4,,5]),[4,this.privConnectionConfigurationPromise];case 2:return[4,t.sent().dispose(e)];case 3:return t.sent(),[3,5];case 4:return t.sent(),[2];case 5:return[2]}})})},Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognizerConfig.recognitionMode},enumerable:!1,configurable:!0}),e.prototype.recognize=function(e,t,n){return r(this,void 0,void 0,function(){var a,u,p,l,d,f,m,h,v=this;return i(this,function(g){switch(g.label){case 0:if(void 0!==this.recognizeOverride)return[2,this.recognizeOverride(e,t,n)];this.privConnectionConfigurationPromise=null,this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events),a=this.connectImpl(),g.label=1;case 1:return g.trys.push([1,6,,8]),[4,this.audioSource.attach(this.privRequestSession.audioNodeId)];case 2:return p=g.sent(),[4,this.audioSource.format];case 3:return l=g.sent(),[4,this.audioSource.deviceInfo];case 4:return d=g.sent(),this.privIsLiveAudio=d.type&&d.type===c.type.Microphones,u=new o.ReplayableAudioNode(p,l.avgBytesPerSec),[4,this.privRequestSession.onAudioSourceAttachCompleted(u,!1)];case 5:return g.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d},[3,8];case 6:return f=g.sent(),[4,this.privRequestSession.onStopRecognizing()];case 7:throw g.sent(),f;case 8:return g.trys.push([8,10,,12]),[4,a];case 9:return g.sent(),[3,12];case 10:return m=g.sent(),[4,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.ConnectionFailure,m)];case 11:return g.sent(),[2];case 12:return h=new s.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,h),this.receiveMessage(),this.sendAudio(u).catch(function(e){return r(v,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2]}})})}),[2]}})})},e.prototype.stopRecognizing=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(!this.privRequestSession.isRecognizing)return[3,8];e.label=1;case 1:return e.trys.push([1,,6,8]),[4,this.audioSource.turnOff()];case 2:return e.sent(),[4,this.sendFinalAudio()];case 3:return e.sent(),[4,this.privRequestSession.onStopRecognizing()];case 4:return e.sent(),[4,this.privRequestSession.turnCompletionPromise];case 5:return e.sent(),[3,8];case 6:return[4,this.privRequestSession.dispose()];case 7:return e.sent(),[7];case 8:return[2]}})})},e.prototype.connect=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.connectImpl()];case 1:return e.sent(),[2,Promise.resolve()]}})})},e.prototype.connectAsync=function(e,t){this.connectImpl().then(function(n){try{e&&e()}catch(e){t&&t(e)}},function(e){try{t&&t(e)}catch(e){}})},e.prototype.disconnect=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.cancelRecognitionLocal(s.CancellationReason.Error,s.CancellationErrorCode.NoError,"Disconnecting")];case 1:return e.sent(),void 0===this.disconnectOverride?[3,3]:[4,this.disconnectOverride()];case 2:e.sent(),e.label=3;case 3:return e.trys.push([3,6,,7]),[4,this.privConnectionPromise];case 4:return[4,e.sent().dispose()];case 5:return e.sent(),[3,7];case 6:return e.sent(),[3,7];case 7:return this.privConnectionPromise=null,[2]}})})},e.prototype.sendMessage=function(e){},e.prototype.sendNetworkMessage=function(e,t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return n="string"==typeof t?a.MessageType.Text:a.MessageType.Binary,r="string"==typeof t?"application/json":"",[4,this.fetchConnection()];case 1:return[2,i.sent().send(new u.SpeechConnectionMessage(n,e,this.privRequestSession.requestId,r,t))]}})})},Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),e.prototype.sendTelemetryData=function(){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:if(t=this.privRequestSession.getTelemetry(),!0!==e.telemetryDataEnabled||this.privIsDisposed||null===t)return[2];if(e.telemetryData)try{e.telemetryData(t)}catch(e){}return[4,this.fetchConnection()];case 1:return[4,n.sent().send(new u.SpeechConnectionMessage(a.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",t))];case 2:return n.sent(),[2]}})})},e.prototype.cancelRecognitionLocal=function(e,t,n){return r(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return this.privRequestSession.isRecognizing?[4,this.privRequestSession.onStopRecognizing()]:[3,2];case 1:r.sent(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,e,t,n),r.label=2;case 2:return[2]}})})},e.prototype.receiveMessage=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o,p,l,d,f;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,18,,19]),this.privIsDisposed?[2]:[4,this.fetchConnection()];case 1:return[4,(e=i.sent()).read()];case 2:if(t=i.sent(),void 0!==this.receiveMessageOverride)return[2,this.receiveMessageOverride()];if(!t)return this.privRequestSession.isRecognizing?[2,this.receiveMessage()]:[2];if(this.privServiceHasSentMessage=!0,(n=u.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privRequestSession.requestId.toLowerCase())return[3,17];switch(n.path.toLowerCase()){case"turn.start":return[3,3];case"speech.startdetected":return[3,4];case"speech.enddetected":return[3,5];case"turn.end":return[3,6]}return[3,15];case 3:return this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse(),[3,17];case 4:return r=c.SpeechDetected.fromJSON(n.textBody),o=new s.RecognitionEventArgs(r.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,o),[3,17];case 5:return p=void 0,p=n.textBody.length>0?n.textBody:"{ Offset: 0 }",l=c.SpeechDetected.fromJSON(p),this.privRecognizerConfig.isContinuousRecognition&&this.privRequestSession.onServiceRecognized(l.Offset+this.privRequestSession.currentTurnAudioOffset),d=new s.RecognitionEventArgs(l.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,d),[3,17];case 6:return[4,this.sendTelemetryData()];case 7:return i.sent(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream?(this.privMustReportEndOfStream=!1,[4,this.cancelRecognitionLocal(s.CancellationReason.EndOfStream,s.CancellationErrorCode.NoError,void 0)]):[3,9];case 8:i.sent(),i.label=9;case 9:return f=new s.SessionEventArgs(this.privRequestSession.sessionId),[4,this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition)];case 10:return i.sent(),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing?[3,11]:(this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,f),[2]);case 11:return[4,this.fetchConnection()];case 12:return e=i.sent(),[4,this.sendPrePayloadJSON(e)];case 13:i.sent(),i.label=14;case 14:return[3,17];case 15:return[4,this.processTypeSpecificMessages(n)];case 16:i.sent()||this.privServiceEvents&&this.serviceEvents.onEvent(new a.ServiceEvent(n.path.toLowerCase(),n.textBody)),i.label=17;case 17:return[2,this.receiveMessage()];case 18:return i.sent(),[2,null];case 19:return[2]}})})},e.prototype.sendPrePayloadJSON=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return void 0!==this.sendPrePayloadJSONOverride?[2,this.sendPrePayloadJSONOverride(e)]:[4,this.sendSpeechContext(e)];case 1:return t.sent(),[4,this.sendWaveHeader(e)];case 2:return t.sent(),[2]}})})},e.prototype.sendWaveHeader=function(e){return r(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return[4,this.audioSource.format];case 1:return t=n.sent(),[2,e.send(new u.SpeechConnectionMessage(a.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",t.header))]}})})},e.prototype.connectImpl=function(){var e=this;return this.privConnectionPromise?this.privConnectionPromise.then(function(t){return t.state()===a.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()):e.privConnectionPromise},function(t){return e.privConnectionId=null,e.privConnectionPromise=null,e.privServiceHasSentMessage=!1,e.connectImpl()}):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(function(){}),void 0!==this.postConnectImplOverride?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)},e.prototype.fetchConnection=function(){return r(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return this.privConnectionConfigurationPromise?[2,this.privConnectionConfigurationPromise.then(function(t){return t.state()===a.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()):e.privConnectionConfigurationPromise},function(t){return e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()})]:(this.privConnectionConfigurationPromise=this.configureConnection(),[4,this.privConnectionConfigurationPromise]);case 1:return[2,t.sent()]}})})},e.prototype.sendAudio=function(e){return r(this,void 0,void 0,function(){var t,n,o,s,c,p,l=this;return i(this,function(d){switch(d.label){case 0:return[4,this.audioSource.format];case 1:return t=d.sent(),n=Date.now(),o=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),s=t.avgBytesPerSec/1e3*parseInt(o,10),c=this.privRequestSession.recogNumber,[2,(p=function(){return r(l,void 0,void 0,function(){var r,o,l,d,f=this;return i(this,function(i){switch(i.label){case 0:return this.privIsDisposed||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing||this.privRequestSession.recogNumber!==c?[3,5]:[4,this.fetchConnection()];case 1:return r=i.sent(),[4,e.read()];case 2:return o=i.sent(),this.privRequestSession.isSpeechEnded?[2]:(l=void 0,d=void 0,!o||o.isEnd?(l=null,d=0):(l=o.buffer,this.privRequestSession.onAudioSent(l.byteLength),d=s>=this.privRequestSession.bytesSent?0:Math.max(0,n-Date.now())),0===d?[3,4]:[4,this.delay(d)]);case 3:i.sent(),i.label=4;case 4:if(null!==l&&(n=Date.now()+1e3*l.byteLength/(2*t.avgBytesPerSec)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===c){if(r.send(new u.SpeechConnectionMessage(a.MessageType.Binary,"audio",this.privRequestSession.requestId,null,l)).catch(function(){f.privRequestSession.onServiceTurnEndResponse(f.privRecognizerConfig.isContinuousRecognition).catch(function(){})}),!(null==o?void 0:o.isEnd))return[2,p()];this.privIsLiveAudio||this.privRequestSession.onSpeechEnded()}i.label=5;case 5:return[2]}})})})()]}})})},e.prototype.retryableConnect=function(){return r(this,void 0,void 0,function(){var e,t,n,r,o,c,u,p=this;return i(this,function(i){switch(i.label){case 0:e=!1,this.privAuthFetchEventId=a.createNoDashGuid(),t=this.privRequestSession.sessionId,this.privConnectionId=void 0!==t?t:a.createNoDashGuid(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId),n=0,r="",i.label=1;case 1:return this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount?[4,e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId)]:[3,8];case 2:return o=i.sent(),[4,this.privRequestSession.onAuthCompleted(!1)];case 3:return i.sent(),c=this.privConnectionFactory.create(this.privRecognizerConfig,o,this.privConnectionId),this.privRequestSession.listenForServiceTelemetry(c.events),c.events.attach(function(e){p.connectionEvents.onEvent(e)}),[4,c.open()];case 4:return 200!==(u=i.sent()).statusCode?[3,6]:[4,this.privRequestSession.onConnectionEstablishCompleted(u.statusCode)];case 5:return i.sent(),[2,Promise.resolve(c)];case 6:1006===u.statusCode&&(e=!0),i.label=7;case 7:return n=u.statusCode,r=u.reason,this.privRequestSession.onRetryConnection(),[3,1];case 8:return[4,this.privRequestSession.onConnectionEstablishCompleted(n,r)];case 9:return i.sent(),[2,Promise.reject("Unable to contact server. StatusCode: "+n+", "+this.privRecognizerConfig.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+r)]}})})},e.prototype.delay=function(e){var t=this;return new Promise(function(n,r){t.privSetTimeout(n,e)})},e.prototype.writeBufferToConsole=function(e){var t="Buffer Size: ";if(null===e)t+="null";else{var n=new Uint8Array(e);t+=e.byteLength+"\r\n";for(var r=0;r<e.byteLength;r++)t+=n[r].toString(16).padStart(2,"0")+" "}console.info(t)},e.prototype.sendFinalAudio=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.fetchConnection()];case 1:return[4,e.sent().send(new u.SpeechConnectionMessage(a.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))];case 2:return e.sent(),[2]}})})},e.prototype.configureConnection=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.connectImpl()];case 1:return e=t.sent(),void 0!==this.configConnectionOverride?[2,this.configConnectionOverride(e)]:[4,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[4,this.sendPrePayloadJSON(e)];case 3:return t.sent(),[2,e]}})})},e.telemetryDataEnabled=!0,e}();t.ServiceRecognizerBase=p},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionMessage=void 0;var o=n(4),a=n(55),s=function(e){function t(t,n,r,i,s,c,u,p){var l=this;if(!n)throw new o.ArgumentNullError("path");if(!r)throw new o.ArgumentNullError("requestId");var d={};if(d[a.HeaderNames.Path]=n,d[a.HeaderNames.RequestId]=r,d[a.HeaderNames.RequestTimestamp]=(new Date).toISOString(),i&&(d[a.HeaderNames.ContentType]=i),c&&(d[a.HeaderNames.RequestStreamId]=c),u)for(var f in u)f&&(d[f]=u[f]);return(l=p?e.call(this,t,s,d,p)||this:e.call(this,t,s,d)||this).privPath=n,l.privRequestId=r,l.privContentType=i,l.privStreamId=c,l.privAdditionalHeaders=u,l}return i(t,e),Object.defineProperty(t.prototype,"path",{get:function(){return this.privPath},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentType",{get:function(){return this.privContentType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"streamId",{get:function(){return this.privStreamId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"additionalHeaders",{get:function(){return this.privAdditionalHeaders},enumerable:!1,configurable:!0}),t.fromConnectionMessage=function(e){var n=null,r=null,i=null,o=null,s={};if(e.headers)for(var c in e.headers)c&&(c.toLowerCase()===a.HeaderNames.Path.toLowerCase()?n=e.headers[c]:c.toLowerCase()===a.HeaderNames.RequestId.toLowerCase()?r=e.headers[c]:c.toLowerCase()===a.HeaderNames.RequestTimestamp.toLowerCase()?e.headers[c]:c.toLowerCase()===a.HeaderNames.ContentType.toLowerCase()?i=e.headers[c]:c.toLowerCase()===a.HeaderNames.RequestStreamId.toLowerCase()?o=e.headers[c]:s[c]=e.headers[c]);return new t(e.messageType,n,r,i,e.body,o,s,e.id)},t}(o.ConnectionMessage);t.SpeechConnectionMessage=s},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.type=t.connectivity=t.Device=t.OS=t.System=t.Context=t.SpeechServiceConfig=t.RecognizerConfig=t.SpeechResultFormat=t.RecognitionMode=void 0;var r,i=n(61);!function(e){e[e.Interactive=0]="Interactive",e[e.Conversation=1]="Conversation",e[e.Dictation=2]="Dictation"}(r=t.RecognitionMode||(t.RecognitionMode={})),function(e){e[e.Simple=0]="Simple",e[e.Detailed=1]="Detailed"}(t.SpeechResultFormat||(t.SpeechResultFormat={}));var o=function(){function e(e,t){this.privRecognitionMode=r.Interactive,this.privSpeechServiceConfig=e||new a(new s(null)),this.privParameters=t,this.privMaxRetryCount=parseInt(t.getProperty("SPEECH-Error-MaxRetryCount","4"),10)}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognitionMode},set:function(e){this.privRecognitionMode=e,this.privRecognitionActivityTimeout=e===r.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=r[e]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recognitionActivityTimeout",{get:function(){return this.privRecognitionActivityTimeout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isContinuousRecognition",{get:function(){return this.privRecognitionMode!==r.Interactive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoDetectSourceLanguages",{get:function(){return this.parameters.getProperty(i.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxRetryCount",{get:function(){return this.privMaxRetryCount},enumerable:!1,configurable:!0}),e}();t.RecognizerConfig=o;var a=function(){function e(e){var t=this;this.serialize=function(){return JSON.stringify(t,function(e,t){if(t&&"object"==Object(v["a"])(t)){var n={};for(var r in t)Object.hasOwnProperty.call(t,r)&&(n[r&&r.charAt(0).toLowerCase()+r.substring(1)]=t[r]);return n}return t})},this.context=e}return Object.defineProperty(e.prototype,"Context",{get:function(){return this.context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Recognition",{get:function(){return this.recognition},set:function(e){this.recognition=e.toLowerCase()},enumerable:!1,configurable:!0}),e}();t.SpeechServiceConfig=a;var s=function(e){this.system=new c,this.os=e};t.Context=s;var c=function(){this.name="SpeechSDK",this.version="1.19.0",this.build="JavaScript",this.lang="JavaScript"};t.System=c;var u=function(e,t,n){this.platform=e,this.name=t,this.version=n};t.OS=u;var p=function(e,t,n){this.manufacturer=e,this.model=t,this.version=n};t.Device=p,function(e){e.Bluetooth="Bluetooth",e.Wired="Wired",e.WiFi="WiFi",e.Cellular="Cellular",e.InBuilt="InBuilt",e.Unknown="Unknown"}(t.connectivity||(t.connectivity={})),function(e){e.Phone="Phone",e.Speaker="Speaker",e.Car="Car",e.Headset="Headset",e.Thermostat="Thermostat",e.Microphones="Microphones",e.Deskphone="Deskphone",e.RemoteControl="RemoteControl",e.Unknown="Unknown",e.File="File",e.Stream="Stream"}(t.type||(t.type={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageFormatter=void 0;var r=n(4),i=function(){var e=this;this.toConnectionMessage=function(t){var n=new r.Deferred;try{if(t.messageType===r.MessageType.Text){var i=t.textContent,o={},a=null;if(i){var s=i.split("\r\n\r\n");s&&s.length>0&&(o=e.parseHeaders(s[0]),s.length>1&&(a=s[1]))}n.resolve(new r.ConnectionMessage(t.messageType,a,o,t.id))}else if(t.messageType===r.MessageType.Binary){var c=t.binaryContent;if(o={},a=null,!c||c.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");var u=new DataView(c),p=u.getInt16(0);if(c.byteLength<p+2)throw new Error("Invalid binary message format. Header content missing.");for(var l="",d=0;d<p;d++)l+=String.fromCharCode(u.getInt8(d+2));o=e.parseHeaders(l),c.byteLength>p+2&&(a=c.slice(2+p)),n.resolve(new r.ConnectionMessage(t.messageType,a,o,t.id))}}catch(e){n.reject("Error formatting the message. Error: "+e)}return n.promise},this.fromConnectionMessage=function(t){var n=new r.Deferred;try{if(t.messageType===r.MessageType.Text){var i=e.makeHeaders(t)+"\r\n"+(t.textBody?t.textBody:"");n.resolve(new r.RawWebsocketMessage(r.MessageType.Text,i,t.id))}else if(t.messageType===r.MessageType.Binary){var o=e.makeHeaders(t),a=t.binaryBody,s=e.stringToArrayBuffer(o),c=new Int8Array(s),u=c.byteLength,p=new Int8Array(2+u+(a?a.byteLength:0));if(p[0]=u>>8&255,p[1]=255&u,p.set(c,2),a){var l=new Int8Array(a);p.set(l,2+u)}i=p.buffer,n.resolve(new r.RawWebsocketMessage(r.MessageType.Binary,i,t.id))}}catch(e){n.reject("Error formatting the message. "+e)}return n.promise},this.makeHeaders=function(e){var t="";if(e.headers)for(var n in e.headers)n&&(t+=n+": "+e.headers[n]+"\r\n");return t},this.parseHeaders=function(e){var t={};if(e){var n=e.match(/[^\r\n]+/g);if(t)for(var r=0,i=n;r<i.length;r++){var o=i[r];if(o){var a=o.indexOf(":"),s=a>0?o.substr(0,a).trim().toLowerCase():o,c=a>0&&o.length>a+1?o.substr(a+1).trim():"";t[s]=c}}}return t},this.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),n=new DataView(t),r=0;r<e.length;r++)n.setUint8(r,e.charCodeAt(r));return t}};t.WebsocketMessageFormatter=i},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechConnectionFactory=void 0;var o=n(2),a=n(53),s=n(61),c=n(123),u=n(53),p=n(55),l=n(124),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",t.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",t.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",t.create=function(e,n,r){var i=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Endpoint,void 0),d=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Region,void 0),f=c.ConnectionFactoryBase.getHostSuffix(d),m=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_Host,"wss://"+d+".stt.speech"+f),h={},v=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=e.parameters.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?i&&-1!==i.search(l.QueryParameterNames.CustomSpeechDeploymentId)||(h[l.QueryParameterNames.CustomSpeechDeploymentId]=v):g&&(i&&-1!==i.search(l.QueryParameterNames.Language)||(h[l.QueryParameterNames.Language]=g)),i&&-1!==i.search(l.QueryParameterNames.Format)||(h[l.QueryParameterNames.Format]=e.parameters.getProperty(a.OutputFormatPropertyName,s.OutputFormat[s.OutputFormat.Simple]).toLowerCase()),void 0!==e.autoDetectSourceLanguages&&(h[l.QueryParameterNames.EnableLanguageId]="true"),t.setCommonUrlParams(e,h,i),!i)switch(e.recognitionMode){case u.RecognitionMode.Conversation:i="true"===e.parameters.getProperty(a.ForceDictationPropertyName,"false")?m+t.dictationRelativeUri:m+t.conversationRelativeUri;break;case u.RecognitionMode.Dictation:i=m+t.dictationRelativeUri;break;default:i=m+t.interactiveRelativeUri}var y={};void 0!==n.token&&""!==n.token&&(y[n.headerName]=n.token),y[p.HeaderNames.ConnectionId]=r,e.parameters.setProperty(s.PropertyId.SpeechServiceConnection_Url,i);var b="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,h,y,new u.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),b,r)},t}return i(t,e),t}(c.ConnectionFactoryBase);t.SpeechConnectionFactory=d},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberConnectionFactory=void 0;var o=n(2),a=n(61),s=n(123),c=n(53),u=n(55),p=n(124),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multiaudioRelativeUri="/speech/recognition/multiaudio",t.create=function(e,n,r){var i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint,void 0),l=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region,"centralus"),d="wss://transcribe."+l+".cts.speech"+s.ConnectionFactoryBase.getHostSuffix(l)+t.multiaudioRelativeUri,f=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,d),m={},h=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_EndpointId,void 0),v=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);h?i&&-1!==i.search(p.QueryParameterNames.CustomSpeechDeploymentId)||(m[p.QueryParameterNames.CustomSpeechDeploymentId]=h):v&&(i&&-1!==i.search(p.QueryParameterNames.Language)||(m[p.QueryParameterNames.Language]=v)),t.setCommonUrlParams(e,m,i),i||(i=f);var g={};void 0!==n.token&&""!==n.token&&(g[n.headerName]=n.token),g[u.HeaderNames.ConnectionId]=r,e.parameters.setProperty(a.PropertyId.SpeechServiceConnection_Url,i);var y="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,m,g,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),y,r)},t}return i(t,e),t}(s.ConnectionFactoryBase);t.TranscriberConnectionFactory=l},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationConnectionFactory=void 0;var o=n(2),a=n(61),s=n(123),c=n(53),u=n(55),p=n(124),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.create=function(e,n,r){var i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!i){var l=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region,void 0),d=s.ConnectionFactoryBase.getHostSuffix(l);i=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"wss://"+l+".s2s.speech"+d)+"/speech/translation/cognitiveservices/v1"}var f={from:e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages)};t.setCommonUrlParams(e,f,i),t.setUrlParameter(a.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,p.QueryParameterNames.StableTranslation,e,f,i),void 0!==e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(f.voice=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),f.features="texttospeech");var m={};void 0!==n.token&&""!==n.token&&(m[n.headerName]=n.token),m[u.HeaderNames.ConnectionId]=r,e.parameters.setProperty(a.PropertyId.SpeechServiceConnection_Url,i);var h="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(i,f,m,new c.WebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),h,r)},t}return i(t,e),t}(s.ConnectionFactoryBase);t.TranslationConnectionFactory=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechSynthesisConnectionFactory=void 0;var r=n(2),i=n(61),o=n(123),a=n(53),s=n(55),c=n(124),u=function(){var e=this;this.synthesisUri="/cognitiveservices/websocket/v1",this.create=function(t,n,u){var p=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Endpoint,void 0),l=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Region,void 0),d=o.ConnectionFactoryBase.getHostSuffix(l),f=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,void 0),m=void 0===f?"tts":"voice",h=t.parameters.getProperty(i.PropertyId.SpeechServiceConnection_Host,"wss://"+l+"."+m+".speech"+d);p||(p=h+e.synthesisUri);var v={};void 0!==n.token&&""!==n.token&&(v[n.headerName]=n.token),v[s.HeaderNames.ConnectionId]=u,void 0!==f&&(v[c.QueryParameterNames.CustomVoiceDeploymentId]=f),t.parameters.setProperty(i.PropertyId.SpeechServiceConnection_Url,p);var g="true"===t.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new r.WebsocketConnection(p,{},v,new a.WebsocketMessageFormatter,r.ProxyInfo.fromParameters(t.parameters),g,u)}};t.SpeechSynthesisConnectionFactory=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EnumTranslation=void 0;var r=n(61),i=n(53),o=function(){function e(){}return e.implTranslateRecognitionResult=function(e){var t=r.ResultReason.Canceled;switch(e){case i.RecognitionStatus.Success:t=r.ResultReason.RecognizedSpeech;break;case i.RecognitionStatus.NoMatch:case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.EndOfDictation:t=r.ResultReason.NoMatch;break;case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:t=r.ResultReason.Canceled}return t},e.implTranslateCancelResult=function(e){var t=r.CancellationReason.EndOfStream;switch(e){case i.RecognitionStatus.Success:case i.RecognitionStatus.EndOfDictation:case i.RecognitionStatus.NoMatch:t=r.CancellationReason.EndOfStream;break;case i.RecognitionStatus.InitialSilenceTimeout:case i.RecognitionStatus.BabbleTimeout:case i.RecognitionStatus.Error:case i.RecognitionStatus.BadRequest:case i.RecognitionStatus.Forbidden:default:t=r.CancellationReason.Error}return t},e.implTranslateCancelErrorCode=function(e){var t=r.CancellationErrorCode.NoError;switch(e){case i.RecognitionStatus.Error:t=r.CancellationErrorCode.ServiceError;break;case i.RecognitionStatus.TooManyRequests:t=r.CancellationErrorCode.TooManyRequests;break;case i.RecognitionStatus.BadRequest:t=r.CancellationErrorCode.BadRequestParameters;break;case i.RecognitionStatus.Forbidden:t=r.CancellationErrorCode.Forbidden;break;default:t=r.CancellationErrorCode.NoError}return t},e.implTranslateErrorDetails=function(e){var t="The speech service encountered an internal error and could not continue.";switch(e){case r.CancellationErrorCode.Forbidden:t="The recognizer is using a free subscription that ran out of quota.";break;case r.CancellationErrorCode.BadRequestParameters:t="Invalid parameter or unsupported audio format in the request.";break;case r.CancellationErrorCode.TooManyRequests:t="The number of parallel requests exceeded the number of allowed concurrent transcriptions."}return t},e}();t.EnumTranslation=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RecognitionStatus=t.SynthesisStatus=void 0,function(e){e[e.Success=0]="Success",e[e.SynthesisEnd=1]="SynthesisEnd",e[e.Error=2]="Error"}(t.SynthesisStatus||(t.SynthesisStatus={})),function(e){e[e.Success=0]="Success",e[e.NoMatch=1]="NoMatch",e[e.InitialSilenceTimeout=2]="InitialSilenceTimeout",e[e.BabbleTimeout=3]="BabbleTimeout",e[e.Error=4]="Error",e[e.EndOfDictation=5]="EndOfDictation",e[e.TooManyRequests=6]="TooManyRequests",e[e.BadRequest=7]="BadRequest",e[e.Forbidden=8]="Forbidden"}(t.RecognitionStatus||(t.RecognitionStatus={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationSynthesisEnd=void 0;var r=n(53),i=function(){function e(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=r.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"SynthesisStatus",{get:function(){return this.privSynthesisEnd.SynthesisStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FailureReason",{get:function(){return this.privSynthesisEnd.FailureReason},enumerable:!1,configurable:!0}),e}();t.TranslationSynthesisEnd=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationHypothesis=void 0;var r=n(45),i=function(){function e(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=r.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationHypothesis.Translation},enumerable:!1,configurable:!0}),e}();t.TranslationHypothesis=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPhrase=void 0;var r=n(63),i=n(53),o=n(45),a=function(){function e(e){this.privTranslationPhrase=e,this.privTranslationPhrase.RecognitionStatus=i.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}return e.fromJSON=function(t){return new e(JSON.parse(t))},e.fromTranslationResponse=function(t){r.Contracts.throwIfNullOrUndefined(t,"translationResponse");var n=t.SpeechPhrase;return t.SpeechPhrase=void 0,n.Translation=t,n.Text=n.DisplayText,new e(n)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privTranslationPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privTranslationPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privTranslationPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privTranslationPhrase.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Translation",{get:function(){return this.privTranslationPhrase.Translation},enumerable:!1,configurable:!0}),e}();t.TranslationPhrase=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationServiceRecognizer=void 0;var s=n(4),c=n(61),u=n(53),p=function(e){function t(t,n,r,i,s){var c=e.call(this,t,n,r,i,s)||this;return c.privTranslationRecognizer=s,c.connectionEvents.attach(function(e){return o(c,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return"ConnectionEstablishedEvent"!==e.name?[3,1]:(this.privTranslationRecognizer.onConnection(),[3,3]);case 1:return"ConnectionClosedEvent"!==e.name?[3,3]:[4,this.privTranslationRecognizer.onDisconnection()];case 2:t.sent(),t.label=3;case 3:return[2]}})})}),c}return i(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,p,l,d,f,m,h=this;return a(this,function(v){switch(v.label){case 0:switch(t=new c.PropertyCollection,n=!1,r=function(r){return o(h,void 0,void 0,function(){var i,o,s,p,l;return a(this,function(a){switch(a.label){case 0:if(this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+r.Offset+r.Duration),r.RecognitionStatus!==u.RecognitionStatus.Success)return[3,1];if(o=this.fireEventForResult(r,t),this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,o)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}return[3,5];case 1:return i=u.EnumTranslation.implTranslateRecognitionResult(r.RecognitionStatus),o=new c.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,i,r.Text,r.Duration,this.privRequestSession.currentTurnAudioOffset+r.Offset,void 0,e.textBody,t),i!==c.ResultReason.Canceled?[3,3]:(s=u.EnumTranslation.implTranslateCancelResult(r.RecognitionStatus),p=u.EnumTranslation.implTranslateCancelErrorCode(r.RecognitionStatus),[4,this.cancelRecognitionLocal(s,p,u.EnumTranslation.implTranslateErrorDetails(p))]);case 2:return a.sent(),[3,4];case 3:if((!this.privRequestSession.isSpeechEnded||i!==c.ResultReason.NoMatch||r.RecognitionStatus===u.RecognitionStatus.InitialSilenceTimeout)&&(l=new c.TranslationRecognitionEventArgs(o,o.offset,this.privRequestSession.sessionId),this.privTranslationRecognizer.recognized))try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,l)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(o)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}a.label=4;case 4:n=!0,a.label=5;case 5:return[2]}})})},e.messageType===s.MessageType.Text&&t.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"translation.hypothesis":return[3,1];case"translation.response":return[3,2];case"translation.phrase":return[3,5];case"translation.synthesis":return[3,7];case"translation.synthesis.end":return[3,8]}return[3,9];case 1:if(i=this.fireEventForResult(u.TranslationHypothesis.fromJSON(e.textBody),t),this.privRequestSession.onHypothesis(this.privRequestSession.currentTurnAudioOffset+i.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(e){}return n=!0,[3,10];case 2:return(p=JSON.parse(e.textBody)).SpeechPhrase?[4,r(u.TranslationPhrase.fromTranslationResponse(p))]:[3,4];case 3:v.sent(),v.label=4;case 4:return[3,10];case 5:return[4,r(u.TranslationPhrase.fromJSON(e.textBody))];case 6:return v.sent(),[3,10];case 7:return this.sendSynthesisAudio(e.binaryBody,this.privRequestSession.sessionId),n=!0,[3,10];case 8:switch((l=u.TranslationSynthesisEnd.fromJSON(e.textBody)).SynthesisStatus){case u.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){d=new c.TranslationSynthesisResult(c.ResultReason.Canceled,void 0),f=new c.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,f)}catch(e){}}if(this.privTranslationRecognizer.canceled){m=new c.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,c.CancellationReason.Error,l.FailureReason,c.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,m)}catch(e){}}break;case u.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId)}return n=!0,[3,10];case 9:return[3,10];case 10:return[2,n]}})})},t.prototype.cancelRecognition=function(e,t,n,r,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[r]),this.privTranslationRecognizer.canceled){var a=new c.TranslationRecognitionCanceledEventArgs(e,n,i,r,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,a)}catch(e){}}if(this.privSuccessCallback){var s=new c.TranslationRecognitionResult(void 0,t,c.ResultReason.Canceled,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(s),this.privSuccessCallback=void 0}catch(e){}}},t.prototype.fireEventForResult=function(e,t){var n,r;if(void 0!==e.Translation.Translations){n=new c.Translations;for(var i=0,o=e.Translation.Translations;i<o.length;i++){var a=o[i];n.set(a.Language,a.Text||a.DisplayText)}}r=e instanceof u.TranslationPhrase?e.Translation.TranslationStatus===s.TranslationStatus.Success?c.ResultReason.TranslatedSpeech:c.ResultReason.RecognizedSpeech:c.ResultReason.TranslatingSpeech;var p=e.Offset+this.privRequestSession.currentTurnAudioOffset,l=new c.TranslationRecognitionResult(n,this.privRequestSession.requestId,r,e.Text,e.Duration,p,e.Translation.FailureReason,JSON.stringify(e),t);return new c.TranslationRecognitionEventArgs(l,p,this.privRequestSession.sessionId)},t.prototype.sendSynthesisAudio=function(e,t){var n=void 0===e?c.ResultReason.SynthesizingAudioCompleted:c.ResultReason.SynthesizingAudio,r=new c.TranslationSynthesisResult(n,e),i=new c.TranslationSynthesisEventArgs(r,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,i)}catch(e){}},t}(u.ServiceRecognizerBase);t.TranslationServiceRecognizer=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechDetected=void 0;var r=function(){function e(e){this.privSpeechStartDetected=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechStartDetected.Offset},enumerable:!1,configurable:!0}),e}();t.SpeechDetected=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechHypothesis=void 0;var r=function(){function e(e){this.privSpeechHypothesis=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechHypothesis.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechHypothesis.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechHypothesis.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSpeechHypothesis.PrimaryLanguage?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSpeechHypothesis.SpeakerId},enumerable:!1,configurable:!0}),e}();t.SpeechHypothesis=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechKeyword=void 0;var r=function(){function e(e){this.privSpeechKeyword=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Status",{get:function(){return this.privSpeechKeyword.Status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privSpeechKeyword.Text},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSpeechKeyword.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSpeechKeyword.Duration},enumerable:!1,configurable:!0}),e}();t.SpeechKeyword=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechServiceRecognizer=void 0;var s=n(61),c=n(53),u=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;if(a.privSpeechRecognizer=o,void 0!==i.autoDetectSourceLanguages){var s=i.autoDetectSourceLanguages.split(",");a.privSpeechContext.setSection("languageId",{languages:s,onSuccess:{action:"Recognize"},onUnknown:{action:"None"}}),a.privSpeechContext.setSection("phraseOutput",{interimResults:{resultType:"Auto"},phraseResults:{resultType:"Always"}})}return a}return i(t,e),t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,u,p,l,d,f,m,h,v,g;return a(this,function(a){switch(a.label){case 0:switch((n=new s.PropertyCollection).setProperty(s.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),r=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3,1];case"speech.phrase":return[3,2]}return[3,6];case 1:if(i=c.SpeechHypothesis.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset,t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,s.ResultReason.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,void 0,void 0,e.textBody,n),this.privRequestSession.onHypothesis(o),u=new s.SpeechRecognitionEventArgs(t,i.Duration,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u)}catch(e){}return r=!0,[3,7];case 2:return p=c.SimpleSpeechPhrase.fromJSON(e.textBody),l=c.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),s.ResultReason.Canceled!==l?[3,4]:(d=c.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=c.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),[4,this.cancelRecognitionLocal(d,f,c.EnumTranslation.implTranslateErrorDetails(f))]);case 3:return a.sent(),[3,5];case 4:if((!this.privRequestSession.isSpeechEnded||l!==s.ResultReason.NoMatch||p.RecognitionStatus===c.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(c.OutputFormatPropertyName)===s.OutputFormat[s.OutputFormat.Simple]?t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,l,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,void 0,e.textBody,n):(m=c.DetailedSpeechPhrase.fromJSON(e.textBody),h=m.Offset+this.privRequestSession.currentTurnAudioOffset,v=m.getJsonWithCorrectedOffsets(h),t=new s.SpeechRecognitionResult(this.privRequestSession.requestId,l,m.RecognitionStatus===c.RecognitionStatus.Success?m.NBest[0].Display:void 0,m.Duration,h,m.Language,m.LanguageDetectionConfidence,void 0,void 0,v,n)),g=new s.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privSpeechRecognizer.recognized))try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,g)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}a.label=5;case 5:return r=!0,[3,7];case 6:return[3,7];case 7:return[2,r]}})})},t.prototype.cancelRecognition=function(e,t,n,r,i){var o=new s.PropertyCollection;if(o.setProperty(c.CancellationErrorCodePropertyName,s.CancellationErrorCode[r]),this.privSpeechRecognizer.canceled){var a=new s.SpeechRecognitionCanceledEventArgs(n,i,r,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,a)}catch(e){}}if(this.privSuccessCallback){var u=new s.SpeechRecognitionResult(t,s.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(u),this.privSuccessCallback=void 0}catch(e){}}},t}(c.ServiceRecognizerBase);t.SpeechServiceRecognizer=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriptionServiceRecognizer=void 0;var s=n(4),c=n(61),u=n(53),p=n(170),l=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a.sendSpeechEvent=function(e,t){var n=JSON.stringify(t);if(n)return e.send(new p.SpeechConnectionMessage(s.MessageType.Text,"speech.event",a.privRequestSession.requestId,"application/json",n))},a.privTranscriberRecognizer=o,a.sendPrePayloadJSONOverride=a.sendTranscriptionStartJSON,a}return i(t,e),t.prototype.sendSpeechEventAsync=function(e,t){return o(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return this.privRequestSession.isRecognizing?[4,this.fetchConnection()]:[3,3];case 1:return n=r.sent(),[4,this.sendSpeechEvent(n,this.createSpeechEventPayload(e,t))];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,s,p,l,d,f,m,h,v,g;return a(this,function(a){switch(a.label){case 0:switch((n=new c.PropertyCollection).setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),r=!1,e.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":return[3,1];case"speech.phrase":return[3,2]}return[3,6];case 1:if(i=u.SpeechHypothesis.fromJSON(e.textBody),o=i.Offset+this.privRequestSession.currentTurnAudioOffset,t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,c.ResultReason.RecognizingSpeech,i.Text,i.Duration,o,i.Language,i.LanguageDetectionConfidence,i.SpeakerId,void 0,e.textBody,n),this.privRequestSession.onHypothesis(o),s=new c.SpeechRecognitionEventArgs(t,i.Duration,this.privRequestSession.sessionId),this.privTranscriberRecognizer.recognizing)try{this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,s)}catch(e){}return r=!0,[3,7];case 2:return p=u.SimpleSpeechPhrase.fromJSON(e.textBody),l=u.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+p.Offset+p.Duration),c.ResultReason.Canceled!==l?[3,4]:(d=u.EnumTranslation.implTranslateCancelResult(p.RecognitionStatus),f=u.EnumTranslation.implTranslateCancelErrorCode(p.RecognitionStatus),[4,this.cancelRecognitionLocal(d,f,u.EnumTranslation.implTranslateErrorDetails(f))]);case 3:return a.sent(),[3,5];case 4:if((!this.privRequestSession.isSpeechEnded||l!==c.ResultReason.NoMatch||p.RecognitionStatus===u.RecognitionStatus.InitialSilenceTimeout)&&(this.privRecognizerConfig.parameters.getProperty(u.OutputFormatPropertyName)===c.OutputFormat[c.OutputFormat.Simple]?t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,l,p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,p.SpeakerId,void 0,e.textBody,n):(m=u.DetailedSpeechPhrase.fromJSON(e.textBody),h=m.Offset+this.privRequestSession.currentTurnAudioOffset,v=m.getJsonWithCorrectedOffsets(h),t=new c.SpeechRecognitionResult(this.privRequestSession.requestId,l,m.Text,m.Duration,h,m.Language,m.LanguageDetectionConfidence,m.SpeakerId,void 0,v,n)),g=new c.SpeechRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),this.privTranscriberRecognizer.recognized))try{this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,g)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(t)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}a.label=5;case 5:return r=!0,[3,7];case 6:return[3,7];case 7:return[2,r]}})})},t.prototype.cancelRecognition=function(e,t,n,r,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[r]),this.privTranscriberRecognizer.canceled){var a=new c.ConversationTranscriptionCanceledEventArgs(n,i,r,void 0,e);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,a)}catch(e){}}if(this.privSuccessCallback){var s=new c.SpeechRecognitionResult(t,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(s),this.privSuccessCallback=void 0}catch(e){}}},t.prototype.sendTranscriptionStartJSON=function(e){return o(this,void 0,void 0,function(){var t,n;return a(this,function(r){switch(r.label){case 0:return[4,this.sendSpeechContext(e)];case 1:return r.sent(),t=this.privTranscriberRecognizer.getConversationInfo(),n=this.createSpeechEventPayload(t,"start"),[4,this.sendSpeechEvent(e,n)];case 2:return r.sent(),[4,this.sendWaveHeader(e)];case 3:return r.sent(),[2]}})})},t.prototype.createSpeechEventPayload=function(e,t){var n="meeting",r={id:n,name:t,meeting:e.conversationProperties};return r.meeting.id=e.id,r.meeting.attendees=e.participants,r.meeting.record="on"===e.conversationProperties.audiorecording?"true":"false",r},t}(u.ServiceRecognizerBase);t.TranscriptionServiceRecognizer=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DetailedSpeechPhrase=void 0;var r=n(53),i=function(){function e(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},e.prototype.getJsonWithCorrectedOffsets=function(e){if(this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0].Words){var t=this.privDetailedSpeechPhrase.NBest[0].Words[0].Offset;if(t&&t<e)for(var n=e-t,r=0,i=this.privDetailedSpeechPhrase.NBest;r<i.length;r++){var o=i[r];if(o.Words)for(var a=0,s=o.Words;a<s.length;a++)s[a].Offset+=n}}return JSON.stringify(this.privDetailedSpeechPhrase)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privDetailedSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"NBest",{get:function(){return this.privDetailedSpeechPhrase.NBest},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privDetailedSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privDetailedSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privDetailedSpeechPhrase.PrimaryLanguage?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Text",{get:function(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display:this.privDetailedSpeechPhrase.DisplayText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privDetailedSpeechPhrase.SpeakerId},enumerable:!1,configurable:!0}),e}();t.DetailedSpeechPhrase=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SimpleSpeechPhrase=void 0;var r=n(53),i=function(){function e(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=r.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"RecognitionStatus",{get:function(){return this.privSimpleSpeechPhrase.RecognitionStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DisplayText",{get:function(){return this.privSimpleSpeechPhrase.DisplayText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Offset",{get:function(){return this.privSimpleSpeechPhrase.Offset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Duration",{get:function(){return this.privSimpleSpeechPhrase.Duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Language",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"LanguageDetectionConfidence",{get:function(){return void 0===this.privSimpleSpeechPhrase.PrimaryLanguage?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeakerId",{get:function(){return this.privSimpleSpeechPhrase.SpeakerId},enumerable:!1,configurable:!0}),e}();t.SimpleSpeechPhrase=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AddedLmIntent=void 0;var r=function(e,t){this.modelImpl=e,this.intentName=t};t.AddedLmIntent=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.IntentServiceRecognizer=void 0;var s=n(4),c=n(61),u=n(53),p=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a.privIntentRecognizer=o,a.privIntentDataSent=!1,a}return i(t,e),t.prototype.setIntents=function(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t,this.privIntentDataSent=!0},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,p,l,d,f,m,h,v,g=this;return a(this,function(a){switch(r=!1,i=new c.PropertyCollection,e.messageType===s.MessageType.Text&&i.setProperty(c.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.hypothesis":if(o=u.SpeechHypothesis.fromJSON(e.textBody),t=new c.IntentRecognitionResult(void 0,this.privRequestSession.requestId,c.ResultReason.RecognizingIntent,o.Text,o.Duration,o.Offset+this.privRequestSession.currentTurnAudioOffset,o.Language,o.LanguageDetectionConfidence,void 0,e.textBody,i),this.privRequestSession.onHypothesis(t.offset),n=new c.IntentRecognitionEventArgs(t,o.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,n)}catch(e){}r=!0;break;case"speech.phrase":p=u.SimpleSpeechPhrase.fromJSON(e.textBody),t=new c.IntentRecognitionResult(void 0,this.privRequestSession.requestId,u.EnumTranslation.implTranslateRecognitionResult(p.RecognitionStatus),p.DisplayText,p.Duration,p.Offset+this.privRequestSession.currentTurnAudioOffset,p.Language,p.LanguageDetectionConfidence,void 0,e.textBody,i),n=new c.IntentRecognitionEventArgs(t,t.offset,this.privRequestSession.sessionId),l=function(){if(g.privIntentRecognizer.recognized)try{g.privIntentRecognizer.recognized(g.privIntentRecognizer,n)}catch(e){}if(g.privSuccessCallback){try{g.privSuccessCallback(t)}catch(e){g.privErrorCallback&&g.privErrorCallback(e)}g.privSuccessCallback=void 0,g.privErrorCallback=void 0}},!1===this.privIntentDataSent||c.ResultReason.NoMatch===n.result.reason?(this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),l()):this.privPendingIntentArgs=n,r=!0;break;case"response":if(n=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,void 0===n){if(""===e.textBody)return[2];n=new c.IntentRecognitionEventArgs(new c.IntentRecognitionResult,0,this.privRequestSession.sessionId)}if(d=u.IntentResponse.fromJSON(e.textBody),f=this.privAddedLmIntents[d.topScoringIntent.intent],void 0!==this.privUmbrellaIntent&&(f=this.privUmbrellaIntent),null!==d&&void 0!==f&&(m=void 0===f.intentName?d.topScoringIntent.intent:f.intentName,h=n.result.reason,void 0!==m&&(h=c.ResultReason.RecognizedIntent),(v=void 0!==n.result.properties?n.result.properties:new c.PropertyCollection).setProperty(c.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),n=new c.IntentRecognitionEventArgs(new c.IntentRecognitionResult(m,n.result.resultId,h,n.result.text,n.result.duration,n.result.offset,void 0,void 0,n.result.errorDetails,n.result.json,v),n.offset,n.sessionId)),this.privRequestSession.onPhraseRecognized(n.offset+n.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,n)}catch(e){}if(this.privSuccessCallback){try{this.privSuccessCallback(n.result)}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}r=!0}return[2,r]})})},t.prototype.cancelRecognition=function(e,t,n,r,i){var o=new c.PropertyCollection;if(o.setProperty(u.CancellationErrorCodePropertyName,c.CancellationErrorCode[r]),this.privIntentRecognizer.canceled){var a=new c.IntentRecognitionCanceledEventArgs(n,i,r,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,a)}catch(e){}}if(this.privSuccessCallback){var s=new c.IntentRecognitionResult(void 0,t,c.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,i,void 0,o);try{this.privSuccessCallback(s),this.privSuccessCallback=void 0}catch(e){}}},t}(u.ServiceRecognizerBase);t.IntentServiceRecognizer=p},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.IntentResponse=void 0;var r=function(){function e(e){this.privIntentResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"query",{get:function(){return this.privIntentResponse.query},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topScoringIntent",{get:function(){return this.privIntentResponse.topScoringIntent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entities",{get:function(){return this.privIntentResponse.entities},enumerable:!1,configurable:!0}),e}();t.IntentResponse=r},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RequestSession=void 0;var o=n(4),a=n(168),s=n(195),c=function(){function e(e){var t=this;this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.onPreConnectionStart=function(e,n){t.privAuthFetchEventId=e,t.privSessionId=n,t.onEvent(new a.ConnectingToServiceEvent(t.privRequestId,t.privAuthFetchEventId,t.privSessionId))},this.onSpeechContext=function(){t.privRequestId=o.createNoDashGuid()},this.onServiceTurnStartResponse=function(){t.privTurnDeferral&&t.privInTurn&&(t.privTurnDeferral.reject("Another turn started before current completed."),t.privTurnDeferral.promise.then().catch(function(){})),t.privInTurn=!0,t.privTurnDeferral=new o.Deferred},this.getTelemetry=function(){return t.privServiceTelemetryListener.hasTelemetry?t.privServiceTelemetryListener.getTelemetry():null},this.onEvent=function(e){t.privServiceTelemetryListener&&t.privServiceTelemetryListener.onEvent(e),o.Events.instance.onEvent(e)},this.privAudioSourceId=e,this.privRequestId=o.createNoDashGuid(),this.privAudioNodeId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSpeechEnded",{get:function(){return this.privIsSpeechEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRecognizing",{get:function(){return this.privIsRecognizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTurnAudioOffset",{get:function(){return this.privTurnStartAudioOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"recogNumber",{get:function(){return this.privRecogNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numConnectionAttempts",{get:function(){return this.privConnectionAttempts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesSent",{get:function(){return this.privBytesSent},enumerable:!1,configurable:!0}),e.prototype.listenForServiceTelemetry=function(e){this.privServiceTelemetryListener&&this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))},e.prototype.startNewRecognition=function(){this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new a.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))},e.prototype.onAudioSourceAttachCompleted=function(e,t,n){return r(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return this.privAudioNode=e,this.privIsAudioNodeDetached=!1,t?[4,this.onComplete()]:[3,2];case 1:return n.sent(),[3,3];case 2:this.onEvent(new a.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId)),n.label=3;case 3:return[2]}})})},e.prototype.onAuthCompleted=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return e?[4,this.onComplete()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.onConnectionEstablishCompleted=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return 200!==e?[3,1]:(this.onEvent(new a.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0,[2]);case 1:return 403!==e?[3,3]:[4,this.onComplete()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.onServiceTurnEndResponse=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.privTurnDeferral.resolve(),e&&!this.isSpeechEnded?[3,2]:[4,this.onComplete()];case 1:return t.sent(),this.privInTurn=!1,[3,3];case 2:this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay(),t.label=3;case 3:return[2]}})})},e.prototype.onHypothesis=function(e){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(e)))},e.prototype.onPhraseRecognized=function(e){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(e)),this.onServiceRecognized(e)},e.prototype.onServiceRecognized=function(e){this.privLastRecoOffset=e,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(e),this.privConnectionAttempts=0},e.prototype.onAudioSent=function(e){this.privBytesSent+=e},e.prototype.onRetryConnection=function(){this.privConnectionAttempts++},e.prototype.dispose=function(e){var t;return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:if(this.privIsDisposed)return[3,5];this.privIsDisposed=!0,e=0,n=this.privDetachables,r.label=1;case 1:return e<n.length?[4,n[e].detach()]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:null===(t=this.privServiceTelemetryListener)||void 0===t||t.dispose(),this.privIsRecognizing=!1,r.label=5;case 5:return[2]}})})},e.prototype.onStopRecognizing=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.onComplete()];case 1:return e.sent(),[2]}})})},e.prototype.onSpeechEnded=function(){this.privIsSpeechEnded=!0},e.prototype.onComplete=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.privIsRecognizing?(this.privIsRecognizing=!1,[4,this.detachAudioNode()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.detachAudioNode=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.privIsAudioNodeDetached?[3,2]:(this.privIsAudioNodeDetached=!0,this.privAudioNode?[4,this.privAudioNode.detach()]:[3,2]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},e}();t.RequestSession=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceTelemetryListener=void 0;var r=n(4),i=n(168),o=function(){function e(e,t,n){var o=this;this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=function(e){!o.privIsDisposed&&(e instanceof i.RecognitionTriggeredEvent&&e.requestId===o.privRequestId&&(o.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof r.AudioStreamNodeAttachingEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicStartTime=e.eventTime),e instanceof r.AudioStreamNodeAttachedEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicStartTime=e.eventTime),e instanceof r.AudioSourceErrorEvent&&e.audioSourceId===o.privAudioSourceId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:o.privMicStartTime})),e instanceof r.AudioStreamNodeErrorEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:o.privMicStartTime})),e instanceof r.AudioStreamNodeDetachedEvent&&e.audioSourceId===o.privAudioSourceId&&e.audioNodeId===o.privAudioNodeId&&(o.privMicMetric||(o.privMicMetric={End:e.eventTime,Name:"Microphone",Start:o.privMicStartTime})),e instanceof i.ConnectingToServiceEvent&&e.requestId===o.privRequestId&&(o.privConnectionId=e.sessionId),e instanceof r.ConnectionStartEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionStartTime=e.eventTime),e instanceof r.ConnectionEstablishedEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionEstablishMetric||(o.privConnectionEstablishMetric={End:e.eventTime,Id:o.privConnectionId,Name:"Connection",Start:o.privConnectionStartTime})),e instanceof r.ConnectionEstablishErrorEvent&&e.connectionId===o.privConnectionId&&(o.privConnectionEstablishMetric||(o.privConnectionEstablishMetric={End:e.eventTime,Error:o.getConnectionError(e.statusCode),Id:o.privConnectionId,Name:"Connection",Start:o.privConnectionStartTime})),e instanceof r.ConnectionMessageReceivedEvent&&e.connectionId===o.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path)&&(o.privReceivedMessages[e.message.headers.path]||(o.privReceivedMessages[e.message.headers.path]=new Array),o.privReceivedMessages[e.message.headers.path].length<50&&o.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime))},this.getTelemetry=function(){var e=new Array;o.privListeningTriggerMetric&&e.push(o.privListeningTriggerMetric),o.privMicMetric&&e.push(o.privMicMetric),o.privConnectionEstablishMetric&&e.push(o.privConnectionEstablishMetric),o.privPhraseLatencies.length>0&&e.push({PhraseLatencyMs:o.privPhraseLatencies}),o.privHypothesisLatencies.length>0&&e.push({FirstHypothesisLatencyMs:o.privHypothesisLatencies});var t={Metrics:e,ReceivedMessages:o.privReceivedMessages},n=JSON.stringify(t);return o.privReceivedMessages={},o.privListeningTriggerMetric=null,o.privMicMetric=null,o.privConnectionEstablishMetric=null,o.privPhraseLatencies=[],o.privHypothesisLatencies=[],n},this.dispose=function(){o.privIsDisposed=!0},this.getConnectionError=function(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}return e.prototype.phraseReceived=function(e){e>0&&this.privPhraseLatencies.push(Date.now()-e)},e.prototype.hypothesisReceived=function(e){e>0&&this.privHypothesisLatencies.push(Date.now()-e)},Object.defineProperty(e.prototype,"hasTelemetry",{get:function(){return 0!==Object.keys(this.privReceivedMessages).length||null!==this.privListeningTriggerMetric||null!==this.privMicMetric||null!==this.privConnectionEstablishMetric||0!==this.privPhraseLatencies.length||0!==this.privHypothesisLatencies.length},enumerable:!1,configurable:!0}),e}();t.ServiceTelemetryListener=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeechContext=void 0;var r=function(){function e(e){this.privContext={},this.privDynamicGrammar=e}return e.prototype.setSection=function(e,t){this.privContext[e]=t},e.prototype.setPronunciationAssessmentParams=function(e){void 0===this.privContext.phraseDetection&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(e),void 0===this.privContext.phraseOutput&&(this.privContext.phraseOutput={detailed:{options:[]},format:{}}),this.privContext.phraseOutput.format="Detailed",this.privContext.phraseOutput.detailed.options.push("PronunciationAssessment"),-1===this.privContext.phraseOutput.detailed.options.indexOf("WordTimings")&&this.privContext.phraseOutput.detailed.options.push("WordTimings"),-1===this.privContext.phraseOutput.detailed.options.indexOf("SNR")&&this.privContext.phraseOutput.detailed.options.push("SNR")},e.prototype.toJSON=function(){var e=this.privDynamicGrammar.generateGrammarObject();return this.setSection("dgi",e),JSON.stringify(this.privContext)},e}();t.SpeechContext=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicGrammarBuilder=void 0;var r=function(){function e(){}return e.prototype.addPhrase=function(e){this.privPhrases||(this.privPhrases=[]),e instanceof Array?this.privPhrases=this.privPhrases.concat(e):this.privPhrases.push(e)},e.prototype.clearPhrases=function(){this.privPhrases=void 0},e.prototype.addReferenceGrammar=function(e){this.privGrammars||(this.privGrammars=[]),e instanceof Array?this.privGrammars=this.privGrammars.concat(e):this.privGrammars.push(e)},e.prototype.clearGrammars=function(){this.privGrammars=void 0},e.prototype.generateGrammarObject=function(){if(void 0!==this.privGrammars||void 0!==this.privPhrases){var e={};if(e.ReferenceGrammars=this.privGrammars,void 0!==this.privPhrases&&0!==this.privPhrases.length){var t=[];this.privPhrases.forEach(function(e,n,r){t.push({Text:e})}),e.Groups=[{Type:"Generic",Items:t}]}return e}},e}();t.DynamicGrammarBuilder=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceAdapter=void 0;var s=n(2),c=n(27),u=n(4),p=n(74),l=n(61),d=n(200),f=n(53),m=n(202),h=n(170),g=function(e){function t(t,n,r,i,s){var f=e.call(this,t,n,r,i,s)||this;return f.sendAgentConfig=function(e){if(f.agentConfig&&!f.agentConfigSent){if(f.privRecognizerConfig.parameters.getProperty(l.PropertyId.Conversation_DialogType)===l.DialogServiceConfig.DialogTypes.CustomCommands){var t=f.agentConfig.get();t.botInfo.commandsCulture=f.privRecognizerConfig.parameters.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),f.agentConfig.set(t)}f.onEvent(new c.SendingAgentContextMessageEvent(f.agentConfig));var n=f.agentConfig.toJsonString();return f.agentConfigSent=!0,e.send(new h.SpeechConnectionMessage(u.MessageType.Text,"agent.config",f.privRequestSession.requestId,"application/json",n))}},f.sendAgentContext=function(e){var t=u.createGuid(),n=f.privDialogServiceConnector.properties.getProperty(l.PropertyId.Conversation_Speech_Activity_Template),r={channelData:"",context:{interactionId:t},messagePayload:void 0===Object(v["a"])(n)?void 0:n,version:.5},i=JSON.stringify(r);return e.send(new h.SpeechConnectionMessage(u.MessageType.Text,"speech.agent.context",f.privRequestSession.requestId,"application/json",i))},f.handleResponseMessage=function(e){var t=JSON.parse(e.textBody);switch(t.messageType.toLowerCase()){case"message":var n=e.requestId.toUpperCase(),r=m.ActivityPayloadResponse.fromJSON(e.textBody),i=f.privTurnStateManager.GetTurn(n);if(r.conversationId){var o=f.agentConfig.get();o.botInfo.conversationId=r.conversationId,f.agentConfig.set(o)}var a=i.processActivityPayload(r,p.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(f.privDialogServiceConnector.properties.getProperty(l.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),s=new l.ActivityReceivedEventArgs(r.messagePayload,a);if(f.privDialogServiceConnector.activityReceived)try{f.privDialogServiceConnector.activityReceived(f.privDialogServiceConnector,s)}catch(e){}break;case"messagestatus":if(f.privDialogServiceConnector.turnStatusReceived)try{f.privDialogServiceConnector.turnStatusReceived(f.privDialogServiceConnector,new l.TurnStatusReceivedEventArgs(e.textBody))}catch(e){}break;default:u.Events.instance.onEvent(new u.BackgroundEvent("Unexpected response of type "+t.messageType+". Ignoring."))}},f.privEvents=new u.EventSource,f.privDialogServiceConnector=s,f.receiveMessageOverride=f.receiveDialogMessageOverride,f.privTurnStateManager=new d.DialogServiceTurnStateManager,f.recognizeOverride=f.listenOnce,f.postConnectImplOverride=f.dialogConnectImpl,f.configConnectionOverride=f.configConnection,f.disconnectOverride=f.privDisconnect,f.privDialogAudioSource=r,f.agentConfigSent=!1,f.privLastResult=null,f.connectionEvents.attach(function(e){return o(f,void 0,void 0,function(){return a(this,function(t){return"ConnectionClosedEvent"===e.name&&(this.terminateMessageLoop=!0),[2]})})}),f}return i(t,e),t.prototype.sendMessage=function(e){return o(this,void 0,void 0,function(){var t,n,r,i;return a(this,function(o){switch(o.label){case 0:return t=u.createGuid(),n=u.createNoDashGuid(),r={context:{interactionId:t},messagePayload:JSON.parse(e),version:.5},i=JSON.stringify(r),[4,this.fetchConnection()];case 1:return[4,o.sent().send(new h.SpeechConnectionMessage(u.MessageType.Text,"agent",n,"application/json",i))];case 2:return o.sent(),[2]}})})},t.prototype.privDisconnect=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.NoError,"Disconnecting")];case 1:return e.sent(),this.terminateMessageLoop=!0,this.agentConfigSent=!1,[2]}})})},t.prototype.processTypeSpecificMessages=function(e){return o(this,void 0,void 0,function(){var t,n,r,i,o,s,c,p,d,m,h,v;return a(this,function(a){switch(t=new l.PropertyCollection,e.messageType===u.MessageType.Text&&t.setProperty(l.PropertyId.SpeechServiceResponse_JsonResult,e.textBody),e.path.toLowerCase()){case"speech.phrase":if(i=f.SimpleSpeechPhrase.fromJSON(e.textBody),this.privRequestSession.onPhraseRecognized(this.privRequestSession.currentTurnAudioOffset+i.Offset+i.Duration),i.RecognitionStatus!==f.RecognitionStatus.TooManyRequests&&i.RecognitionStatus!==f.RecognitionStatus.Error&&(o=this.fireEventForResult(i,t),this.privLastResult=o.result,this.privDialogServiceConnector.recognized))try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,o)}catch(e){}r=!0;break;case"speech.hypothesis":if(s=f.SpeechHypothesis.fromJSON(e.textBody),c=s.Offset+this.privRequestSession.currentTurnAudioOffset,n=new l.SpeechRecognitionResult(this.privRequestSession.requestId,l.ResultReason.RecognizingSpeech,s.Text,s.Duration,c,s.Language,s.LanguageDetectionConfidence,void 0,void 0,e.textBody,t),this.privRequestSession.onHypothesis(c),p=new l.SpeechRecognitionEventArgs(n,s.Duration,this.privRequestSession.sessionId),this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,p)}catch(e){}r=!0;break;case"speech.keyword":if(d=f.SpeechKeyword.fromJSON(e.textBody),n=new l.SpeechRecognitionResult(this.privRequestSession.requestId,"Accepted"===d.Status?l.ResultReason.RecognizedKeyword:l.ResultReason.NoMatch,d.Text,d.Duration,d.Offset,void 0,void 0,void 0,void 0,e.textBody,t),"Accepted"!==d.Status&&(this.privLastResult=n),m=new l.SpeechRecognitionEventArgs(n,n.duration,n.resultId),this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,m)}catch(e){}r=!0;break;case"audio":h=e.requestId.toUpperCase(),v=this.privTurnStateManager.GetTurn(h);try{e.binaryBody?v.audioStream.write(e.binaryBody):v.endAudioStream()}catch(e){}r=!0;break;case"response":this.handleResponseMessage(e),r=!0}return[2,r]})})},t.prototype.cancelRecognition=function(e,t,n,r,i){return o(this,void 0,void 0,function(){var t,o,s;return a(this,function(a){switch(a.label){case 0:return this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing?[4,this.privRequestSession.onStopRecognizing()]:[3,2];case 1:a.sent(),a.label=2;case 2:if(this.privDialogServiceConnector.canceled){(t=new l.PropertyCollection).setProperty(f.CancellationErrorCodePropertyName,l.CancellationErrorCode[r]),o=new l.SpeechRecognitionCanceledEventArgs(n,i,r,void 0,e);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,o)}catch(e){}if(this.privSuccessCallback){s=new l.SpeechRecognitionResult(void 0,l.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,i,void 0,t);try{this.privSuccessCallback(s),this.privSuccessCallback=void 0}catch(e){}}}return[2]}})})},t.prototype.listenOnce=function(e,t,n){return o(this,void 0,void 0,function(){var r,i,c,u,p,d,f,m,h=this;return a(this,function(v){switch(v.label){case 0:return this.privRecognizerConfig.recognitionMode=e,this.privSuccessCallback=t,this.privErrorCallback=n,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(l.PropertyId.Speech_SessionId,this.privRequestSession.sessionId),r=this.connectImpl(),i=this.sendPreAudioMessages(),[4,this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId)];case 1:return c=v.sent(),[4,this.privDialogAudioSource.format];case 2:return u=v.sent(),[4,this.privDialogAudioSource.deviceInfo];case 3:return p=v.sent(),d=new s.ReplayableAudioNode(c,u.avgBytesPerSec),[4,this.privRequestSession.onAudioSourceAttachCompleted(d,!1)];case 4:v.sent(),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:p},v.label=5;case 5:return v.trys.push([5,8,,10]),[4,r];case 6:return v.sent(),[4,i];case 7:return v.sent(),[3,10];case 8:return f=v.sent(),[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.ConnectionFailure,f)];case 9:return v.sent(),[2,Promise.resolve()];case 10:return m=new l.SessionEventArgs(this.privRequestSession.sessionId),this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.sendAudio(d).then(function(){},function(e){return o(h,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.RuntimeError,e)];case 1:return t.sent(),[2]}})})}),[2]}})})},t.prototype.dialogConnectImpl=function(e){return this.privConnectionLoop=this.startMessageLoop(),e},t.prototype.receiveDialogMessageOverride=function(){var e=this,t=new u.Deferred,n=function n(){return o(e,void 0,void 0,function(){var e,r,i,o,s,c,p,d,m,v,g,y,b;return a(this,function(a){switch(a.label){case 0:return a.trys.push([0,12,,13]),e=this.isDisposed(),r=!this.isDisposed()&&this.terminateMessageLoop,e||r?(t.resolve(void 0),[2]):[4,this.fetchConnection()];case 1:return[4,a.sent().read()];case 2:if(!(i=a.sent()))return[2,n()];switch(o=h.SpeechConnectionMessage.fromConnectionMessage(i),o.path.toLowerCase()){case"turn.start":return[3,3];case"speech.startdetected":return[3,4];case"speech.enddetected":return[3,5];case"turn.end":return[3,6]}return[3,10];case 3:return s=o.requestId.toUpperCase(),y=this.privRequestSession.requestId.toUpperCase(),s!==y?this.privTurnStateManager.StartTurn(s):this.privRequestSession.onServiceTurnStartResponse(),[3,11];case 4:return c=f.SpeechDetected.fromJSON(o.textBody),p=new l.RecognitionEventArgs(c.Offset,this.privRequestSession.sessionId),this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,p),[3,11];case 5:return d=void 0,d=o.textBody.length>0?o.textBody:"{ Offset: 0 }",m=f.SpeechDetected.fromJSON(d),this.privRequestSession.onServiceRecognized(m.Offset+this.privRequestSession.currentTurnAudioOffset),v=new l.RecognitionEventArgs(m.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId),this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,v),[3,11];case 6:return g=o.requestId.toUpperCase(),y=this.privRequestSession.requestId.toUpperCase(),g===y?[3,7]:(this.privTurnStateManager.CompleteTurn(g),[3,9]);case 7:return b=new l.SessionEventArgs(this.privRequestSession.sessionId),[4,this.privRequestSession.onServiceTurnEndResponse(!1)];case 8:if(a.sent(),this.privRecognizerConfig.isContinuousRecognition&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing||this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,b),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(e){this.privErrorCallback&&this.privErrorCallback(e)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}a.label=9;case 9:return[3,11];case 10:this.processTypeSpecificMessages(o)||this.serviceEvents&&this.serviceEvents.onEvent(new u.ServiceEvent(o.path.toLowerCase(),o.textBody)),a.label=11;case 11:return[2,n()];case 12:return a.sent(),this.terminateMessageLoop=!0,t.resolve(),[3,13];case 13:return[2]}})})};return n().catch(function(e){u.Events.instance.onEvent(new u.BackgroundEvent(e))}),t.promise},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:this.terminateMessageLoop=!1,t.label=1;case 1:return t.trys.push([1,3,,5]),[4,this.receiveDialogMessageOverride()];case 2:return t.sent(),[3,5];case 3:return e=t.sent(),[4,this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,l.CancellationReason.Error,l.CancellationErrorCode.RuntimeError,e)];case 4:return t.sent(),[3,5];case 5:return[2,Promise.resolve()]}})})},t.prototype.configConnection=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return this.terminateMessageLoop?(this.terminateMessageLoop=!1,[2,Promise.reject("Connection to service terminated.")]):[4,this.sendSpeechServiceConfig(e,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize())];case 1:return t.sent(),[4,this.sendAgentConfig(e)];case 2:return t.sent(),[2,e]}})})},t.prototype.sendPreAudioMessages=function(){return o(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,this.fetchConnection()];case 1:return e=t.sent(),this.addKeywordContextData(),[4,this.sendSpeechContext(e)];case 2:return t.sent(),[4,this.sendAgentContext(e)];case 3:return t.sent(),[4,this.sendWaveHeader(e)];case 4:return t.sent(),[2]}})})},t.prototype.fireEventForResult=function(e,t){var n=f.EnumTranslation.implTranslateRecognitionResult(e.RecognitionStatus),r=e.Offset+this.privRequestSession.currentTurnAudioOffset,i=new l.SpeechRecognitionResult(this.privRequestSession.requestId,n,e.DisplayText,e.Duration,r,e.Language,e.LanguageDetectionConfidence,void 0,void 0,JSON.stringify(e),t);return new l.SpeechRecognitionEventArgs(i,r,this.privRequestSession.sessionId)},t.prototype.onEvent=function(e){this.privEvents.onEvent(e),u.Events.instance.onEvent(e)},t.prototype.addKeywordContextData=function(){var e=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(void 0!==e){for(var t=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),n=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),r=e.split(";"),i=void 0===t?[]:t.split(";"),o=void 0===n?[]:n.split(";"),a=[],s=0;s<r.length;s++){var c={};c.text=r[s],s<i.length&&(c.offset=Number(i[s])),s<o.length&&(c.duration=Number(o[s])),a.push(c)}this.speechContext.setSection("invocationSource","VoiceActivationWithKeyword"),this.speechContext.setSection("keywordDetection",[{clientDetectedKeywords:a,onReject:{action:"EndOfTurn"},type:"startTrigger"}])}},t}(f.ServiceRecognizerBase);t.DialogServiceAdapter=g},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnStateManager=void 0;var r=n(25),i=n(201),o=function(){function e(){this.privTurnMap=new Map}return e.prototype.StartTurn=function(e){if(this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: There is already a turn with id:"+e);var t=new i.DialogServiceTurnState(this,e);return this.privTurnMap.set(e,t),this.privTurnMap.get(e)},e.prototype.GetTurn=function(e){return this.privTurnMap.get(e)},e.prototype.CompleteTurn=function(e){if(!this.privTurnMap.has(e))throw new r.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+e);var t=this.privTurnMap.get(e);return t.complete(),this.privTurnMap.delete(e),t},e}();t.DialogServiceTurnStateManager=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DialogServiceTurnState=void 0;var r=n(74),i=n(73),o=n(202),a=function(){function e(e,t){this.privRequestId=t,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=e,this.resetTurnEndTimeout()}return Object.defineProperty(e.prototype,"audioStream",{get:function(){return this.resetTurnEndTimeout(),this.privAudioStream},enumerable:!1,configurable:!0}),e.prototype.processActivityPayload=function(e,t){return e.messageDataStreamType===o.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=i.AudioOutputStream.createPullStream(),this.privAudioStream.format=void 0!==t?t:r.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream},e.prototype.endAudioStream=function(){null===this.privAudioStream||this.privAudioStream.isClosed||this.privAudioStream.close()},e.prototype.complete=function(){void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.endAudioStream()},e.prototype.resetTurnEndTimeout=function(){var e=this;void 0!==this.privTimeoutToken&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(function(){e.privTurnManager.CompleteTurn(e.privRequestId)},2e3)},e}();t.DialogServiceTurnState=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageDataStreamType=t.ActivityPayloadResponse=void 0;var r=function(){function e(e){this.privActivityResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"conversationId",{get:function(){return this.privActivityResponse.conversationId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messageDataStreamType",{get:function(){return this.privActivityResponse.messageDataStreamType},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"messagePayload",{get:function(){return this.privActivityResponse.messagePayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this.privActivityResponse.version},enumerable:!1,configurable:!0}),e}();t.ActivityPayloadResponse=r,function(e){e[e.None=0]="None",e[e.TextToSpeechAudio=1]="TextToSpeechAudio"}(t.MessageDataStreamType||(t.MessageDataStreamType={}))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.AgentConfig=void 0;var r=function(){function e(){}return e.prototype.toJsonString=function(){return JSON.stringify(this.iPrivConfig)},e.prototype.get=function(){return this.iPrivConfig},e.prototype.set=function(e){this.iPrivConfig=e},e}();t.AgentConfig=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(205);Object.defineProperty(t,"ConversationManager",{enumerable:!0,get:function(){return r.ConversationManager}});var i=n(206);Object.defineProperty(t,"ConversationConnectionConfig",{enumerable:!0,get:function(){return i.ConversationConnectionConfig}});var o=n(208);Object.defineProperty(t,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return o.ConversationRecognizerFactory}});var a=n(220);Object.defineProperty(t,"TranscriberRecognizer",{enumerable:!0,get:function(){return a.TranscriberRecognizer}});var s=n(214);Object.defineProperty(t,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(t,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(t,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(t,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(t,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(t,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var c=n(215);Object.defineProperty(t,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorCommandTypes}}),Object.defineProperty(t,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return c.ConversationTranslatorMessageTypes}}),Object.defineProperty(t,"InternalParticipants",{enumerable:!0,get:function(){return c.InternalParticipants}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationManager=void 0;var r=n(2),i=n(63),o=n(61),a=n(206),s=function(){function e(){this.privRequestParams=a.ConversationConnectionConfig.configParams,this.privErrors=a.ConversationConnectionConfig.restErrors,this.privHost=a.ConversationConnectionConfig.host,this.privApiVersion=a.ConversationConnectionConfig.apiVersion,this.privRestPath=a.ConversationConnectionConfig.restPath,this.privRestAdapter=new r.RestMessageAdapter({})}return e.prototype.createOrJoin=function(e,t,n,s){var c=this;try{i.Contracts.throwIfNullOrUndefined(e,"args");var u=e.getProperty(o.PropertyId.SpeechServiceConnection_RecoLanguage,a.ConversationConnectionConfig.defaultLanguageCode),p=e.getProperty(o.PropertyId.ConversationTranslator_Name,"conversation_host"),l=e.getProperty(o.PropertyId.ConversationTranslator_Host,this.privHost),d=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),f=e.getProperty(o.PropertyId.SpeechServiceConnection_Key),m=e.getProperty(o.PropertyId.SpeechServiceConnection_Region),h=e.getProperty(o.PropertyId.SpeechServiceAuthorization_Token);i.Contracts.throwIfNullOrWhitespace(u,"languageCode"),i.Contracts.throwIfNullOrWhitespace(p,"nickname"),i.Contracts.throwIfNullOrWhitespace(l,"endpointHost");var v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=u,v[this.privRequestParams.nickname]=p;var g={};d&&(g[this.privRequestParams.correlationId]=d),g[this.privRequestParams.clientAppId]=a.ConversationConnectionConfig.clientAppId,void 0!==t?v[this.privRequestParams.roomId]=t:(i.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionRegion),g[this.privRequestParams.subscriptionRegion]=m,f?g[this.privRequestParams.subscriptionKey]=f:h?g[this.privRequestParams.authorization]="Bearer "+h:i.Contracts.throwIfNullOrUndefined(f,this.privErrors.authInvalidSubscriptionKey));var y={};y.headers=g,this.privRestAdapter.options=y;var b="https://"+l+this.privRestPath;this.privRestAdapter.request(r.RestRequestType.Post,b,v,null).then(function(e){var t=r.RestMessageAdapter.extractHeaderValue(c.privRequestParams.requestId,e.headers);if(e.ok){var i=JSON.parse(e.data);if(i&&(i.requestId=t),n){try{n(i)}catch(e){s&&s(e)}n=void 0}}else if(s){var o=c.privErrors.invalidCreateJoinConversationResponse.replace("{status}",e.status.toString()),a=void 0;try{o+=" ["+(a=JSON.parse(e.data)).error.code+": "+a.error.message+"]"}catch(t){o+=" ["+e.data+"]"}t&&(o+=" "+t),s(o)}}).catch(function(e){})}catch(e){if(s)if(e instanceof Error){var _=e;s(_.name+": "+_.message)}else s(e)}},e.prototype.leave=function(e,t){var n=this;return new Promise(function(a,s){try{i.Contracts.throwIfNullOrUndefined(e,n.privErrors.invalidArgs.replace("{arg}","config")),i.Contracts.throwIfNullOrWhitespace(t,n.privErrors.invalidArgs.replace("{arg}","token"));var c=e.getProperty(o.PropertyId.ConversationTranslator_Host,n.privHost),u=e.getProperty(o.PropertyId.ConversationTranslator_CorrelationId),p={};p[n.privRequestParams.apiVersion]=n.privApiVersion,p[n.privRequestParams.sessionToken]=t;var l={};u&&(l[n.privRequestParams.correlationId]=u);var d={};d.headers=l,n.privRestAdapter.options=d;var f="https://"+c+n.privRestPath;n.privRestAdapter.request(r.RestRequestType.Delete,f,p,null).then(function(e){e.ok,a()}).catch(function(e){})}catch(e){if(e instanceof Error){var m=e;s(m.name+": "+m.message)}else s(e)}})},e}();t.ConversationManager=s},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionConfig=void 0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),Object.defineProperty(t,"host",{get:function(){return t.privHost},enumerable:!1,configurable:!0}),Object.defineProperty(t,"apiVersion",{get:function(){return t.privApiVersion},enumerable:!1,configurable:!0}),Object.defineProperty(t,"clientAppId",{get:function(){return t.privClientAppId},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultLanguageCode",{get:function(){return t.privDefaultLanguageCode},enumerable:!1,configurable:!0}),Object.defineProperty(t,"restPath",{get:function(){return t.privRestPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"webSocketPath",{get:function(){return t.privWebSocketPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"speechHost",{get:function(){return t.privSpeechHost},enumerable:!1,configurable:!0}),Object.defineProperty(t,"speechPath",{get:function(){return t.privSpeechPath},enumerable:!1,configurable:!0}),Object.defineProperty(t,"transcriptionEventKeys",{get:function(){return t.privTranscriptionEventKeys},enumerable:!1,configurable:!0}),t.privHost="dev.microsofttranslator.com",t.privRestPath="/capito/room",t.privApiVersion="2.0",t.privDefaultLanguageCode="en-US",t.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15",t.privWebSocketPath="/capito/translate",t.privSpeechHost="{region}.s2s.speech.microsoft.com",t.privSpeechPath="/speech/translation/cognitiveservices/v1",t.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"],t}(n(207).RestConfigBase);t.ConversationConnectionConfig=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RestConfigBase=void 0;var r=function(){function e(){}return Object.defineProperty(e,"requestOptions",{get:function(){return e.privDefaultRequestOptions},enumerable:!1,configurable:!0}),Object.defineProperty(e,"configParams",{get:function(){return e.privDefaultParams},enumerable:!1,configurable:!0}),Object.defineProperty(e,"restErrors",{get:function(){return e.privRestErrors},enumerable:!1,configurable:!0}),e.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4},e.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."},e.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"},e}();t.RestConfigBase=r},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorRecognizer=t.ConversationRecognizerFactory=void 0;var s=n(53),c=n(4),u=n(63),p=n(61),l=n(209),d=n(212),f=function(){function e(){}return e.fromConfig=function(e,t,n){return new m(e,t,n)},e}();t.ConversationRecognizerFactory=f;var m=function(e){function t(t,n,r){var i=this,o=n;u.Contracts.throwIfNull(o,"speechConfig");var a=t;return u.Contracts.throwIfNull(a,"conversationImpl"),(i=e.call(this,r,o.properties,new l.ConversationConnectionFactory)||this).privConversation=a,i.privIsDisposed=!1,i.privProperties=o.properties.clone(),i.privConnection=p.Connection.fromRecognizer(i),i.privSetTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?c.Timeout.setTimeout:setTimeout,i.privClearTimeout="undefined"!=typeof Blob&&"undefined"!=typeof Worker?c.Timeout.clearTimeout:clearTimeout,i}return i(t,e),Object.defineProperty(t.prototype,"connected",{set:function(e){this.privConnection.connected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"disconnected",{set:function(e){this.privConnection.disconnected=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return this.privSpeechRecognitionLanguage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.isDisposed=function(){return this.privIsDisposed},t.prototype.connect=function(e,t,n){try{u.Contracts.throwIfDisposed(this.privIsDisposed),u.Contracts.throwIfNullOrWhitespace(e,"token"),this.privReco.conversationTranslatorToken=e,this.resetConversationTimeout(),this.privReco.connectAsync(t,n)}catch(e){if(n)if(e instanceof Error){var r=e;n(r.name+": "+r.message)}else n(e)}},t.prototype.disconnect=function(e,t){try{u.Contracts.throwIfDisposed(this.privIsDisposed),void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(function(){e&&e()},function(e){t&&t(e)})}catch(e){if(t)if(e instanceof Error){var n=e;t(n.name+": "+n.message)}else t(e);this.dispose(!0).catch(function(e){c.Events.instance.onEvent(new c.BackgroundEvent(e))})}},t.prototype.sendRequest=function(e,t,n){try{u.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(e,t,n)}catch(e){if(n)if(e instanceof Error){var r=e;n(r.name+": "+r.message)}else n(e);this.dispose(!0).catch(function(e){c.Events.instance.onEvent(new c.BackgroundEvent(e))})}},t.prototype.close=function(){var e,t;return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privIsDisposed?[3,2]:(null===(e=this.privConnection)||void 0===e||e.closeConnection(),null===(t=this.privConnection)||void 0===t||t.close(),this.privConnection=void 0,[4,this.dispose(!0)]);case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privIsDisposed?[2]:t?(void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),[4,e.prototype.dispose.call(this,t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.createRecognizerConfig=function(e){return new s.RecognizerConfig(e,this.privProperties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new d.ConversationServiceAdapter(e,t,i,r,this)},t.prototype.sendMessage=function(e,t,n){!function(e,t,n){e?e.then(function(e){try{t&&t()}catch(e){n&&n("'Unhandled error on promise callback: "+e+"'")}},function(e){try{n&&n(e)}catch(e){}}):n&&n("Null promise")}(this.privReco.sendMessageAsync(e),t,n),this.resetConversationTimeout()},t.prototype.resetConversationTimeout=function(){var e=this;void 0!==this.privTimeoutToken&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(function(){e.sendRequest(e.privConversation.getKeepAlive())},6e4)},t}(p.Recognizer);t.ConversationTranslatorRecognizer=m},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionFactory=void 0;var o=n(2),a=n(4),s=n(63),c=n(61),u=n(123),p=n(206),l=n(210),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.create=function(e,t,n){var r=e.parameters.getProperty(c.PropertyId.ConversationTranslator_Host,p.ConversationConnectionConfig.host),i=e.parameters.getProperty(c.PropertyId.ConversationTranslator_CorrelationId,a.createGuid()),u="wss://"+r+p.ConversationConnectionConfig.webSocketPath,d=e.parameters.getProperty(c.PropertyId.ConversationTranslator_Token,void 0);s.Contracts.throwIfNullOrUndefined(d,"token");var f={};f[p.ConversationConnectionConfig.configParams.apiVersion]=p.ConversationConnectionConfig.apiVersion,f[p.ConversationConnectionConfig.configParams.token]=d,f[p.ConversationConnectionConfig.configParams.correlationId]=i;var m="true"===e.parameters.getProperty("SPEECH-EnableWebsocketCompression","false");return new o.WebsocketConnection(u,f,{},new l.ConversationWebsocketMessageFormatter,o.ProxyInfo.fromRecognizerConfig(e),m,n)},t}(u.ConnectionFactoryBase);t.ConversationConnectionFactory=d},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationWebsocketMessageFormatter=void 0;var r=n(4),i=n(211),o=function(){this.toConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var n=new i.ConversationConnectionMessage(e.messageType,e.textContent,{},e.id);t.resolve(n)}else e.messageType===r.MessageType.Binary&&t.resolve(new i.ConversationConnectionMessage(e.messageType,e.binaryContent,void 0,e.id))}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise},this.fromConnectionMessage=function(e){var t=new r.Deferred;try{if(e.messageType===r.MessageType.Text){var n=""+(e.textBody?e.textBody:"");t.resolve(new r.RawWebsocketMessage(r.MessageType.Text,n,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise}};t.ConversationWebsocketMessageFormatter=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationConnectionMessage=void 0;var o=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r,i)||this,a=JSON.parse(o.textBody);return void 0!==a.type&&(o.privConversationMessageType=a.type),o}return i(t,e),Object.defineProperty(t.prototype,"conversationMessageType",{get:function(){return this.privConversationMessageType},enumerable:!1,configurable:!0}),t}(n(4).ConnectionMessage);t.ConversationConnectionMessage=o},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationServiceAdapter=void 0;var s=n(4),c=n(61),u=n(53),p=n(211),l=n(213),d=n(214),f=n(215),m=n(216),h=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i,o)||this;return a.privLastPartialUtteranceId="",a.noOp=function(){},a.privConversationServiceConnector=o,a.privConversationAuthentication=t,a.receiveMessageOverride=a.receiveConversationMessageOverride,a.recognizeOverride=a.noOp,a.postConnectImplOverride=a.conversationConnectImpl,a.configConnectionOverride=a.configConnection,a.disconnectOverride=a.privDisconnect,a.privConversationRequestSession=new l.ConversationRequestSession(s.createNoDashGuid()),a.privConversationConnectionFactory=n,a.privConversationIsDisposed=!1,a}return i(t,e),t.prototype.isDisposed=function(){return e.prototype.isDisposed.call(this)||this.privConversationIsDisposed},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privConversationIsDisposed=!0,this.privConnectionConfigPromise?[4,this.privConnectionConfigPromise]:[3,3];case 1:return[4,n.sent().dispose(t)];case 2:n.sent(),n.label=3;case 3:return[4,e.prototype.dispose.call(this,t)];case 4:return n.sent(),[2]}})})},t.prototype.sendMessage=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,this.fetchConnection()];case 1:return[2,t.sent().send(new p.ConversationConnectionMessage(s.MessageType.Text,e))]}})})},t.prototype.sendMessageAsync=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return new s.Deferred,[4,this.fetchConnection()];case 1:return[4,t.sent().send(new p.ConversationConnectionMessage(s.MessageType.Text,e))];case 2:return t.sent(),[2]}})})},t.prototype.privDisconnect=function(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,c.CancellationReason.Error,c.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()},t.prototype.processTypeSpecificMessages=function(e,t,n){return o(this,void 0,void 0,function(){return a(this,function(e){return[2,!0]})})},t.prototype.cancelRecognition=function(e,t,n,r,i){this.terminateMessageLoop=!0;var o=new c.ConversationTranslationCanceledEventArgs(n,i,r,void 0,e);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,o)}catch(e){}},t.prototype.conversationConnectImpl=function(e){return o(this,void 0,void 0,function(){return a(this,function(t){return this.privConnectionLoop=this.startMessageLoop(),[2,e]})})},t.prototype.receiveConversationMessageOverride=function(){return o(this,void 0,void 0,function(){var e,t,n,r,i,o,p,l,h,v,g,y,b,_,S;return a(this,function(a){switch(a.label){case 0:if(this.isDisposed()||this.terminateMessageLoop)return[2,Promise.resolve()];e=new s.Deferred,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,this.fetchConnection()];case 2:return[4,a.sent().read()];case 3:if(t=a.sent(),this.isDisposed()||this.terminateMessageLoop)return e.resolve(),[2,Promise.resolve()];if(!t)return[2,this.receiveConversationMessageOverride()];n=this.privConversationRequestSession.sessionId,r=!1;try{switch(t.conversationMessageType.toLowerCase()){case"info":case"participant_command":case"command":switch((i=m.CommandResponsePayload.fromJSON(t.textBody)).command.toLowerCase()){case"participantlist":o=m.ParticipantsListPayloadResponse.fromJSON(t.textBody),p=o.participants.map(function(e){return{avatar:e.avatar,displayName:e.nickname,id:e.participantId,isHost:e.ishost,isMuted:e.ismuted,isUsingTts:e.usetts,preferredLanguage:e.locale}}),this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new d.ParticipantsListEventArgs(o.roomid,o.token,o.translateTo,o.profanityFilter,o.roomProfanityFilter,o.roomLocked,o.muteAll,p,n));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new d.ParticipantAttributeEventArgs(i.participantId,f.ConversationTranslatorCommandTypes.setTranslateToLanguages,i.value,n));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new d.ParticipantAttributeEventArgs(i.participantId,f.ConversationTranslatorCommandTypes.setProfanityFiltering,i.value,n));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new d.ParticipantAttributeEventArgs(i.participantId,f.ConversationTranslatorCommandTypes.setMute,i.value,n));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new d.MuteAllEventArgs(i.value,n));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new c.ConversationExpirationEventArgs(i.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new d.ParticipantAttributeEventArgs(i.participantId,f.ConversationTranslatorCommandTypes.setUseTTS,i.value,n));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new d.LockRoomEventArgs(i.value,n));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new d.ParticipantAttributeEventArgs(i.participantId,f.ConversationTranslatorCommandTypes.changeNickname,i.nickname,n));break;case"joinsession":l=m.ParticipantPayloadResponse.fromJSON(t.textBody),h={avatar:l.avatar,displayName:l.nickname,id:l.participantId,isHost:l.ishost,isMuted:l.ismuted,isUsingTts:l.usetts,preferredLanguage:l.locale},this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new d.ParticipantEventArgs(h,n));break;case"leavesession":v={id:i.participantId},this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new d.ParticipantEventArgs(v,n));break;case"disconnectsession":i.participantId;break;case"token":g=new u.CognitiveTokenAuthentication(function(e){var t=i.token;return Promise.resolve(t)},function(e){var t=i.token;return Promise.resolve(t)}),this.authentication=g}break;case"partial":case"final":y=m.SpeechResponsePayload.fromJSON(t.textBody),b=new c.ConversationTranslationResult(y.participantId,this.getTranslations(y.translations),y.language,void 0,void 0,y.recognition,void 0,void 0,t.textBody,void 0),y.isFinal?((void 0!==b.text&&b.text.length>0||y.id===this.privLastPartialUtteranceId)&&(r=!0),r&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new d.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.final,b,n))):void 0!==b.text&&(this.privLastPartialUtteranceId=y.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new d.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.partial,b,n)));break;case"translated_message":_=m.TextResponsePayload.fromJSON(t.textBody),S=new c.ConversationTranslationResult(_.participantId,this.getTranslations(_.translations),_.language,void 0,void 0,_.originalText,void 0,void 0,void 0,t.textBody,void 0),this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new d.ConversationReceivedTranslationEventArgs(f.ConversationTranslatorMessageTypes.instantMessage,S,n))}}catch(e){}return[2,this.receiveConversationMessageOverride()];case 4:return a.sent(),this.terminateMessageLoop=!0,[3,5];case 5:return[2,e.promise]}})})},t.prototype.startMessageLoop=function(){return o(this,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:if(this.isDisposed())return[2,Promise.resolve()];this.terminateMessageLoop=!1,e=this.receiveConversationMessageOverride(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e];case 2:return[2,n.sent()];case 3:return t=n.sent(),this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",c.CancellationReason.Error,c.CancellationErrorCode.RuntimeError,t),[2,null];case 4:return[2]}})})},t.prototype.configConnection=function(){var e=this;return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise?this.privConnectionConfigPromise.then(function(t){return t.state()===s.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigPromise=null,e.configConnection()):e.privConnectionConfigPromise},function(t){return e.privConnectionId=null,e.privConnectionConfigPromise=null,e.configConnection()}):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(function(e){return e}),this.privConnectionConfigPromise)},t.prototype.getTranslations=function(e){var t;if(void 0!==e){t=new c.Translations;for(var n=0,r=e;n<r.length;n++){var i=r[n];t.set(i.lang,i.translation)}}return t},t}(u.ServiceRecognizerBase);t.ConversationServiceAdapter=h},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationRequestSession=void 0;var o=n(4),a=function(){function e(e){var t=this;this.privIsDisposed=!1,this.privDetachables=new Array,this.onPreConnectionStart=function(e,n){t.privSessionId=n},this.onAuthCompleted=function(e,n){e&&t.onComplete()},this.onConnectionEstablishCompleted=function(e,n){200!==e&&403===e&&t.onComplete()},this.onServiceTurnEndResponse=function(e){e?t.privRequestId=o.createNoDashGuid():t.onComplete()},this.onComplete=function(){},this.privSessionId=e,this.privRequestId=o.createNoDashGuid(),this.privRequestCompletionDeferral=new o.Deferred}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.privRequestCompletionDeferral.promise},enumerable:!1,configurable:!0}),e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:if(this.privIsDisposed)return[3,4];this.privIsDisposed=!0,e=0,t=this.privDetachables,n.label=1;case 1:return e<t.length?[4,t[e].detach()]:[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},e}();t.ConversationRequestSession=a},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationReceivedTranslationEventArgs=t.ParticipantsListEventArgs=t.ParticipantAttributeEventArgs=t.ParticipantEventArgs=t.LockRoomEventArgs=t.MuteAllEventArgs=void 0;var o=n(61),a=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privIsMuted=t,r}return i(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsMuted},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.MuteAllEventArgs=a;var s=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privIsLocked=t,r}return i(t,e),Object.defineProperty(t.prototype,"isMuted",{get:function(){return this.privIsLocked},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.LockRoomEventArgs=s;var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.privParticipant=t,r}return i(t,e),Object.defineProperty(t.prototype,"participant",{get:function(){return this.privParticipant},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantEventArgs=c;var u=function(e){function t(t,n,r,i){var o=e.call(this,i)||this;return o.privKey=n,o.privValue=r,o.privParticipantId=t,o}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.privValue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.privKey},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.privParticipantId},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantAttributeEventArgs=u;var p=function(e){function t(t,n,r,i,o,a,s,c,u){var p=e.call(this,u)||this;return p.privRoomId=t,p.privSessionToken=n,p.privTranslateTo=r,p.privProfanityFilter=i,p.privRoomProfanityFilter=o,p.privIsRoomLocked=a,p.privIsRoomLocked=s,p.privParticipants=c,p}return i(t,e),Object.defineProperty(t.prototype,"sessionToken",{get:function(){return this.privSessionToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversationId",{get:function(){return this.privRoomId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"translateTo",{get:function(){return this.privTranslateTo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"profanityFilter",{get:function(){return this.privProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"roomProfanityFilter",{get:function(){return this.privRoomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoomLocked",{get:function(){return this.privIsRoomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMuteAll",{get:function(){return this.privIsMuteAll},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"participants",{get:function(){return this.privParticipants},enumerable:!1,configurable:!0}),t}(o.SessionEventArgs);t.ParticipantsListEventArgs=p;var l=function(){function e(e,t,n){this.privPayload=t,this.privCommand=e,this.privSessionId=n}return Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommand},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!1,configurable:!0}),e}();t.ConversationReceivedTranslationEventArgs=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationTranslatorCommandTypes=t.ConversationTranslatorMessageTypes=t.InternalParticipants=void 0;var r=function(){function e(e,t){void 0===e&&(e=[]),this.participants=e,this.meId=t}return e.prototype.addOrUpdateParticipant=function(e){if(void 0!==e){var t=this.getParticipantIndex(e.id);return t>-1?this.participants.splice(t,1,e):this.participants.push(e),this.getParticipant(e.id)}},e.prototype.getParticipantIndex=function(e){return this.participants.findIndex(function(t){return t.id===e})},e.prototype.getParticipant=function(e){return this.participants.find(function(t){return t.id===e})},e.prototype.deleteParticipant=function(e){this.participants=this.participants.filter(function(t){return t.id!==e})},Object.defineProperty(e.prototype,"host",{get:function(){return this.participants.find(function(e){return!0===e.isHost})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"me",{get:function(){return this.getParticipant(this.meId)},enumerable:!1,configurable:!0}),e}();t.InternalParticipants=r,t.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"},t.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(217);Object.defineProperty(t,"CommandResponsePayload",{enumerable:!0,get:function(){return r.CommandResponsePayload}});var i=n(218);Object.defineProperty(t,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantsListPayloadResponse}}),Object.defineProperty(t,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return i.ParticipantPayloadResponse}});var o=n(219);Object.defineProperty(t,"SpeechResponsePayload",{enumerable:!0,get:function(){return o.SpeechResponsePayload}}),Object.defineProperty(t,"TextResponsePayload",{enumerable:!0,get:function(){return o.TextResponsePayload}})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CommandResponsePayload=void 0;var r=function(){function e(e){this.privCommandResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"type",{get:function(){return this.privCommandResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privCommandResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privCommandResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privCommandResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privCommandResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privCommandResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.privCommandResponse.value},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privCommandResponse.token},enumerable:!1,configurable:!0}),e}();t.CommandResponsePayload=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ParticipantPayloadResponse=t.ParticipantsListPayloadResponse=void 0;var r=function(){function e(e){this.privParticipantsPayloadResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privParticipantsPayloadResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privParticipantsPayloadResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.privParticipantsPayloadResponse.command},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participants",{get:function(){return this.privParticipantsPayloadResponse.participants},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privParticipantsPayloadResponse.token},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translateTo",{get:function(){return this.privParticipantsPayloadResponse.translateTo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"profanityFilter",{get:function(){return this.privParticipantsPayloadResponse.profanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomProfanityFilter",{get:function(){return this.privParticipantsPayloadResponse.roomProfanityFilter},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomLocked",{get:function(){return this.privParticipantsPayloadResponse.roomLocked},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muteAll",{get:function(){return this.privParticipantsPayloadResponse.muteAll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privParticipantsPayloadResponse.type},enumerable:!1,configurable:!0}),e}();t.ParticipantsListPayloadResponse=r;var i=function(){function e(e){this.privParticipantPayloadResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privParticipantPayloadResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"locale",{get:function(){return this.privParticipantPayloadResponse.locale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"usetts",{get:function(){return this.privParticipantPayloadResponse.usetts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ismuted",{get:function(){return this.privParticipantPayloadResponse.ismuted},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ishost",{get:function(){return this.privParticipantPayloadResponse.ishost},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privParticipantPayloadResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatar",{get:function(){return this.privParticipantPayloadResponse.avatar},enumerable:!1,configurable:!0}),e}();t.ParticipantPayloadResponse=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.TextResponsePayload=t.SpeechResponsePayload=void 0;var r=function(){function e(e){this.privSpeechResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"recognition",{get:function(){return this.privSpeechResponse.recognition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privSpeechResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privSpeechResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privSpeechResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privSpeechResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privSpeechResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privSpeechResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privSpeechResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privSpeechResponse.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isFinal",{get:function(){return"final"===this.privSpeechResponse.type},enumerable:!1,configurable:!0}),e}();t.SpeechResponsePayload=r;var i=function(){function e(e){this.privTextResponse=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"originalText",{get:function(){return this.privTextResponse.originalText},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privTextResponse.translations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privTextResponse.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"language",{get:function(){return this.privTextResponse.language},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this.privTextResponse.nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"participantId",{get:function(){return this.privTextResponse.participantId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roomid",{get:function(){return this.privTextResponse.roomid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timestamp",{get:function(){return this.privTextResponse.timestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.privTextResponse.type},enumerable:!1,configurable:!0}),e}();t.TextResponsePayload=i},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.TranscriberRecognizer=void 0;var s=n(4),c=n(63),u=n(61),p=n(53),l=function(e){function t(t,n){var r=this,i=t;return c.Contracts.throwIfNull(i,"speechTranslationConfig"),c.Contracts.throwIfNullOrWhitespace(i.speechRecognitionLanguage,u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),(r=e.call(this,n,i.properties,new p.TranscriberConnectionFactory)||this).privDisposedRecognizer=!1,r}return i(t,e),t.prototype.getConversationInfo=function(){return c.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo},Object.defineProperty(t.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){c.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"conversation",{set:function(e){c.Contracts.throwIfNullOrUndefined(e,"Conversation"),this.privConversation=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"speechRecognitionLanguage",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){return this.privProperties},enumerable:!1,configurable:!0}),t.prototype.startContinuousRecognitionAsync=function(e,t){s.marshalPromiseToCallbacks(this.startContinuousRecognitionAsyncImpl(p.RecognitionMode.Conversation),e,t)},t.prototype.stopContinuousRecognitionAsync=function(e,t){s.marshalPromiseToCallbacks(this.stopContinuousRecognitionAsyncImpl(),e,t)},t.prototype.close=function(){return o(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return this.privDisposedRecognizer?[3,2]:[4,this.dispose(!0)];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.pushConversationEvent=function(e,t){return o(this,void 0,void 0,function(){var n;return a(this,function(r){switch(r.label){case 0:return n=this.privReco,c.Contracts.throwIfNullOrUndefined(n,"serviceRecognizer"),[4,n.sendSpeechEventAsync(e,t)];case 1:return r.sent(),[2]}})})},t.prototype.connectCallbacks=function(e){this.canceled=function(t,n){e.canceled&&e.canceled(e,n)},this.conversationCanceled=function(t,n){e.conversationCanceled&&e.conversationCanceled(e,n)},this.recognizing=function(t,n){e.transcribing&&e.transcribing(e,n)},this.recognized=function(t,n){e.transcribed&&e.transcribed(e,n)},this.conversationStarted=function(t,n){e.conversationStarted&&e.conversationStarted(e,n)},this.conversationStopped=function(t,n){e.conversationStopped&&e.conversationStopped(e,n)},this.sessionStarted=function(t,n){e.sessionStarted&&e.sessionStarted(e,n)},this.sessionStopped=function(t,n){e.sessionStopped&&e.sessionStopped(e,n)}},t.prototype.disconnectCallbacks=function(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0,this.conversationCanceled=void 0,this.conversationStarted=void 0,this.conversationStopped=void 0},t.prototype.dispose=function(t){return o(this,void 0,void 0,function(){return a(this,function(n){switch(n.label){case 0:return this.privDisposedRecognizer?[2]:t?(this.privDisposedRecognizer=!0,[4,this.implRecognizerStop()]):[3,2];case 1:n.sent(),n.label=2;case 2:return[4,e.prototype.dispose.call(this,t)];case 3:return n.sent(),[2]}})})},t.prototype.createRecognizerConfig=function(e){return new p.RecognizerConfig(e,this.properties)},t.prototype.createServiceRecognizer=function(e,t,n,r){var i=n;return new p.TranscriptionServiceRecognizer(e,t,i,r,this)},t}(u.Recognizer);t.TranscriberRecognizer=l},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAudioMetadata=t.MetadataType=void 0,function(e){e.WordBoundary="WordBoundary",e.Bookmark="Bookmark",e.Viseme="Viseme"}(t.MetadataType||(t.MetadataType={}));var r=function(){function e(e){this.privSynthesisAudioMetadata=JSON.parse(e)}return e.fromJSON=function(t){return new e(t)},Object.defineProperty(e.prototype,"Metadata",{get:function(){return this.privSynthesisAudioMetadata.Metadata},enumerable:!1,configurable:!0}),e}();t.SynthesisAudioMetadata=r},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisTurn=void 0;var o=n(4),a=n(73),s=n(223),c=n(224),u=function(){function e(){var e=this;this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.onPreConnectionStart=function(t,n){e.privAuthFetchEventId=t,e.onEvent(new c.ConnectingToSynthesisServiceEvent(e.privRequestId,e.privAuthFetchEventId))},this.onAuthCompleted=function(t,n){t&&e.onComplete()},this.onConnectionEstablishCompleted=function(t,n){if(200===t)return e.onEvent(new c.SynthesisStartedEvent(e.requestId,e.privAuthFetchEventId)),void(e.privBytesReceived=0);403===t&&e.onComplete()},this.onServiceResponseMessage=function(t){var n=JSON.parse(t);e.streamId=n.audio.streamId},this.onServiceTurnEndResponse=function(){e.privInTurn=!1,e.privTurnDeferral.resolve(),e.onComplete()},this.onServiceTurnStartResponse=function(){e.privTurnDeferral&&e.privInTurn&&(e.privTurnDeferral.reject("Another turn started before current completed."),e.privTurnDeferral.promise.then().catch(function(){})),e.privInTurn=!0,e.privTurnDeferral=new o.Deferred},this.dispose=function(t){e.privIsDisposed||(e.privIsDisposed=!0)},this.onEvent=function(e){o.Events.instance.onEvent(e)},this.onComplete=function(){e.privIsSynthesizing&&(e.privIsSynthesizing=!1,e.privIsSynthesisEnded=!0,e.privAudioOutputStream.close(),e.privInTurn=!1,void 0!==e.privTurnAudioDestination&&(e.privTurnAudioDestination.close(),e.privTurnAudioDestination=void 0))},this.privRequestId=o.createNoDashGuid(),this.privTurnDeferral=new o.Deferred,this.privTurnDeferral.resolve()}return Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.privStreamId},set:function(e){this.privStreamId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{get:function(){return this.privAudioOutputFormat},set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"turnCompletionPromise",{get:function(){return this.privTurnDeferral.promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesisEnded",{get:function(){return this.privIsSynthesisEnded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSynthesizing",{get:function(){return this.privIsSynthesizing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTextOffset",{get:function(){return this.privTextOffset},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bytesReceived",{get:function(){return this.privBytesReceived},enumerable:!1,configurable:!0}),e.prototype.getAllReceivedAudio=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.privReceivedAudio?[2,Promise.resolve(this.privReceivedAudio)]:this.privIsSynthesisEnded?[4,this.readAllAudioFromStream()]:[2,null];case 1:return e.sent(),[2,Promise.resolve(this.privReceivedAudio)]}})})},e.prototype.getAllReceivedAudioWithHeader=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return this.privReceivedAudioWithHeader?[2,this.privReceivedAudioWithHeader]:this.privIsSynthesisEnded?this.audioOutputFormat.hasHeader?[4,this.getAllReceivedAudio()]:[3,2]:[2,null];case 1:return e=t.sent(),this.privReceivedAudioWithHeader=s.SynthesisAdapterBase.addHeader(e,this.audioOutputFormat),[2,this.privReceivedAudioWithHeader];case 2:return[2,this.getAllReceivedAudio()]}})})},e.prototype.startNewSynthesis=function(e,t,n,r){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=e,this.privRawText=t,this.privIsSSML=n,this.privAudioOutputStream=new a.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privPartialVisemeAnimation="",void 0!==r&&(this.privTurnAudioDestination=r,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new c.SynthesisTriggeredEvent(this.requestId,void 0,void 0===r?void 0:r.id()))},e.prototype.onAudioChunkReceived=function(e){this.isSynthesizing&&(this.privAudioOutputStream.write(e),this.privBytesReceived+=e.byteLength,void 0!==this.privTurnAudioDestination&&this.privTurnAudioDestination.write(e))},e.prototype.onWordBoundaryEvent=function(e){this.updateTextOffset(e)},e.prototype.onVisemeMetadataReceived=function(e){void 0!==e.Data.AnimationChunk&&(this.privPartialVisemeAnimation+=e.Data.AnimationChunk)},e.prototype.onStopSynthesizing=function(){this.onComplete()},e.prototype.getAndClearVisemeAnimation=function(){var e=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",e},e.prototype.updateTextOffset=function(e){this.privTextOffset>=0&&(this.privTextOffset=this.privRawText.indexOf(e,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+e.length),this.privIsSSML&&this.privRawText.indexOf("<",this.privTextOffset+1)>this.privRawText.indexOf(">",this.privTextOffset+1)&&this.updateTextOffset(e))},e.prototype.readAllAudioFromStream=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:if(!this.privIsSynthesisEnded)return[3,4];this.privReceivedAudio=new ArrayBuffer(this.bytesReceived),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.privAudioOutputStream.read(this.privReceivedAudio)];case 2:return e.sent(),[3,4];case 3:return e.sent(),this.privReceivedAudio=new ArrayBuffer(0),[3,4];case 4:return[2]}})})},e}();t.SynthesisTurn=u},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisAdapterBase=void 0;var o=n(4),a=n(61),s=n(53),c=n(170),u=function(){function e(e,t,n,r,i){var u=this;if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.sendSynthesisContext=function(e){var t=u.synthesisContext.toJSON();if(t)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"synthesis.context",u.privSynthesisTurn.requestId,"application/json",t))},this.sendSpeechServiceConfig=function(e,t){if(t)return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"speech.config",u.privSynthesisTurn.requestId,"application/json",t))},this.sendSsmlMessage=function(e,t,n){return e.send(new c.SpeechConnectionMessage(o.MessageType.Text,"ssml",n,"application/ssml+xml",t))},!e)throw new o.ArgumentNullError("authentication");if(!t)throw new o.ArgumentNullError("connectionFactory");if(!n)throw new o.ArgumentNullError("synthesizerConfig");this.privAuthentication=e,this.privConnectionFactory=t,this.privSynthesizerConfig=n,this.privIsDisposed=!1,this.privSpeechSynthesizer=r,this.privSessionAudioDestination=i,this.privSynthesisTurn=new s.SynthesisTurn,this.privConnectionEvents=new o.EventSource,this.privServiceEvents=new o.EventSource,this.privSynthesisContext=new s.SynthesisContext(this.privSpeechSynthesizer),this.privAgentConfig=new s.AgentConfig,this.connectionEvents.attach(function(e){if("ConnectionClosedEvent"===e.name){var t=e;1e3!==t.statusCode&&u.cancelSynthesisLocal(a.CancellationReason.Error,1007===t.statusCode?a.CancellationErrorCode.BadRequestParameters:a.CancellationErrorCode.ConnectionFailure,t.reason+" websocket error code: "+t.statusCode)}})}return Object.defineProperty(e.prototype,"synthesisContext",{get:function(){return this.privSynthesisContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"agentConfig",{get:function(){return this.privAgentConfig},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionEvents",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serviceEvents",{get:function(){return this.privServiceEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activityTemplate",{get:function(){return this.privActivityTemplate},set:function(e){this.privActivityTemplate=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"audioOutputFormat",{set:function(e){this.privAudioOutputFormat=e,this.privSynthesisTurn.audioOutputFormat=e,void 0!==this.privSessionAudioDestination&&(this.privSessionAudioDestination.format=e),void 0!==this.synthesisContext&&(this.synthesisContext.audioOutputFormat=e)},enumerable:!1,configurable:!0}),e.addHeader=function(e,t){if(!t.hasHeader)return e;t.updateHeader(e.byteLength);var n=new Uint8Array(e.byteLength+t.header.byteLength);return n.set(new Uint8Array(t.header),0),n.set(new Uint8Array(e),t.header.byteLength),n.buffer},e.prototype.isDisposed=function(){return this.privIsDisposed},e.prototype.dispose=function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return this.privIsDisposed=!0,void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise?[4,this.privConnectionConfigurationPromise]:[3,3];case 1:return[4,t.sent().dispose(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.connect=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,this.connectImpl()];case 1:return e.sent(),[2]}})})},e.prototype.sendNetworkMessage=function(e,t){return r(this,void 0,void 0,function(){var n,r;return i(this,function(i){switch(i.label){case 0:return n="string"==typeof t?o.MessageType.Text:o.MessageType.Binary,r="string"==typeof t?"application/json":"",[4,this.fetchConnection()];case 1:return[2,i.sent().send(new c.SpeechConnectionMessage(n,e,this.privSynthesisTurn.requestId,r,t))]}})})},e.prototype.Speak=function(e,t,n,o,s,c){return r(this,void 0,void 0,function(){var r,u,p,l;return i(this,function(i){switch(i.label){case 0:if(r=t?e:this.privSpeechSynthesizer.buildSsml(e),void 0!==this.speakOverride)return[2,this.speakOverride(r,n,o,s)];this.privSuccessCallback=o,this.privErrorCallback=s,this.privSynthesisTurn.startNewSynthesis(n,e,t,c),i.label=1;case 1:return i.trys.push([1,6,,7]),[4,this.connectImpl()];case 2:return i.sent(),[4,this.fetchConnection()];case 3:return u=i.sent(),[4,this.sendSynthesisContext(u)];case 4:return i.sent(),[4,this.sendSsmlMessage(u,r,n)];case 5:return i.sent(),p=new a.SpeechSynthesisEventArgs(new a.SpeechSynthesisResult(n,a.ResultReason.SynthesizingAudioStarted)),this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,p),this.receiveMessage(),[3,7];case 6:return l=i.sent(),this.cancelSynthesisLocal(a.CancellationReason.Error,a.CancellationErrorCode.ConnectionFailure,l),[2,Promise.reject(l)];case 7:return[2]}})})},e.prototype.cancelSynthesis=function(e,t,n,r){var i=new a.PropertyCollection;i.setProperty(s.CancellationErrorCodePropertyName,a.CancellationErrorCode[n]);var o=new a.SpeechSynthesisResult(e,a.ResultReason.Canceled,void 0,r,i);if(this.privSpeechSynthesizer.SynthesisCanceled){var c=new a.SpeechSynthesisEventArgs(o);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,c)}catch(e){}}if(this.privSuccessCallback)try{this.privSuccessCallback(o)}catch(e){}},e.prototype.cancelSynthesisLocal=function(e,t,n){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,e,t,n))},e.prototype.processTypeSpecificMessages=function(e,t,n){return!0},e.prototype.receiveMessage=function(){return r(this,void 0,void 0,function(){var t,n,r,u,p,l,d,f,m,h,v,g,y,b;return i(this,function(i){switch(i.label){case 0:return i.trys.push([0,14,,15]),[4,this.fetchConnection()];case 1:return[4,i.sent().read()];case 2:if(t=i.sent(),void 0!==this.receiveMessageOverride)return[2,this.receiveMessageOverride()];if(this.privIsDisposed)return[2];if(!t)return this.privSynthesisTurn.isSynthesizing?[2,this.receiveMessage()]:[2];if(this.privServiceHasSentMessage=!0,(n=c.SpeechConnectionMessage.fromConnectionMessage(t)).requestId.toLowerCase()!==this.privSynthesisTurn.requestId.toLowerCase())return[3,13];switch(n.path.toLowerCase()){case"turn.start":return[3,3];case"response":return[3,4];case"audio":return[3,5];case"audio.metadata":return[3,6];case"turn.end":return[3,7]}return[3,12];case 3:return this.privSynthesisTurn.onServiceTurnStartResponse(),[3,13];case 4:return this.privSynthesisTurn.onServiceResponseMessage(n.textBody),[3,13];case 5:if(this.privSynthesisTurn.streamId.toLowerCase()===n.streamId.toLowerCase()&&n.binaryBody){if(this.privSynthesisTurn.onAudioChunkReceived(n.binaryBody),this.privSpeechSynthesizer.synthesizing)try{r=e.addHeader(n.binaryBody,this.privSynthesisTurn.audioOutputFormat),u=new a.SpeechSynthesisEventArgs(new a.SpeechSynthesisResult(this.privSynthesisTurn.requestId,a.ResultReason.SynthesizingAudio,r)),this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,u)}catch(e){}void 0!==this.privSessionAudioDestination&&this.privSessionAudioDestination.write(n.binaryBody)}return[3,13];case 6:for(p=s.SynthesisAudioMetadata.fromJSON(n.textBody).Metadata,l=0,d=p;l<d.length;l++)switch((f=d[l]).Type){case s.MetadataType.WordBoundary:if(this.privSynthesisTurn.onWordBoundaryEvent(f.Data.text.Text),m=new a.SpeechSynthesisWordBoundaryEventArgs(f.Data.Offset,f.Data.text.Text,f.Data.text.Length,this.privSynthesisTurn.currentTextOffset),this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,m)}catch(e){}break;case s.MetadataType.Bookmark:if(h=new a.SpeechSynthesisBookmarkEventArgs(f.Data.Offset,f.Data.Bookmark),this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,h)}catch(e){}break;case s.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(f),f.Data.IsLastAnimation&&(v=new a.SpeechSynthesisVisemeEventArgs(f.Data.Offset,f.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation()),this.privSpeechSynthesizer.visemeReceived))try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,v)}catch(e){}}return[3,13];case 7:this.privSynthesisTurn.onServiceTurnEndResponse(),g=void 0,i.label=8;case 8:return i.trys.push([8,10,,11]),[4,this.privSynthesisTurn.getAllReceivedAudioWithHeader()];case 9:return y=i.sent(),g=new a.SpeechSynthesisResult(this.privSynthesisTurn.requestId,a.ResultReason.SynthesizingAudioCompleted,y),this.privSuccessCallback&&this.privSuccessCallback(g),[3,11];case 10:return b=i.sent(),this.privErrorCallback&&this.privErrorCallback(b),[3,11];case 11:if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new a.SpeechSynthesisEventArgs(g))}catch(e){}return[3,13];case 12:this.processTypeSpecificMessages(n)||this.privServiceEvents&&this.serviceEvents.onEvent(new o.ServiceEvent(n.path.toLowerCase(),n.textBody)),i.label=13;case 13:return[2,this.receiveMessage()];case 14:return i.sent(),[3,15];case 15:return[2]}})})},e.prototype.connectImpl=function(e){var t=this;if(void 0===e&&(e=!1),this.privConnectionPromise)return this.privConnectionPromise.then(function(e){return e.state()===o.ConnectionState.Disconnected?(t.privConnectionId=null,t.privConnectionPromise=null,t.privServiceHasSentMessage=!1,t.connectImpl()):t.privConnectionPromise},function(e){return t.privConnectionId=null,t.privConnectionPromise=null,t.privServiceHasSentMessage=!1,t.connectImpl()});this.privAuthFetchEventId=o.createNoDashGuid(),this.privConnectionId=o.createNoDashGuid(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);var n=e?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=n.then(function(n){return r(t,void 0,void 0,function(){var t,r,o=this;return i(this,function(i){switch(i.label){case 0:return[4,this.privSynthesisTurn.onAuthCompleted(!1)];case 1:return i.sent(),(t=this.privConnectionFactory.create(this.privSynthesizerConfig,n,this.privConnectionId)).events.attach(function(e){o.connectionEvents.onEvent(e)}),[4,t.open()];case 2:return 200!==(r=i.sent()).statusCode?[3,4]:[4,this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode)];case 3:return i.sent(),[2,Promise.resolve(t)];case 4:return 403!==r.statusCode||e?[3,5]:[2,this.connectImpl(!0)];case 5:return[4,this.privSynthesisTurn.onConnectionEstablishCompleted(r.statusCode,r.reason)];case 6:return i.sent(),[2,Promise.reject("Unable to contact server. StatusCode: "+r.statusCode+", "+this.privSynthesizerConfig.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+r.reason)]}})})},function(e){return r(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.privSynthesisTurn.onAuthCompleted(!0,e)];case 1:throw t.sent(),new Error(e)}})})}),this.privConnectionPromise.catch(function(){}),this.privConnectionPromise},e.prototype.fetchConnection=function(){return r(this,void 0,void 0,function(){var e=this;return i(this,function(t){switch(t.label){case 0:return this.privConnectionConfigurationPromise?[2,this.privConnectionConfigurationPromise.then(function(t){return t.state()===o.ConnectionState.Disconnected?(e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()):e.privConnectionConfigurationPromise},function(t){return e.privConnectionId=null,e.privConnectionConfigurationPromise=null,e.privServiceHasSentMessage=!1,e.fetchConnection()})]:(this.privConnectionConfigurationPromise=this.configureConnection(),[4,this.privConnectionConfigurationPromise]);case 1:return[2,t.sent()]}})})},e.prototype.configureConnection=function(){return r(this,void 0,void 0,function(){var e;return i(this,function(t){switch(t.label){case 0:return[4,this.connectImpl()];case 1:return e=t.sent(),void 0!==this.configConnectionOverride?[2,this.configConnectionOverride(e)]:[4,this.sendSpeechServiceConfig(e,this.privSynthesizerConfig.SpeechServiceConfig.serialize())];case 2:return t.sent(),[2,e]}})})},e.telemetryDataEnabled=!0,e}();t.SynthesisAdapterBase=u},function(e,t,n){var r,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisStartedEvent=t.ConnectingToSynthesisServiceEvent=t.SynthesisTriggeredEvent=t.SpeechSynthesisEvent=void 0;var o=n(4),a=function(e){function t(t,n,r){void 0===r&&(r=o.EventType.Info);var i=e.call(this,t,r)||this;return i.privRequestId=n,i}return i(t,e),Object.defineProperty(t.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!1,configurable:!0}),t}(o.PlatformEvent);t.SpeechSynthesisEvent=a;var s=function(e){function t(t,n,r){var i=e.call(this,"SynthesisTriggeredEvent",t)||this;return i.privSessionAudioDestinationId=n,i.privTurnAudioDestinationId=r,i}return i(t,e),Object.defineProperty(t.prototype,"audioSessionDestinationId",{get:function(){return this.privSessionAudioDestinationId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"audioTurnDestinationId",{get:function(){return this.privTurnAudioDestinationId},enumerable:!1,configurable:!0}),t}(a);t.SynthesisTriggeredEvent=s;var c=function(e){function t(t,n){var r=e.call(this,"ConnectingToSynthesisServiceEvent",t)||this;return r.privAuthFetchEventId=n,r}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(a);t.ConnectingToSynthesisServiceEvent=c;var u=function(e){function t(t,n){var r=e.call(this,"SynthesisStartedEvent",t)||this;return r.privAuthFetchEventId=n,r}return i(t,e),Object.defineProperty(t.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!1,configurable:!0}),t}(a);t.SynthesisStartedEvent=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesizerConfig=t.SynthesisServiceType=void 0;var r,i=n(53);!function(e){e[e.Standard=0]="Standard",e[e.Custom=1]="Custom"}(r=t.SynthesisServiceType||(t.SynthesisServiceType={}));var o=function(){function e(e,t){this.privSynthesisServiceType=r.Standard,this.privSpeechServiceConfig=e||new i.SpeechServiceConfig(new i.Context(null)),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"synthesisServiceType",{get:function(){return this.privSynthesisServiceType},set:function(e){this.privSynthesisServiceType=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SpeechServiceConfig",{get:function(){return this.privSpeechServiceConfig},enumerable:!1,configurable:!0}),e}();t.SynthesizerConfig=o},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SynthesisContext=void 0;var r=function(){function e(e){this.privContext={},this.privSpeechSynthesizer=e}return e.prototype.setSection=function(e,t){this.privContext[e]=t},Object.defineProperty(e.prototype,"audioOutputFormat",{set:function(e){this.privAudioOutputFormat=e},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var e=this.buildSynthesisContext();return this.setSection("synthesis",e),JSON.stringify(this.privContext)},e.prototype.buildSynthesisContext=function(){return{audio:{metadataOptions:{bookmarkEnabled:!!this.privSpeechSynthesizer.bookmarkReached,sentenceBoundaryEnabled:!1,visemeEnabled:!!this.privSpeechSynthesizer.visemeReceived,wordBoundaryEnabled:!!this.privSpeechSynthesizer.wordBoundary},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:this.privSpeechSynthesizer.autoDetectSourceLanguage}}},e}();t.SynthesisContext=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerRecognitionConfig=void 0;var r=n(53),i=function(){function e(e,t){this.privContext=e||new r.Context(null),this.privParameters=t}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privParameters},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Context",{get:function(){return this.privContext},enumerable:!1,configurable:!0}),e}();t.SpeakerRecognitionConfig=i},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.SpeakerIdMessageAdapter=void 0;var o=n(2),a=n(61),s=n(123),c=function(){function e(e){var t=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!t){var n=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Region,"westus"),r=s.ConnectionFactoryBase.getHostSuffix(n);t=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Host,"https://"+n+".api.cognitive"+r)}this.privUri=t+"/speaker-recognition/{mode}/{dependency}/profiles";var i=o.RestConfigBase.requestOptions;i.headers[o.RestConfigBase.configParams.subscriptionKey]=e.parameters.getProperty(a.PropertyId.SpeechServiceConnection_Key,void 0),this.privApiVersion=e.parameters.getProperty(a.PropertyId.SpeakerRecognition_Api_Version,"2021-09-05"),this.privRestAdapter=new o.RestMessageAdapter(i)}return e.prototype.createProfile=function(e,t){var n=this.getOperationUri(e);return this.privRestAdapter.request(o.RestRequestType.Post,n,this.getQueryParams(),{locale:t})},e.prototype.createEnrollment=function(e,t){var n=this,r=this.getOperationUri(e.profileType)+"/"+e.profileId+"/enrollments";return t.blob.then(function(e){return n.privRestAdapter.request(o.RestRequestType.File,r,n.getQueryParams({ignoreMinLength:"true"}),null,e)})},e.prototype.verifySpeaker=function(e,t){return r(this,void 0,void 0,function(){var n,r,a;return i(this,function(i){switch(i.label){case 0:n=this.getOperationUri(e.voiceProfile.profileType)+"/"+e.voiceProfile.profileId+":verify",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.blob];case 2:return r=i.sent(),[2,this.privRestAdapter.request(o.RestRequestType.File,n,this.getQueryParams({ignoreMinLength:"true"}),null,r)];case 3:return a=i.sent(),[2,Promise.resolve({data:a})];case 4:return[2]}})})},e.prototype.identifySpeaker=function(e,t){return r(this,void 0,void 0,function(){var n,r,s;return i(this,function(i){switch(i.label){case 0:n=this.getOperationUri(a.VoiceProfileType.TextIndependentIdentification)+":identifySingleSpeaker",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t.blob];case 2:return r=i.sent(),[2,this.privRestAdapter.request(o.RestRequestType.File,n,this.getQueryParams({profileIds:e.voiceProfileIds,ignoreMinLength:"true"}),null,r)];case 3:return s=i.sent(),[2,Promise.resolve({data:s})];case 4:return[2]}})})},e.prototype.getProfileStatus=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(o.RestRequestType.Get,t,this.getQueryParams())},e.prototype.getProfiles=function(e){var t=this.getOperationUri(e);return this.privRestAdapter.request(o.RestRequestType.Get,t,this.getQueryParams())},e.prototype.getPhrases=function(e,t){var n=(""+this.getOperationUri(e)).replace("profiles","phrases")+"/"+t;return this.privRestAdapter.request(o.RestRequestType.Get,n,this.getQueryParams())},e.prototype.deleteProfile=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId;return this.privRestAdapter.request(o.RestRequestType.Delete,t,this.getQueryParams())},e.prototype.resetProfile=function(e){var t=this.getOperationUri(e.profileType)+"/"+e.profileId+":reset";return this.privRestAdapter.request(o.RestRequestType.Post,t,this.getQueryParams())},e.prototype.getOperationUri=function(e){var t=e===a.VoiceProfileType.TextIndependentIdentification?"identification":"verification",n=e===a.VoiceProfileType.TextDependentVerification?"text-dependent":"text-independent";return this.privUri.replace("{mode}",t).replace("{dependency}",n)},e.prototype.getQueryParams=function(e){return void 0===e&&(e={}),e[o.RestConfigBase.configParams.apiVersion]=this.privApiVersion,e},e}();t.SpeakerIdMessageAdapter=c},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FileAudioSource=void 0;var o=n(53),a=n(4),s=n(72),c=function(){function e(e,t,n){var o=this;this.privStreams={},this.privHeaderEnd=44,this.turnOn=function(){if(o.privFilename.lastIndexOf(".wav")!==o.privFilename.length-4){var e=o.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return o.onEvent(new a.AudioSourceErrorEvent(e,"")),Promise.reject(e)}o.onEvent(new a.AudioSourceInitializingEvent(o.privId)),o.onEvent(new a.AudioSourceReadyEvent(o.privId))},this.id=function(){return o.privId},this.attach=function(e){return r(o,void 0,void 0,function(){var t,n=this;return i(this,function(o){switch(o.label){case 0:return this.onEvent(new a.AudioStreamNodeAttachingEvent(this.privId,e)),[4,this.upload(e)];case 1:return t=o.sent(),this.onEvent(new a.AudioStreamNodeAttachedEvent(this.privId,e)),[2,Promise.resolve({detach:function(){return r(n,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return t.readEnded(),delete this.privStreams[e],this.onEvent(new a.AudioStreamNodeDetachedEvent(this.privId,e)),[4,this.turnOff()];case 1:return n.sent(),[2]}})})},id:function(){return e},read:function(){return t.read()}})]}})})},this.detach=function(e){e&&o.privStreams[e]&&(o.privStreams[e].close(),delete o.privStreams[e],o.onEvent(new a.AudioStreamNodeDetachedEvent(o.privId,e)))},this.turnOff=function(){for(var e in o.privStreams)if(e){var t=o.privStreams[e];t&&!t.isClosed&&t.close()}return o.onEvent(new a.AudioSourceOffEvent(o.privId)),Promise.resolve()},this.onEvent=function(e){o.privEvents.onEvent(e),a.Events.instance.onEvent(e)},this.privId=n||a.createNoDashGuid(),this.privEvents=new a.EventSource,this.privSource=e,"undefined"!=typeof window&&"undefined"!=typeof Blob&&this.privSource instanceof Blob?this.privFilename=e.name:this.privFilename=t||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}return Object.defineProperty(e.prototype,"format",{get:function(){return this.privAudioFormatPromise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blob",{get:function(){return Promise.resolve(this.privSource)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceInfo",{get:function(){return this.privAudioFormatPromise.then(function(e){return Promise.resolve({bitspersample:e.bitsPerSample,channelcount:e.channels,connectivity:o.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:e.samplesPerSec,type:o.type.File})})},enumerable:!1,configurable:!0}),e.prototype.readHeader=function(){var e=this,t=this.privSource.slice(0,512),n=new a.Deferred,r=function(t){var r=new DataView(t),i=function(e){return String.fromCharCode(r.getUint8(e),r.getUint8(e+1),r.getUint8(e+2),r.getUint8(e+3))};if("RIFF"===i(0))if("WAVE"===i(8)&&"fmt "===i(12)){for(var o=r.getInt32(16,!0),a=r.getUint16(22,!0),c=r.getUint32(24,!0),u=r.getUint16(34,!0),p=36+Math.max(o-16,0);"data"!==i(p);p+=2)if(p>504)return void n.reject("Invalid WAV header in file, data block was not found");e.privHeaderEnd=p+8,n.resolve(s.AudioStreamFormat.getWaveFormatPCM(c,u,a))}else n.reject("Invalid WAV header in file, WAVEfmt was not found");else n.reject("Invalid WAV header in file, RIFF was not found")};if("undefined"!=typeof window&&"undefined"!=typeof Blob&&t instanceof Blob){var i=new FileReader;i.onload=function(e){var t=e.target.result;r(t)},i.readAsArrayBuffer(t)}else{var o=t;r(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength))}return n.promise},e.prototype.upload=function(e){return r(this,void 0,void 0,function(){var t,n,r,o,s,c,u,p,l=this;return i(this,function(i){switch(i.label){case 0:t=function(t){var n="Error occurred while processing '"+l.privFilename+"'. "+t;throw l.onEvent(new a.AudioStreamNodeErrorEvent(l.privId,e,n)),new Error(n)},i.label=1;case 1:return i.trys.push([1,4,,5]),[4,this.turnOn()];case 2:return i.sent(),[4,this.privAudioFormatPromise];case 3:return n=i.sent(),r=new a.ChunkedArrayBufferStream(n.avgBytesPerSec/10,e),this.privStreams[e]=r,o=this.privSource.slice(this.privHeaderEnd),s=function(e){r.isClosed||(r.writeStreamChunk({buffer:e,isEnd:!1,timeReceived:Date.now()}),r.close())},"undefined"!=typeof window&&"undefined"!=typeof Blob&&o instanceof Blob?((c=new FileReader).onerror=function(e){t(e.toString())},c.onload=function(e){var t=e.target.result;s(t)},c.readAsArrayBuffer(o)):s((u=o).buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)),[2,r];case 4:return p=i.sent(),t(p),[3,5];case 5:return[2]}})})},e}();t.FileAudioSource=c},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PcmRecorder=void 0;var r=n(4),i=function(){function e(e){var t=this;this.record=function(e,n,i){var o=new r.RiffPcmEncoder(e.sampleRate,16e3),a=e.createMediaStreamSource(n);if(!t.privSpeechProcessorScript){var s=new Blob(["class SP extends AudioWorkletProcessor {\n                constructor(options) {\n                  super(options);\n                }\n                process(inputs, outputs) {\n                  const input = inputs[0];\n                  const output = [];\n                  for (let channel = 0; channel < input.length; channel += 1) {\n                    output[channel] = input[channel];\n                  }\n                  this.port.postMessage(output[0]);\n                  return true;\n                }\n              }\n              registerProcessor('speech-processor', SP);"],{type:"application/javascript; charset=utf-8"});t.privSpeechProcessorScript=URL.createObjectURL(s)}if(!t.privSpeechProcessorScript||!e.audioWorklet)throw new Error("Unable to start audio worklet node for PCMRecorder");e.audioWorklet.addModule(t.privSpeechProcessorScript).then(function(){var r=new AudioWorkletNode(e,"speech-processor");r.port.onmessage=function(e){var t=e.data;if(i&&!i.isClosed){var n=o.encode(t);n&&i.writeStreamChunk({buffer:n,isEnd:!1,timeReceived:Date.now()})}},a.connect(r),r.connect(e.destination),t.privMediaResources={scriptProcessorNode:r,source:a,stream:n}}).catch(function(){var r=function(){var t=0;try{return e.createScriptProcessor(t,1,1)}catch(r){t=2048;for(var n=e.sampleRate;t<16384&&n>=32e3;)t<<=1,n>>=1;return e.createScriptProcessor(t,1,1)}}();r.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);if(i&&!i.isClosed){var n=o.encode(t);n&&i.writeStreamChunk({buffer:n,isEnd:!1,timeReceived:Date.now()})}},a.connect(r),r.connect(e.destination),t.privMediaResources={scriptProcessorNode:r,source:a,stream:n}})},this.releaseMediaResources=function(e){t.privMediaResources&&(t.privMediaResources.scriptProcessorNode&&(t.privMediaResources.scriptProcessorNode.disconnect(e.destination),t.privMediaResources.scriptProcessorNode=null),t.privMediaResources.source&&(t.privMediaResources.source.disconnect(),t.privStopInputOnRelease&&t.privMediaResources.stream.getTracks().forEach(function(e){return e.stop()}),t.privMediaResources.source=null))},this.privStopInputOnRelease=e}return e.prototype.setWorkletUrl=function(e){this.privSpeechProcessorScript=e},e}();t.PcmRecorder=i},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketConnection=void 0;var o=n(4),a=n(232),s=function(){function e(e,t,n,r,i,s,c){var u=this;if(void 0===s&&(s=!1),this.privIsDisposed=!1,this.isDisposed=function(){return u.privIsDisposed},this.state=function(){return u.privConnectionMessageAdapter.state},this.open=function(){return u.privConnectionMessageAdapter.open()},this.send=function(e){return u.privConnectionMessageAdapter.send(e)},this.read=function(){return u.privConnectionMessageAdapter.read()},!e)throw new o.ArgumentNullError("uri");if(!r)throw new o.ArgumentNullError("messageFormatter");this.privMessageFormatter=r;var p="",l=0;if(t)for(var d in t)d&&(p+=0===l&&-1===e.indexOf("?")?"?":"&",p+=d+"="+encodeURIComponent(t[d]),l++);if(n)for(var f in n)f&&(p+=0===l&&-1===e.indexOf("?")?"?":"&",p+=f+"="+encodeURIComponent(n[f]),l++);this.privUri=e+p,this.privId=c||o.createNoDashGuid(),this.privConnectionMessageAdapter=new a.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,i,n,s)}return e.prototype.dispose=function(){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.privIsDisposed=!0,this.privConnectionMessageAdapter?[4,this.privConnectionMessageAdapter.close()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionMessageAdapter.events},enumerable:!1,configurable:!0}),e}();t.WebsocketConnection=s},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WebsocketMessageAdapter=void 0;var a=n(55),s=n(4),c=o(n(233)),u=n(234),p=function(){function e(t,n,r,i,o,p){var l=this;if(this.open=function(){if(l.privConnectionState===s.ConnectionState.Disconnected)return Promise.reject("Cannot open a connection that is in "+l.privConnectionState+" state");if(l.privConnectionEstablishDeferral)return l.privConnectionEstablishDeferral.promise;l.privConnectionEstablishDeferral=new s.Deferred,l.privCertificateValidatedDeferral=new s.Deferred,l.privConnectionState=s.ConnectionState.Connecting;try{if("undefined"==typeof WebSocket||e.forceNpmWebSocket){var t={headers:l.privHeaders,perMessageDeflate:l.privEnableCompression};l.privCertificateValidatedDeferral.resolve();var n=new u.CertCheckAgent(l.proxyInfo);t.agent=n.GetAgent(),l.privWebsocketClient=new c.default(l.privUri,t)}else l.privCertificateValidatedDeferral.resolve(),l.privWebsocketClient=new WebSocket(l.privUri);l.privWebsocketClient.binaryType="arraybuffer",l.privReceivingMessageQueue=new s.Queue,l.privDisconnectDeferral=new s.Deferred,l.privSendMessageQueue=new s.Queue,l.processSendQueue().catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})}catch(e){return l.privConnectionEstablishDeferral.resolve(new s.ConnectionOpenResponse(500,e)),l.privConnectionEstablishDeferral.promise}return l.onEvent(new s.ConnectionStartEvent(l.privConnectionId,l.privUri)),l.privWebsocketClient.onopen=function(e){l.privCertificateValidatedDeferral.promise.then(function(){l.privConnectionState=s.ConnectionState.Connected,l.onEvent(new s.ConnectionEstablishedEvent(l.privConnectionId)),l.privConnectionEstablishDeferral.resolve(new s.ConnectionOpenResponse(200,""))},function(e){l.privConnectionEstablishDeferral.reject(e)})},l.privWebsocketClient.onerror=function(e){l.onEvent(new s.ConnectionErrorEvent(l.privConnectionId,e.message,e.type)),l.privLastErrorReceived=e.message},l.privWebsocketClient.onclose=function(e){l.privConnectionState===s.ConnectionState.Connecting?(l.privConnectionState=s.ConnectionState.Disconnected,l.privConnectionEstablishDeferral.resolve(new s.ConnectionOpenResponse(e.code,e.reason+" "+l.privLastErrorReceived))):(l.privConnectionState=s.ConnectionState.Disconnected,l.privWebsocketClient=null,l.onEvent(new s.ConnectionClosedEvent(l.privConnectionId,e.code,e.reason))),l.onClose(e.code,e.reason).catch(function(e){s.Events.instance.onEvent(new s.BackgroundEvent(e))})},l.privWebsocketClient.onmessage=function(e){var t=(new Date).toISOString();if(l.privConnectionState===s.ConnectionState.Connected){var n=new s.Deferred;if(l.privReceivingMessageQueue.enqueueFromPromise(n.promise),e.data instanceof ArrayBuffer){var r=new s.RawWebsocketMessage(s.MessageType.Binary,e.data);l.privMessageFormatter.toConnectionMessage(r).then(function(e){l.onEvent(new s.ConnectionMessageReceivedEvent(l.privConnectionId,t,e)),n.resolve(e)},function(e){n.reject("Invalid binary message format. Error: "+e)})}else r=new s.RawWebsocketMessage(s.MessageType.Text,e.data),l.privMessageFormatter.toConnectionMessage(r).then(function(e){l.onEvent(new s.ConnectionMessageReceivedEvent(l.privConnectionId,t,e)),n.resolve(e)},function(e){n.reject("Invalid text message format. Error: "+e)})}},l.privConnectionEstablishDeferral.promise},this.send=function(e){if(l.privConnectionState!==s.ConnectionState.Connected)return Promise.reject("Cannot send on connection that is in "+s.ConnectionState[l.privConnectionState]+" state");var t=new s.Deferred,n=new s.Deferred;return l.privSendMessageQueue.enqueueFromPromise(n.promise),l.privMessageFormatter.fromConnectionMessage(e).then(function(r){n.resolve({Message:e,RawWebsocketMessage:r,sendStatusDeferral:t})},function(e){n.reject("Error formatting the message. "+e)}),t.promise},this.read=function(){return l.privConnectionState!==s.ConnectionState.Connected?Promise.reject("Cannot read on connection that is in "+l.privConnectionState+" state"):l.privReceivingMessageQueue.dequeue()},this.close=function(e){return l.privWebsocketClient?(l.privConnectionState!==s.ConnectionState.Disconnected&&l.privWebsocketClient.close(1e3,e||"Normal closure by client"),l.privDisconnectDeferral.promise):Promise.resolve()},this.sendRawMessage=function(e){try{return e?(l.onEvent(new s.ConnectionMessageSentEvent(l.privConnectionId,(new Date).toISOString(),e.Message)),l.isWebsocketOpen?(l.privWebsocketClient.send(e.RawWebsocketMessage.payload),Promise.resolve()):Promise.reject("websocket send error: Websocket not ready "+l.privConnectionId+" "+e.Message.id+" "+(new Error).stack)):Promise.resolve()}catch(e){return Promise.reject("websocket send error: "+e)}},this.onEvent=function(e){l.privConnectionEvents.onEvent(e),s.Events.instance.onEvent(e)},!t)throw new s.ArgumentNullError("uri");if(!r)throw new s.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new s.EventSource,this.privConnectionId=n,this.privMessageFormatter=r,this.privConnectionState=s.ConnectionState.None,this.privUri=t,this.privHeaders=o,this.privEnableCompression=p,this.privHeaders[a.HeaderNames.ConnectionId]=this.privConnectionId,this.privLastErrorReceived=""}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionEvents},enumerable:!1,configurable:!0}),e.prototype.onClose=function(e,t){return r(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return n="Connection closed. "+e+": "+t,this.privConnectionState=s.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),[4,this.privReceivingMessageQueue.drainAndDispose(function(e){},n)];case 1:return r.sent(),[4,this.privSendMessageQueue.drainAndDispose(function(e){e.sendStatusDeferral.reject(n)},n)];case 2:return r.sent(),[2]}})})},e.prototype.processSendQueue=function(){return r(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return[4,this.privSendMessageQueue.dequeue()];case 1:if(!(e=n.sent()))return[2];n.label=2;case 2:return n.trys.push([2,4,,5]),[4,this.sendRawMessage(e)];case 3:return n.sent(),e.sendStatusDeferral.resolve(),[3,5];case 4:return t=n.sent(),e.sendStatusDeferral.reject(t),[3,5];case 5:return[3,0];case 6:return[2]}})})},Object.defineProperty(e.prototype,"isWebsocketOpen",{get:function(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN},enumerable:!1,configurable:!0}),e.forceNpmWebSocket=!1,e}();t.WebsocketMessageAdapter=p},function(e,t){},function(e,t,n){(function(e,r){var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t},c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},u=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CertCheckAgent=void 0;var l=s(n(236)),d=s(n(237)),f=s(n(240)),m=n(4),h=p(n(241)),v=p(n(242)),g=p(n(243)),y=s(n(244)),b=n(49),_=function(){function t(n){n&&(this.privProxyInfo=n),t.privDiskCache||(t.privDiskCache=new v.default("microsoft-cognitiveservices-speech-sdk-cache",{supportBuffer:!0,location:void 0!==e&&e.env.SPEECH_OCSP_CACHE_ROOT?e.env.SPEECH_OCSP_CACHE_ROOT:void 0}))}return t.forceReinitDiskCache=function(){t.privDiskCache=void 0,t.privMemCache={}},t.prototype.GetAgent=function(e){var t=new h.default.Agent(this.CreateConnection);return void 0!==this.privProxyInfo&&void 0!==this.privProxyInfo.HostName&&this.privProxyInfo.Port>0&&(t.privProxyInfo=this.privProxyInfo),t},t.GetProxyAgent=function(e){var t={host:e.HostName,port:e.Port};return e.UserName?t.headers={"Proxy-Authentication":"Basic "+new r(e.UserName+":"+(void 0===e.Password)?"":e.Password).toString("base64")}:t.headers={},t.headers.requestOCSP="true",new g.default(t)},t.OCSPCheck=function(e,n){return c(this,void 0,void 0,function(){var r,i,o,a,s,p=this;return u(this,function(l){switch(l.label){case 0:return o=!1,[4,e];case 1:return(a=l.sent()).cork(),s=a,[2,new Promise(function(e,l){a.on("OCSPResponse",function(e){e&&(p.onEvent(new m.OCSPStapleReceivedEvent),i=e)}),a.on("error",function(e){o||(o=!0,a.destroy(),l(e))}),s.on("secure",function(){return c(p,void 0,void 0,function(){var c,p,d,m,h;return u(this,function(u){switch(u.label){case 0:c=s.getPeerCertificate(!0),u.label=1;case 1:return u.trys.push([1,6,,7]),[4,this.GetIssuer(c)];case 2:return p=u.sent(),r=f.request.generate(c.raw,p.raw),d=r.id.toString("hex"),i?[3,4]:[4,t.GetResponseFromCache(d,r,n)];case 3:m=u.sent(),i=m,u.label=4;case 4:return[4,this.VerifyOCSPResponse(i,r,n)];case 5:return u.sent(),a.uncork(),o=!0,e(a),[3,7];case 6:return h=u.sent(),a.destroy(),o=!0,l(h),[3,7];case 7:return[2]}})})})})]}})})},t.GetIssuer=function(e){return e.issuerCertificate?Promise.resolve(e.issuerCertificate):new Promise(function(t,n){new f.Agent({}).fetchIssuer(e,null,function(e,r){e?n(e):t(r)})})},t.GetResponseFromCache=function(e,n,r){return c(this,void 0,void 0,function(){var i,o,a,s,c,p,l,d=this;return u(this,function(u){switch(u.label){case 0:if((i=t.privMemCache[e])&&this.onEvent(new m.OCSPMemoryCacheHitEvent(e)),i)return[3,4];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.privDiskCache.get(e)];case 2:return(o=u.sent()).isCached&&(t.onEvent(new m.OCSPDiskCacheHitEvent(e)),t.StoreMemoryCacheEntry(e,o.value),i=o.value),[3,4];case 3:return u.sent(),i=null,[3,4];case 4:if(!i)return[2,i];try{if(a=f.utils.parseResponse(i),(s=a.value.tbsResponseData).responses.length<1)return this.onEvent(new m.OCSPCacheFetchErrorEvent(e,"Not enough data in cached response")),[2];c=s.responses[0].thisUpdate,(p=s.responses[0].nextUpdate)<Date.now()+this.testTimeOffset-6e4?(this.onEvent(new m.OCSPCacheEntryExpiredEvent(e,p)),i=null):(l=Math.min(864e5,(p-c)/2),p-(Date.now()+this.testTimeOffset)<l?(this.onEvent(new m.OCSPCacheEntryNeedsRefreshEvent(e,c,p)),this.UpdateCache(n,r).catch(function(t){d.onEvent(new b.OCSPCacheUpdateErrorEvent(e,t.toString()))})):this.onEvent(new m.OCSPCacheHitEvent(e,c,p)))}catch(t){this.onEvent(new m.OCSPCacheFetchErrorEvent(e,t)),i=null}return i||this.onEvent(new m.OCSPCacheMissEvent(e)),[2,i]}})})},t.VerifyOCSPResponse=function(e,n,r){return c(this,void 0,void 0,function(){var i,o=this;return u(this,function(a){switch(a.label){case 0:return i=e,n.certID.toString("hex"),i?[3,2]:[4,t.GetOCSPResponse(n,r)];case 1:i=a.sent(),a.label=2;case 2:return[2,new Promise(function(a,s){f.verify({request:n,response:i},function(c,u){c?(t.onEvent(new m.OCSPVerificationFailedEvent(n.id.toString("hex"),c)),e?o.VerifyOCSPResponse(null,n,r).then(function(){a()},function(e){s(e)}):s(c)):(e||t.StoreCacheEntry(n.id.toString("hex"),i),a())})})]}})})},t.UpdateCache=function(e,t){return c(this,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:return n=e.id.toString("hex"),this.onEvent(new m.OCSPCacheUpdateNeededEvent(n)),[4,this.GetOCSPResponse(e,t)];case 1:return r=i.sent(),this.StoreCacheEntry(n,r),this.onEvent(new m.OCSPCacheUpdatehCompleteEvent(e.id.toString("hex"))),[2]}})})},t.StoreCacheEntry=function(e,t){this.StoreMemoryCacheEntry(e,t),this.StoreDiskCacheEntry(e,t)},t.StoreMemoryCacheEntry=function(e,t){this.privMemCache[e]=t,this.onEvent(new m.OCSPMemoryCacheStoreEvent(e))},t.StoreDiskCacheEntry=function(e,t){var n=this;this.privDiskCache.set(e,t).then(function(){n.onEvent(new m.OCSPDiskCacheStoreEvent(e))})},t.GetOCSPResponse=function(e,n){var r=this,o={};if(n){var a=t.GetProxyAgent(n);o.agent=a}return new Promise(function(t,n){f.utils.getAuthorityInfo(e.cert,"1.3.6.1.5.5.7.48.1",function(a,s){if(a)n(a);else{var c=d.default(s);c.path=c.pathname,o=i(i({},o),c),f.utils.getResponse(o,e.data,function(i,o){i?n(i):(r.onEvent(new m.OCSPResponseRetrievedEvent(e.certID.toString("hex"))),t(o))})}})})},t.prototype.CreateConnection=function(n,r){var o,a=void 0!==e&&"0"!==e.env.NODE_TLS_REJECT_UNAUTHORIZED&&"0"!==e.env.SPEECH_CONDUCT_OCSP_CHECK&&r.secureEndpoint;if(r=i(i({},r),{requestOCSP:!t.forceDisableOCSPStapling,servername:r.host}),this.privProxyInfo){var s=t.GetProxyAgent(this.privProxyInfo);o=new Promise(function(e,t){s.callback(n,r,function(n,r){n?t(n):e(r)})})}else o=r.secureEndpoint?Promise.resolve(l.connect(r)):Promise.resolve(y.connect(r));return a?t.OCSPCheck(o,this.privProxyInfo):o},t.testTimeOffset=0,t.forceDisableOCSPStapling=!1,t.privMemCache={},t.onEvent=function(e){m.Events.instance.onEvent(e)},t}();t.CertCheckAgent=_}).call(this,n(235),n(67).Buffer)},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],p=!1,l=-1;function d(){p&&c&&(p=!1,c.length?u=c.concat(u):l=-1,u.length&&f())}function f(){if(!p){var e=s(d);p=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,p=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||p||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=h,i.addListener=h,i.once=h,i.off=h,i.removeListener=h,i.removeAllListeners=h,i.emit=h,i.prependListener=h,i.prependOnceListener=h,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){},function(e,t,n){(function(t){var r=n(238),i=n(239),o=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,s=/^[a-zA-Z]:/,c=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(c,"")}var p=[["#","hash"],["?","query"],function(e,t){return f(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function d(e){var n,r=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},i={},a=Object(v["a"])(e=e||r);if("blob:"===e.protocol)i=new h(unescape(e.pathname),{});else if("string"===a)for(n in i=new h(e,{}),l)delete i[n];else if("object"===a){for(n in e)n in l||(i[n]=e[n]);void 0===i.slashes&&(i.slashes=o.test(e.href))}return i}function f(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function m(e,t){e=u(e),t=t||{};var n,r=a.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],c=0;return o?s?(n=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(n=r[2]+r[4],c=r[2].length):s?(n=r[3]+r[4],c=r[3].length):n=r[4],"file:"===i?c>=2&&(n=n.slice(2)):f(i)?n=r[4]:i?o&&(n=n.slice(2)):c>=2&&f(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||f(i),slashesCount:c,rest:n}}function h(e,t,n){if(e=u(e),!(this instanceof h))return new h(e,t,n);var o,a,c,l,g,y,b=p.slice(),_=Object(v["a"])(t),S=this,C=0;for("object"!==_&&"string"!==_&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(a=m(e||"",t=d(t))).protocol&&!a.slashes,S.slashes=a.slashes||o&&t.slashes,S.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||s.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!f(S.protocol)))&&(b[3]=[/(.*)/,"pathname"]);C<b.length;C++)"function"!=typeof(l=b[C])?(c=l[0],y=l[1],c!=c?S[y]=e:"string"==typeof c?~(g=e.indexOf(c))&&("number"==typeof l[2]?(S[y]=e.slice(0,g),e=e.slice(g+l[2])):(S[y]=e.slice(g),e=e.slice(0,g))):(g=c.exec(e))&&(S[y]=g[1],e=e.slice(0,g.index)),S[y]=S[y]||o&&l[3]&&t[y]||"",l[4]&&(S[y]=S[y].toLowerCase())):e=l(e,S);n&&(S.query=n(S.query)),o&&t.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==t.pathname)&&(S.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(S.pathname,t.pathname)),"/"!==S.pathname.charAt(0)&&f(S.protocol)&&(S.pathname="/"+S.pathname),r(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(l=S.auth.split(":"),S.username=l[0]||"",S.password=l[1]||""),S.origin="file:"!==S.protocol&&f(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}h.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;default:o[e]=t}for(var s=0;s<p.length;s++){var c=p[s];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.origin="file:"!==o.protocol&&f(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(n.slashes||f(n.protocol)?"//":"");return n.username&&(o+=n.username,n.password&&(o+=":"+n.password),o+="@"),o+=n.host+n.pathname,(t="object"==Object(v["a"])(n.query)?e(n.query):n.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(o+=n.hash),o}},h.extractProtocol=m,h.location=d,h.trimLeft=u,h.qs=i,e.exports=h}).call(this,n(68))},function(e,t,n){e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,n){var r=Object.prototype.hasOwnProperty;function i(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function o(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,i,a=[];for(i in"string"!=typeof t&&(t="?"),e)if(r.call(e,i)){if((n=e[i])||null!=n&&!isNaN(n)||(n=""),i=o(i),n=o(n),null===i||null===n)continue;a.push(i+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,r={};t=n.exec(e);){var o=i(t[1]),a=i(t[2]);null===o||null===a||o in r||(r[o]=a)}return r}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReplayableAudioNode=void 0;var r=function(){function e(e,t){var n=this;this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.id=function(){return n.privAudioNode.id()},this.privAudioNode=e,this.privBytesPerSecond=t}return e.prototype.read=function(){var e=this;if(this.privReplay&&0!==this.privBuffers.length){var t=this.privReplayOffset-this.privBufferStartOffset,n=Math.round(t*this.privBytesPerSecond*1e-7);0!=n%2&&n++;for(var r=0;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;if(r<this.privBuffers.length){var o=this.privBuffers[r].chunk.buffer.slice(n);return this.privReplayOffset+=o.byteLength/this.privBytesPerSecond*1e7,r===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:o,isEnd:!1,timeReceived:this.privBuffers[r].chunk.timeReceived})}}return this.privAudioNode.read().then(function(t){return t&&t.buffer&&(e.privBuffers.push(new i(t,e.privBufferSerial++,e.privBufferedBytes)),e.privBufferedBytes+=t.buffer.byteLength),t})},e.prototype.detach=function(){return this.privBuffers=void 0,this.privAudioNode.detach()},e.prototype.replay=function(){this.privBuffers&&0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)},e.prototype.shrinkBuffers=function(e){if(void 0!==this.privBuffers&&0!==this.privBuffers.length){this.privLastShrinkOffset=e;for(var t=e-this.privBufferStartOffset,n=Math.round(t*this.privBytesPerSecond*1e-7),r=0;r<this.privBuffers.length&&n>=this.privBuffers[r].chunk.buffer.byteLength;)n-=this.privBuffers[r++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(e-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(r)}},e.prototype.findTimeAtOffset=function(e){if(e<this.privBufferStartOffset||void 0===this.privBuffers)return 0;for(var t=0,n=this.privBuffers;t<n.length;t++){var r=n[t],i=r.byteOffset/this.privBytesPerSecond*1e7,o=i+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(e>=i&&e<=o)return r.chunk.timeReceived}return 0},e}();t.ReplayableAudioNode=r;var i=function(e,t,n){this.chunk=e,this.serial=t,this.byteOffset=n}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyInfo=void 0;var r=n(61),i=function(){function e(e,t,n,r){this.privProxyHostName=e,this.privProxyPort=t,this.privProxyUserName=n,this.privProxyPassword=r}return e.fromParameters=function(t){return new e(t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPort),10),t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyUserName),t.getProperty(r.PropertyId.SpeechServiceConnection_ProxyPassword))},e.fromRecognizerConfig=function(e){return this.fromParameters(e.parameters)},Object.defineProperty(e.prototype,"HostName",{get:function(){return this.privProxyHostName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Port",{get:function(){return this.privProxyPort},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"UserName",{get:function(){return this.privProxyUserName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Password",{get:function(){return this.privProxyPassword},enumerable:!1,configurable:!0}),e}();t.ProxyInfo=i},function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.RestMessageAdapter=t.RestRequestType=void 0;var a,s=n(4),c=o(n(248));!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE",e.File="file"}(a=t.RestRequestType||(t.RestRequestType={}));var u=function(){function e(e){if(!e)throw new s.ArgumentNullError("configParams");this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache}return e.extractHeaderValue=function(e,t){var n="";try{var r=t.trim().split(/[\r\n]+/),i={};r.forEach(function(e){var t=e.split(": "),n=t.shift().toLowerCase(),r=t.join(": ");i[n]=r}),n=i[e.toLowerCase()]}catch(e){}return n},Object.defineProperty(e.prototype,"options",{set:function(e){this.privHeaders=e.headers,this.privIgnoreCache=e.ignoreCache},enumerable:!1,configurable:!0}),e.prototype.setHeaders=function(e,t){this.privHeaders[e]=t},e.prototype.request=function(e,t,n,o,u){var p=this;void 0===n&&(n={}),void 0===o&&(o=null),void 0===u&&(u=null);var l,d,f=new s.Deferred,m=e===a.File?"POST":e,h=function(e,t){void 0===t&&(t={});var n=e;return{data:JSON.stringify(t),headers:JSON.stringify(e.headers),json:t,ok:e.statusCode>=200&&e.statusCode<300,status:e.statusCode,statusText:t.error?t.error.message:n.statusText?n.statusText:n.statusMessage}},v=function(o){c.default(t,m,p.privHeaders,200,201,202,204,400,401,402,403,404)(""===p.queryParams(n)?"":"?"+p.queryParams(n),o).then(function(t){return r(p,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return e!==a.Delete&&204!==t.statusCode?[3,1]:(f.resolve(h(t)),[3,3]);case 1:return[4,t.json()];case 2:n=r.sent(),f.resolve(h(t,n)),r.label=3;case 3:return[2]}})})}).catch(function(e){f.reject(e)})};if(this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),e===a.File&&u){var g="multipart/form-data";this.privHeaders["content-type"]=g,this.privHeaders["Content-Type"]=g,"undefined"!=typeof Blob&&u instanceof Blob?(l=u,d=new FileReader,d.readAsArrayBuffer(l),new Promise(function(e){d.onloadend=function(){e(d.result)}})).then(function(e){v(e)}).catch(function(e){f.reject(e)}):v(u)}else e===a.Post&&o&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),v(o);return f.promise},e.prototype.withQuery=function(e,t){void 0===t&&(t={});var n=this.queryParams(t);return n?e+(-1===e.indexOf("?")?"?":"&")+n:e},e.prototype.queryParams=function(e){return void 0===e&&(e={}),Object.keys(e).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}).join("&")},e}();t.RestMessageAdapter=u},function(e,t,n){var r=n(249),i=function(e){Object(d["a"])(n,e);var t=b(n);function n(e){var r,i;Object(p["a"])(this,n);for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];r=t.call.apply(t,[this].concat(a)),Error.captureStackTrace&&Error.captureStackTrace(Object(l["a"])(r),n),r.name="StatusError",r.message=e.statusMessage,r.statusCode=e.status,r.res=e,r.json=e.json.bind(e),r.text=e.text.bind(e),r.arrayBuffer=e.arrayBuffer.bind(e),Object.defineProperty(Object(l["a"])(r),"responseBody",{get:function(){return i||(i=r.arrayBuffer()),i}}),r.headers={};var u=!0,d=!1,f=void 0;try{for(var m,h=e.headers.entries()[Symbol.iterator]();!(u=(m=h.next()).done);u=!0){var v=Object(c["a"])(m.value,2),g=v[0],y=v[1];r.headers[g.toLowerCase()]=y}}catch(b){d=!0,f=b}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}return r}return Object(u["a"])(n)}(Object(h["a"])(Error));e.exports=r(function(e,t,n,r,o){return function(){var a=Object(s["a"])(regeneratorRuntime.mark(function a(s,c){var u,p,l,d=arguments;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:if(u=d.length>2&&void 0!==d[2]?d[2]:{},s=o+(s||""),p=new URL(s),r||(r={}),p.username&&(r.Authorization="Basic "+btoa(p.username+":"+p.password),p=new URL(p.protocol+"//"+p.host+p.pathname+p.search)),"https:"===p.protocol||"http:"===p.protocol){a.next=5;break}throw new Error("Unknown protocol, ".concat(p.protocol));case 5:if(!c){a.next=13;break}if(!(c instanceof ArrayBuffer||ArrayBuffer.isView(c)||"string"==typeof c)){a.next=10;break}a.next=13;break;case 10:if("object"==Object(v["a"])(c)){a.next=12;break}throw new Error("Unknown body type.");case 12:c=JSON.stringify(c),r["Content-Type"]="application/json";case 13:return u=new Headers(y(y({},r||{}),u)),a.next=16,fetch(p,{method:t,headers:u,body:c});case 16:if(l=a.sent,l.statusCode=l.status,e.has(l.status)){a.next=19;break}throw new i(l);case 19:return a.abrupt("return","json"===n?l.json():"buffer"===n?l.arrayBuffer():"string"===n?l.text():l);case 20:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}()})},function(e,t,n){var r=new Set(["json","buffer","string"]);e.exports=function(e){return function(){for(var t,n,i,o=new Set,a="",s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];return c.forEach(function(e){if("string"==typeof e)if(e.toUpperCase()===e){if(t)throw new Error("Can't set method to ".concat(e,", already set to ").concat(t,"."));t=e}else if(e.startsWith("http:")||e.startsWith("https:"))a=e;else{if(!r.has(e))throw new Error("Unknown encoding, ".concat(e));n=e}else if("number"==typeof e)o.add(e);else{if("object"!=Object(v["a"])(e))throw new Error("Unknown type: "+Object(v["a"])(e));if(Array.isArray(e)||e instanceof Set)e.forEach(function(e){return o.add(e)});else{if(i)throw new Error("Cannot set headers twice.");i=e}}}),t||(t="GET"),0===o.size&&o.add(200),e(o,t,n,i,a)}}}]);var _={components:{},data:function(){return{}},created:function(){},destroyed:function(){},methods:{renderResize:function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight;this.isLandscape=e<=t,e>t&&(document.body.style.width=e-30+"px",document.body.style.height=t+"px",document.body.style.position="absolute",document.body.style.top="0px",document.body.style.left="0px",document.body.style.transform="none"),e<=t&&(document.body.style.width=t-50+"px",document.body.style.height=e-20+"px",document.body.style.position="absolute",document.body.style.top=(t-e)/2+"px",document.body.style.left=0-(t-e)/2+20+"px",document.body.style.transform="rotate(90deg)")}}},S=_,C=(n("7c55"),n("2877")),P=Object(C["a"])(S,i,o,!1,null,null,null),w=P.exports,k=n("8c4f"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"file"},[n("input",{attrs:{type:"file",name:"file",accept:".mp4, .m4v, .3gp, .mpg, .flv, .f4v, .swf, .avi, .gif, .wmv, .rmvb, .mov, .mts, .m2t, .webm, .ogg, .mkv, .mp3, .mp2, .mp1, .wav, .aif, .aiff, .au, .ra, .rm, .ram, .mid, .rmi"},on:{change:e.handleChange}}),e._v("上传音视频文件")]),n("div",{staticClass:"common-title"},[n("audioFormat",{attrs:{uploadfile:e.uploadfile,sliceTimesArr:e.sliceTimesArr}})],1),n("div",{staticClass:"common-title"},[n("el-button",{on:{click:function(t){return e.playWave()}}},[e._v("播放/暂停")]),n("span",{staticClass:"mgx10"},[e._v("总时长: "+e._s(this.animationTime)+"s")]),n("span",[e._v("当前时间: "+e._s(this.curPlayingTime)+"s")]),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("播放速度:")]),n("el-col",{attrs:{span:18}},[n("el-input-number",{attrs:{precision:1,step:.1,min:0,max:2},on:{change:e.changAudioRate},model:{value:e.audioRate,callback:function(t){e.audioRate=t},expression:"audioRate"}})],1)],1),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("时间进度:")]),n("el-col",{attrs:{span:18}},[n("el-slider",{attrs:{step:1},on:{change:e.stepChange},model:{value:e.sliderValue,callback:function(t){e.sliderValue=t},expression:"sliderValue"}})],1)],1)],1),n("div",{attrs:{id:"waveform"}}),n("div",{attrs:{id:"wave-timeline"}}),n("div",e._l(e.allSpeakerDict,function(t,r){return n("div",[n("h4",[e._v(e._s("undefiend"===r?"其他":r)+": ")]),e._l(t,function(r,i){return n("span",["2"==r.speakerGender&&"1"==t[i-1].speakerGender?n("br"):e._e(),e._v("\n\t\t\t\t"+e._s("2"==r.speakerGender&&"1"==t[i-1].speakerGender?"-----(女)":"")+"\n\t\t\t\t"+e._s(r.speakerName)+":\n\t\t\t")])})],2)}),0),n("h2",[e._v("\n        制作动画流程：\n      ")]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"1. 输入设计文案",name:"first"}},[n("div",{staticClass:"common-title"},[e._v("\n              情绪: 开心, 生气, 坏笑, 难过; 镜头改变: 对应人物静态数字 "),n("br"),e._v("\n              默认镜头顺序 = {'小唐': 1, '宝哥': 2, '小俊': 3, '宁宁': 4, '小明': 5, '系统': 6}"),n("br"),e._v("\n              // 镜头顺序 = {'小唐': 11, '宝哥': 12, '小俊': 13, '宁宁': 14, '小明': 15}"),n("br"),e._v("\n\t\t\t  [p500] 停顿0.5s\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:20},placeholder:"输入设计文案"},model:{value:e.customDesignText,callback:function(t){e.customDesignText=t},expression:"customDesignText"}})],1),n("el-tab-pane",{attrs:{label:"2. 生成配音",name:"second"}},[n("div",{staticClass:"common-title"},[e._v("\n            2. 生成配音"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.peiyinStr)}}},[e._v("复制")]),n("br"),e._v("\n            ("),n("br"),e._v("\n              复制内容到"),n("a",{attrs:{href:"https://peiyin.xunfei.cn/make/",target:"__blank"}},[e._v("https://peiyin.xunfei.cn/make/origin")]),n("br"),e._v("\n              按F12到Console执行内容，打印urlList，复制链接到上面的音频合并, 执行命令并下载音频;"),n("br"),e._v("\n            )\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"{'旁白': '阿森'}"},model:{value:e.peiyinJosnStr,callback:function(t){e.peiyinJosnStr=t},expression:"peiyinJosnStr"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.peiyinStr,callback:function(t){e.peiyinStr=t},expression:"peiyinStr"}}),n("div",{staticClass:"common-title"},[e._v("\n            格式化的文案"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.customAudioText1Srt)}}},[e._v("复制")]),n("br"),e._v("\n            (利用这个文案，搭配剪映, 导入配音去生成srt文件)\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.customAudioText1Srt,callback:function(t){e.customAudioText1Srt=t},expression:"customAudioText1Srt"}})],1),n("el-tab-pane",{attrs:{label:"3. 输入srt内容;4. 自动生成动画脚本",name:"third"}},[n("div",{staticClass:"common-title"},[e._v("\n            3. 输入srt内容\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"输入srt内容"},model:{value:e.customSrtContent,callback:function(t){e.customSrtContent=t},expression:"customSrtContent"}}),n("div",{staticClass:"common-title"},[e._v("\n            4. 自动生成动画脚本"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl)}}},[e._v("复制")]),n("br"),e._v("\n            （需要完成1、3步, 然后复制内容替换脚本文件）\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6},disabled:"",placeholder:"动画脚本"},model:{value:e.animationjsfl,callback:function(t){e.animationjsfl=t},expression:"animationjsfl"}})],1)],1)],1)},R=[],T=n("8896"),I=n.n(T),A=n("c1be"),j=n.n(A),E=n("8433"),D=n.n(E),x=n("2ef0"),M=n.n(x),N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"playVideo"},[n("div",{staticClass:"audio green-audio-player"},[e._m(0),n("div",{staticClass:"play-pause-btn"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"24",viewBox:"0 0 18 24"}},[n("path",{staticClass:"play-pause-icon",attrs:{fill:"#566574","fill-rule":"evenodd",d:"M18 12L0 24V0",id:"playPause"}})])]),e._m(1),n("div",{staticClass:"volume"},[n("div",{staticClass:"volume-btn"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"}},[n("path",{attrs:{fill:"#566574","fill-rule":"evenodd",d:"M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z",id:"speaker"}})])]),e._m(2)]),e._m(3)])])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loading"},[n("div",{staticClass:"spinner"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"controls"},[n("span",{staticClass:"current-time"},[e._v("0:00")]),n("div",{staticClass:"slider",attrs:{"data-direction":"horizontal"}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"pin",attrs:{id:"progress-pin","data-method":"rewind"}})])]),n("span",{staticClass:"total-time"},[e._v("0:00")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"volume-controls hidden"},[n("div",{staticClass:"slider",attrs:{"data-direction":"vertical"}},[n("div",{staticClass:"progress"},[n("div",{staticClass:"pin",attrs:{id:"volume-pin","data-method":"changeVolume"}})])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("audio",{attrs:{id:"myVideo"}},[n("source",{attrs:{src:"",type:"audio/mpeg"}}),e._v("\n      您的浏览器不支持 audio 元素。\n    ")])}],F=(n("1c4c"),{props:["play","stop","uploadfile"],created:function(){},mounted:function(){var e=this;this.$nextTick(Object(s["a"])(regeneratorRuntime.mark(function t(){var n,r,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.getParaByName("url"),n){t.next=3;break}return t.abrupt("return");case 3:return n="https://vkceyugu.cdn.bspapp.com"+decodeURIComponent(n),t.next=6,fetch(n).then(function(e){return e.blob()});case 6:r=t.sent,i=document.getElementById("myVideo"),o=new Blob([r],{type:"audio/mp3"}),i.src=window.URL.createObjectURL(o),setTimeout(function(){e.Event.$emit("allTime",i.duration)},[100]);case 11:case"end":return t.stop()}},t)}))),this.Event.$on("currentTime",function(t){var n=document.getElementById("myVideo");n.currentTime=String(e.formData(t))}),this.Event.$on("subSectionPlay",function(t){var n=document.getElementById("myVideo");n.currentTime=String(e.formData(t.startTime))});var t=document.querySelector(".green-audio-player"),n=t.querySelector("#playPause"),r=t.querySelector(".play-pause-btn"),i=t.querySelector(".loading"),o=t.querySelector(".progress"),a=t.querySelectorAll(".slider"),c=t.querySelector(".volume-btn"),u=t.querySelector(".volume-controls"),p=u.querySelector(".slider .progress"),l=t.querySelector("audio"),d=t.querySelector(".current-time"),f=t.querySelector(".total-time"),m=t.querySelector("#speaker"),h=["pin"],v=null;function g(e){var t=!1,n=Array.from(e.classList);return h.forEach(function(e){-1!==n.indexOf(e)&&(t=!0)}),t}function y(){var e=l.currentTime,t=e/l.duration*100;o.style.width=t+"%",d.textContent=_(e)}function b(){p.style.height=100*l.volume+"%",l.volume>=.5?m.attributes.d.value="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z":l.volume<.5&&l.volume>.05?m.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667M17.333 11.373C17.333 9.013 16 6.987 14 6v10.707c2-.947 3.333-2.987 3.333-5.334z":l.volume<=.05&&(m.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667")}function _(e){var t=Math.floor(e/60),n=Math.floor(e%60);return t+":"+(n<10?"0"+n:n)}window.addEventListener("mousedown",function(e){if(!g(e.target))return!1;v=e.target;var t=v.dataset.method;this.addEventListener("mousemove",window[t],!1),window.addEventListener("mouseup",function(){v=!1,window.removeEventListener("mousemove",window[t],!1)},!1)}),r.addEventListener("click",C),l.addEventListener("timeupdate",y),l.addEventListener("volumechange",b),l.addEventListener("loadedmetadata",function(){f.textContent=_(l.duration)}),l.addEventListener("canplay",P),l.addEventListener("ended",function(){n.attributes.d.value="M18 12L0 24V0",l.currentTime=0}),c.addEventListener("click",function(){c.classList.toggle("open"),u.classList.toggle("hidden")}),window.addEventListener("resize",w),a.forEach(function(e){var t=e.querySelector(".pin");e.addEventListener("click",window[t.dataset.method])}),w();var S=this;function C(){l.paused?(n.attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",l.play(),S.play()):(n.attributes.d.value="M18 12L0 24V0",l.pause(),S.stop())}function P(){r.style.display="block",i.style.display="none"}function w(){window.innerHeight<250?(u.style.bottom="-54px",u.style.left="54px"):t.offsetTop<154?(u.style.bottom="-164px",u.style.left="-3px"):(u.style.bottom="52px",u.style.left="-3px")}},methods:{getParaByName:function(e){var t=window.location.search;if(t=t.substr(1),"undefined"===typeof e)return t;for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r];if(n[r]=i.split("="),n[r][0]==e)return i.replace(e+"=","")}return""},formData:function(e){var t=e.split(":")[0],n=e.split(":")[1],r=e.split(":")[2],i=e.split(".")[1];return 3600*parseInt(t)+60*parseInt(n)+parseInt(r)+"."+i}},watch:{uploadfile:function(e,t){var n=this,r=document.getElementById("myVideo"),i=new Blob([e],{type:"audio/mp3"});r.src=window.URL.createObjectURL(i),setTimeout(function(){n.Event.$emit("allTime",r.duration)},[100])}}}),z=F,B=(n("df7f"),Object(C["a"])(z,N,L,!1,null,null,null)),q=B.exports,U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tag",{attrs:{color:1==e.active?"#c5d8ed":"#d9ecff"},on:{click:function(t){return e.runCommand(1)}}},[e._v("转码为wav")]),n("el-tag",{attrs:{color:5==e.active?"#c5d8ed":"#d9ecff"},on:{click:function(t){return e.runCommand(5)}}},[e._v("音频合并")]),n("el-input",{attrs:{placeholder:5==e.active?"无需输入命令":"请输入命令",id:"input"},model:{value:e.commandText,callback:function(t){e.commandText=t},expression:"commandText"}},[n("el-button",{attrs:{slot:"append",type:"primary",id:"run"},slot:"append"},[e._v("执行命令")])],1),5===e.active?n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.pythonAudioUrlText)}}},[e._v("或者复制到python下载")]):e._e(),5===e.active?n("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入音频链接",id:"audioUrl"},model:{value:e.audioUrlText,callback:function(t){e.audioUrlText=t},expression:"audioUrlText"}}):e._e(),n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"命令执行详情",disabled:"",id:"output"}}),n("el-button",{staticClass:"download-files",style:{display:e.showDownload?"block":"none"},attrs:{id:"files"}})],1)},H=[],W=n("2909"),K={props:["uploadfile","sliceTimesArr"],data:function(){return{active:1,showDownload:!1,inputFileName:"/input/input.mp3",audioUrlText:"",pythonAudioUrlText:"",commandText:'-i "/input/input.mp3" -ab 48k -ar 8000 -ac 1 output.wav'}},watch:{audioUrlText:function(e,t){this.pythonAudioUrlText="\n#需要创建这个路径的目录D:\\FFOutput\\txt_temp_audio\nfrom pydub import AudioSegment\nfrom datetime import datetime\nimport requests\n\nstr = '".concat(e.replace(/'/gi,""),'\'\ndef download_audio(url, save_path):\n    response = requests.get(url, stream=True)\n    if response.status_code == 200:\n        with open(save_path, \'wb\') as f:\n            for chunk in response.iter_content(chunk_size=1024):\n                f.write(chunk)\n        print("音频下载中------")\n    else:\n        print("请求失败")\n\n# 定义音频链接和保存路径\naudio_urls = str.split(\';\')\nsave_paths = []\nfor index, element in enumerate(audio_urls):\n    new_string = f"D:\\FFOutput\\txt_temp_audio\\audio{index}.mp3"\n    save_paths.append(new_string)\n\n# 下载并合并音频\ncombined_audio = AudioSegment.empty()\nfor url, path in zip(audio_urls, save_paths):\n    download_audio(url, path)\n    audio = AudioSegment.from_file(path)\n    combined_audio += audio\n\n# 保存合并后的音频文件\noriginal_path = "D:\\FFOutput\\audio_output_audio.mp3"\ncurrent_datetime = datetime.now()\nformatted_datetime = current_datetime.strftime("%Y-%m-%d_%H%M%S")\nnew_path = original_path.replace("output_audio", formatted_datetime)\ncombined_audio.export(new_path, format="mp3")\n\nprint("音频合并完成,地址在：")\nprint(new_path)\n     ').replace(/\\/gi,"\\\\")},uploadfile:function(e,t){var n=this;e&&(this.inputFileName="/input/".concat(e[0].name),this.commandText='-i "/input/'.concat(e[0].name,'" -ab 48k -ar 8000 -ac 1 output.wav'),n.sampleVideoData=e)}},mounted:function(){var e,t,n,r=!1,i=!1,o=this,a=null;function c(){return!r&&i}function u(){a=o.$loading({lock:!0,text:"执行中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t.className="",n.innerHTML="",r=!0}function p(){a.close(),r=!1}function l(e){e=e.replace(/\s+/g," ");var t=[];return e.split('"').forEach(function(e,n){e=e.trim(),n%2===1?t.push(e):t=t.concat(e.split(" "))}),t}function d(e){return f.apply(this,arguments)}function f(){return f=Object(s["a"])(regeneratorRuntime.mark(function t(n){var r,i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!c()){t.next=16;break}if(u(),r=l(n),5!==o.active){t.next=15;break}return i=o.audioUrlText.replace(/['"’‘“”]/gi,"").split(";"),n="",i.map(function(e,t){n+='-i "/input/input'.concat(t,'.mp3" ')}),n+='-filter_complex "[0:0][1:0] concat=n='.concat(i.length,':v=0:a=1[a]" -map [a] 合成.wav'),1===i.length&&(n='-i "/input/input0.mp3" -ab 48k -ar 8000 -ac 1 合成.wav'),r=l(n),t.next=12,o.retrieveSampleVideo(i,!0);case 12:return a=t.sent,e.postMessage({type:"command",arguments:r,files:a}),t.abrupt("return");case 15:e.postMessage({type:"command",arguments:r,files:o.sampleVideoData});case 16:case"end":return t.stop()}},t)})),f.apply(this,arguments)}function m(e,t){if(t.match(/\.jpeg|\.gif|\.jpg|\.png/)){var n=new Blob([e]),r=window.URL.createObjectURL(n),i=document.createElement("img");return i.src=r,o.showDownload=!0,i}var a=document.createElement("a");a.download=t;n=new Blob([e]),r=window.URL.createObjectURL(n);return a.href=r,a.id="download-url",a.textContent="点击下载文件 "+t+"!",o.showDownload=!0,a}function h(){e=new Worker("worker-asm.js"),e.onmessage=function(e){var r=e.data;if("ready"==r.type)i=!0;else if("stdout"==r.type)t.textContent+=r.data+"\n";else if("start"==r.type)t.textContent="Worker has received command\n";else if("done"==r.type){p();var o=r.data;o.length&&(t.className="closed"),o.forEach(function(e){n.appendChild(m(e.data,e.name))})}}}function v(e){var t=window.location.search;if(t=t.substr(1),"undefined"===typeof e)return t;for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r];if(n[r]=i.split("="),n[r][0]==e)return i.replace(e+"=","")}return""}document.addEventListener("DOMContentLoaded",function(){h();var e=v("url");e&&(e="https://vkceyugu.cdn.bspapp.com"+decodeURIComponent(e),o.retrieveSampleVideo(e));var r=document.querySelector("#input");t=document.querySelector("#output"),n=document.querySelector("#files"),document.querySelector("#run").addEventListener("click",function(){d(r.value)})})},methods:{copyTextToClipboard:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return t.$message.success("复制成功")},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return t.$message.error("复制失败, 请手动复制")},i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){window.getSelection().removeAllRanges();var o=document.createRange();o.selectNode(i),window.getSelection().addRange(o);var a=document.execCommand("copy");return a?n():r(),window.getSelection().removeAllRanges(),void document.body.removeChild(i)}var s=document.execCommand("copy");s?n():r()}catch(c){r(c)}document.body.removeChild(i)},runCommand:function(e){var t=this;if(this.active=e,1===e&&(this.commandText='-i "'.concat(this.inputFileName,'" -ab 48k -ar 8000 -ac 1 output.wav')),2===e&&(this.commandText='-i "'.concat(this.inputFileName,'" -af silenceremove=stop_periods=-1:stop_duration=2:stop_threshold=-90dB output.wav')),4===e){var n="";this.sliceTimesArr.map(function(e,r){n+="between(t,".concat(e[0],",").concat(e[1],")").concat(r!==t.sliceTimesArr.length-1?"+":"")}),this.commandText='-i "'.concat(this.inputFileName,'" -vf "select=\'').concat(n,"',setpts=N/FRAME_RATE/TB\" -af \"aselect='").concat(n,"',asetpts=N/SR/TB\" output.wav")}3===e&&(this.commandText='-i "'.concat(this.inputFileName,'" -vf "select=\'between(t,1,2)\',setpts=N/FRAME_RATE/TB" -af "aselect=\'between(t,1,2)\',asetpts=N/SR/TB" output.wav')),5===e&&(this.commandText="")},fileToArrayBuffer:function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n()},r.readAsArrayBuffer(e)})},retrieveSampleVideo:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=this,!n){e.next=4;break}return i=[],e.abrupt("return",new Promise(function(e,n){t.map(function(){var n=Object(s["a"])(regeneratorRuntime.mark(function n(r,o){var a;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:a=new XMLHttpRequest,a.open("GET",r,!0),a.responseType="arraybuffer",a.onload=function(n){var r=a.response;r&&(i=[].concat(Object(W["a"])(i),[new File([r],"input".concat(o,".mp3"))])),i.length===t.length&&e(i)},a.send(null);case 5:case"end":return n.stop()}},n)}));return function(e,t){return n.apply(this,arguments)}}())}));case 4:o=new XMLHttpRequest,o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(e){var t=o.response;t&&(r.sampleVideoData=[new File([t],"input.mp3")])},o.send(null);case 9:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()}},G=K,V=(n("f9d6"),Object(C["a"])(G,U,H,!1,null,null,null)),J=V.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.show&&e.isMobile?n("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"60px"}},[e._l(e.dynamicValidateForm.audioSettings,function(t,r){return n("el-form-item",{key:t.key,attrs:{label:"配音关系"}},[n("el-row",[e._l(t.peopleDictList,function(i,o){return n("el-col",{key:t+2+o,attrs:{span:9}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.peopleDictListOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingPeopleDictList(t,r,o)}}})],1)}),n("el-col",{staticClass:"effect-num",attrs:{span:19}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:1},on:{change:function(t){return e.changeChangjingPeopleDictListNum(t,r)}},model:{value:t.peopleDictListNum,callback:function(n){e.$set(t,"peopleDictListNum",n)},expression:"setting.peopleDictListNum"}})],1)],2)],1)}),e._l(e.dynamicValidateForm.changjings,function(t,r){return n("el-form-item",{key:t.key,attrs:{label:"场景"+(r+1),prop:"changjings."+r+".title",rules:{required:!0,message:"场景名不能为空",trigger:"blur"}}},[n("el-row",[n("el-col",{attrs:{span:5}},[e._v("场景:")]),n("el-col",{attrs:{span:19}},[n("el-input",{model:{value:t.title,callback:function(n){e.$set(t,"title",n)},expression:"changjing.title"}})],1)],1),0!==r?n("el-row",[n("el-col",{attrs:{span:5}},[e._v("开始时间s:")]),n("el-col",{attrs:{span:19}},[n("el-input-number",{attrs:{precision:2,min:0},model:{value:t.startTime,callback:function(n){e.$set(t,"startTime",n)},expression:"changjing.startTime"}})],1)],1):e._e(),n("el-row",[n("el-col",{attrs:{span:5}},[e._v("场景特效:")]),e._l(t.effects,function(i,o){return n("el-col",{key:t+1+o,attrs:{span:9}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.effectOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingEffect(t,r,o)}}})],1)}),n("el-col",{staticClass:"effect-num",attrs:{offset:5,span:19}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:0},on:{change:function(t){return e.changeChangjingEffectNum(t,r)}},model:{value:t.effectsNum,callback:function(n){e.$set(t,"effectsNum",n)},expression:"changjing.effectsNum"}})],1)],2),n("el-row",[e._l(t.people,function(i,o){return n("el-col",{key:t+2+o,attrs:{span:24}},[0==o?n("el-col",{attrs:{span:5}},[e._v("人物:")]):e._e(),n("el-col",{attrs:{offset:0==o?0:5,span:8}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.peopleOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingPeople(t,r,o)}}})],1),n("el-col",{staticClass:"effect-num",attrs:{offset:5,span:19}},[n("span",[e._v("出场点(s)")]),n("el-input-number",{attrs:{precision:2,min:0},on:{change:function(t){return e.changeChangjingPeopleTimes(t,r,o)}},model:{value:t.peopleTimes[o],callback:function(n){e.$set(t.peopleTimes,o,n)},expression:"changjing.peopleTimes[index1]"}})],1),t.people.length-1!==o?n("el-col",{attrs:{offset:5,span:19}},[n("div",{staticClass:"divider"})]):e._e()],1)}),n("el-col",{staticClass:"effect-num",attrs:{offset:5,span:19}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:1},on:{change:function(t){return e.changeChangjingPeopleNum(t,r)}},model:{value:t.peopleNum,callback:function(n){e.$set(t,"peopleNum",n)},expression:"changjing.peopleNum"}})],1)],2),e.dynamicValidateForm.changjings.length>1?n("el-button",{on:{click:function(n){return n.preventDefault(),e.removechangjing(t)}}},[e._v("删除场景")]):e._e()],1)}),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("1、生成脚本")]),n("el-button",{on:{click:e.addchangjing}},[e._v("新增场景")]),n("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],2):e._e(),e.show&&!e.isMobile?n("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:e.dynamicValidateForm,"label-width":"60px"}},[e._l(e.dynamicValidateForm.audioSettings,function(t,r){return n("el-form-item",{key:t.key,attrs:{label:"配音关系"}},[n("el-row",[e._l(t.peopleDictList,function(i,o){return n("el-col",{key:t+2+o,attrs:{span:6}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.peopleDictListOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingPeopleDictList(t,r,o)}}})],1)}),n("el-col",{staticClass:"effect-num",attrs:{span:21}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:1},on:{change:function(t){return e.changeChangjingPeopleDictListNum(t,r)}},model:{value:t.peopleDictListNum,callback:function(n){e.$set(t,"peopleDictListNum",n)},expression:"setting.peopleDictListNum"}})],1)],2)],1)}),e._l(e.dynamicValidateForm.changjings,function(t,r){return n("el-form-item",{key:t.key,attrs:{label:"场景"+(r+1),prop:"changjings."+r+".title",rules:{required:!0,message:"场景名不能为空",trigger:"blur"}}},[n("el-row",[n("el-col",{attrs:{span:3}},[e._v("场景:")]),n("el-col",{attrs:{span:21}},[n("el-input",{model:{value:t.title,callback:function(n){e.$set(t,"title",n)},expression:"changjing.title"}})],1)],1),0!==r?n("el-row",[n("el-col",{attrs:{span:3}},[e._v("开始时间(s):")]),n("el-col",{attrs:{span:21}},[n("el-input-number",{attrs:{precision:2,min:0},model:{value:t.startTime,callback:function(n){e.$set(t,"startTime",n)},expression:"changjing.startTime"}})],1)],1):e._e(),n("el-row",[n("el-col",{attrs:{span:3}},[e._v("场景特效:")]),e._l(t.effects,function(i,o){return n("el-col",{key:t+1+o,attrs:{span:4}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.effectOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingEffect(t,r,o)}}})],1)}),n("el-col",{staticClass:"effect-num",attrs:{offset:3,span:21}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:0},on:{change:function(t){return e.changeChangjingEffectNum(t,r)}},model:{value:t.effectsNum,callback:function(n){e.$set(t,"effectsNum",n)},expression:"changjing.effectsNum"}})],1)],2),n("el-row",[e._l(t.people,function(i,o){return n("el-col",{key:t+2+o,attrs:{span:24}},[0==o?n("el-col",{attrs:{span:3}},[e._v("人物:")]):e._e(),n("el-col",{attrs:{offset:0==o?0:3,span:4}},[n("el-cascader",{attrs:{"append-to-body":!1,options:e.peopleOptions,clearable:"",value:i},on:{change:function(t){return e.changeChangjingPeople(t,r,o)}}})],1),n("el-col",{staticClass:"effect-num",attrs:{span:10}},[n("span",[e._v("出场时间(s)")]),n("el-input-number",{attrs:{precision:2,min:0},on:{change:function(t){return e.changeChangjingPeopleTimes(t,r,o)}},model:{value:t.peopleTimes[o],callback:function(n){e.$set(t.peopleTimes,o,n)},expression:"changjing.peopleTimes[index1]"}})],1),t.people.length-1!==o?n("el-col",{attrs:{offset:3,span:21}},[n("div",{staticClass:"divider"})]):e._e()],1)}),n("el-col",{staticClass:"effect-num",attrs:{offset:3,span:21}},[n("span",[e._v("个数")]),n("el-input-number",{attrs:{min:1},on:{change:function(t){return e.changeChangjingPeopleNum(t,r)}},model:{value:t.peopleNum,callback:function(n){e.$set(t,"peopleNum",n)},expression:"changjing.peopleNum"}})],1)],2),e.dynamicValidateForm.changjings.length>1?n("el-button",{on:{click:function(n){return n.preventDefault(),e.removechangjing(t)}}},[e._v("删除场景")]):e._e()],1)}),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("dynamicValidateForm")}}},[e._v("保存并生成脚本")]),n("el-button",{on:{click:e.addchangjing}},[e._v("新增场景")]),n("el-button",{on:{click:function(t){return e.resetForm()}}},[e._v("重置")])],1)],2):e._e(),n("animationCanvas",{attrs:{animationTime:e.animationTime,isMobile:e.isMobile,customAudioTextTimes:e.customAudioTextTimes,changjings:e.dynamicValidateForm.changjings,audioSettings:e.dynamicValidateForm.audioSettings}}),n("div",{staticClass:"common-title"},[e._v("脚本")]),n("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.falshText,callback:function(t){e.falshText=t},expression:"falshText"}})],1)},Q=[],Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"common-title"},[e._v("\n    画布\n    "),n("el-button",{on:{click:e.setTextFlash}},[e._v("保存并生成脚本")]),n("el-button",{on:{click:e.resetCanvasSetting}},[e._v("重新生成")])],1),e.selectPeople?n("div",{staticClass:"common-title"},[e._v("\n    人物设置: 透明度:\n    "),n("el-input-number",{attrs:{min:0,max:100,value:e.selectFrame.opacity},on:{change:function(t){return e.setPeopleRotate("opacity",t)}}}),n("el-button",{on:{click:function(){return e.setPeopleRotate("rotate")}}},[e._v("水平翻转")]),e._v("\n    表情"),n("el-cascader",{attrs:{"append-to-body":!1,options:e.peopleOptions,clearable:"",value:e.selectFrame.expression},on:{change:function(t){return e.changeFramePeople(t)}}})],1):e._e(),n("div",{staticClass:"canvas-container",style:{height:e.height},attrs:{id:"canvas-container"}},[n("div",{staticClass:"canvas canvas-1",style:{height:e.canvasHeight,margin:parseFloat(e.canvasHeight)+"px 0"}}),n("div",{staticClass:"canvas",style:{height:e.canvasHeight,margin:parseFloat(e.canvasHeight)+"px 0"},attrs:{id:"canvas"}}),n("div",{staticClass:"canvas canvas-1",style:{height:e.canvasHeight,margin:parseFloat(e.canvasHeight)+"px 0"}}),e._l(e.canvasSetting.peopleList,function(t,r){return n("div",{key:r+"people"},[e._l(t,function(i,o){return n("div",{key:o+"sayItem",staticClass:"people",style:{display:"other"===i.action&&(!i.frameKeys||0===i.frameKeys.length)&&e.blueBgFlagLeft>=i.start*e.secondRate&&e.blueBgFlagLeft<=i.end*e.secondRate?"block":"none","box-shadow":e.selectPeople===i.title?"inset 1px 2px 12px #f45":"none",zIndex:e.selectPeople===i.title?1e3:1,transform:"scale("+(i.rotate||"1, 1")+")",opacity:(i.opacity||100)/100,left:i.location[0]+"px",top:i.location[1]+"px"},on:{mousedown:function(t){return e.peopleDown(t,i.title,r)},touchstart:function(t){return e.peopleDown(t,i.title,r)},mousemove:function(t){return e.peopleMove(t,r,o)},touchmove:function(t){return e.peopleMove(t,r,o)},mouseup:e.peopleUp}},[e._v("\n        "+e._s(t[0].title)+"\n        "),t[0].title===e.selectPeople?n("div",{class:t[0].title===e.selectPeople?"nw-resize select-resize":"nw-resize",on:{mousedown:function(t){return e.peopleNwResize(t)},touchstart:function(t){return e.peopleNwResize(t)},mousemove:function(t){return e.peopleNwResizeMove(t)},touchmove:function(t){return e.peopleNwResizeMove(t)}}},[e._v("\n          放大\n        ")]):e._e()])}),e._l(t,function(i,o){return n("div",{key:o+"sayItem11",style:{display:"other"===i.action&&e.blueBgFlagLeft>=i.start*e.secondRate&&e.blueBgFlagLeft<=i.end*e.secondRate?"block":"none"}},e._l(i.frameKeys,function(a,s){return n("div",{key:s+"frameKeys",staticClass:"people",style:{display:0===s&&e.blueBgFlagLeft<=a.start*e.secondRate||e.blueBgFlagLeft>=a.start*e.secondRate&&e.blueBgFlagLeft<=(i.frameKeys&&i.frameKeys[s+1]?i.frameKeys[s+1].start:i.end)*e.secondRate?"block":"none","box-shadow":e.selectPeople===i.title?"inset 1px 2px 12px #f45":"none",zIndex:e.selectPeople===i.title?1e3:1,transform:"scale("+(a.rotate||"1, 1")+")",opacity:(a.opacity||100)/100,left:a.location[0]+"px",top:a.location[1]+"px"},on:{mousedown:function(t){return e.peopleDown(t,i.title,r)},touchstart:function(t){return e.peopleDown(t,i.title,r)},mousemove:function(t){return e.peopleMove(t,r,o,s)},touchmove:function(t){return e.peopleMove(t,r,o,s)},mouseup:e.peopleUp}},[e._v("\n          "+e._s(i.title)+"\n          "),t[0].title===e.selectPeople?n("div",{class:t[0].title===e.selectPeople?"nw-resize select-resize":"nw-resize",on:{mousedown:function(t){return e.peopleNwResize(t)},touchstart:function(t){return e.peopleNwResize(t)},mousemove:function(t){return e.peopleNwResizeMove(t)},touchmove:function(t){return e.peopleNwResizeMove(t)}}},[e._v("\n            放大\n          ")]):e._e()])}),0)})],2)})],2),n("div",{staticClass:"common-title"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{on:{click:e.addAudio}},[e._v("添加语音")])],1),n("el-col",{staticClass:"second-rate-title",attrs:{span:e.isMobile?6:3}},[e._v("时间间隙")]),n("el-col",{attrs:{span:10}},[n("el-slider",{attrs:{step:1},on:{change:e.stepChange},model:{value:e.secondRate,callback:function(t){e.secondRate=t},expression:"secondRate"}})],1)],1)],1),n("div",{staticClass:"canvas-time-lines"},[n("div",{attrs:{id:"waveform1"}}),n("div",{staticClass:"time-lines-btn"},[n("div",{staticClass:"canvas-lines-btn canvas-lines-play",on:{click:function(t){return e.playWave()}}},[e._v("\n        播放/暂停\n      ")]),e._l(e.canvasSetting.peopleList,function(t,r){return n("div",{key:r+"lines-btn",staticClass:"canvas-lines-btn",style:{"box-shadow":e.selectPeople===t[0].title?"inset 1px 2px 12px #f45":"inset 1px 2px 12px rgb(138, 166, 241)"},on:{click:function(n){return e.setSelectPeople(t[0].title,r)}}},[e._v("\n        "+e._s(t[t.length-1].formatTitle)+"\n      ")])})],2),n("div",{staticClass:"time-lines"},e._l(e.canvasSetting.peopleList,function(t,r){return n("div",{key:r+"canvas-lines",staticClass:"canvas-lines",style:{width:e.timeLinesWidth},on:{mousedown:function(n){return e.goToLocation(n,t[0].title,r)}}},[e.selectPeople&&!e.selectFrame&&0===r&&e.blueBgFlagLeft>=60?n("div",{staticClass:"sign-del-btn",style:{left:e.blueBgFlagLeft-60+"px"},on:{mousedown:e.insertFrameKey}},[e._v("\n          插入帧(传统补间)\n        ")]):e._e(),0===r?n("div",{staticClass:"sign-box",style:{left:e.blueBgFlagLeft+"px"},on:{mousedown:e.blueBgDown,touchstart:e.blueBgDown,mousemove:e.blueBgMove,touchmove:e.blueBgMove,mouseup:e.blueBgUp}},[e._v("\n          "+e._s((e.blueBgFlagLeft/e.secondRate).toFixed(2))+"\n          "),n("div",{staticClass:"sign-box-content",style:{height:40+56*e.canvasSetting.peopleList.length+"px"}})]):e._e(),e.selectPeople&&!e.selectFrame&&0===r&&e.blueBgFlagLeft<60?n("div",{staticClass:"sign-del-btn",style:{left:90+e.blueBgFlagLeft+"px"},on:{mousedown:e.insertFrameKey}},[e._v("\n          插入帧(传统补间)\n        ")]):e._e(),e.selectPeople&&!e.selectFrame&&0===r?n("div",{staticClass:"sign-del-btn",style:{left:(e.blueBgFlagLeft<60&&!e.selectFrame?150:90)+e.blueBgFlagLeft+"px"},on:{mousedown:function(t){return e.insertFrameKey(t,!0)}}},[e._v("\n          插入帧(普通)\n        ")]):e._e(),e.selectFrame&&0===r?n("div",{staticClass:"sign-del-btn",style:{left:(e.blueBgFlagLeft<60&&!e.selectFrame?150:90)+e.blueBgFlagLeft+"px"},on:{mousedown:e.delFrameKey}},[e._v("\n          删除帧\n        ")]):e._e(),e._l(e.animationTimeArr,function(t){return n("div",{key:t+"calibration",staticClass:"calibration",style:{left:t*e.secondRate+"px",height:t%5===0&&0!==t?"8px":"5px"}},[e._v("\n          "+e._s(t%5===0&&0!==t?t:"")+"\n        ")])}),e._l(t,function(t){return n("div",{key:t.end+"box",class:"other"===t.action?"green-box":"red-box",style:{width:(t.end-t.start)*e.secondRate+"px",left:t.start*e.secondRate+"px",border:"other"===t.action&&e.selectIndex===r&&t.start<=(e.blueBgFlagLeft/e.secondRate).toFixed(2)&&(e.blueBgFlagLeft/e.secondRate).toFixed(2)<t.end?"1.4px solid yellow":"none"}})}),e._l(t,function(t,r){return n("div",{key:t.end+"box1"},e._l(t.frameKeys,function(t){return n("div",{key:t.start+"box",class:e.selectFrame.id===t.id?"frame-select":"frame"+(t.isOrdinary?1:""),style:{left:t.start*e.secondRate-5+"px"},on:{mousedown:function(n){return e.setSelectFrame(n,Object.assign({},t,{changjingIndex:r}))}}})}),0)})],2)}),0)])])},Z=[];function X(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var te={props:["animationTime","isMobile","customAudioTextTimes","changjings","audioSettings"],data:function(){return{height:"0px",canvasHeight:"0px",timeLinesWidth:"0px",canvasSetting:{peopleList:[],animationTime:0,changjings:[]},blueBgFlagLeft:0,selectPeople:"",selectIndex:"",selectFrame:"",wavesurfer:null,secondRate:50,peopleOptions:[]}},computed:{animationTimeArr:function(){return M.a.range(Math.ceil(this.canvasSetting.animationTime))}},mounted:function(){var e=[{title:"普通",value:1},{title:"疑惑",value:13},{title:"疑惑1",value:11},{title:"流泪",value:25},{title:"流泪1",value:5},{title:"流血",value:29},{title:"流血1",value:33},{title:"惊讶",value:39},{title:"惊讶1",value:41},{title:"惊讶2",value:53},{title:"无语",value:57},{title:"无语1",value:65},{title:"害怕",value:49},{title:"害怕",value:49},{title:"生气",value:149},{title:"生气1",value:147},{title:"生气2",value:155},{title:"生气3",value:15},{title:"高兴",value:81},{title:"高兴1",value:85},{title:"高兴1",value:91},{title:"高兴2",value:95},{title:"高兴3",value:101},{title:"悲伤",value:169},{title:"悲伤1",value:35}];this.peopleOptions=e.map(function(e){return{value:e.value,label:e.title}}),this.height="400px";var t=9*document.getElementById("canvas").offsetWidth/16;this.canvasHeight=t+"px",setTimeout(function(){var e=document.getElementById("canvas").offsetWidth;document.getElementById("canvas-container").scrollTo(.75*e+10,(400-t)/2+10)},300);try{var n=JSON.parse(localStorage.getItem("canvasSetting"));this.canvasSetting=n,this.timeLinesWidth=this.secondRate*n.animationTime+"px"}catch(r){}},methods:{changeFramePeople:function(e){null!==e&&void 0!==e&&e.length&&this.setPeopleRotate("expression",null===e||void 0===e?void 0:e[0])},stepChange:function(e){this.secondRate=e},playWave:function(){var e=this.wavesurfer;if(!e)return this.$message.error("请先添加语音");e.seekAndCenter((this.blueBgFlagLeft/this.secondRate).toFixed(2)/this.animationTime),e.playPause()},addAudio:function(){if(this.wavesurfer){this.wavesurfer.load(n.href);var e=this;this.wavesurfer.on("ready",function(){e.$message({message:"添加语音成功",type:"success"})})}else{var t=I.a.create({mediaType:"video",backgroundColor:"rgb(105,160,174, 0.1)",container:"#waveform1",waveColor:"violet",barWidth:2,responsive:!0,scrollParent:!0,progressColor:"purple"});this.wavesurfer=t;var n=document.getElementById("download-url");if(n&&n.href){t.load(n.href);var r=this;t.on("ready",function(){r.$message({message:"添加语音成功",type:"success"})}),t.on("audioprocess",function(){console.log(t.getCurrentTime().toFixed(2),"==="),r.blueBgFlagLeft=t.getCurrentTime().toFixed(2)*r.secondRate})}else this.$message.error("请先执行智能裁剪命令, 生成wav文件")}},setTextFlash:function(){localStorage.setItem("canvasSetting",JSON.stringify(this.canvasSetting)),this.Event.$emit("getPeopleList",this.canvasSetting)},saveCanvasSetting:function(){localStorage.setItem("canvasSetting",JSON.stringify(this.canvasSetting))},resetCanvasSetting:function(){var e,t=this;this.timeLinesWidth=this.secondRate*this.animationTime+"px";var n=M.a.map((null===(e=this.audioSettings[0])||void 0===e?void 0:e.peopleDictList)||[],function(e){var n=[];return t.changjings.map(function(r,i){M.a.map(r.people,function(o,a){if(o[0]===e[0]){var s,c=document.getElementById("canvas").offsetWidth,u=document.getElementById("canvas").offsetHeight,p=Math.random()*(c-20+1)+20+c,l=Math.random()*(u-40+1)+40+u;n.push({id:Math.random().toFixed(10),action:"other",location:[p,l],changjingIndex:i,start:r.startTime>(r.peopleTimes[a]||0)?r.startTime:r.peopleTimes[a]||0,end:(null===(s=t.changjings[i+1])||void 0===s?void 0:s.startTime)||t.animationTime,formatTitle:e[0],title:e[0]})}})}),M.a.filter(t.customAudioTextTimes,function(t){t.title===e[1]&&n.push(ee(ee({},t),{},{id:Math.random().toFixed(10),action:"say",formatTitle:e[0]+"("+e[1]+")",title:e[0],location:[]}))}),n}),r={peopleList:n,animationTime:this.animationTime,changjings:this.changjings};this.canvasSetting=r,localStorage.setItem("canvasSetting",JSON.stringify(r))},setPeopleRotate:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rotate",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.selectPeople){var i=[];i=this.selectFrame?M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(i,o){if(e.selectFrame.changjingIndex===o){var s=i.frameKeys;return"rotate"===t?ee(ee({},i),{},{frameKeys:M.a.map(s,function(t){var n=((null===t||void 0===t?void 0:t.rotate)||"1, 1").split(", ");return t.id===e.selectFrame.id?ee(ee({},t),{},{rotate:"".concat(-1*n[0],", ").concat(n[1])}):t})}):"scale"===t?ee(ee({},i),{},{frameKeys:M.a.map(s,function(t){var i=((null===t||void 0===t?void 0:t.rotate)||"1, 1").split(",");return t.id===e.selectFrame.id?ee(ee({},t),{},{rotate:"".concat((+i[0]>0?1:-1)*n,", ").concat((+i[1]>0?1:-1)*r)}):t})}):"opacity"===t||"expression"===t?ee(ee({},i),{},{frameKeys:M.a.map(s,function(r){return r.id===e.selectFrame.id?ee(ee({},r),{},Object(a["a"])({},t,n)):r})}):i}return i}):M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(i,o){if("other"===i.action&&i.start<=(e.blueBgFlagLeft/e.secondRate).toFixed(2)&&(e.blueBgFlagLeft/e.secondRate).toFixed(2)<i.end){var s=i.frameKeys||[],c="";if(M.a.map(s||[],function(t,n){return 0===n&&(e.blueBgFlagLeft/e.secondRate).toFixed(2)<=t.start&&(c=t.id),i.start<=(e.blueBgFlagLeft/e.secondRate).toFixed(2)&&(c=t.id),t}),c){if("rotate"===t)return ee(ee({},i),{},{frameKeys:M.a.map(s,function(e){var t=((null===e||void 0===e?void 0:e.rotate)||"1, 1").split(", ");return e.id===c?ee(ee({},e),{},{rotate:"".concat(-1*t[0],", ").concat(t[1])}):e})});if("scale"===t)return ee(ee({},i),{},{frameKeys:M.a.map(s,function(e){var t=((null===e||void 0===e?void 0:e.rotate)||"1, 1").split(", ");return e.id===c?ee(ee({},e),{},{rotate:"".concat((+t[0]>0?1:-1)*n,", ").concat((+t[1]>0?1:-1)*r)}):e})});if("opacity"===t||"expression"===t)return ee(ee({},i),{},{frameKeys:M.a.map(s,function(e){return e.id===c?ee(ee({},e),{},Object(a["a"])({},t,n)):e})})}if("rotate"===t){var u=((null===i||void 0===i?void 0:i.rotate)||"1, 1").split(", ");return ee(ee({},i),{},{rotate:"".concat(-1*u[0],", ").concat(u[1])})}if("scale"===t){var p=((null===i||void 0===i?void 0:i.rotate)||"1, 1").split(", ");return ee(ee({},i),{},{rotate:"".concat((+p[0]>0?1:-1)*n,", ").concat((+p[1]>0?1:-1)*r)})}if("opacity"===t||"expression"===t)return ee(ee({},i),{},Object(a["a"])({},t,n))}return i});var o=this.canvasSetting.peopleList;o[this.selectIndex]=Object(W["a"])(i),this.canvasSetting.peopleList=Object(W["a"])(o)}},delFrameKey:function(e){var t=this;if(e.stopPropagation(),this.selectFrame){var n=M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(e,n){if(t.selectFrame.changjingIndex===n){var r=e.frameKeys;return ee(ee({},e),{},{frameKeys:M.a.filter(r,function(e){return e.id!==t.selectFrame.id})})}return e}),r=this.canvasSetting.peopleList;r[this.selectIndex]=Object(W["a"])(n),this.selectFrame="",this.canvasSetting.peopleList=Object(W["a"])(r)}},insertFrameKey:function(e,t){var n=this;if(e.stopPropagation(),!this.selectPeople)return this.$message.error("请先选择人物");var r=(this.blueBgFlagLeft/this.secondRate).toFixed(2),i=Math.random().toFixed(10),o=M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(e,o){if("other"==e.action&&r>=e.start&&r<=e.end){var a=e.frameKeys;if(M.a.isEmpty(a))a=[{start:r,location:e.location,rotate:e.rotate,isOrdinary:t,id:i}],n.selectFrame=ee(ee({},a[0]),{},{changjingIndex:o});else if(r>a[a.length-1].start)a=[].concat(Object(W["a"])(a),[{start:r,location:a[a.length-1].location,rotate:a[a.length-1].rotate,isOrdinary:t,id:i}]),n.selectFrame=ee(ee({},a[a.length-1]),{},{changjingIndex:o});else if(r<a[0].start)a=[{start:r,location:a[0].location,rotate:a[0].rotate,isOrdinary:t,id:i}].concat(Object(W["a"])(a)),n.selectFrame=ee(ee({},a[0]),{},{changjingIndex:o});else{var s=M.a.sortedIndexBy(a,{start:r},"start"),c={start:r,location:a[s-1].location,rotate:a[s-1].rotate,isOrdinary:t,id:i};a=[].concat(Object(W["a"])(a.slice(0,s)),[c],Object(W["a"])(a.slice(s))),n.selectFrame=ee(ee({},c),{},{changjingIndex:o})}return ee(ee({},e),{},{frameKeys:a})}return e}),a=this.canvasSetting.peopleList;a[this.selectIndex]=Object(W["a"])(o),this.canvasSetting.peopleList=Object(W["a"])(a)},setSelectFrame:function(e,t){this.selectFrame=t},peopleDown:function(e,t,n){e.stopPropagation(),this.setSelectPeople(t,n),this.peopleFlag=!0,this.nPeopleInitX=e.clientX||e.targetTouches[0].clientX,this.nPeopleInitY=e.clientY||e.targetTouches[0].clientY,this.nPeopleInitLeft=e.target.offsetLeft,this.nPeopleInitTop=e.target.offsetTop},peopleMove:function(e,t,n,r){if(e.stopPropagation(),e.preventDefault(),this.peopleFlag){var i=(e.clientX||e.targetTouches[0].clientX)-this.nPeopleInitX+this.nPeopleInitLeft,o=(e.clientY||e.targetTouches[0].clientY)-this.nPeopleInitY+this.nPeopleInitTop,a=(document.getElementById("canvas-container").offsetWidth,document.getElementById("canvas").offsetWidth);document.getElementById("canvas-container").offsetHeight;i<=0&&(i=0),i>=3*parseFloat(a)&&(i=3*parseFloat(a)),o<=0&&(o=0),o>=3*parseFloat(this.canvasHeight)&&(o=3*parseFloat(this.canvasHeight)),M.a.isNil(r)?this.canvasSetting.peopleList[t][n].location=[i,o]:this.canvasSetting.peopleList[t][n].frameKeys[r].location=[i,o],e.target.style.left=i+"px",e.target.style.top=o+"px"}},peopleUp:function(e){e.stopPropagation(),this.peopleFlag=!1},peopleNwResize:function(e){e.stopPropagation(),this.peopleFlag1=!0,this.nPeopleInitX=e.clientX||e.targetTouches[0].clientX,this.nPeopleInitY=e.clientY||e.targetTouches[0].clientY,console.log(e.target.parentNode.style.transform.replace(/scale\(|\)/gi,"").split(", "));var t=e.target.parentNode.style.transform.replace(/scale\(|\)/gi,"").split(", ");this.nPeopleInitWidth=e.target.parentNode.offsetWidth*t[0],this.nPeopleInitHeight=e.target.parentNode.offsetHeight*t[1]},peopleNwResizeMove:function(e){if(e.stopPropagation(),e.preventDefault(),this.peopleFlag1){var t=(e.clientX||e.targetTouches[0].clientX)-this.nPeopleInitX+this.nPeopleInitWidth,n=(e.clientY||e.targetTouches[0].clientY)-this.nPeopleInitY+this.nPeopleInitHeight;t<=0&&(t=0),n<=0&&(n=0),e.target.parentNode.style.transform="scale(".concat(t/40,", ").concat(n/80,")"),this.setPeopleRotate("scale",t/40,n/80),document.onmouseup=this.peopleNwResizeUp}},peopleNwResizeUp:function(e){e.stopPropagation(),this.peopleFlag1=!1},blueBgDown:function(e){var t,n;e.stopPropagation(),this.blueBgFlag=!0,this.nInitX=e.clientX||e.targetTouches[0].clientX,this.nInitLeft=e.target.offsetLeft,null===(t=this.wavesurfer)||void 0===t||null===(n=t.pause)||void 0===n||n.call(t)},blueBgMove:function(e){if(e.stopPropagation(),e.preventDefault(),this.blueBgFlag){var t=(e.clientX||e.targetTouches[0].clientX)-this.nInitX+this.nInitLeft;t<=0&&(t=0),this.blueBgFlagLeft=t}},blueBgUp:function(e){var t=this;e.stopPropagation(),this.blueBgFlag=!1,this.selectFrame="",M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(e,n){"other"===e.action&&e.start<=(t.blueBgFlagLeft/t.secondRate).toFixed(2)&&(t.blueBgFlagLeft/t.secondRate).toFixed(2)<e.end&&M.a.map(e.frameKeys,function(e){Math.abs((t.blueBgFlagLeft/t.secondRate).toFixed(2))+.25>=Math.abs(e.start)&&Math.abs(e.start)>=Math.abs((t.blueBgFlagLeft/t.secondRate).toFixed(2))-.25&&(t.selectFrame=ee(ee({},e),{},{changjingIndex:n}))})})},goToLocation:function(e,t,n){var r=this;e.stopPropagation(),e.preventDefault(),this.selectPeople=t,this.selectIndex=n;var i=document.getElementsByClassName("time-lines")[0],o=i.scrollLeft+e.clientX-15-70;o<=0&&(o=0),this.selectFrame="",M.a.map(this.canvasSetting.peopleList[this.selectIndex],function(e,t){"other"===e.action&&e.start<=(o/r.secondRate).toFixed(2)&&(o/r.secondRate).toFixed(2)<e.end&&M.a.map(e.frameKeys,function(e){Math.abs((o/r.secondRate).toFixed(2))+.25>=Math.abs(e.start)&&Math.abs(e.start)>=Math.abs((o/r.secondRate).toFixed(2))-.25&&(r.selectFrame=ee(ee({},e),{},{changjingIndex:t}))})}),this.blueBgFlagLeft=o,this.wavesurfer&&this.wavesurfer.pause()},setSelectPeople:function(e,t){var n=this;this.selectFrame="",M.a.map(this.canvasSetting.peopleList[t],function(e,t){"other"===e.action&&e.start<=(n.blueBgFlagLeft/n.secondRate).toFixed(2)&&(n.blueBgFlagLeft/n.secondRate).toFixed(2)<e.end&&M.a.map(e.frameKeys,function(e){Math.abs((n.blueBgFlagLeft/n.secondRate).toFixed(2))+.25>=Math.abs(e.start)&&Math.abs(e.start)>=Math.abs((n.blueBgFlagLeft/n.secondRate).toFixed(2))-.25&&(n.selectFrame=ee(ee({},e),{},{changjingIndex:t}))})}),this.selectPeople=e,this.selectIndex=t}}},ne=te,re=(n("da76"),Object(C["a"])(ne,Y,Z,!1,null,null,null)),ie=re.exports;function oe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var se=[{title:"小溪边夕阳",startTime:0,effectsNum:2,effects:[[],[]],peopleNum:2,people:[[],[]],peopleTimes:[]}],ce=[{peopleDictList:[[],[]],peopleDictListNum:2}],ue={props:["animationTime","isMobile","customAudioTextTimes","show"],components:{animationCanvas:ie},data:function(){return{effectOptions:[],peopleOptions:[],peopleDictListOptions:[],dynamicValidateForm:{audioSettings:ce,changjings:se},finalChangjings:[]}},created:function(){var e=this,t=[{value:"全",label:"全"},{value:"上",label:"上"},{value:"中",label:"中"},{value:"下",label:"下"}],n=["流线(水平)","流线(水平)1","流线(水平)2","流线(垂直)","流线(垂直)1","光圈","光圈1","光圈2","光圈3","下雨","闪电","雷电"];this.effectOptions=n.map(function(e){return{value:e,label:e,children:t}});var r=["男普通1","男普通2","男普通3","男普通4","男普通5","男普通6","男普通7","男普通8","男中级1","男中级2","男中级3","男中级4","男中级5","男中级6","男高级1","男高级2","男高级3","男高级4","男高级5","男高级6","女普通1","女普通2","女普通3","女普通4","女普通5","女普通6","女普通7","女普通8","女普通9","女普通10","乌龟"];this.peopleOptions=r.map(function(e){return{value:e,label:e}});var i=se,o=ce;try{var a=localStorage.getItem("changjings"),s=localStorage.getItem("audioSettings");s&&(o=JSON.parse(s)),a&&(i=JSON.parse(a))}catch(c){}this.dynamicValidateForm={audioSettings:o,changjings:i},this.Event.$on("getPeopleList",function(t){e.submitForm("dynamicValidateForm");var n=document.getElementById("canvas").offsetWidth,r=document.getElementById("canvas").offsetLeft,i=document.getElementById("canvas").offsetHeight,o=document.getElementById("canvas").offsetTop;e.finalChangjings=M.a.map(e.finalChangjings,function(a,s){var c=M.a.map(a.people,function(c){var u=M.a.filter(t.peopleList,function(e){return e[0].title===c.title});if(!u.length)return c;var p=M.a.filter(u[0],function(e){return"other"==e.action}),l=M.a.find(p,{changjingIndex:s}),d=M.a.map(M.a.slice(u[0],p.length)||[],function(e){return ae(ae({},e),{},{start:Math.ceil(30*e.start)||1,end:Math.ceil(30*e.end)})}),f=M.a.map(l.frameKeys||[],function(e){return ae(ae({},e),{},{start:Math.ceil(30*e.start)||1,location:[1920/n*(e.location[0]-r+20),1080/i*(e.location[1]-o+40)]})}),m=[],h=[],v=[];0===d.length?(m[0]=f,h=M.a.filter(f,function(e){return e.isOrdinary})):d.length>=1&&M.a.map(d,function(e,t){v=[].concat(Object(W["a"])(v),Object(W["a"])(M.a.filter(f,function(t){return e.start<=t.start&&t.start<=e.end&&t.isOrdinary}))),0===t?(m[t]=M.a.filter(f,function(t){return t.start<e.start&&!t.isOrdinary}),h=[].concat(Object(W["a"])(h),Object(W["a"])(M.a.filter(f,function(t){return t.start<e.start&&t.isOrdinary})))):(m[t]=M.a.filter(f,function(n){return d[t-1].end<n.start&&n.start<e.start&&!n.isOrdinary}),h=[].concat(Object(W["a"])(h),Object(W["a"])(M.a.filter(f,function(n){return d[t-1].end<n.start&&n.start<e.start&&n.isOrdinary})))),t===d.length-1&&(m[t+1]=M.a.filter(f,function(t){return t.start>e.end&&!t.isOrdinary}),h=[].concat(Object(W["a"])(h),Object(W["a"])(M.a.filter(f,function(t){return t.start>e.end&&t.isOrdinary}))))});var g=[1920/n*(l.location[0]-r+20),1080/i*(l.location[1]-o+40)];return ae(ae({},c),{},{location:f.length?f[0].location:g,rotate:f.length?f[0].rotate:l.rotate,opacity:f.length?f[0].opacity:l.opacity,expression:f.length?f[0].expression:l.expression,frameKeys:m,ordinaryFrameKeys:h,sayOrdinaryFrameKeys:v,sayKeys:M.a.filter(d,function(t){return s===e.finalChangjings.length-1?a.start<=t.start:a.start<=t.start&&t.start<=e.finalChangjings[s+1].start})})});return ae(ae({},a),{},{people:c})})})},methods:{changeChangjingPeopleDictList:function(e,t,n){var r=this.dynamicValidateForm.audioSettings;r[t].peopleDictList[n]=e,this.dynamicValidateForm.audioSettings=Object(W["a"])(r)},changeChangjingPeopleDictListNum:function(e,t){if(-1!==t){var n=this.dynamicValidateForm.audioSettings;n[t].peopleDictListNum=e;var r=n[t].peopleDictList;r.length>=e&&(n[t].peopleDictList=r.slice(0,e)),r.length<e&&(n[t].peopleDictList=[].concat(Object(W["a"])(r),Object(W["a"])(M.a.range(e-r.length)))),this.dynamicValidateForm.audioSettings=Object(W["a"])(n)}},changeChangjingEffect:function(e,t,n){var r=this.dynamicValidateForm.changjings;r[t].effects[n]=e,this.dynamicValidateForm.changjings=Object(W["a"])(r)},changeChangjingPeople:function(e,t,n){var r=this.dynamicValidateForm.changjings;r[t].people[n]=e,this.dynamicValidateForm.changjings=Object(W["a"])(r)},changeChangjingPeopleTimes:function(e,t,n){var r=this.dynamicValidateForm.changjings;r[t].peopleTimes[n]=e,this.dynamicValidateForm.changjings=Object(W["a"])(r)},changeChangjingPeopleNum:function(e,t){if(-1!==t){var n=this.dynamicValidateForm.changjings;n[t].peopleNum=e;var r=n[t].people;r.length>=e&&(n[t].people=r.slice(0,e)),r.length<e&&(n[t].people=[].concat(Object(W["a"])(r),Object(W["a"])(M.a.range(e-r.length)))),this.dynamicValidateForm.changjings=Object(W["a"])(n)}},changeChangjingEffectNum:function(e,t){if(-1!==t){var n=this.dynamicValidateForm.changjings;n[t].effectsNum=e;var r=n[t].effects;r.length>=e&&(n[t].effects=r.slice(0,e)),r.length<e&&(n[t].effects=[].concat(Object(W["a"])(r),Object(W["a"])(M.a.range(e-r.length)))),this.dynamicValidateForm.changjings=Object(W["a"])(n)}},submitForm:function(e){var t=this;this.$refs[e].validate(function(e,n){if(!e)return console.log("error submit!!"),!1;var r=t.dynamicValidateForm.changjings,i=t.dynamicValidateForm.audioSettings;localStorage.setItem("changjings",JSON.stringify(r)),localStorage.setItem("audioSettings",JSON.stringify(i));var o=M.a.map(r,function(e,t){var n=0==t?1:Math.ceil(30*e.startTime);return{title:"场景/"+e.title,start:n,people:M.a.compact(M.a.map(e.people,function(t,r){return M.a.isEmpty(t)?null:{title:t[0],start:M.a.isNil(e.peopleTimes[r])?n:n>(Math.ceil(30*e.peopleTimes[r])||1)?n:Math.ceil(30*e.peopleTimes[r])||1}})),effects:M.a.compact(M.a.map(e.effects,function(e){return M.a.isEmpty(e)?null:{title:e[0],location:e[1]}}))}});t.finalChangjings=Object(W["a"])(o)})},resetForm:function(){this.dynamicValidateForm={audioSettings:[{peopleDictList:[[],[]],peopleDictListNum:2}],changjings:[{title:"小溪边夕阳",startTime:0,effectsNum:2,effects:[[],[]],peopleNum:2,people:[[],[]],peopleTimes:[],peopleDictList:[[],[]],peopleDictListNum:2}]}},removechangjing:function(e){var t=this.dynamicValidateForm.changjings.indexOf(e);-1!==t&&this.dynamicValidateForm.changjings.splice(t,1)},addchangjing:function(){this.dynamicValidateForm.changjings.push(ae(ae({},se[0]),{},{key:Date.now()}))}},computed:{falshText:function(){return"\n\n      // var configDir = fl.configDirectory;\n  // fl.trace(fl.configDirectory)\n  //fl.getDocumentDOM().scaleSelection(-1, 1);水平翻转\n  var time = ".concat(this.animationTime," // 动画时长\n  var changjing = ").concat(JSON.stringify(this.finalChangjings),"\n  var canvasWidth = 1920 // 画布宽度\n  var canvasHeight = 1080 // 画布高度\n  var fs = 30 // 动画帧数\n  // 位置坐标, 这里一般不需要改; key: 位置名称, value: [宽, 高, 中心点]\n  var effectsLocationDict = {\n    '上': [canvasWidth, 360, canvasWidth/2, 180],\n    '中': [canvasWidth, 720, canvasWidth/2, canvasHeight/2],\n    '下': [canvasWidth, 360, canvasWidth/2, canvasHeight - 180],\n    '全': [canvasWidth, canvasHeight, canvasWidth/2, canvasHeight/2]\n  }\n  fl.getDocumentDOM().library.deleteItem('待删除')\n  fl.getDocumentDOM().library.newFolder('待删除')\n  fl.getDocumentDOM().addNewScene()\n  fl.getDocumentDOM().editScene(0);\n  fl.getDocumentDOM().deleteScene();\n  var NumLayer = fl.getDocumentDOM().getTimeline().layerCount\n  // 添加图层\n  fl.getDocumentDOM().getTimeline().addNewLayer(\"场景\", \"normal\", true);\n  fl.getDocumentDOM().getTimeline().addNewLayer(\"场景特效\", \"normal\", true);\n  fl.getDocumentDOM().getTimeline().addNewLayer(\"camera\", \"normal\", true);\n\n  // 总帧\n  var insertFrames = Math.ceil(fs * time)\n  fl.getDocumentDOM().getTimeline().insertFrames(insertFrames, true, 0);\n\n  var NumLayer = fl.getDocumentDOM().getTimeline().layerCount\n  // 选择场景层\n  var bgIndex = NumLayer - 2\n  fl.getDocumentDOM().getTimeline().setSelectedLayers(bgIndex);\n\n  // 添加场景\n  for (var i = 0; i < changjing.length; i++) {\n    if (i > 0) {\n      fl.getDocumentDOM().getTimeline().convertToBlankKeyframes(changjing[i].start - 1);\n    }\n    fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start-1, changjing[i].start-1);\n    fl.getDocumentDOM().library.selectItem(changjing[i].title);\n    fl.getDocumentDOM().library.addItemToDocument({x: canvasWidth/2, y: canvasHeight / 2});\n    // 场景宽度比较小，等比放大\n    var curBg = fl.getDocumentDOM().getTimeline().layers[bgIndex].frames[changjing[i].start-1].elements[0];\n    var rate = canvasWidth / curBg.width\n    var curBgWidth = curBg.width\n    var curBgHeight = curBg.height\n    if (curBgHeight * rate >= canvasHeight) {\n      curBg.width = curBgWidth * rate\n      curBg.height = curBgHeight * rate\n    } else {\n      curBg.width = curBgWidth * rate * canvasHeight/(curBgHeight * rate)\n      curBg.height = canvasHeight\n    }\n  }\n\n  // 选择camera层\n  var cameraIndex = 0\n  fl.getDocumentDOM().getTimeline().setSelectedLayers(cameraIndex);\n\n  // 添加过渡效果\n  for (var i = 0; i < changjing.length; i++) {\n    if (i != 0) {\n      fl.getDocumentDOM().getTimeline().convertToKeyframes(changjing[i].start - 11)\n      fl.getDocumentDOM().getTimeline().convertToKeyframes(changjing[i].start + 9)\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start-11,changjing[i].start-11);\n      fl.getDocumentDOM().library.selectItem('场景/过渡页');\n      fl.getDocumentDOM().library.addItemToDocument({x: canvasWidth/2, y: canvasHeight / 2});\n      // 场景宽度比较小，等比放大\n      var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n      var curBg = fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[changjing[i].start-1].elements[0];\n      var rate = canvasWidth / curBg.width\n      var curBgWidth = curBg.width\n      var curBgHeight = curBg.height\n      if (curBgHeight * rate >= canvasHeight) {\n        curBg.width = curBgWidth * rate\n        curBg.height = curBgHeight * rate\n      } else {\n        curBg.width = curBgWidth * rate * canvasHeight/(curBgHeight * rate)\n        curBg.height = canvasHeight\n      }\n      fl.getDocumentDOM().getTimeline().convertToKeyframes(changjing[i].start - 1)\n      fl.getDocumentDOM().getTimeline().convertToKeyframes(changjing[i].start + 8)\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start-2,changjing[i].start+1);\n      fl.getDocumentDOM().getTimeline().createMotionTween();\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start + 8,changjing[i].start + 8);\n      fl.getDocumentDOM().setInstanceAlpha(0)\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start - 11,changjing[i].start - 11);\n      fl.getDocumentDOM().setInstanceAlpha(0)\n    }\n  }\n  // 添加人物和特效层级\n  var allPeople = []\n  for (var i = 0; i < changjing.length; i++) {\n      if (changjing[i].people) {\n          for (var j = 0; j < changjing[i].people.length; j++) {\n              if (allPeople.indexOf(changjing[i].people[j].title) === -1) {\n                allPeople.push(changjing[i].people[j].title)\n              }\n          }\n      }\n  }\n  for (var i = 0; i < allPeople.length; i++) {\n    fl.getDocumentDOM().getTimeline().addNewLayer(allPeople[i]+\"人物\", \"normal\", false);\n    fl.getDocumentDOM().getTimeline().addNewLayer(allPeople[i]+\"特效\", \"normal\", false);\n  }\n  // 添加人物和场景特效到对应的层级\n  var layers = fl.getDocumentDOM().getTimeline().layers\n  var layersDict = {}\n  for (var i = 0; i < layers.length - 1; i++) {\n    layersDict[layers[i].name] = i\n  }\n  for (var i = 1; i < layers.length - 2; i++) {\n    fl.getDocumentDOM().getTimeline().setSelectedLayers(i);\n    for (var j = 0; j < changjing.length; j++) {\n      if (j > 0) {\n        fl.getDocumentDOM().getTimeline().convertToKeyframes(changjing[j].start - 1);\n      }\n    }\n  }\n  for (var i = 0; i < changjing.length; i++) {\n    // 添加人物\n    for (var j = 0; j < changjing[i].people.length; j++) {\n      var name = changjing[i].people[j].title\n      var start = changjing[i].people[j].start\n      var location = changjing[i].people[j].location\n      var rotate = changjing[i].people[j].rotate || '1, 1'\n      var opacity = changjing[i].people[j].opacity || '100'\n      var expression = changjing[i].people[j].expression\n      fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[name +\"人物\"]);\n      if (start && start !== changjing[i].start) {\n        fl.getDocumentDOM().getTimeline().convertToKeyframes(start-1)\n      }\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(start || changjing[i].start-1, start || changjing[i].start-1);\n      fl.getDocumentDOM().library.selectItem(name + '动作/' + name + '正面站姿');\n      fl.getDocumentDOM().library.addItemToDocument({x: location[0], y: location[1]});\n      // 修改元件名\n      var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n      fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[start || changjing[i].start-1].elements[0]]\n      fl.getDocumentDOM().scaleSelection(+rotate.split(',')[0], +rotate.split(',')[1])\n      fl.getDocumentDOM().setInstanceAlpha(+opacity)\n      var name = fl.getDocumentDOM().selection[0].libraryItem.name\n      fl.getDocumentDOM().library.duplicateItem(name)\n      var nameArr = name.split(' 复制')\n      var newName = ''\n      if (name.indexOf(' 复制') == -1) {\n          newName = name+' 复制'\n      } else {\n          newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n      }\n      fl.getDocumentDOM().swapElement(newName)\n      fl.getDocumentDOM().library.selectItem(newName);\n      fl.getDocumentDOM().library.moveToFolder('待删除');\n      fl.getDocumentDOM().library.renameItem(name+Math.random().toFixed(4))\n      // 换表情\n      if (expression) {\n        fl.getDocumentDOM().enterEditMode('inPlace');\n        var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n        var peoplelayersDict = {}\n        for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n          peoplelayersDict[peopleLayers[i1].name] = i1\n        }\n        fl.getDocumentDOM().getTimeline().setSelectedLayers(peoplelayersDict['xz头']);\n        fl.getDocumentDOM().getTimeline().clearKeyframes(1,10);\n        fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[1].elements[0].firstFrame = expression-1\n        fl.getDocumentDOM().selectNone();\n        fl.getDocumentDOM().exitEditMode();\n      }\n      // 添加帧(传统补间)\n      var frameKeys = changjing[i].people[j].frameKeys\n      for (var f = 0; f < frameKeys.length; f++) {\n        for (var fi = 0; fi < frameKeys[f].length; fi++) {\n          var name = changjing[i].people[j].title\n          var start = frameKeys[f][fi].start\n          var location = frameKeys[f][fi].location\n          var rotate = frameKeys[f][fi].rotate || '1, 1'\n          var opacity = frameKeys[f][fi].opacity || '100'\n          var expression = frameKeys[f][fi].expression\n          fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[name +\"人物\"]);\n          if (start && start !== changjing[i].people[j].start) {\n            fl.getDocumentDOM().getTimeline().convertToBlankKeyframes(start-1);\n          }\n          if (fi >= 1) {\n            fl.getDocumentDOM().getTimeline().setSelectedFrames(start-2, start-2);\n            fl.getDocumentDOM().getTimeline().createMotionTween();\n          }\n          fl.getDocumentDOM().getTimeline().setSelectedFrames(start, start);\n          fl.getDocumentDOM().library.selectItem(name + '动作/' + name + '正面站姿');\n          fl.getDocumentDOM().library.addItemToDocument({x: location[0], y: location[1]});\n          // 修改元件名\n          var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n          fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[start].elements[0]]\n          fl.getDocumentDOM().scaleSelection(+rotate.split(',')[0], +rotate.split(',')[1])\n          fl.getDocumentDOM().setInstanceAlpha(+opacity)\n          var name = fl.getDocumentDOM().selection[0].libraryItem.name\n          fl.getDocumentDOM().library.duplicateItem(name)\n          var nameArr = name.split(' 复制')\n          var newName = ''\n          if (name.indexOf(' 复制') == -1) {\n              newName = name+' 复制'\n          } else {\n              newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n          }\n          fl.getDocumentDOM().swapElement(newName)\n          fl.getDocumentDOM().library.selectItem(newName);\n          fl.getDocumentDOM().library.moveToFolder('待删除');\n          fl.getDocumentDOM().library.renameItem(name+Math.random().toFixed(4))\n          // 换表情\n          if (expression) {\n            fl.getDocumentDOM().enterEditMode('inPlace');\n            var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n            var peoplelayersDict = {}\n            for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n              peoplelayersDict[peopleLayers[i1].name] = i1\n            }\n            fl.getDocumentDOM().getTimeline().setSelectedLayers(peoplelayersDict['xz头']);\n            fl.getDocumentDOM().getTimeline().clearKeyframes(1,10);\n            fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[1].elements[0].firstFrame = expression-1\n            fl.getDocumentDOM().selectNone();\n            fl.getDocumentDOM().exitEditMode();\n          }\n        }\n      }\n      // 添加帧(普通)\n      var frameKeys = changjing[i].people[j].ordinaryFrameKeys\n      for (var fi = 0; fi < frameKeys.length; fi++) {\n          var name = changjing[i].people[j].title\n          var start = frameKeys[fi].start\n          var location = frameKeys[fi].location\n          var rotate = frameKeys[fi].rotate || '1, 1'\n          var opacity = frameKeys[fi].opacity || '100'\n          var expression = frameKeys[fi].expression\n          fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[name +\"人物\"]);\n          if (start && start !== changjing[i].people[j].start) {\n            fl.getDocumentDOM().getTimeline().convertToKeyframes(start-1);\n          }\n          fl.getDocumentDOM().getTimeline().setSelectedFrames(start-1, start-1);\n          fl.getDocumentDOM().swapElement(name + '动作/' + name + '正面站姿')\n          // 修改元件名\n          var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n          fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[start].elements[0]]\n          fl.getDocumentDOM().scaleSelection(+rotate.split(',')[0], +rotate.split(',')[1])\n          fl.getDocumentDOM().setInstanceAlpha(+opacity)\n          var name = fl.getDocumentDOM().selection[0].libraryItem.name\n          fl.getDocumentDOM().library.duplicateItem(name)\n          var nameArr = name.split(' 复制')\n          var newName = ''\n          if (name.indexOf(' 复制') == -1) {\n              newName = name+' 复制'\n          } else {\n              newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n          }\n          fl.getDocumentDOM().swapElement(newName)\n          fl.getDocumentDOM().library.selectItem(newName);\n          fl.getDocumentDOM().library.moveToFolder('待删除');\n          fl.getDocumentDOM().library.renameItem(name+Math.random().toFixed(4))\n          // 换表情\n          if (expression) {\n            fl.getDocumentDOM().enterEditMode('inPlace');\n            var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n            var peoplelayersDict = {}\n            for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n              peoplelayersDict[peopleLayers[i1].name] = i1\n            }\n            fl.getDocumentDOM().getTimeline().setSelectedLayers(peoplelayersDict['xz头']);\n            fl.getDocumentDOM().getTimeline().clearKeyframes(1,10);\n            fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[1].elements[0].firstFrame = expression-1\n            fl.getDocumentDOM().selectNone();\n            fl.getDocumentDOM().exitEditMode();\n          }\n        }\n      // 说话帧\n      var frameKeys = changjing[i].people[j].sayKeys\n      for (var fi = 0; fi < frameKeys.length; fi++) {\n          var start = frameKeys[fi].start\n          var end = frameKeys[fi].end\n          var name = changjing[i].people[j].title\n          fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[name +\"人物\"]);\n          if (start && start !== changjing[i].people[j].start) {\n            fl.getDocumentDOM().getTimeline().convertToKeyframes(start-1);\n          }\n          if (end && end !== changjing[i].people[j].end) {\n            fl.getDocumentDOM().getTimeline().convertToKeyframes(end-1);\n            fl.getDocumentDOM().getTimeline().setSelectedFrames(end, end);\n            // 修改元件名\n            var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n            fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[end].elements[0]]\n            var name1 = fl.getDocumentDOM().selection[0].libraryItem.name\n            fl.getDocumentDOM().library.duplicateItem(name1)\n            var nameArr = name1.split(' 复制')\n            var newName = ''\n            if (name1.indexOf(' 复制') == -1) {\n                newName = name1+' 复制'\n            } else {\n                newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n            }\n            fl.getDocumentDOM().swapElement(newName)\n            fl.getDocumentDOM().library.selectItem(newName);\n            fl.getDocumentDOM().library.moveToFolder('待删除');\n            fl.getDocumentDOM().library.renameItem(name1+Math.random().toFixed(4))\n          }\n          fl.getDocumentDOM().getTimeline().setSelectedFrames(start, start);\n          // 修改元件名\n          var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n          fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[start].elements[0]]\n          var name1 = fl.getDocumentDOM().selection[0].libraryItem.name\n          fl.getDocumentDOM().library.duplicateItem(name1)\n          var nameArr = name1.split(' 复制')\n          var newName = ''\n          if (name1.indexOf(' 复制') == -1) {\n              newName = name1+' 复制'\n          } else {\n              newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n          }\n          fl.getDocumentDOM().swapElement(newName)\n          fl.getDocumentDOM().library.selectItem(newName);\n          fl.getDocumentDOM().library.moveToFolder('待删除');\n          fl.getDocumentDOM().library.renameItem(name1+Math.random().toFixed(4))\n          // 说话\n          fl.getDocumentDOM().enterEditMode('inPlace');\n          var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n          var peoplelayersDict = {}\n          for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n            peoplelayersDict[peopleLayers[i1].name] = i1\n          }\n          fl.getDocumentDOM().getTimeline().setSelectedLayers(peoplelayersDict['xz头']);\n          fl.getDocumentDOM().getTimeline().clearKeyframes(5);\n          fl.getDocumentDOM().getTimeline().convertToKeyframes(5);\n          var firstFrame = fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[0].elements[0].firstFrame\n          fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[5].elements[0].firstFrame = firstFrame+1\n          fl.getDocumentDOM().getTimeline().setSelectedFrames(5+1,5+1);\n          fl.getDocumentDOM().moveSelectionBy({x:0, y:-7.5});\n          fl.getDocumentDOM().selectNone();\n          fl.getDocumentDOM().exitEditMode();\n      }\n      // 说话间添加帧(普通)\n      var frameKeys = changjing[i].people[j].sayOrdinaryFrameKeys\n      for (var fi = 0; fi < frameKeys.length; fi++) {\n          var name = changjing[i].people[j].title\n          var start = frameKeys[fi].start\n          var location = frameKeys[fi].location\n          var rotate = frameKeys[fi].rotate || '1, 1'\n          var opacity = frameKeys[fi].opacity || '100'\n          var expression = frameKeys[fi].expression\n          \n          fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[name +\"人物\"]);\n          if (start && start !== changjing[i].people[j].start) {\n            fl.getDocumentDOM().getTimeline().convertToKeyframes(start-1);\n          }\n          fl.getDocumentDOM().getTimeline().setSelectedFrames(start-1, start-1);\n          // 修改元件名\n          var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n          fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[start].elements[0]]\n          fl.getDocumentDOM().scaleSelection(+rotate.split(',')[0], +rotate.split(',')[1])\n          fl.getDocumentDOM().setInstanceAlpha(+opacity)\n          var name = fl.getDocumentDOM().selection[0].libraryItem.name\n          fl.getDocumentDOM().library.duplicateItem(name)\n          var nameArr = name.split(' 复制')\n          var newName = ''\n          if (name.indexOf(' 复制') == -1) {\n              newName = name+' 复制'\n          } else {\n              newName  = nameArr[0] + ' 复制 ' + (nameArr[1] ? (+nameArr[1] + 1) : 2)\n          }\n          fl.getDocumentDOM().swapElement(newName)\n          fl.getDocumentDOM().library.selectItem(newName);\n          fl.getDocumentDOM().library.moveToFolder('待删除');\n          fl.getDocumentDOM().library.renameItem(name+Math.random().toFixed(4))\n          // 换表情\n          if (expression) {\n            fl.getDocumentDOM().enterEditMode('inPlace');\n            var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n            var peoplelayersDict = {}\n            for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n              peoplelayersDict[peopleLayers[i1].name] = i1\n            }\n            fl.getDocumentDOM().getTimeline().setSelectedLayers(peoplelayersDict['xz头']);\n            fl.getDocumentDOM().getTimeline().clearKeyframes(1,10);\n            fl.getDocumentDOM().getTimeline().convertToKeyframes(5);\n            fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[1].elements[0].firstFrame = expression-1\n            fl.getDocumentDOM().getTimeline().layers[peoplelayersDict['xz头']].frames[5].elements[0].firstFrame = expression\n            fl.getDocumentDOM().selectNone();\n            fl.getDocumentDOM().exitEditMode();\n          }\n        }\n    }\n    // 添加场景特效\n    fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict['场景特效']);\n    for (var c = 0; c < changjing[i].effects.length; c++) {\n      var name = changjing[i].effects[c].title\n      var location = changjing[i].effects[c].location\n      fl.getDocumentDOM().getTimeline().setSelectedFrames(changjing[i].start-1, changjing[i].start-1);\n      fl.getDocumentDOM().library.selectItem('场景特效/' + name);\n      fl.getDocumentDOM().library.addItemToDocument({x: effectsLocationDict[location][2], y: effectsLocationDict[location][3]});\n      var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n      var curBg = fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[changjing[i].start-1].elements[c];\n      fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[currentLayer].frames[changjing[i].start-1].elements[c]]\n      fl.getDocumentDOM().scaleSelection(effectsLocationDict[location][0]/curBg.width, effectsLocationDict[location][1]/curBg.height);\n    }\n  }\n")}},watch:{customAudioTextTimes:function(e,t){var n=M.a.uniq(M.a.compact(M.a.map(e,function(e){return"旁白"===e.title?"无配音":e.title}))),r=M.a.map(n,function(e){return{value:e,label:e}});this.peopleDictListOptions=this.peopleOptions.map(function(e){return{value:e.value,label:e.value,children:r}})}}},pe=ue,le=(n("a3bc"),Object(C["a"])(pe,$,Q,!1,null,null,null)),de=le.exports,fe=[{commonId:10000001,speakerName:"天明",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646709599103_2c0069a4cbedef10968bc0a1477f9b65.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"新闻播报、专题宣传",speakerField:"新闻播报、专题宣传、有声阅读、旁白介绍、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|最热|普通话|自然流畅|旁白介绍|专题宣传|游戏/影视解说|新闻播报|有声阅读|中年|亲切温和|",label:'[{"text": "最热","rgb": "#ff0000"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000096,speakerName:"子悠",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1683789705409_e99ea352cf4408df59d058d342ea6b84.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、亲切温和",speakerSpecialty:"短视频、旁白介绍",speakerField:"新闻播报、广播通知、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|旁白介绍|广播通知|新闻播报|温柔甜美|最新|教育培训|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000087,speakerName:"聆飞瀚(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905428074_7cd2ccfce46ad53bfeb0e78e706a8770.jpg",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"新闻播报、专题宣传",speakerField:"新闻播报、专题宣传、旁白介绍",speakerDesc:"我是飞瀚，声音稳重磁性、大气浑厚，擅长新闻播报、专题宣传",priceDesc:"",commonCode:null,type:null,tag:"|青年|最热|普通话|旁白介绍|专题宣传|新闻播报|大气浑厚|稳重磁性|",label:'[{"text": "热门","rgb": "#ff0010"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000048,speakerName:"小璇",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646730648647_8f113bf9e9acf35e7d4a1d2db463c388.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、年轻时尚",speakerSpecialty:"游戏/影视解说、教育培训、有声阅读、情感文章、旁白介绍、客服彩铃",speakerField:"短视频、有声阅读、情感文章、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|情感文章|游戏/影视解说|温柔甜美|短视频|有声阅读|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000070,speakerName:"关山",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1655690485405_54cabb0ded6abb9ae9036c51fc9dec05.png",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"旁白介绍、有声阅读",speakerField:"有声阅读、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|旁白介绍|有声阅读|最新|大气浑厚|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000093,speakerName:"聆小珊",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1676874125643_cf3a1a096715b3b805a79d96fdab4ceb.png",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"新闻播报、教育培训",speakerField:"新闻播报、专题宣传、有声阅读、教育培训、旁白介绍",speakerDesc:"我是小珊，声音亲切温和、自然流畅，擅长新闻播报、教育培训",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|专题宣传|新闻播报|有声阅读|最新|教育培训|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000075,speakerName:"阿森",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1660273449838_b296969a27c5596e4ec3b6edf47f66c3.png",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"旁白介绍、影视解说",speakerField:"有声阅读、旁白介绍、游戏/影视解说",speakerDesc:"国内优秀解说员，声音亲切温和、年轻时尚，有着丰富的解说经验，对影视节目分析有自己独到的见解和演绎。",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|游戏/影视解说|有声阅读|最新|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000050,speakerName:"小鹏",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646718051947_0e541fe6a5cfc28c284c019ce5f0889f.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、自然流畅",speakerSpecialty:"短视频解说、有声阅读、专题宣传",speakerField:"专题宣传、有声阅读、游戏/影视解说",speakerDesc:"我的声音自然流畅、稳重磁性，擅长短视频解说、有声阅读、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|专题宣传|游戏/影视解说|有声阅读|稳重磁性|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000082,speakerName:"聆小璇",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905438891_331733d041569745fdf582217c001f84.jpg",speakerLanguage:"普通话",speakerStyle:"可爱甜美、自然流畅",speakerSpecialty:"有声阅读、旁白介绍",speakerField:"有声阅读、旁白介绍",speakerDesc:"我叫小璇，声音温柔甜美、自然流畅，擅长有声阅读、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|可爱甜美|有声阅读|最新|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000097,speakerName:"子轩(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1684477537579_7a80f987a72d70285d5905d43b524cb1.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"旁白介绍、有声阅读",speakerField:"有声阅读、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|有声阅读|最新|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000006,speakerName:"小露",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646717942391_e49ece76fedbe18b97a457db5464e704.jpg",speakerLanguage:"普通话",speakerStyle:"可爱甜美、自然流畅",speakerSpecialty:"旁白解说、教育培训、情感文章、客服彩铃",speakerField:"情感文章、教育培训、旁白介绍、客服彩铃",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|最热|客服彩铃|普通话|自然流畅|情感文章|旁白介绍|可爱甜美|教育培训|",label:'[{"text": "热门","rgb": "#ff0010"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000010,speakerName:"小钟",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646720432037_697ae3d679f37a349fcc80e541f7df7c.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、亲切温和、自然流畅",speakerSpecialty:"稳重磁性、亲切温和、自然流畅",speakerField:"新闻播报、专题宣传、广播通知、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|最热|普通话|自然流畅|旁白介绍|专题宣传|广播通知|新闻播报|教育培训|稳重磁性|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000002,speakerName:"超哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711380488_0d1377bf76b8ce694c85d37d1e137b87.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、饱满活泼",speakerSpecialty:"新闻播报、纪录片、广告、有声内容",speakerField:"新闻播报、专题宣传、广告促销、广播通知",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|最热|广告促销|普通话|自然流畅|专题宣传|广播通知|新闻播报|中年|饱满活泼|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000071,speakerName:"明泽(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1655690509429_ffdb9bdcf8da46f6a3775d88a486da3d.png",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"旁白介绍、有声阅读",speakerField:"有声阅读、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|有声阅读|最新|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000086,speakerName:"聆飞哲(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905403214_facc904ab74450c107db8021c08a228b.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"有声阅读、旁白介绍",speakerField:"新闻播报、有声阅读、旁白介绍、游戏/影视解说",speakerDesc:"我是飞哲，声音年轻时尚、自然流畅，擅长有声阅读、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|游戏/影视解说|新闻播报|有声阅读|最新|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null},{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000089,speakerName:"聆飞泓",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669971779537_9073aedcaa0720a0a5a63b02191346fe.jpg",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"新闻播报、专题宣传",speakerField:"新闻播报、专题宣传",speakerDesc:"我是飞泓，声音稳重磁性，大气浑厚，擅长新闻播报、专题宣传",priceDesc:"",commonCode:null,type:null,tag:"|普通话|专题宣传|新闻播报|最新|大气浑厚|稳重磁性|中年|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000003,speakerName:"野哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711563420_0c90bcae9c905c06aefb943a3436a1e5.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、诙谐幽默",speakerSpecialty:"稳重磁性、诙谐幽默",speakerField:"短视频、有声阅读、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|游戏/影视解说|短视频|有声阅读|老年|稳重磁性|诙谐幽默|",label:'[{"text": "最热","rgb": "#ff0000"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000081,speakerName:"聆小瑶",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905415004_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、亲切温和",speakerSpecialty:"短视频、旁白介绍",speakerField:"短视频、旁白介绍",speakerDesc:"我叫小瑶，我的声音温柔甜美、亲切温和，擅长短视频、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|旁白介绍|温柔甜美|短视频|最新|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null},{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000088,speakerName:"聆飞晨(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905473043_86a9547f3a24e8658c73182d43b1183e.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"广告促销、旁白介绍",speakerField:"广告促销、旁白介绍",speakerDesc:"我是飞晨，声音年轻时尚、自然流畅，擅长广告促销、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|自然流畅|旁白介绍|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000092,speakerName:"聆飞皓(1)",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1673493564475_14ceee8c4c97aade2a433c33dc27e857.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、年轻时尚",speakerSpecialty:"广告促销、广告通知",speakerField:"广告促销、广播通知",speakerDesc:"我是聆飞皓，声音稳重磁性、年轻时尚，擅长广告类播报",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|广播通知|最新|年轻时尚|稳重磁性|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000069,speakerName:"顾辉",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1651802850004_237c927a5ca90b59dfd1325ad505995b.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、自然流畅",speakerSpecialty:"新闻播报、专题宣传、教育培训、旁白介绍",speakerField:"新闻播报、专题宣传、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|专题宣传|新闻播报|最新|教育培训|稳重磁性|",label:'[{"text": "短视频","rgb": "#0000cd"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000085,speakerName:"聆小璎",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905450929_35bb981a9a8b78088456dcc97d3faaca.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、饱满活泼",speakerSpecialty:"旁白介绍、广告促销、情感文章",speakerField:"广告促销、情感文章、旁白介绍",speakerDesc:"我叫聆小璎，声音温柔甜美、饱满活泼，擅长旁白介绍、广告促销、情感文章，是一位知心大姐姐哦。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|情感文章|旁白介绍|温柔甜美|最新|饱满活泼|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000091,speakerName:"聆飞远",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1675321167818_647125d13bc5d45b513b14a9d57efda8.jpg",speakerLanguage:"普通话",speakerStyle:"年轻时尚、饱满活泼",speakerSpecialty:"旁白介绍、游戏解说",speakerField:"旁白介绍、游戏/影视解说",speakerDesc:"我是聆飞远，声音饱满活泼、年轻时尚，擅长播报游戏解说、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|旁白介绍|游戏/影视解说|最新|年轻时尚|饱满活泼|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000004,speakerName:"皓宇",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711646054_7b3e01f23010fc57ba8816baae0978bb.png",speakerLanguage:"普通话",speakerStyle:"年轻时尚、饱满活泼",speakerSpecialty:"年轻时尚、饱满活泼",speakerField:"短视频、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|游戏/影视解说|短视频|最新|年轻时尚|饱满活泼|",label:'[{"text": "短视频","rgb": "#0000cd"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000084,speakerName:"聆小璐",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905462006_2506859c0192e7199ecd1250d7d27b5c.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、自然流畅",speakerSpecialty:"旁边介绍、教育培训、客服彩铃",speakerField:"教育培训、旁白介绍、客服彩铃",speakerDesc:"我是小璐，声音温柔甜美、自然流畅，擅长旁边介绍、教育培训、客服彩铃",priceDesc:"",commonCode:null,type:null,tag:"|青年|客服彩铃|普通话|自然流畅|旁白介绍|温柔甜美|最新|教育培训|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000012,speakerName:"小俊",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721281265_428bbc5cdc2bf582f988d398e254959d.jpg",speakerLanguage:"普通话",speakerStyle:"激情力度、年轻时尚",speakerSpecialty:"激情力度、年轻时尚",speakerField:"广告促销",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|激情力度|广告促销|普通话|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000005,speakerName:"小果",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646717470635_0c9f665e0ede3beaa206a222a2e407ad.jpg",speakerLanguage:"普通话",speakerStyle:"成熟知性、自然流畅",speakerSpecialty:"新闻播报、公众号、课件讲解",speakerField:"新闻播报、专题宣传、教育培训",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|最热|普通话|自然流畅|专题宣传|新闻播报|成熟知性|教育培训|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000066,speakerName:"希涵",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1647223228659_652e417b6186bf94cd2b0c4e24b272c5.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、饱满活泼",speakerSpecialty:"影视解说、游戏解说、旁白科普",speakerField:"短视频、旁白介绍、游戏/影视解说、飞碟说",speakerDesc:"我是希涵，我的声音青春活泼、自然动听，适合影视解说、游戏解说、旁白科普、飞碟说。",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|游戏/影视解说|短视频|飞碟说|饱满活泼|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000041,speakerName:"水哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1662015464888_a7116a601f7bd7e06743ee3bc19c3282.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、自然流畅",speakerSpecialty:"短视频、游戏/影视解说、有声阅读",speakerField:"短视频、有声阅读、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|自然流畅|游戏/影视解说|短视频|有声阅读|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000083,speakerName:"聆小琬",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1669905389784_dd33de2cad55ced641f946a8d477c6f3.jpg",speakerLanguage:"普通话",speakerStyle:"可爱甜美、年轻时尚",speakerSpecialty:"短视频、旁白介绍",speakerField:"短视频、有声阅读、旁白介绍",speakerDesc:"我是小琬，声音可爱甜美、自然流畅，擅长短视频、旁白介绍",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|旁白介绍|可爱甜美|短视频|有声阅读|最新|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:580013743,name:"温柔女声",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000051,speakerName:"小媛",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646718626707_7ea3040030b3b642640e5637d74469f2.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"中文&英语",speakerField:"新闻播报、专题宣传、有声阅读、旁白介绍",speakerDesc:"我的声音成熟知性，您的课件或者有声文章，都可以交给我。",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|专题宣传|新闻播报|有声阅读|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000067,speakerName:"嘉欣",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1651303134366_41ab46b4c8a15bff054a737fd07491dd.jpg",speakerLanguage:"普通话",speakerStyle:"激情力度、饱满活泼",speakerSpecialty:"直播带货、产品促销、旁白介绍、游戏/影视解说等",speakerField:"短视频、旁白介绍、游戏/影视解说、飞碟说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|激情力度|普通话|旁白介绍|游戏/影视解说|短视频|最新|飞碟说|饱满活泼|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000032,speakerName:"小娟",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646731704817_ff1e1392047fba4e15d5ce51125733bc.jpeg",speakerLanguage:"普通话",speakerStyle:"成熟知性、亲切温和",speakerSpecialty:"新闻播报、有声文章",speakerField:"有声阅读、情感文章、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|情感文章|旁白介绍|有声阅读|最新|成熟知性|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000008,speakerName:"飞碟哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646719126631_08ee2698685b040d6f910e9ea272cf80.jpg",speakerLanguage:"普通话",speakerStyle:"年轻时尚、诙谐幽默",speakerSpecialty:"诙谐幽默、饱满活泼",speakerField:"游戏/影视解说、飞碟说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|最热|普通话|游戏/影视解说|年轻时尚|飞碟说|诙谐幽默|",label:'[{"text": "热门","rgb": "#ff0010"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000094,speakerName:"诺诺",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1678414910106_5c31b5116bec2ca62de828ce8c940da5.png",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"有声阅读、情感文章",speakerField:"有声阅读、情感文章、教育培训",speakerDesc:"我是诺诺，声音亲切温和、自然流畅，擅长有声阅读、情感文章",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|情感文章|有声阅读|最新|教育培训|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000039,speakerName:"小晚",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646728088360_8ba7a8fc364d423f56629b986e9bc67a.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅、轻声耳语",speakerSpecialty:"短视频、有声阅读、情感文章",speakerField:"短视频、有声阅读、情感文章",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|自然流畅|情感文章|轻声耳语|短视频|有声阅读|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000073,speakerName:"大圣",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1659600407184_2b28db2946f96a63a331a9cd3cf58c85.jpg",speakerLanguage:"普通话",speakerStyle:"饱满活泼、诙谐幽默",speakerSpecialty:"短视频配音、有声阅读",speakerField:"短视频、有声阅读、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|游戏/影视解说|短视频|有声阅读|最新|诙谐幽默|中年|饱满活泼|",label:'[{"text": "游戏","rgb": "#ffa500"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000009,speakerName:"一菲",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646719515453_c21c524605b11f95154068c3da328266.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、自然流畅",speakerSpecialty:"自然流畅、温柔甜美",speakerField:"",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|最热|普通话|自然流畅|温柔甜美|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000007,speakerName:"管哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646718342906_3f73d68506cdaa3d39fe294c053217dc.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、自然流畅",speakerSpecialty:"稳重磁性、自然流畅",speakerField:"专题宣传、有声阅读、情感文章、广播通知、旁白介绍、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|最热|普通话|自然流畅|情感文章|旁白介绍|专题宣传|广播通知|游戏/影视解说|有声阅读|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000036,speakerName:"千雪",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646727203889_dfe514e0f43bc0ed262383cea80466ac.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"旁白解说、教育培训、有声阅读",speakerField:"有声阅读、教育培训、旁白介绍、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|自然流畅|旁白介绍|游戏/影视解说|有声阅读|教育培训|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000052,speakerName:"小英",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646719162970_9dcea6ef5a6c20add7e8749f6caf1bfb.jpg",speakerLanguage:"普通话",speakerStyle:"成熟知性、亲切温和",speakerSpecialty:"课件、新闻、有声文章",speakerField:"新闻播报、有声阅读、教育培训",speakerDesc:"我的声音成熟知性，温和抒情，擅长播报交互配音、新闻专题、解说旁白等。  代表作品",priceDesc:"",commonCode:null,type:null,tag:"|普通话|新闻播报|有声阅读|成熟知性|教育培训|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000047,speakerName:"一峰",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646730417298_66443b3ea57412a8c92130fc67b6847d.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、自然流畅",speakerSpecialty:"新闻播报、广播通知、专题宣传、教育培训、旁白介绍",speakerField:"新闻播报、专题宣传、广播通知、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|自然流畅|旁白介绍|专题宣传|广播通知|新闻播报|最新|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:582106500,name:"新闻资讯",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000053,speakerName:"小芳",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646719623212_d5f5f2bf6283866e14994ab9d8612272.jpg",speakerLanguage:"普通话",speakerStyle:"可爱甜美、自然流畅",speakerSpecialty:"儿童读物、课件",speakerField:"有声阅读、教育培训",speakerDesc:"我的声音可爱甜美又自然，最擅长给小朋友讲故事了，儿童读物，有声文章，课件配音都可以交给我。",priceDesc:"",commonCode:null,type:null,tag:"|普通话|自然流畅|少儿|可爱甜美|有声阅读|教育培训|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000033,speakerName:"七哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711810619_20fdc69e57ccbd058dc8a26ccf6226a0.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"短视频、旁白解说、课件播报",speakerField:"专题宣传、短视频、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|自然流畅|旁白介绍|专题宣传|短视频|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000023,speakerName:"小燕",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1652932233587_47fd6de91508946d04bab07464a6b8aa.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和",speakerSpecialty:"亲切温和",speakerField:"专题宣传、广告促销、客服彩铃",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|广告促销|客服彩铃|普通话|专题宣传|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000040,speakerName:"小雅",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646728316774_753b6321f4c18ed7366734cd32106c86.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和、自然流畅",speakerSpecialty:"情感文章、语音客服、有声阅读",speakerField:"短视频、有声阅读、情感文章、客服彩铃",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|客服彩铃|普通话|自然流畅|情感文章|短视频|有声阅读|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000068,speakerName:"豆豆",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1649645397291_9f51076ffcae292e98fa161a4238456f.jpg",speakerLanguage:"普通话",speakerStyle:"呆萌可爱、自然流畅",speakerSpecialty:"童声、介绍、阅读、短视频",speakerField:"短视频、有声阅读、教育培训、旁白介绍",speakerDesc:"我的声音奶声奶气萌萌哒，深受儿童读物，旁白介绍，有声文章，短视频用户们的喜爱，听了我的声音您一定会喜欢我哒。",priceDesc:"",commonCode:null,type:null,tag:"|最热|呆萌可爱|普通话|自然流畅|少儿|旁白介绍|短视频|有声阅读|教育培训|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000035,speakerName:"宣哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646726943402_4ec158e5c77e317a9e9ee39c08eb0eb9.jpg",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"专题宣传、教育培训、旁白",speakerField:"专题宣传、有声阅读、教育培训",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|专题宣传|有声阅读|大气浑厚|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[{id:527640013,name:"纪录片",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000077,speakerName:"成都宝儿",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1661217926402_d8e87ebf8f876f66f9eac9cdf0e7b47e.jpg",speakerLanguage:"方言",speakerStyle:"呆萌可爱、淳朴方言",speakerSpecialty:"成都方言",speakerField:"新闻播报、专题宣传、短视频、旁白介绍、游戏/影视解说",speakerDesc:"没得事，交给我，我弄死他们。我等下直接挖个坑把他埋了，只要露个头就不会死，放心吧！而且我观察了一下，这儿没得人来，只要按时喂他吃东西，就不会有事的。在别人面前尽管装，今后，姐罩着你。他们都说我瓜，其实我一点也不瓜，有的时候我还机智的一逼。",priceDesc:"",commonCode:null,type:null,tag:"|青年|呆萌可爱|淳朴方言|旁白介绍|专题宣传|游戏/影视解说|新闻播报|短视频|方言|最新|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000076,speakerName:"苏州苏小曦",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1661218773274_995882b996619ea85a44333150e7014e.jpg",speakerLanguage:"方言",speakerStyle:"年轻时尚、淳朴方言",speakerSpecialty:"旁白介绍、影视解说",speakerField:"新闻播报、专题宣传、旁白介绍、游戏/影视解说",speakerDesc:"我会说苏州方言，声音年轻时尚、擅长新闻播报、旁白介绍、专题宣传、游戏/影视解说。",priceDesc:"",commonCode:null,type:null,tag:"|青年|淳朴方言|旁白介绍|专题宣传|游戏/影视解说|新闻播报|方言|最新|年轻时尚|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000074,speakerName:"合肥子沁",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1660201073931_bb78d23c22cf54b4395541c1228a436b.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"合肥方言",speakerField:"新闻播报、专题宣传、旁白介绍、游戏/影视解说",speakerDesc:"我的声音温柔亲切、合肥方言，擅长新闻播报、旁白介绍、专题宣传、游戏/影视解说。",priceDesc:"",commonCode:null,type:null,tag:"|淳朴方言|旁白介绍|专题宣传|游戏/影视解说|新闻播报|方言|最新|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000072,speakerName:"上海阮灵",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1657866369906_bb77cc8fcccb7bd3bb646b602318afd4.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"上海方言",speakerField:"新闻播报、专题宣传、旁白介绍",speakerDesc:"我的声音温柔亲切、上海方言，擅长新闻播报、旁白介绍、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|淳朴方言|旁白介绍|专题宣传|新闻播报|方言|最新|亲切温和|",label:'[{"text": "最新","rgb": "#9acd32"}]',sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000055,speakerName:"宁宁",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646720758226_bfa253d28e62b511eb9da9179c8efff6.jpg",speakerLanguage:"普通话",speakerStyle:"呆萌可爱、自然流畅",speakerSpecialty:"童声、阅读、短视频",speakerField:"短视频、有声阅读、教育培训",speakerDesc:"我的声音可爱萌萌哒，深受儿童读物，有声文章，短视频用户们的喜爱，听了我的声音您一定会喜欢我哒。",priceDesc:"",commonCode:null,type:null,tag:"|呆萌可爱|普通话|自然流畅|少儿|短视频|有声阅读|教育培训|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000054,speakerName:"小洋",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646719996719_c62113de2d396f45bca5180c3e6f6e3a.jpg",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"专题、彩铃、广告促销",speakerField:"专题宣传、广告促销、客服彩铃",speakerDesc:"我的声音大气浑厚，稳重又有磁性，擅长播报专题、彩铃、广告配音。",priceDesc:"",commonCode:null,type:null,tag:"|广告促销|客服彩铃|普通话|专题宣传|大气浑厚|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000049,speakerName:"小师",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711686978_168783bfc0c2e39898adaa3c438f226d.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、自然流畅",speakerSpecialty:"短视频、客服彩铃",speakerField:"短视频、客服彩铃",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|客服彩铃|普通话|自然流畅|温柔甜美|短视频|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000044,speakerName:"天哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646729561001_88b6b7c85c2bb964f376ae57b15e5ba6.jpg",speakerLanguage:"普通话",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"有声阅读、情感文章、游戏/影视解说",speakerField:"有声阅读、情感文章、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|情感文章|游戏/影视解说|有声阅读|大气浑厚|稳重磁性|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000038,speakerName:"刚哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646727710791_c121c7c1a0d1f0db93317c7abfee4f6a.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、亲切温和",speakerSpecialty:"专题宣传、纪录片、有声内容",speakerField:"有声阅读、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|旁白介绍|有声阅读|教育培训|稳重磁性|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000037,speakerName:"百合仙子",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646727479216_1975795c0493505dec4d059f98d5826b.jpg",speakerLanguage:"普通话",speakerStyle:"成熟知性、亲切温和",speakerSpecialty:"课件、新闻、有声文章",speakerField:"专题宣传、有声阅读、情感文章、教育培训、旁白介绍、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|情感文章|旁白介绍|专题宣传|游戏/影视解说|有声阅读|成熟知性|教育培训|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000028,speakerName:"辉叔",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646725915259_d30dd853be73ee1be7e544ffd2243816.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性",speakerSpecialty:"专题、纪录片",speakerField:"专题宣传、有声阅读、旁白介绍",speakerDesc:"我的声音大气浑厚，稳重有磁性，擅长播报专题宣传、有声文章、纪录片。",priceDesc:"",commonCode:null,type:null,tag:"|普通话|旁白介绍|专题宣传|有声阅读|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000034,speakerName:"楠楠",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646725642845_c407051d0351b891773201d4c531b928.jpg",speakerLanguage:"普通话",speakerStyle:"呆萌可爱、自然流畅",speakerSpecialty:"童声、阅读",speakerField:"短视频、有声阅读、教育培训、旁白介绍、客服彩铃",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|呆萌可爱|客服彩铃|普通话|自然流畅|少儿|旁白介绍|短视频|有声阅读|教育培训|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000027,speakerName:"老马",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646725618170_6b4bb63abe0568933adb7f247767af68.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、亲切温和",speakerSpecialty:"专题、纪录片",speakerField:"专题宣传、有声阅读、情感文章、旁白介绍",speakerDesc:"我的声音讲述温和，适合讲述有声故事。",priceDesc:"",commonCode:null,type:null,tag:"|普通话|情感文章|旁白介绍|专题宣传|有声阅读|老年|稳重磁性|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000026,speakerName:"小华",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646725316525_7a7cbbf907f61e09c0029f29972ffddd.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性",speakerSpecialty:"广告、专题、课件",speakerField:"专题宣传、广告促销、有声阅读",speakerDesc:"我的声音活泼激情，擅长播报促销、课件类文本。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|专题宣传|有声阅读|稳重磁性|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000025,speakerName:"小宇",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646724991959_802462f6bf26597f8568b6e060e9dfc7.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性",speakerSpecialty:"广告、专题、课件",speakerField:"专题宣传、广告促销、有声阅读、教育培训",speakerDesc:"我的声音稳重磁性，广告促销、专题、课件我都擅长。",priceDesc:"",commonCode:null,type:null,tag:"|广告促销|普通话|专题宣传|有声阅读|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000024,speakerName:"瑶瑶",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723737383_ae6ecf8f826177fe5d69a98b2caac12c.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、年轻时尚",speakerSpecialty:"温柔甜美、年轻时尚",speakerField:"专题宣传、广告促销、有声阅读",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|专题宣传|温柔甜美|有声阅读|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000022,speakerName:"小峰",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723340259_2abe7ac826c29ee416b924c2bbd4b09b.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性",speakerSpecialty:"新闻、课件",speakerField:"新闻播报、教育培训",speakerDesc:"我的声音稳重有磁性，广告和专题配音都可以找我。",priceDesc:"",commonCode:null,type:null,tag:"|普通话|新闻播报|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000021,speakerName:"Steve",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723126755_81b8a1b77068d06e1c8190825253066f.jpg",speakerLanguage:"英语",speakerStyle:"稳重磁性",speakerSpecialty:"稳重磁性",speakerField:"教育培训",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|英语|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000020,speakerName:"玲姐姐",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722945715_b2227386eabe56a26cb2f4d7df431a6a.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、明星模仿",speakerSpecialty:"温柔甜美、明星模仿",speakerField:"短视频",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|温柔甜美|短视频|明星模仿|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000019,speakerName:"韦香主",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722604054_93820c9fa21fca0d21bdb56480cb6fc2.jpg",speakerLanguage:"普通话",speakerStyle:"稳重磁性、亲切温和",speakerSpecialty:"稳重磁性、亲切温和",speakerField:"专题宣传、广告促销、有声阅读",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|广告促销|普通话|专题宣传|有声阅读|稳重磁性|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000018,speakerName:"程程",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722335247_3d978de1acd55ce9f8b3cba4c2021536.jpg",speakerLanguage:"普通话",speakerStyle:"激情力度、年轻时尚",speakerSpecialty:"激情力度、年轻时尚",speakerField:"广告促销",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|激情力度|广告促销|普通话|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000017,speakerName:"小南",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646711547535_340c7e1bd39ba4e7bbf566c4b1159bbc.jpg",speakerLanguage:"普通话",speakerStyle:"亲切温和",speakerSpecialty:"亲切温和",speakerField:"新闻播报、情感文章",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|普通话|情感文章|新闻播报|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000016,speakerName:"小桃丸",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722124338_ea2772ac7aca0e0612bcf06edf46ed3d.jpg",speakerLanguage:"童声",speakerStyle:"可爱甜美、明星模仿",speakerSpecialty:"可爱甜美、明星模仿",speakerField:"有声阅读、游戏/影视解说",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|童声|少儿|可爱甜美|游戏/影视解说|有声阅读|明星模仿|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000015,speakerName:"萌小新",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721909112_c286577376cd6da506476586de3c1aa0.jpg",speakerLanguage:"普通话",speakerStyle:"呆萌可爱、明星模仿",speakerSpecialty:"呆萌可爱、明星模仿",speakerField:"短视频、有声阅读",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|呆萌可爱|普通话|少儿|短视频|有声阅读|明星模仿|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000014,speakerName:"小光",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721686703_019383258eb94fa3883a1600cfd4f2f9.jpg",speakerLanguage:"普通话",speakerStyle:"自然流畅、年轻时尚",speakerSpecialty:"年轻时尚、自然流畅",speakerField:"专题宣传、广告促销、有声阅读、教育培训",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|自然流畅|专题宣传|有声阅读|教育培训|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000013,speakerName:"小薛",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721485993_39c712fe9a4cabd48d76a9b07fe6203a.jpg",speakerLanguage:"普通话",speakerStyle:"年轻时尚、饱满活泼",speakerSpecialty:"年轻时尚、饱满活泼",speakerField:"广告促销、有声阅读",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|有声阅读|年轻时尚|饱满活泼|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000011,speakerName:"宝哥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721077473_86adccba0dc48bd56e9104cbc6f717da.jpg",speakerLanguage:"普通话",speakerStyle:"明星模仿、诙谐幽默",speakerSpecialty:"诙谐幽默、明显模仿",speakerField:"短视频",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|普通话|短视频|诙谐幽默|中年|明星模仿|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000042,speakerName:"Lindsay",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646728943969_36d5589ee90c25a94d90ffed48a1d4cf.jpg",speakerLanguage:"英语",speakerStyle:"温柔甜美、亲切温和",speakerSpecialty:"语音播报、课件、新闻",speakerField:"新闻播报、教育培训",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|新闻播报|温柔甜美|英语|最新|教育培训|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000046,speakerName:"John",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646730146605_61409aa1fd47d4a5332de23cbf59a36f.jpg",speakerLanguage:"英语",speakerStyle:"大气浑厚、稳重磁性",speakerSpecialty:"(英文语种)课件、阅读",speakerField:"新闻播报、专题宣传、有声阅读、广播通知、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|旁白介绍|专题宣传|广播通知|新闻播报|有声阅读|英语|大气浑厚|教育培训|稳重磁性|中年|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000045,speakerName:"Catherine",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646729856216_f5c3ac4cbf092a063786243913a4c139.jpg",speakerLanguage:"英语",speakerStyle:"成熟知性、亲切温和",speakerSpecialty:"（英文语种）英文课件、阅读",speakerField:"新闻播报、专题宣传、有声阅读、广播通知、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|旁白介绍|专题宣传|广播通知|新闻播报|有声阅读|英语|成熟知性|教育培训|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000064,speakerName:"内蒙小包",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646724304396_5481e1dedf8f0dbcc67fac90f2fc759e.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"内蒙古方言",speakerField:"新闻播报、专题宣传、短视频、广播通知、旁白介绍",speakerDesc:"我的声音亲切温和、淳朴内蒙古方言，擅长新闻播报、广告促销、短视频、广播通知、旁白介绍、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|淳朴方言|旁白介绍|专题宣传|广播通知|新闻播报|短视频|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000063,speakerName:"合肥小肥",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723914438_9aa3e6d73ddb7793176273b632fae930.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"合肥方言",speakerField:"新闻播报、专题宣传、广告促销、短视频、旁白介绍",speakerDesc:"我的声音亲切温和、淳朴合肥方言，擅长新闻播报、广告促销、短视频、广播通知、旁白介绍、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|旁白介绍|专题宣传|新闻播报|短视频|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000062,speakerName:"湖北小王",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723580396_03aaf53a4ef42313d05b5c1d3dc8e239.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"湖北方言",speakerField:"新闻播报、专题宣传、广告促销、短视频、广播通知、旁白介绍",speakerDesc:"我的声音亲切温和、淳朴湖北方言，擅长新闻播报、广告促销、短视频、广播通知、旁白介绍、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|旁白介绍|专题宣传|广播通知|新闻播报|短视频|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000056,speakerName:"粤语小月",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721208676_e355a0775f8af6c872110c9b53e9d488.jpg",speakerLanguage:"方言",speakerStyle:"成熟知性、自然流畅、淳朴方言",speakerSpecialty:"粤语（促销、专题）",speakerField:"专题宣传、广告促销",speakerDesc:"大家好，我的声音亲切知性，最擅长播报粤语。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|自然流畅|专题宣传|方言|成熟知性|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000061,speakerName:"山东小东",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646723208988_65b9a6e40854a17c846027a821ffaa75.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"山东方言",speakerField:"新闻播报、专题宣传、广告促销、短视频、广播通知、旁白介绍",speakerDesc:"我的声音亲切温和、淳朴山东方言，擅长新闻播报、广告促销、短视频、广播通知、旁白介绍、专题宣传。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|旁白介绍|专题宣传|广播通知|新闻播报|短视频|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000060,speakerName:"东北晓倩",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722756045_42dcb82b980e73dae0bde6812ac85a9a.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"东北方言",speakerField:"新闻播报、有声阅读、旁白介绍",speakerDesc:"大家好，我的声音成熟知性，自然亲切，最擅长播报东北方言。",priceDesc:"",commonCode:null,type:null,tag:"|淳朴方言|旁白介绍|新闻播报|有声阅读|方言|中年|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000059,speakerName:"小唐",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722301187_439e5283cf5277204d7068629e076ac2.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"湖南方言",speakerField:"新闻播报、广告促销、广播通知、客服彩铃",speakerDesc:"大家好，我的声音亲切自然，最擅长播报湖南方言。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|客服彩铃|淳朴方言|广播通知|新闻播报|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000058,speakerName:"河南小坤",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646722047293_16416bd520c3c4410ba24559945e03f1.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"河南方言",speakerField:"新闻播报、专题宣传、广告促销、广播通知",speakerDesc:"大家好，我的声音自然亲切，擅长播报河南配音。",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|专题宣传|广播通知|新闻播报|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000057,speakerName:"四川小蓉",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646721656482_9a3d2d06a2e8d3748ebe345bf1d76b93.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"四川方言",speakerField:"短视频、有声阅读",speakerDesc:"我的声音亲切自然，四川方言配音，交给我。",priceDesc:"",commonCode:null,type:null,tag:"|青年|淳朴方言|短视频|有声阅读|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000031,speakerName:"陕西小莹",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646731448291_ed1bd19beba83aef3b42bdaa1c5d550a.jpg",speakerLanguage:"方言",speakerStyle:"亲切温和、淳朴方言",speakerSpecialty:"陕西方言",speakerField:"专题宣传、广告促销、短视频、广播通知、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|旁白介绍|专题宣传|广播通知|短视频|方言|亲切温和|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000030,speakerName:"台湾玉儿",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646731213296_e9c8553b32e804a9c1dc442d162b3f75.jpg",speakerLanguage:"方言",speakerStyle:"温柔甜美、淳朴方言",speakerSpecialty:"台湾方言",speakerField:"专题宣传、广告促销、短视频、广播通知、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|淳朴方言|旁白介绍|专题宣传|广播通知|温柔甜美|短视频|方言|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000029,speakerName:"广东小梅",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1646730936274_dfb8de21906d3cdff3ef955688e5648d.jpg",speakerLanguage:"方言",speakerStyle:"年轻时尚、淳朴方言",speakerSpecialty:"粤语（促销、专题）",speakerField:"专题宣传、广告促销、短视频、广播通知、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|广告促销|淳朴方言|旁白介绍|专题宣传|广播通知|短视频|方言|年轻时尚|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10000095,speakerName:"聆小瑧",speakerGender:2,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1681376740109_f5a555f17296325662148e9117d30c2e.jpg",speakerLanguage:"普通话",speakerStyle:"温柔甜美、自然流畅",speakerSpecialty:"旁白介绍、广告促销",speakerField:"广告促销、教育培训、旁白介绍",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|青年|广告促销|普通话|自然流畅|旁白介绍|温柔甜美|最新|教育培训|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:0,styleNum:null,packages:[{id:546238602,name:"视频解说",description:null,tags:null,label:null}],isTrain:0,createdAt:null,updateAt:null,statusAt:null},{commonId:10001006,speakerName:"miya",speakerGender:1,imgUrl:"https://pygfile.peiyinge.com/manageweb/speaker/1685010859636_35bb981a9a8b78088456dcc97d3faaca.jpg",speakerLanguage:"韩语",speakerStyle:"",speakerSpecialty:"多语种",speakerField:"",speakerDesc:"",priceDesc:"",commonCode:null,type:null,tag:"|韩语|",label:"",sortNo:null,speakerLang:null,categoryId:null,vipType:1,styleNum:null,packages:[],isTrain:0,createdAt:null,updateAt:null,statusAt:null}],me={10003:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609229042220_27c1163f1cfe7a8327e69b23d2ebdf93.jpg",is_vip:1,speaker_name:"广东小梅-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"广东小梅",speaker_no:10003,common_id:10000029},15675:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502332414535_小宇.jpg",is_vip:1,speaker_name:"小宇-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小宇",speaker_no:15675,common_id:10000025},20051:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1595561364404_d973bc94f73f827459adfdea3c0371a3.jpg",is_vip:1,speaker_name:"超哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"超哥",speaker_no:20051,common_id:10000002},20052:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1595561444784_b07a2fec1d147c8a866ba61aa7cedca3.jpg",is_vip:1,speaker_name:"刚哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"刚哥",speaker_no:20052,common_id:10000038},20053:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1595561405762_a93e8a10c6fd377d58321c363f881d5e.jpg",is_vip:1,speaker_name:"七哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"七哥",speaker_no:20053,common_id:10000033},20055:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1595561424620_32f5f95ca31742557e1052af6d9b5539.jpg",is_vip:1,speaker_name:"小师-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小师",speaker_no:20055,common_id:10000049},20061:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1595561385355_26304636a9d957387a4b44ced433896b.jpg",is_vip:1,speaker_name:"飞碟哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"飞碟哥",speaker_no:20061,common_id:10000008},20062:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1597827284883_1a24f025b67034b08c0eea7fc87af80d.jpg",is_vip:1,speaker_name:"小雅-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小雅",speaker_no:20062,common_id:10000040},20065:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420504462_0c70e797d640ee18676f183e97d75984.jpg",is_vip:1,speaker_name:"小果-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小果",speaker_no:20065,common_id:10000005},20066:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1600667148354_36d5589ee90c25a94d90ffed48a1d4cf.jpg",is_vip:1,speaker_name:"Lindsay",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"Lindsay",speaker_no:20066,common_id:10000042},20067:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1601429421357_9b26d05f7734c3ba693b12dc81e304e6.jpg",is_vip:1,speaker_name:"宣哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"宣哥",speaker_no:20067,common_id:10000035},20068:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1602471538583_f728f732a8e07842fef034c9b9f46894.jpg",is_vip:1,speaker_name:"千雪-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"千雪",speaker_no:20068,common_id:10000036},20069:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1605692698544_8ba7a8fc364d423f56629b986e9bc67a.jpg",is_vip:1,speaker_name:"小晚-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小晚",speaker_no:20069,common_id:10000039},20070:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1606279580550_e49ece76fedbe18b97a457db5464e704.jpg",is_vip:1,speaker_name:"小露-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小露",speaker_no:20070,common_id:10000006},20071:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1662015420847_a7116a601f7bd7e06743ee3bc19c3282.jpg",is_vip:1,speaker_name:"水哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"水哥",speaker_no:20071,common_id:10000041},20072:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228420379_66443b3ea57412a8c92130fc67b6847d.jpg",is_vip:1,speaker_name:"一峰-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"一峰",speaker_no:20072,common_id:10000047},20073:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228246316_c21c524605b11f95154068c3da328266.jpg",is_vip:1,speaker_name:"一菲-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"一菲",speaker_no:20073,common_id:10000009},20074:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228769214_b076a9134c442d3107c49f5d6c7b8cb4.jpg",is_vip:1,speaker_name:"山东小东-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"山东小东",speaker_no:20074,common_id:10000061},20075:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228950331_da57206d583ec308a3cbce3ed0cd92bf.jpg",is_vip:1,speaker_name:"湖北小王-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"湖北小王",speaker_no:20075,common_id:10000062},20076:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228542283_e6b6c3ae21e051bca91f2f5fdfbb4a0a.jpg",is_vip:1,speaker_name:"合肥小肥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"合肥小肥",speaker_no:20076,common_id:10000063},20077:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609228660787_dd9f01ce86934a2b37f948f0857d3ece.jpg",is_vip:1,speaker_name:"内蒙小包-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"内蒙小包",speaker_no:20077,common_id:10000064},20078:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1612405127408_88b6b7c85c2bb964f376ae57b15e5ba6.jpg",is_vip:1,speaker_name:"天哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"天哥",speaker_no:20078,common_id:10000044},20079:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1612405422577_c9556430c8c50787264b425e1b1123f4.jpg",is_vip:1,speaker_name:"天明-默认",is_valid:1,emot_val:0,emot_type:1,emot_desc:"默认",common_name:"天明",speaker_no:20079,common_id:10000001},20081:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1612339337537_3f73d68506cdaa3d39fe294c053217dc.jpg",is_vip:1,speaker_name:"管哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"管哥",speaker_no:20081,common_id:10000007},20082:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1619143480521_76cd438bd0e8899a61aff632ace54dbb.jpg",is_vip:1,speaker_name:"小鹏-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小鹏",speaker_no:20082,common_id:10000050},60020:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502337984755_小燕.jpg",is_vip:1,speaker_name:"小燕-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小燕",speaker_no:60020,common_id:10000023},60025:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1621231253661_24d7afc1244aabe4d6b0d9ca9eb9161e.jpg",is_vip:1,speaker_name:"小璇-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小璇",speaker_no:60025,common_id:10000048},60026:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1621242534641_ff1e1392047fba4e15d5ce51125733bc.jpeg",is_vip:1,speaker_name:"小娟-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小娟",speaker_no:60026,common_id:10000032},60027:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1621325244821_85ca49cabf214fdab243e4fce2c47be3.jpg",is_vip:1,speaker_name:"粤语小月-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"粤语小月",speaker_no:60027,common_id:10000056},60030:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502337581127_小峰.jpg",is_vip:1,speaker_name:"小峰-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小峰",speaker_no:60030,common_id:10000022},60100:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1608084267721_478ab047d711a157bc8787300bfca3af.jpg",is_vip:1,speaker_name:"小媛-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小媛",speaker_no:60100,common_id:10000051},60120:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1548575197611_794899f3a81e83256b38e38af03a37be.jpg",is_vip:1,speaker_name:"小桃丸-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小桃丸",speaker_no:60120,common_id:10000016},60130:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420640465_0774223b1fcf0bf1dde260b45deb718d.jpg",is_vip:1,speaker_name:"楠楠-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"楠楠",speaker_no:60130,common_id:10000034},60140:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1597714149063_b2227386eabe56a26cb2f4d7df431a6a.jpg",is_vip:1,speaker_name:"玲姐姐-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"玲姐姐",speaker_no:60140,common_id:10000020},60150:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502329838902_老马.jpg",is_vip:1,speaker_name:"老马-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"老马",speaker_no:60150,common_id:10000027},60170:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1548559331411_c4ca4238a0b923820dcc509a6f75849b.jpg",is_vip:1,speaker_name:"萌小新-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"萌小新",speaker_no:60170,common_id:10000015},62010:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502330236619_小华.jpg",is_vip:1,speaker_name:"小华-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小华",speaker_no:62010,common_id:10000026},62020:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420550253_21ee7a1a1e7ad79155b7697de7eda3aa.jpg",is_vip:1,speaker_name:"小芳-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小芳",speaker_no:62020,common_id:10000053},62060:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1606269761516_1975795c0493505dec4d059f98d5826b.jpg",is_vip:1,speaker_name:"百合仙子-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"百合仙子",speaker_no:62060,common_id:10000037},62070:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502330010892_韦香主.jpg",is_vip:1,speaker_name:"韦香主-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"韦香主",speaker_no:62070,common_id:10000019},65010:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1606269811582_c62113de2d396f45bca5180c3e6f6e3a.jpg",is_vip:1,speaker_name:"小洋-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小洋",speaker_no:65010,common_id:10000054},65040:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1608084814388_b7634bad3989f07ef10539e4d322df01.jpg",is_vip:1,speaker_name:"小英-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小英",speaker_no:65040,common_id:10000052},65070:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502330288391_小俊.jpg",is_vip:1,speaker_name:"小俊-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小俊",speaker_no:65070,common_id:10000012},65080:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502329403031_程程.jpg",is_vip:1,speaker_name:"程程-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"程程",speaker_no:65080,common_id:10000018},65110:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502330081699_小光.jpg",is_vip:1,speaker_name:"小光-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小光",speaker_no:65110,common_id:10000014},65230:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1597714132685_86adccba0dc48bd56e9104cbc6f717da.jpg",is_vip:1,speaker_name:"宝哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"宝哥",speaker_no:65230,common_id:10000011},65250:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502329546955_大灰狼.jpg",is_vip:1,speaker_name:"辉叔-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"辉叔",speaker_no:65250,common_id:10000028},65270:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502333356981_原野.jpg",is_vip:1,speaker_name:"野哥-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"野哥",speaker_no:65270,common_id:10000003},65271:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1633761847664_67aeb3efed84cc8729454d1d415654ba.png",is_vip:1,speaker_name:"天明-生气",is_valid:1,emot_val:1,emot_type:1,emot_desc:"生气",common_name:"天明",speaker_no:65271,common_id:10000001},65272:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1635996295514_fc78bd42c9c7a3b59f823ff87c1c5e28.png",is_vip:1,speaker_name:"天明-悲伤",is_valid:1,emot_val:2,emot_type:1,emot_desc:"悲伤",common_name:"天明",speaker_no:65272,common_id:10000001},65320:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1600346097630_39c712fe9a4cabd48d76a9b07fe6203a.jpg",is_vip:1,speaker_name:"小薛-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小薛",speaker_no:65320,common_id:10000013},65340:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502330913643_小南.jpg",is_vip:1,speaker_name:"小南-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小南",speaker_no:65340,common_id:10000017},65360:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502332814367_瑶瑶.jpg",is_vip:1,speaker_name:"瑶瑶-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"瑶瑶",speaker_no:65360,common_id:10000024},68010:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420785618_bb824b8e5e04845049707b29b223c74a.jpg",is_vip:1,speaker_name:"湖南小强-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"湖南小强",speaker_no:68010,common_id:10000059},68030:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420797287_31e1397d6910efdca2bf29f6fd61c3f1.jpg",is_vip:1,speaker_name:"河南小坤-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"河南小坤",speaker_no:68030,common_id:10000058},68040:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1609317858503_dd6e4a1419cff9b3bb535226324edcaa.jpg",is_vip:1,speaker_name:"东北晓倩-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"东北晓倩",speaker_no:68040,common_id:10000060},68060:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420885882_73f8a82027912b64c7588243d1883900.jpg",is_vip:1,speaker_name:"四川小蓉-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"四川小蓉",speaker_no:68060,common_id:10000057},68080:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502332389893_小莹-陕西方言.jpg",is_vip:1,speaker_name:"陕西小莹-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"陕西小莹",speaker_no:68080,common_id:10000031},68120:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1502333318210_玉儿-台湾方言.jpg",is_vip:1,speaker_name:"台湾玉儿-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"台湾玉儿",speaker_no:68120,common_id:10000030},69010:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1606269847059_3fd53d3362429cd8e00c7d9dfaa30599.jpg",is_vip:1,speaker_name:"John",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"John",speaker_no:69010,common_id:10000046},69020:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1606269863517_84fdce1b17fb9848151cbf6bc56d7cdb.jpg",is_vip:1,speaker_name:"Catherine",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"Catherine",speaker_no:69020,common_id:10000045},69030:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1600745592907_81b8a1b77068d06e1c8190825253066f.jpg",is_vip:1,speaker_name:"Steve",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"Steve",speaker_no:69030,common_id:10000021},70001:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1624005805567_744b3870aa244d84e6baedee15fbfe81.jpg",is_vip:1,speaker_name:"小钟-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小钟",speaker_no:70001,common_id:10000010},70002:{audio_quality:1,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1628579668677_bfa253d28e62b511eb9da9179c8efff6.jpg",is_vip:1,speaker_name:"宁宁-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"宁宁",speaker_no:70002,common_id:10000055},120008:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669977570537_c62113de2d396f45bca5180c3e6f6e3a.png",is_vip:1,speaker_name:"小洋（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"小洋（私人）",speaker_no:120008,common_id:2000003},120009:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675906981405_72d909583fb30aa253f306764f38fdf5.jpg",is_vip:1,speaker_name:"聆飞博（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"聆飞博（私人）",speaker_no:120009,common_id:20000004},120010:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675908105010_0e6b2e47dcd1a27c425f472da0080e9d.png",is_vip:1,speaker_name:"聆玉菲（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"聆玉菲（私人）",speaker_no:120010,common_id:20000005},120011:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1678349433602_3f203641e1844d8d1475964c66a080b8.png",is_vip:1,speaker_name:"印尼语",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"印尼语",speaker_no:120011,common_id:20000006},120012:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681264587606_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-代联琴（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"代联琴",common_name:"太保项目女（私人）",speaker_no:120012,common_id:20000009},120013:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681264854170_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-党永秀（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"党永秀",common_name:"太保项目女（私人）",speaker_no:120013,common_id:20000009},120014:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681265183286_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-高德芬（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"高德芬",common_name:"太保项目女（私人）",speaker_no:120014,common_id:20000009},120015:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681874549973_0d7f54c27d60348a4b611c9adbb22242.jpg",is_vip:1,speaker_name:"太保-代传江（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"代传江",common_name:"太保项目男（私人）",speaker_no:120015,common_id:20000007},120016:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681874535272_0d7f54c27d60348a4b611c9adbb22242.jpg",is_vip:1,speaker_name:"太保-叶曦（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"叶曦",common_name:"太保项目男（私人）",speaker_no:120016,common_id:20000007},120017:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681265706633_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-厦辉境（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"厦辉境",common_name:"太保项目女（私人）",speaker_no:120017,common_id:20000009},120018:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681265912390_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-钟婷（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"钟婷",common_name:"太保项目女（私人）",speaker_no:120018,common_id:20000009},120019:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681266135875_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-彭紫冰（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"彭紫冰",common_name:"太保项目女（私人）",speaker_no:120019,common_id:20000009},120020:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681266526885_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-雍炜（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"雍炜",common_name:"太保项目女（私人）",speaker_no:120020,common_id:20000009},120021:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681266747714_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-顾明红（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"顾明红",common_name:"太保项目女（私人）",speaker_no:120021,common_id:20000009},120022:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681266917602_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-屈洪（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"屈洪",common_name:"太保项目女（私人）",speaker_no:120022,common_id:20000009},120023:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681267183355_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-黄家月（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"黄家月",common_name:"太保项目女（私人）",speaker_no:120023,common_id:20000009},120024:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681267365564_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-张静（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"张静",common_name:"太保项目女（私人）",speaker_no:120024,common_id:20000009},120025:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681440928738_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-任怡（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"任怡",common_name:"太保项目女（私人）",speaker_no:120025,common_id:20000009},120026:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681711840918_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-郑周涛（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"郑周涛",common_name:"太保项目女（私人）",speaker_no:120026,common_id:20000009},120027:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681711995572_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-朗菲（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"朗菲",common_name:"太保项目女（私人）",speaker_no:120027,common_id:20000009},120028:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681712162704_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-杨江敏（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"杨江敏",common_name:"太保项目女（私人）",speaker_no:120028,common_id:20000009},120029:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681712339384_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-周小文（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"周小文",common_name:"太保项目女（私人）",speaker_no:120029,common_id:20000009},120030:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681712515343_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-马昌静（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"马昌静",common_name:"太保项目女（私人）",speaker_no:120030,common_id:20000009},120031:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681714241149_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-何艳丽（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"何艳丽",common_name:"太保项目女（私人）",speaker_no:120031,common_id:20000009},120033:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682043661556_d50a0b17af855917f1436ee84f47c8db.jpg",is_vip:1,speaker_name:"太保-女秘书（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"太保",common_name:"太保项目女（私人）",speaker_no:120033,common_id:20000009},120034:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682044564673_d40015ae916dbc0aa20268c87c50500f.jpg",is_vip:1,speaker_name:"无限极-男形象(私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"男形象",common_name:"无限极-男形象(私人）",speaker_no:120034,common_id:2000010},130002:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1641438154567_dd22248ae531f27d47b982815b676a47.jpg",is_vip:1,speaker_name:"皓宇-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"皓宇",speaker_no:130002,common_id:10000004},130004:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1647223837540_652e417b6186bf94cd2b0c4e24b272c5.jpg",is_vip:1,speaker_name:"希涵-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"希涵",speaker_no:130004,common_id:10000066},130005:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419568247_2c0069a4cbedef10968bc0a1477f9b65.jpg",is_vip:1,speaker_name:"天明-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"天明",speaker_no:130005,common_id:10000001},130006:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420057976_91f37a62fed8dde4f32ab0ef91208c30.jpg",is_vip:1,speaker_name:"小露-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小露",speaker_no:130006,common_id:10000006},130007:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420486527_14ceee8c4c97aade2a433c33dc27e857.jpg",is_vip:1,speaker_name:"七哥-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"七哥",speaker_no:130007,common_id:10000033},130008:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420439843_f9e5dee5c42a5bf7c9da68fbe5de502c.jpg",is_vip:1,speaker_name:"千雪-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"千雪",speaker_no:130008,common_id:10000036},130009:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420455423_91f37a62fed8dde4f32ab0ef91208c30.jpg",is_vip:1,speaker_name:"小露-可爱",is_valid:1,emot_val:0,emot_type:0,emot_desc:"可爱",common_name:"小露",speaker_no:130009,common_id:10000006},130011:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420272562_eee069b12218ef0f61dbdae6885995cd.jpg",is_vip:1,speaker_name:"小钟-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小钟",speaker_no:130011,common_id:10000010},130012:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420236786_33d313f7f6becca71071044d4534f89a.jpg",is_vip:1,speaker_name:"一菲-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"一菲",speaker_no:130012,common_id:10000009},130013:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420003910_93b2ac59dda0cd35949216e8e177449c.jpeg",is_vip:1,speaker_name:"小娟-甜美",is_valid:1,emot_val:4,emot_type:0,emot_desc:"甜美",common_name:"小娟",speaker_no:130013,common_id:10000032},130014:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420165171_93b2ac59dda0cd35949216e8e177449c.jpeg",is_vip:1,speaker_name:"小娟-温情",is_valid:1,emot_val:0,emot_type:0,emot_desc:"温情",common_name:"小娟",speaker_no:130014,common_id:10000032},130015:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1649647633513_9f51076ffcae292e98fa161a4238456f.jpg",is_vip:1,speaker_name:"豆豆-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"豆豆",speaker_no:130015,common_id:10000068},130016:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420116575_849eafae1df9bf3e8ab3e6420c4ac598.jpg",is_vip:1,speaker_name:"管哥-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"管哥",speaker_no:130016,common_id:10000007},130017:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419918732_0c70e797d640ee18676f183e97d75984.jpg",is_vip:1,speaker_name:"小果-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小果",speaker_no:130017,common_id:10000005},130018:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1651303735245_41ab46b4c8a15bff054a737fd07491dd.jpg",is_vip:1,speaker_name:"嘉欣-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"嘉欣",speaker_no:130018,common_id:10000067},130019:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419839607_4404a53146f3bd66cdbe5ab55b191c26.jpg",is_vip:1,speaker_name:"小媛-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小媛",speaker_no:130019,common_id:10000051},130020:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419881631_d8babc472dc8c7eee8787f58a797437f.jpg",is_vip:1,speaker_name:"超哥-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"超哥",speaker_no:130020,common_id:10000002},130021:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420201420_78624fe20c60e4668bd31ce4e511a57b.jpg",is_vip:1,speaker_name:"小英-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小英",speaker_no:130021,common_id:10000052},130022:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666420149201_3cf1bb134f22ba59cb66b81d682a6a8f.jpg",is_vip:1,speaker_name:"一峰-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"一峰",speaker_no:130022,common_id:10000047},130023:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1651803334163_237c927a5ca90b59dfd1325ad505995b.jpg",is_vip:1,speaker_name:"顾辉-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"顾辉",speaker_no:130023,common_id:10000069},130024:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1652932290126_47fd6de91508946d04bab07464a6b8aa.jpg",is_vip:1,speaker_name:"小燕-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小燕",speaker_no:130024,common_id:10000023},130025:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419962407_21ee7a1a1e7ad79155b7697de7eda3aa.jpg",is_vip:1,speaker_name:"小芳-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"小芳",speaker_no:130025,common_id:10000053},130026:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1655691892283_54cabb0ded6abb9ae9036c51fc9dec05.png",is_vip:1,speaker_name:"关山-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"关山",speaker_no:130026,common_id:10000070},130027:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1655692230391_ffdb9bdcf8da46f6a3775d88a486da3d.png",is_vip:1,speaker_name:"明泽-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"明泽",speaker_no:130027,common_id:10000071},130028:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1656052402763_698d51a19d8a121ce581499d7b701668.jpg",is_vip:1,speaker_name:"九哥",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"九哥",speaker_no:130028,common_id:20000001},130029:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1656383614482_54cabb0ded6abb9ae9036c51fc9dec05.png",is_vip:1,speaker_name:"关山-对话",is_valid:1,emot_val:0,emot_type:0,emot_desc:"对话",common_name:"关山",speaker_no:130029,common_id:10000070},130030:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1656385533160_ffdb9bdcf8da46f6a3775d88a486da3d.png",is_vip:1,speaker_name:"明泽-对话",is_valid:1,emot_val:0,emot_type:0,emot_desc:"对话",common_name:"明泽",speaker_no:130030,common_id:10000071},130031:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1657072723137_b67fac74f2a892714634553e25233387.png",is_vip:1,speaker_name:"关山-专题",is_valid:1,emot_val:0,emot_type:0,emot_desc:"专题",common_name:"关山",speaker_no:130031,common_id:10000070},130032:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1657867318893_6aa2a2778de9c065dc6d3a8364c41622.jpg",is_vip:1,speaker_name:"上海阮灵-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"上海阮灵",speaker_no:130032,common_id:10000072},130033:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1659600422382_2b28db2946f96a63a331a9cd3cf58c85.jpg",is_vip:1,speaker_name:"大圣",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"大圣",speaker_no:130033,common_id:10000073},130034:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1660269898498_8c40fccb59de492def8f7d411e248620.jpg",is_vip:1,speaker_name:"合肥子沁-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"合肥子沁",speaker_no:130034,common_id:10000074},130035:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1660270413064_b296969a27c5596e4ec3b6edf47f66c3.png",is_vip:1,speaker_name:"阿森-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"阿森",speaker_no:130035,common_id:10000075},130036:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1661218973559_995882b996619ea85a44333150e7014e.jpg",is_vip:1,speaker_name:"苏州苏小曦-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"苏州苏小曦",speaker_no:130036,common_id:10000076},130037:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1661217949971_d8e87ebf8f876f66f9eac9cdf0e7b47e.jpg",is_vip:1,speaker_name:"成都宝儿-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"成都宝儿",speaker_no:130037,common_id:10000077},130039:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1666419666741_81d6655735665f2f503e7c2b7261dfd2.jpg",is_vip:1,speaker_name:"水哥-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"水哥",speaker_no:130039,common_id:10000041},130040:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1663299601079_08ee2698685b040d6f910e9ea272cf80.jpg",is_vip:1,speaker_name:"飞碟哥-默认2",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认2",common_name:"飞碟哥",speaker_no:130040,common_id:10000008},130044:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910129274_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-助理",is_valid:1,emot_val:0,emot_type:2,emot_desc:"助理",common_name:"聆小瑶",speaker_no:130044,common_id:10000081},130047:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910642991_dd33de2cad55ced641f946a8d477c6f3.jpg",is_vip:0,speaker_name:"聆小琬-助理",is_valid:1,emot_val:0,emot_type:0,emot_desc:"助理",common_name:"聆小琬",speaker_no:130047,common_id:10000083},130048:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910454467_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:0,speaker_name:"聆小璎-助理",is_valid:1,emot_val:0,emot_type:0,emot_desc:"助理",common_name:"聆小璎",speaker_no:130048,common_id:10000085},130049:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910663347_2506859c0192e7199ecd1250d7d27b5c.jpg",is_vip:0,speaker_name:"聆小璐-助理",is_valid:1,emot_val:0,emot_type:0,emot_desc:"助理",common_name:"聆小璐",speaker_no:130049,common_id:10000084},130050:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910369995_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-助理",is_valid:1,emot_val:0,emot_type:2,emot_desc:"助理",common_name:"聆小璇",speaker_no:130050,common_id:10000082},130051:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910316978_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-撒娇",is_valid:1,emot_val:7,emot_type:2,emot_desc:"撒娇",common_name:"聆小璇",speaker_no:130051,common_id:10000082},130052:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910184605_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-二次元",is_valid:1,emot_val:0,emot_type:0,emot_desc:"二次元",common_name:"聆小瑶",speaker_no:130052,common_id:10000081},130053:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910427785_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:0,speaker_name:"聆小璎-高兴",is_valid:1,emot_val:5,emot_type:2,emot_desc:"高兴",common_name:"聆小璎",speaker_no:130053,common_id:10000085},130054:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910296999_facc904ab74450c107db8021c08a228b.jpg",is_vip:0,speaker_name:"聆飞哲-助理",is_valid:1,emot_val:0,emot_type:0,emot_desc:"助理",common_name:"聆飞哲",speaker_no:130054,common_id:10000086},130055:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910405066_7cd2ccfce46ad53bfeb0e78e706a8770.jpg",is_vip:0,speaker_name:"聆飞瀚-纪录片",is_valid:1,emot_val:0,emot_type:0,emot_desc:"纪录片",common_name:"聆飞瀚",speaker_no:130055,common_id:10000087},130056:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910686232_86a9547f3a24e8658c73182d43b1183e.jpg",is_vip:0,speaker_name:"聆飞晨-广告（非实时）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"广告",common_name:"聆飞晨",speaker_no:130056,common_id:10000088},130057:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910279519_facc904ab74450c107db8021c08a228b.jpg",is_vip:0,speaker_name:"聆飞哲-有声旁白",is_valid:1,emot_val:0,emot_type:0,emot_desc:"有声旁白",common_name:"聆飞哲",speaker_no:130057,common_id:10000086},130058:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681114337593_8168c6dd9b4f48583e91453bc613ed2b.jpg",is_vip:0,speaker_name:"聆小璇-闲聊",is_valid:1,emot_val:0,emot_type:0,emot_desc:"闲聊",common_name:"聆小璇",speaker_no:130058,common_id:10000082},130059:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910153071_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-高兴",is_valid:1,emot_val:5,emot_type:2,emot_desc:"高兴",common_name:"聆小瑶",speaker_no:130059,common_id:10000081},130060:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910199500_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-抱歉",is_valid:1,emot_val:6,emot_type:2,emot_desc:"抱歉",common_name:"聆小瑶",speaker_no:130060,common_id:10000081},130061:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910228884_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-撒娇",is_valid:1,emot_val:7,emot_type:2,emot_desc:"撒娇",common_name:"聆小瑶",speaker_no:130061,common_id:10000081},130062:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910169771_9e17d9a0a43f5828fb8c236a2c81f4cd.jpg",is_vip:0,speaker_name:"聆小瑶-严肃",is_valid:1,emot_val:9,emot_type:2,emot_desc:"严肃",common_name:"聆小瑶",speaker_no:130062,common_id:10000081},130072:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910588288_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:0,speaker_name:"聆小璎-抱歉",is_valid:1,emot_val:6,emot_type:2,emot_desc:"抱歉",common_name:"聆小璎",speaker_no:130072,common_id:10000085},130073:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910568746_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:0,speaker_name:"聆小璎-撒娇",is_valid:1,emot_val:7,emot_type:2,emot_desc:"撒娇",common_name:"聆小璎",speaker_no:130073,common_id:10000085},130074:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910622344_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:0,speaker_name:"聆小璎-严肃",is_valid:1,emot_val:9,emot_type:2,emot_desc:"严肃",common_name:"聆小璎",speaker_no:130074,common_id:10000085},130085:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910353543_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-高兴",is_valid:1,emot_val:5,emot_type:2,emot_desc:"高兴",common_name:"聆小璇",speaker_no:130085,common_id:10000082},130086:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910385693_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-抱歉",is_valid:1,emot_val:6,emot_type:2,emot_desc:"抱歉",common_name:"聆小璇",speaker_no:130086,common_id:10000082},130087:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910548722_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-悲伤",is_valid:1,emot_val:12,emot_type:2,emot_desc:"悲伤",common_name:"聆小璇",speaker_no:130087,common_id:10000082},130088:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910528825_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-严肃",is_valid:1,emot_val:9,emot_type:2,emot_desc:"严肃",common_name:"聆小璇",speaker_no:130088,common_id:10000082},130089:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669910506319_331733d041569745fdf582217c001f84.jpg",is_vip:0,speaker_name:"聆小璇-困惑",is_valid:1,emot_val:10,emot_type:2,emot_desc:"困惑",common_name:"聆小璇",speaker_no:130089,common_id:10000082},130097:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1670552743182_2c0069a4cbedef10968bc0a1477f9b65.jpg",is_vip:1,speaker_name:"聆天明",is_valid:1,emot_val:0,emot_type:0,emot_desc:"聆天明",common_name:"天明",speaker_no:130097,common_id:10000001},130098:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669972216462_9073aedcaa0720a0a5a63b02191346fe.jpg",is_vip:0,speaker_name:"聆飞泓-叙述",is_valid:1,emot_val:0,emot_type:0,emot_desc:"叙述",common_name:"聆飞泓",speaker_no:130098,common_id:10000089},130099:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1670552969070_54cabb0ded6abb9ae9036c51fc9dec05.png",is_vip:1,speaker_name:"聆关山",is_valid:1,emot_val:0,emot_type:0,emot_desc:"聆关山",common_name:"关山",speaker_no:130099,common_id:10000070},130100:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1670556324051_ffdb9bdcf8da46f6a3775d88a486da3d.png",is_vip:1,speaker_name:"聆明泽",is_valid:1,emot_val:0,emot_type:0,emot_desc:"聆明泽",common_name:"明泽",speaker_no:130100,common_id:10000071},130102:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1673333567727_0c70e797d640ee18676f183e97d75984.jpg",is_vip:1,speaker_name:"小果-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小果",speaker_no:130102,common_id:10000005},130103:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675321185414_647125d13bc5d45b513b14a9d57efda8.jpg",is_vip:0,speaker_name:"聆飞远-解说",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"聆飞远",speaker_no:130103,common_id:10000091},130105:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675236148950_91f37a62fed8dde4f32ab0ef91208c30.jpg",is_vip:1,speaker_name:"小露-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小露",speaker_no:130105,common_id:10000006},130106:{audio_quality:2,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230201/e7800651-896e-42db-ba39-26980cba8293.jpg",is_vip:1,speaker_name:"小钟-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小钟",speaker_no:130106,common_id:10000010},130107:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675236649803_33d313f7f6becca71071044d4534f89a.jpg",is_vip:1,speaker_name:"一菲-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"一菲",speaker_no:130107,common_id:10000009},130108:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675324145529_9f51076ffcae292e98fa161a4238456f.jpg",is_vip:1,speaker_name:"豆豆-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"豆豆",speaker_no:130108,common_id:10000068},130109:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1675324294696_d8babc472dc8c7eee8787f58a797437f.jpg",is_vip:1,speaker_name:"超哥-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"超哥",speaker_no:130109,common_id:10000002},130110:{audio_quality:2,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230221/18c880b5-4c67-450b-a838-77a920b22ce6.png",is_vip:0,speaker_name:"聆小珊",is_valid:1,emot_val:0,emot_type:0,emot_desc:"新闻",common_name:"聆小珊",speaker_no:130110,common_id:10000093},130111:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1676880222676_13faa9e6aa460b9ce7926a48f52eb49f.jpg",is_vip:1,speaker_name:"千雪-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"千雪",speaker_no:130111,common_id:10000036},130112:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1676950972967_8f113bf9e9acf35e7d4a1d2db463c388.jpg",is_vip:1,speaker_name:"小璇-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小璇",speaker_no:130112,common_id:10000048},130113:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1678414886956_5c31b5116bec2ca62de828ce8c940da5.png",is_vip:1,speaker_name:"诺诺-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"诺诺",speaker_no:130113,common_id:10000094},130114:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1678344582311_d40015ae916dbc0aa20268c87c50500f.jpg",is_vip:1,speaker_name:"小鹏-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小鹏",speaker_no:130114,common_id:10000050},130115:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1678931389091_0078aad655df4f7c52c4a13b84b7a649.jpg",is_vip:0,speaker_name:"聆飞泓-纪录片",is_valid:1,emot_val:0,emot_type:0,emot_desc:"纪录片",common_name:"聆飞泓",speaker_no:130115,common_id:10000089},130117:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1679642695382_405dc98776ff2e5528448f1eb47a9d4b.png",is_vip:1,speaker_name:"关山-纪录片",is_valid:1,emot_val:0,emot_type:0,emot_desc:"纪录片",common_name:"关山",speaker_no:130117,common_id:10000070},130118:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1679643240603_3db4e12b6c0886aacd3eeff50afa6208.jpg",is_vip:1,speaker_name:"希涵-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"希涵",speaker_no:130118,common_id:10000066},130119:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1680247679429_9eb61f99f4b01a56e1ff936f06f36fdc.jpg",is_vip:0,speaker_name:"聆飞哲-叙述",is_valid:1,emot_val:0,emot_type:0,emot_desc:"叙述",common_name:"聆飞哲",speaker_no:130119,common_id:10000086},130120:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1680163243094_2a85ddf36bc3d96d44568f46639bbc8d.jpg",is_vip:1,speaker_name:"聆小琪-温柔（私人)",is_valid:1,emot_val:4,emot_type:0,emot_desc:"温柔",common_name:"聆小琪（私人）",speaker_no:130120,common_id:10000090},130121:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1680163697326_2a85ddf36bc3d96d44568f46639bbc8d.jpg",is_vip:1,speaker_name:"聆小琪-高兴（私人）",is_valid:1,emot_val:5,emot_type:0,emot_desc:"高兴",common_name:"聆小琪（私人）",speaker_no:130121,common_id:10000090},130122:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1680164461727_2a85ddf36bc3d96d44568f46639bbc8d.jpg",is_vip:1,speaker_name:"聆小琪-助理（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"助理",common_name:"聆小琪（私人）",speaker_no:130122,common_id:10000090},130123:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1680761012062_7da1c1d283a2d8d3cc2b61fdf9c45823.jpg",is_vip:0,speaker_name:"聆飞皓-直播",is_valid:1,emot_val:0,emot_type:0,emot_desc:"直播",common_name:"聆飞皓",speaker_no:130123,common_id:10000092},130124:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681376786944_f5a555f17296325662148e9117d30c2e.jpg",is_vip:0,speaker_name:"聆小瑧-直播",is_valid:1,emot_val:0,emot_type:0,emot_desc:"直播",common_name:"聆小瑧",speaker_no:130124,common_id:10000095},130134:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1681729027461_e495f64ef59f3d757f1b72037df33888.jpg",is_vip:1,speaker_name:"聆小琪-悲伤（私人）",is_valid:1,emot_val:12,emot_type:0,emot_desc:"悲伤",common_name:"聆小琪（私人）",speaker_no:130134,common_id:10000090},130135:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682391135859_89231d716e658b53b799f929265012ed.jpg",is_vip:1,speaker_name:"小英-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小英",speaker_no:130135,common_id:10000052},130136:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682391386490_a291a748f0f5389db6046c80ccb21186.jpg",is_vip:1,speaker_name:"小媛-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"小媛",speaker_no:130136,common_id:10000051},130137:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682391622780_50830752c9c03ab788f191bb11f1427f.jpg",is_vip:1,speaker_name:"顾辉-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"顾辉",speaker_no:130137,common_id:10000069},130138:{audio_quality:2,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682391865667_b6d6b025cc9b626b7251c12101fb80b5.jpg",is_vip:1,speaker_name:"管哥-品质",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"管哥",speaker_no:130138,common_id:10000007},130139:{audio_quality:2,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230511/94b303ba-bf50-4ce7-a2b4-4494997bc152.jpg",is_vip:1,speaker_name:"子悠",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"子悠",speaker_no:130139,common_id:10000096},900001:{audio_quality:0,img_url:"http://yspt.oss-cn-hangzhou.aliyuncs.com/manageweb/speaker/1647520523077_b2227386eabe56a26cb2f4d7df431a6a.jpg",is_vip:2,speaker_name:"小玲-测试-默认",is_valid:1,emot_val:0,emot_type:0,emot_desc:"默认",common_name:"小玲测试",speaker_no:900001,common_id:90000001},1300476:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1669271780729_d5f5f2bf6283866e14994ab9d8612272.jpg",is_vip:1,speaker_name:"小芳（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"小芳（私人）",speaker_no:1300476,common_id:20000002},200000005:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1677469252164_2f0163785b94261dee6309bb08a92f53.png",is_vip:0,speaker_name:"韦老师",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"韦老师",speaker_no:200000005,common_id:200000005},523716219:{audio_quality:0,img_url:"https://avatarcdn.xfyousheng.com/manager/20210418/file/78f042ad47f24d4dbadfa3a4252d4274.png",is_vip:0,speaker_name:"小叶新闻",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:523716219,common_id:0},524214464:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20221125/c1e06446-7e2b-4c8d-b3e3-2b4a2f795473.jpg",is_vip:0,speaker_name:"聆小瑶-二次元",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:524214464,common_id:0},529547374:{audio_quality:1,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/db0a7d0655f24753a2efbdfb1f3784d7.png",is_vip:0,speaker_name:"小露-情感",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:529547374,common_id:""},532485150:{audio_quality:0,img_url:"http://openstorage.xfyousheng.com/avatar/manager/20220315/file/9973cd05b2d64ad5b2e9a8ec74cb44eb.jpg",is_vip:0,speaker_name:"3.0倩倩",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:532485150,common_id:0},536657923:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230504/f8057dc0-61ef-4e3a-ac03-5226883afcf1.jpg",is_vip:1,speaker_name:"和讯网",is_valid:1,emot_val:0,emot_type:0,emot_desc:"和讯网4.0",common_name:"和讯网（私人）",speaker_no:536657923,common_id:20000011},537136092:{audio_quality:0,img_url:"http://ossbj.xfinfr.com/J9Q7O4EL/uploadResource/xiaoyuan.png",is_vip:0,speaker_name:"小媛",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:537136092,common_id:0},538039623:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230309/1e565e40-67b6-43f7-8484-f25dcb89b3fd.jpg",is_vip:0,speaker_name:"suparut",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"suparut",speaker_no:538039623,common_id:10001008},544379876:{audio_quality:1,img_url:"http://openstorage.xfyousheng.com/avatar/manager/20220328/file/db462e2fff5e48b49815fab0eca1e193.png",is_vip:0,speaker_name:"3.0小媛",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:544379876,common_id:""},546886842:{audio_quality:0,img_url:"http://ossbj.xfinfr.com/J9Q7O4EL/uploadResource/xiaopei.png",is_vip:1,speaker_name:"小晴",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"小晴（私人）",speaker_no:546886842,common_id:20000008},547531502:{audio_quality:0,img_url:"http://openstorage.xfyousheng.com/asset/asset/20220930/564da2c0-edf7-4fe6-8269-caee4b9f530b.png",is_vip:0,speaker_name:"印尼语",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:547531502,common_id:0},548039623:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20221202/b3b12153-134a-4298-bbf9-d120afc9b262.jpg",is_vip:0,speaker_name:"x2_msmy_hashim",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:548039623,common_id:0},553801140:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230517/6755d47b-4bd1-4a5b-adcb-c6a9b65b690f.jpg",is_vip:1,speaker_name:"太保-潘总极速版（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"潘总",common_name:"太保项目女（私人）",speaker_no:553801140,common_id:20000009},554377918:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230516/521fe53b-15d4-4ec4-a836-feed9a95b78b.jpg",is_vip:0,speaker_name:"童瑶",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:554377918,common_id:0},556886842:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/1659e1492ae2411ea0f45c9fd799b140.png",is_vip:0,speaker_name:"叶子",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:556886842,common_id:0},557567029:{audio_quality:0,img_url:"http://ossbj.xfinfr.com/J9Q7O4EL/uploadResource/xiaopei.png",is_vip:1,speaker_name:"小晴",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"小晴（私人）",speaker_no:557567029,common_id:20000008},558039623:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230309/d3d0efaa-9c48-49e7-9a8c-223586680845.jpg",is_vip:0,speaker_name:"菲律宾语",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:558039623,common_id:0},559288687:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/2f41c4670a0746bdb0d98c8221cb99ab.png",is_vip:0,speaker_name:"春花",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:559288687,common_id:0},559565563:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/1659e1492ae2411ea0f45c9fd799b140.png",is_vip:0,speaker_name:"小叶宠溺",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:559565563,common_id:0},561236098:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230501/690be86a-858a-4f4d-95eb-43e926f91e21.jpg",is_vip:1,speaker_name:"聆小琪-闲聊",is_valid:1,emot_val:0,emot_type:0,emot_desc:"闲聊",common_name:"聆小琪（私人）",speaker_no:561236098,common_id:10000090},561470586:{audio_quality:2,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230519/a470958e-3694-46b4-99e0-a566d7889caf.jpg",is_vip:1,speaker_name:"子轩",is_valid:1,emot_val:0,emot_type:0,emot_desc:"品质",common_name:"子轩",speaker_no:561470586,common_id:10000097},563176055:{audio_quality:1,img_url:"http://ossbj.xfinfr.com/J9Q7O4EL/uploadResource/xiaoyuan.png",is_vip:0,speaker_name:"小媛",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:563176055,common_id:""},566886842:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/db0a7d0655f24753a2efbdfb1f3784d7.png",is_vip:0,speaker_name:"小露-情感",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:566886842,common_id:0},567567029:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230310/cffcc594-8f33-4753-aeb3-28fa8519867e.jpg",is_vip:0,speaker_name:"x4_xiaopei",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:567567029,common_id:0},569067928:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230425/a48cd639-e4b8-4e4b-adc2-2d49fed4f3cf.jpg",is_vip:1,speaker_name:"太保自训练",is_valid:1,emot_val:0,emot_type:0,emot_desc:"太保自训练",common_name:"太保项目女（私人）",speaker_no:569067928,common_id:20000009},569288687:{audio_quality:0,img_url:"http://openstorage.xfyousheng.com/avatar/manager/20220426/file/4a3e650375354f6e936ac0c4dd1d5162.jpg",is_vip:0,speaker_name:"3.0春花",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:569288687,common_id:0},570566499:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/manager/74068ceb68f44e6b92380bbb6a2dd38a.png",is_vip:0,speaker_name:"超哥",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:570566499,common_id:0},572908282:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230425/5fb323fd-8fa7-4bdd-a703-e0e85efb0e62.jpg",is_vip:1,speaker_name:"和讯网（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"和讯网",common_name:"和讯网（私人）",speaker_no:572908282,common_id:20000011},577344644:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230525/8fcc8a4b-6741-4888-a8cb-4d1fd27aeb41.jpg",is_vip:0,speaker_name:"ryan",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:577344644,common_id:0},580422678:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20221125/4e77e213-b9ac-408d-8fe8-4fb29702049b.jpg",is_vip:0,speaker_name:"聆小琪-助理",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:580422678,common_id:0},581068997:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230427/ee280b6a-9f1a-4d11-bf0b-5d8502fc8218.jpg",is_vip:1,speaker_name:"迈动互联自训练",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"迈动互联-思桥（私人）",speaker_no:581068997,common_id:20000012},586355747:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230323/37d27664-df09-4501-9e51-81a32a2834e4.jpg",is_vip:0,speaker_name:"lindsay",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:586355747,common_id:0},586958115:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20221125/fb2d4414-1d38-4b7a-83b8-b6411cdd0376.jpg",is_vip:0,speaker_name:"聆小璇-助理（新）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:586958115,common_id:0},588053014:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230516/bfb11fa5-15f7-4196-972e-fd08010aec60.png",is_vip:0,speaker_name:"赵巍",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:588053014,common_id:0},588647261:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1682650338175_2501b0dfa00817e23c4bbd1eb62b75cb.jpg",is_vip:1,speaker_name:"杨绵龙",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"杨绵龙",speaker_no:588647261,common_id:527479499},589563014:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230515/3a64967d-7f3f-4a45-9f42-b6e8615c8637.jpg",is_vip:1,speaker_name:"太保-林秒红（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"陈妙红",common_name:"太保项目女（私人）",speaker_no:589563014,common_id:20000009},590422678:{audio_quality:0,img_url:"http://ceph.xfyousheng.com/J9Q7O4EL/uploadResource/xiaofeng.png",is_vip:0,speaker_name:"一峰",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:590422678,common_id:0},591254490:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230428/273425a0-53db-477d-b012-5d658ff4898d.jpg",is_vip:0,speaker_name:"孙阳",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:591254490,common_id:0},597194610:{audio_quality:0,img_url:"http://openstorage.xfyousheng.com/avatarhci/hcimanage/20220610/35a6f615-84fb-454a-b921-a085dd05c263.jpg",is_vip:0,speaker_name:"小佩",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:597194610,common_id:0},598286078:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230518/4aa04d02-0180-4563-91da-478fde583c96.jpg",is_vip:1,speaker_name:"迈动互联-思桥4.0（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"思桥4.0",common_name:"迈动互联-思桥（私人）",speaker_no:598286078,common_id:20000012},598331065:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230515/6670388d-56d1-4daf-b591-14aa5e2c1b6d.jpg",is_vip:1,speaker_name:"泰康-女（私人）",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"泰康-女（私人）",speaker_no:598331065,common_id:20000015},605437791:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230428/23792a0d-e589-4d1d-a3d2-4b48d6aceac0.jpg",is_vip:0,speaker_name:"吕冰",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:605437791,common_id:0},616554542:{audio_quality:0,img_url:"https://pygfile.peiyinge.com/manageweb/speaker/1685009093147_35bb981a9a8b78088456dcc97d3faaca.jpg",is_vip:1,speaker_name:"miya",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"miya",speaker_no:616554542,common_id:10001006},625524483:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230417/a4db6963-5c04-4f45-8adb-8d0bc471f257.jpg",is_vip:1,speaker_name:"杨杰",is_valid:1,emot_val:0,emot_type:0,emot_desc:"杨杰",common_name:"太保项目女（私人）",speaker_no:625524483,common_id:20000009},638756812:{audio_quality:0,img_url:"https://openstorage.xfyousheng.com/asset/asset/20230322/f01c86c3-7e07-458d-afec-f57c742ef69f.jpg",is_vip:0,speaker_name:"聆小琪-多情感",is_valid:1,emot_val:0,emot_type:0,emot_desc:"",common_name:"",speaker_no:638756812,common_id:0}};function he(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ge={components:{videoView:q,audioFormat:J,animationFlash:de},props:["isLandscape"],data:function(){return{sliderValue:0,isMobile:!1,textArr:[],uploadfile:null,animationTime:0,animationTime1:0,wavesurfer:null,curPlayingTime:0,audioRate:1,customAudioText:"",customDesignText:"",customSrtContent:"",textLines:0,peopleTimeArr:[],customAudioTextTimes:[],sliceTimesArr:[],show:!0,activeName:"first",peiyinJosnStr:""}},computed:{allSpeakerDict:function(){var e=fe.map(function(e){var t,n;return ve(ve({},e),{},{tag1:null===(t=e.tag.split("|").filter(function(e){return["老年","中年","青年","少儿"].includes(e)}))||void 0===t?void 0:t[0],tag2:null===(n=e.tag.split("|").filter(function(e){return["普通话"].includes(e)}))||void 0===n?void 0:n[0]})});return M.a.groupBy(M.a.orderBy(e,["speakerGender","tag2"],"desc","asc"),function(e){return e.tag1})},customAudioText1Srt:function(){localStorage.setItem("customDesignText",this.customDesignText),localStorage.setItem("peiyinJosnStr",this.peiyinJosnStr);var e=this.customDesignText.replace(/[,|，]/gi,",").replace(/[:|：]/gi,":").replace(/[)|）]/gi,")").split("\n").filter(function(e){return e}).map(function(e){return e.includes(":")?e.split(":")[1].trim():e.includes(")")?e.split(")")[1].trim():e.trim()}).join("\n");return e},peiyinStr:function(){var e={},t=M.a.groupBy(M.a.values(me),"common_id");M.a.map(fe,function(n){var r,i,o,a;null!==t&&void 0!==t&&null!==(r=t[n.commonId])&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.speaker_no?e[n.speakerName]={content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te75][n0]$content$",vid:null===t||void 0===t?void 0:null===(o=t[n.commonId])||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.speaker_no,volume:0,speed:"140",pitch:0,endFadeDownDuration:"0"}}:console.log(n.commonId,t)});var n={};try{var r=JSON.parse(this.peiyinJosnStr);for(var i in r)n[i]=e[r[i]]||i}catch(a){}var o=ve(ve({},e),{},{"系统":{content:"[em9][te50][n0]$content$",data:{engineUrl:"/synth",text:"[em9][te50][n0]$content$",vid:"130062",volume:0,speed:"79",pitch:0,endFadeDownDuration:"0"}},"旁白":{content:"[te81][n0]$content$",data:{engineUrl:"/synth",text:"[te91][n0]$content$",vid:"65270",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"宝哥":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65230",volume:0,speed:"142",pitch:0,endFadeDownDuration:"0"}},"小俊":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65070",volume:0,speed:"75",pitch:0,endFadeDownDuration:"0"}},"宁宁":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"70002",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"小明":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65110",volume:0,speed:"155",pitch:0,endFadeDownDuration:"0"}}},n);return"\nstr = `\n".concat(this.customDesignText,"\n`\n\npersonDict = ").concat(JSON.stringify(o),"\nvar resList = []\nstr.replace(/[:|：]/gi,':').replace(/[)|）]/gi,')').split('\\n').map(item => {\n    if (item.trim() === '') return\n    if(item.includes(':')) {\n        var name = item.split(':')[0].trim()\n        if(name.includes(')')) {\n        name = name.split(')')[1]\n        }\n        const obj = (personDict[name] || personDict['旁白'])\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item.split(':')[1]),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item.split(':')[1])\n            }\n        })\n    } else {\n        const obj = personDict['旁白']\n        if(item.includes(')')) {\n            item = item.split(')')[1]\n        }\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item)\n            }\n        })\n    }\n})\nasync function getAudio(res) {\n    var objItem = res.data;\n    window.sc = '0000';\n    return new Promise(function (resolve, reject) {\n        var val =\n            '{\"channel\": \"' +\n            channel +\n            '\",\"synth_text_hash_code\":\"' +\n            CryptoJS.MD5(window.replaceRightTTSMark(objItem.text)) +\n            '\"}';\n        getAjax(\n            '/1.0/works_synth_sign',\n            val,\n            true,\n            function (data) {\n                var resultInfo = eval(data);\n                synthServer = objItem.engineUrl || window.__synthServer;\n                var txtcnt = encodeURIComponent(window.replaceRightTTSMark(objItem.text));\n                var url =\n                    synthServer +\n                    '?uid=' +\n                    (window.phone || '') +\n                    '&ts=' +\n                    resultInfo.time_stamp +\n                    '&sign=' +\n                    resultInfo.sign_text +\n                    '&vid=' +\n                    objItem.vid +\n                    '&f=v2&cc=' +\n                    window.sc +\n                    '&sid=' +\n                    window.web_i_ss +\n                    '&volume=' +\n                    (objItem.volume || 0) +\n                    '&speed=' +\n                    objItem.speed +\n                    '&content=' +\n                    txtcnt +\n                    '&listen=' + 0;\n                resolve(url);\n            },\n            function (err) {\n                reject(err);\n            }\n        );\n    });\n}\nasync function getUrls() {\n\twindow.urlList = ''\n    const urlList =  await new Promise(async (resolve, reject) => {\n        let urls = []\n        Promise.all(resList.map(async res => {\n            return await getAudio(res)\n        })).then((result) => {\n            window.urlList= result.map(url => ('https://peiyin.xunfei.cn' + url)).join(';')\n        })\n        // resList.map(async res => {\n        //     const url = await getAudio(res)\n        //     urls.push('https://peiyin.xunfei.cn' + url)\n        //     if (urls.length === resList.length) {\n        //         resolve(urls)\n        //     }\n        // })\n    })\n    window.urlList = urlList.join(';')\n}\ngetUrls()\n")},animationjsfl:function(){var e=this;localStorage.setItem("customSrtContent",this.customSrtContent);var t=[];if(!this.customSrtContent||!this.customDesignText)return"请先输入设计文案和srt内容";var n=this.customSrtContent,r=this.customDesignText,i={"小唐":1,"宝哥":2,"小俊":3,"宁宁":4,"小明":5,"系统":6},o=n.split("\n").filter(function(e){return e});t=r.replace(/[,|，]/gi,",").replace(/[:|：]/gi,":").replace(/[)|）]/gi,")").split("\n").filter(function(e){return e}).map(function(t){var n="",r="",a="",s="";t.includes(":")?(n=t.split(":")[0].trim(),n.includes(")")&&(a=n.split(")")[0].replace(/[(|（]/gi,"").split(",")[0],s=n.split(")")[0].replace(/[(|（]/gi,"").split(",")[1]||"",n=n.split(")")[1]),r=t.split(":")[1].trim()):(n="旁白",t.includes(")")&&(a=t.split(")")[0].replace(/[(|（]/gi,"").split(",")[0],s=t.split(")")[0].replace(/[(|（]/gi,"").split(",")[1]||"",t=t.split(")")[1]),r=t.trim());var c=[],u=[];return o.map(function(e,t){if(2!==c.length){if(0===c.length&&t%3===2&&r.startsWith(e.slice(0,2))){var n=o[t-1].split(" --\x3e ")[0],i=new Date("2022-01-01 "+n.split(",")[0]);c[0]=n,u[0]=Math.floor(30*(60*i.getMinutes()+i.getSeconds()+n.split(",")[1]/1e3))}if(1===c.length&&t%3===2&&r.endsWith(e.slice(-2))){n=o[t-1].split(" --\x3e ")[1],i=new Date("2022-01-01 "+n.split(",")[0]);c[1]=n,u[1]=Math.ceil(30*(60*i.getMinutes()+i.getSeconds()+n.split(",")[1]/1e3)),o=o.slice(t+1)}}}),s.trim()&&(i[n]=+s.trim()),2!==c.length&&e.$message.error("请检查srt：".concat(r)),{name:n,qingxu:a,content:r,time:c,timeFrameKey:u,shunxu:i[n]}}),t=t.slice(1);var a="\n      peopleArr=".concat(JSON.stringify(t),"\nvar doc = fl.getDocumentDOM();\nvar uxi = doc.xmlPanel(fl.configURI + \"Commands/isChange.xml\");\nfunction animation() {\n    // 清空帧\n    var layers = fl.getDocumentDOM().getTimeline().layers\n    var currentLayer = fl.getDocumentDOM().getTimeline().currentLayer\n    var frameCount = fl.getDocumentDOM().getTimeline().frameCount\n    for(i = 0; i < layers.length;i++) {\n        fl.getDocumentDOM().getTimeline().currentLayer = i; \n        fl.getDocumentDOM().getTimeline().clearKeyframes(40, frameCount);\n    }\n    //\n    var peopleDict = {'小唐': '少年3动作/少年3正面站姿', '宝哥': '少年9动作/少年9正面站姿', '小俊': '少年6动作/少年6开朗的网友', '宁宁': '少女2动作/少女2正面站姿', '小明': '少年12动作/少年12正面站姿'}\n    for (var pi = 0; pi <= peopleArr.length - 1; pi++) {\n        var curPeopleObj = peopleArr[pi]\n        var num = curPeopleObj.shunxu - 1\n        fl.getDocumentDOM().getTimeline().setSelectedLayers(0);\n        fl.getDocumentDOM().getTimeline().setSelectedFrames(num, num);\n        an.getDocumentDOM().getTimeline().copyFrames();\n        var currentFrame = curPeopleObj.timeFrameKey[0]-3\n        fl.getDocumentDOM().getTimeline().setSelectedFrames(currentFrame, currentFrame);\n        an.getDocumentDOM().getTimeline().pasteFrames();\n\n        var layers = fl.getDocumentDOM().getTimeline().layers\n        var layersDict = {}\n        for (var i = 0; i <= layers.length - 1; i++) {\n            layersDict[layers[i].name] = i\n        }\n        var peopleLayers = fl.getDocumentDOM().getTimeline().layers\n        var peoplelayersDict = {}\n        for (var i1 = 0; i1 < peopleLayers.length - 1; i1++) {\n            peoplelayersDict[peopleLayers[i1].name] = i1\n        }\n        var peopleList = [0,1,2,3,4]\n        for (var i = 0; i <= peopleList.length - 1; i++) {\n            if (peoplelayersDict[\"人物_\"+i]) {\n                fl.getDocumentDOM().getTimeline().setSelectedLayers(layersDict[\"人物_\"+i]);\n                fl.getDocumentDOM().getTimeline().setSelectedFrames(currentFrame, currentFrame);\n\n                fl.getDocumentDOM().getTimeline().insertKeyframe();\n                fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[layersDict[\"人物_\"+i]].frames[currentFrame].elements[0]]\n                fl.getDocumentDOM().setElementProperty('loop', 'single frame');\n                if ((curPeopleObj.shunxu - 1) === i || (curPeopleObj.shunxu - 11) === i) {\n                    if (fl.getDocumentDOM().selection[0]) {\n                        var curName = fl.getDocumentDOM().selection[0].libraryItem.name\n                        var setName = peopleDict[curPeopleObj.name]\n                        if (curPeopleObj.qingxu) {\n                            setName = peopleDict[curPeopleObj.name]+'('+ curPeopleObj.qingxu +')'\n                        }\n                        if (curName != setName) {\n                        fl.getDocumentDOM().swapElement(setName);\n                        }\n                    }\n                }\n                if (i == num || i === num - 10) {\n                    fl.getDocumentDOM().setElementProperty('loop', 'loop');\n                    fl.getDocumentDOM().getTimeline().setSelectedFrames(curPeopleObj.timeFrameKey[1] - 5, curPeopleObj.timeFrameKey[1] - 5);\n                    fl.getDocumentDOM().getTimeline().insertKeyframe();\n                    fl.getDocumentDOM().selection = [fl.getDocumentDOM().getTimeline().layers[layersDict[\"人物_\"+i]].frames[curPeopleObj.timeFrameKey[1] - 5].elements[0]]\n                    fl.getDocumentDOM().setElementProperty('loop', 'single frame');\n                }\n            }\n        }\n    }\n}\nif(uxi.dismiss == \"accept\")\n{\n    animation()\n}\n\n");return a},customAudioTextTime:function(){localStorage.setItem("customAudioText",this.customAudioText);var e=this.customAudioText.replace(/：/gi,":").split("\n").filter(function(e){return e});this.textLines=e.length;var t=M.a.map(this.peopleTimeArr,function(t,n){var r,i,o,a=M.a.includes(e[n],":")?null===(r=e[n])||void 0===r?void 0:null===(i=r.split(":"))||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.trim():"旁白";return{title:a,start:t[0].toFixed(2),end:t[1].toFixed(2)}});return this.customAudioText=M.a.map(e,function(e,n){var r,i,o;return null!==t&&void 0!==t&&null!==(r=t[n])&&void 0!==r&&r.start?e.split("|")[0]+"|"+(null===(i=t[n])||void 0===i?void 0:i.start)+"-"+(null===(o=t[n])||void 0===o?void 0:o.end):e}).join("\n"),this.customAudioTextTimes=t,JSON.stringify(t)},audioText:function(){var e=this,t="";return this.textArr.map(function(n,r){return r===e.textArr.length-1?(t+="("+n.offset+"),"+n.text+"("+(n.offset+n.duration).toFixed(2)+")",n):(t+="("+n.offset+"),"+n.text,n)}),t}},created:function(){var e=[];try{var t=localStorage.getItem("textArr");e=t?JSON.parse(t):[]}catch(n){}this.textArr=e,this.customAudioText=localStorage.getItem("customAudioText")||"",this.customDesignText=localStorage.getItem("customDesignText")||"",this.customSrtContent=localStorage.getItem("customSrtContent")||"",console.log(localStorage.getItem("peiyinJosnStr"),"===="),this.peiyinJosnStr=localStorage.getItem("peiyinJosnStr")||'{\n\t"旁白":"阿森", "主持人":"小鹏", "观众1":"七哥","观众2":"小光","观众3":"希涵","观众4":"台湾玉儿",\n\t"叶云成":"皓宇","叶韵诗":"小南","叶韵音":"程程","叶韵影":"小薛","叶韵仙":"瑶瑶",\n\t"叶韵诗爸爸":"顾辉", "系统":"成都宝儿"\n\t}',this.isMobile=null!==navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},mounted:function(){var e=I.a.create({mediaType:"video",backgroundColor:"rgb(105,160,174, 0.1)",container:"#waveform",waveColor:"violet",barWidth:2,responsive:!0,scrollParent:!0,progressColor:"purple",plugins:[j.a.create({container:"#wave-timeline",primaryColor:"blue",secondaryColor:"red",primaryFontColor:"blue",secondaryFontColor:"red"}),D.a.create({})]});this.wavesurfer=e;var t=this.getParaByName("url");if(t){t="https://vkceyugu.cdn.bspapp.com"+decodeURIComponent(t),e.load(t);var n=this;e.on("ready",function(){n.animationTime=e.getDuration().toFixed(2);var t=n.getCanvasBars(e),r=e.getDuration();n.getTextTime(t,r)}),e.on("audioprocess",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)}),e.on("seek",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)})}},methods:{copyTextToClipboard:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return t.$message.success("复制成功")},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return t.$message.error("复制失败, 请手动复制")},i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){window.getSelection().removeAllRanges();var o=document.createRange();o.selectNode(i),window.getSelection().addRange(o);var a=document.execCommand("copy");return a?n():r(),window.getSelection().removeAllRanges(),void document.body.removeChild(i)}var s=document.execCommand("copy");s?n():r()}catch(c){r(c)}document.body.removeChild(i)},setShowScript:function(){this.show=!this.show},getTextTime:function(e,t){var n;e=M.a.map(e,function(e){return e>0?1:0});var r=t/e.length,i=e.length/t,o=M.a.filter(e.join().split(","+new Array(Math.floor(2*i)).fill(0).join(",")+","),function(e){return e}),a=0,s=[0];M.a.compact(M.a.map(o,function(e,t){if(a+=e.split(",").length+(0===t?0:Math.floor(2*i)),t===o.length-1)return null;s.push.apply(s,[a*r,a*r+Math.floor(2*i)*r])})),s.push(this.animationTime),this.sliceTimesArr=M.a.chunk(s,2);var c,u=0,p=M.a.map(o,function(e,t){var n=!1,i=[];return e.split(",").map(function(e,t){n||(n=!!e,n&&(i[0]=r*(t+1)+u))}),i[1]=r*e.split(",").length+u,u=i[1],i});(this.peopleTimeArr=p,null!==(n=M.a.last(p))&&void 0!==n&&n[1])&&(this.animationTime1=null===(c=M.a.last(p))||void 0===c?void 0:c[1])},getCanvasBars:function(e){var t=Math.round(e.getDuration()*e.params.minPxPerSec*e.params.pixelRatio),n=e.drawer.getWidth(),r=t,i=0,o=Math.max(i+n,r);e.params.fillParent&&(!e.params.scrollParent||t<n)&&(r=n,i=0,o=r);var a=e.backend.getPeaks(r,i,o),s=1,c=!0,u=192,p=c?2:1,l=a.length/p,d=e.params.barWidth*e.params.pixelRatio,f=null===e.params.barGap?Math.max(e.params.pixelRatio,d/2):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),m=d+f,h=l/r,v=i,g=o,y=v,b=[];for(y;y<g;y+=m){var _=0,S=Math.floor(y*h)*p,C=Math.floor((y+m)*h)*p;do{var P=Math.abs(a[S]);P>_&&(_=P),S+=p}while(S<C);var w=Math.round(_/s*u);b.push(w)}return b},changAudioRate:function(e){this.wavesurfer.setPlaybackRate(e)},stepChange:function(e){this.wavesurfer.seekAndCenter(e/100)},playWave:function(){this.wavesurfer.playPause()},getParaByName:function(e){var t=window.location.search;if(t=t.substr(1),"undefined"===typeof e)return t;for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r];if(n[r]=i.split("="),n[r][0]==e)return i.replace(e+"=","")}return""},initCancas:function(){var e=document.getElementById("canvas");this.canvas=e;var t=e.getContext("2d");t.fillStyle="#fff",this.cxt=t;var n={height:200,width:this.canvasWidth,start:"00:00:00",end:"00:20:10",size:300,x:20,y:70,w:10,h:10,mousedown:!1};this.config=n,this.showCanvas();var r=document.getElementsByClassName("blueBg")[0];this.topMoveBox=r,r.style.left="-40px",this.imgWidth=this.videoLong/this.number*100+"px",this.pickeddeng=document.getElementById("pickeddeng")},handleChange:function(e){this.uploadfile=e.target.files,this.wavesurfer.loadBlob(e.target.files[0]);var t=this;this.wavesurfer.on("ready",function(){t.animationTime=wavesurfer.getDuration().toFixed(2)})},getAudioText:function(){var e=document.getElementById("download-url");if(e&&e.href){var t=this.$loading({lock:!0,text:"生成文案中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"audio-text-loading"});this.stt(t)}else this.$message.error("请先执行命令, 生成wav文件")},trancodeWav:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(document.getElementById("download-url").href).then(function(e){return e.blob()});case 2:return t=e.sent,e.abrupt("return",new File([t],"audio.wav",{type:"audio/x-wav"}));case 4:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),getAuthToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],t||this._isExpiration()){e.next=3;break}return e.abrupt("return",localStorage.getItem("ssmlToken"));case 3:return e.next=5,fetch("https://e37cad50-87bf-4e22-8965-c7e9ed358a6c.bspapp.com/text-to-speech/get-person-token-for-speech").then(function(e){return e.json()});case 5:if(n=e.sent,!(n.token.length>50)){e.next=11;break}return r=n.token,localStorage.setItem("data_expiration","".concat(Date.parse(new Date)+18e4)),localStorage.setItem("ssmlToken",r),e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_isExpiration:function(){var e=Date.parse(new Date),t=localStorage.getItem("data_expiration");return!t||+e>+t},stt:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c,u,p,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.next=3,this.trancodeWav();case 3:return r=e.sent,i=window.SpeechSDK,e.next=7,this.getAuthToken();case 7:o=e.sent,a="eastus",s=i.AudioConfig.fromWavFileInput(r),c=i.SpeechConfig.fromAuthorizationToken(o,a),c.speechRecognitionLanguage="zh-CN",c.setServiceProperty("punctuation","explicit",i.ServicePropertyChannel.UriQueryParameter),u=new i.SpeechRecognizer(c,s),p="",l=[],u.recognizing=function(e,t){},u.recognized=function(e,n){p+=(n.result.text||"")+"\n",t.text="生成文案中: ".concat(p),l.push({offset:n.result.privOffset/1e7,duration:n.result.privDuration/1e7,text:n.result.text}),n.result.reason==ResultReason.RecognizedSpeech?console.log("RECOGNIZED: Text=".concat(n.result.text)):n.result.reason==ResultReason.NoMatch&&console.log("NOMATCH: Speech could not be recognized.")},u.canceled=function(e,n){console.log("CANCELED: Reason=".concat(n.reason)),t.close(),n.reason==CancellationReason.Error&&(console.log('"CANCELED: ErrorCode='.concat(n.errorCode)),console.log('"CANCELED: ErrorDetails='.concat(n.errorDetails)),console.log("CANCELED: Did you update the key and location/region info?")),u.stopContinuousRecognitionAsync()},u.sessionStopped=function(e,r){t.close(),n.textArr=l,localStorage.setItem("textArr",JSON.stringify(l)),u.stopContinuousRecognitionAsync()},u.startContinuousRecognitionAsync();case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},watch:{}},ye=ge,be=(n("3b14"),Object(C["a"])(ye,O,R,!1,null,null,null)),_e=be.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"file"},[n("input",{attrs:{type:"file",name:"file",accept:".mp4, .m4v, .3gp, .mpg, .flv, .f4v, .swf, .avi, .gif, .wmv, .rmvb, .mov, .mts, .m2t, .webm, .ogg, .mkv, .mp3, .mp2, .mp1, .wav, .aif, .aiff, .au, .ra, .rm, .ram, .mid, .rmi"},on:{change:e.handleChange}}),e._v("上传音视频文件")]),n("div",{staticClass:"common-title"},[n("audioFormat",{attrs:{uploadfile:e.uploadfile,sliceTimesArr:e.sliceTimesArr}})],1),n("div",{staticClass:"common-title"},[n("el-button",{on:{click:function(t){return e.playWave()}}},[e._v("播放/暂停")]),n("span",{staticClass:"mgx10"},[e._v("总时长: "+e._s(this.animationTime)+"s")]),n("span",[e._v("当前时间: "+e._s(this.curPlayingTime)+"s")]),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("播放速度:")]),n("el-col",{attrs:{span:18}},[n("el-input-number",{attrs:{precision:1,step:.1,min:0,max:2},on:{change:e.changAudioRate},model:{value:e.audioRate,callback:function(t){e.audioRate=t},expression:"audioRate"}})],1)],1),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("时间进度:")]),n("el-col",{attrs:{span:18}},[n("el-slider",{attrs:{step:1},on:{change:e.stepChange},model:{value:e.sliderValue,callback:function(t){e.sliderValue=t},expression:"sliderValue"}})],1)],1)],1),n("div",{attrs:{id:"waveform"}}),n("div",{attrs:{id:"wave-timeline"}}),n("div",e._l(e.allSpeakerDict,function(t,r){return n("div",[n("h4",[e._v(e._s("undefiend"===r?"其他":r)+": ")]),e._l(t,function(r,i){return n("span",["2"==r.speakerGender&&"1"==t[i-1].speakerGender?n("br"):e._e(),e._v("\n                "+e._s("2"==r.speakerGender&&"1"==t[i-1].speakerGender?"-----(女)":"")+"\n                "+e._s(r.speakerName)+":\n            ")])})],2)}),0),n("h2",[e._v("\n        制作动画流程：\n      ")]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"1. 输入设计文案",name:"first"}},[n("div",{staticClass:"common-title"},[e._v("\n              情绪: 开心, 生气, 坏笑, 难过; 镜头改变: 对应人物静态数字 "),n("br"),e._v("\n              默认镜头顺序 = {'小唐': 1, '宝哥': 2, '小俊': 3, '宁宁': 4, '小明': 5, '系统': 6}"),n("br"),e._v("\n              // 镜头顺序 = {'小唐': 11, '宝哥': 12, '小俊': 13, '宁宁': 14, '小明': 15}"),n("br"),e._v("\n              [p500] 停顿0.5s\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:20},placeholder:"输入设计文案"},model:{value:e.customDesignText,callback:function(t){e.customDesignText=t},expression:"customDesignText"}})],1),n("el-tab-pane",{attrs:{label:"2. 生成配音",name:"second"}},[n("div",{staticClass:"common-title"},[e._v("\n            2. 生成配音"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.peiyinStr)}}},[e._v("复制")]),n("br"),e._v("\n            ("),n("br"),e._v("\n              复制内容到"),n("a",{attrs:{href:"https://peiyin.xunfei.cn/make/",target:"__blank"}},[e._v("https://peiyin.xunfei.cn/make/origin")]),n("br"),e._v("\n              按F12到Console执行内容，打印urlList，复制链接到上面的音频合并, 执行命令并下载音频;"),n("br"),e._v("\n            )\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"{'旁白': '阿森'}"},model:{value:e.peiyinJosnStr,callback:function(t){e.peiyinJosnStr=t},expression:"peiyinJosnStr"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.peiyinStr,callback:function(t){e.peiyinStr=t},expression:"peiyinStr"}}),n("div",{staticClass:"common-title"},[e._v("\n            格式化的文案"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.customAudioText1Srt)}}},[e._v("复制")]),n("br"),e._v("\n            (利用这个文案，搭配剪映, 导入配音去生成srt文件)\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.customAudioText1Srt,callback:function(t){e.customAudioText1Srt=t},expression:"customAudioText1Srt"}})],1),n("el-tab-pane",{attrs:{label:"3. 输入srt内容;4. 自动生成动画脚本",name:"third"}},[n("div",{staticClass:"common-title"},[e._v("\n            3. 输入srt内容\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"输入srt内容"},model:{value:e.customSrtContent,callback:function(t){e.customSrtContent=t},expression:"customSrtContent"}}),n("div",{staticClass:"common-title"},[e._v("\n\t\t    4. 输入音频路径, 例如：D:\\FFOutput\\audio_2023-09-03_170106.mp3\n\t\t  ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"输入音频路径"},model:{value:e.customAudioContent,callback:function(t){e.customAudioContent=t},expression:"customAudioContent"}}),n("div",{staticClass:"common-title"},[e._v("\n\t\t    5. 输入标题, 例如：什么！岸田叛变漂亮国,吓坏了来拜\n\t\t  ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"输入音频路径"},model:{value:e.customTitleContent,callback:function(t){e.customTitleContent=t},expression:"customTitleContent"}}),n("div",{staticClass:"common-title"},[e._v("\n            6. 自动生成动画脚本\n            "),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl)}}},[e._v("复制第一套人物(例子：老奥.mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl2)}}},[e._v("复制第二套人物(例子：老奥(1).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl3)}}},[e._v("复制第二套人物(例子：老奥(2).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl4)}}},[e._v("复制第二套人物(例子：老奥(3).mp4)")]),n("br"),e._v("\n            （需要完成1、3步, 然后复制内容替换脚本文件）\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6},disabled:"",placeholder:"动画脚本"},model:{value:e.animationjsfl,callback:function(t){e.animationjsfl=t},expression:"animationjsfl"}})],1)],1)],1)},Ce=[];function Pe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ke={components:{videoView:q,audioFormat:J,animationFlash:de},props:["isLandscape"],data:function(){return{sliderValue:0,isMobile:!1,textArr:[],uploadfile:null,animationTime:0,animationTime1:0,wavesurfer:null,curPlayingTime:0,audioRate:1,customAudioText:"",customDesignText:"",customSrtContent:"",customAudioContent:"",customTitleContent:"",textLines:0,peopleTimeArr:[],customAudioTextTimes:[],sliceTimesArr:[],show:!0,activeName:"first",peiyinJosnStr:""}},computed:{allSpeakerDict:function(){var e=fe.map(function(e){var t,n;return we(we({},e),{},{tag1:null===(t=e.tag.split("|").filter(function(e){return["老年","中年","青年","少儿"].includes(e)}))||void 0===t?void 0:t[0],tag2:null===(n=e.tag.split("|").filter(function(e){return["普通话"].includes(e)}))||void 0===n?void 0:n[0]})});return M.a.groupBy(M.a.orderBy(e,["speakerGender","tag2"],"desc","asc"),function(e){return e.tag1})},customAudioText1Srt:function(){localStorage.setItem("customDesignText",this.customDesignText),localStorage.setItem("peiyinJosnStr",this.peiyinJosnStr);var e=this.customDesignText.replace(/[,|，]/gi,",").replace(/[:|：]/gi,":").replace(/[)|）]/gi,")").split("\n").filter(function(e){return e}).map(function(e){return e.includes(":")?e.split(":")[1].trim():e.includes(")")?e.split(")")[1].trim():e.trim()}).join("\n");return e},peiyinStr:function(){var e={},t=M.a.groupBy(M.a.values(me),"common_id");M.a.map(fe,function(n){var r,i,o,a;null!==t&&void 0!==t&&null!==(r=t[n.commonId])&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.speaker_no?e[n.speakerName]={content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te75][n0]$content$",vid:null===t||void 0===t?void 0:null===(o=t[n.commonId])||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.speaker_no,volume:0,speed:"140",pitch:0,endFadeDownDuration:"0"}}:console.log(n.commonId,t)});var n={};try{var r=JSON.parse(this.peiyinJosnStr);for(var i in r)n[i]=e[r[i]]||i}catch(a){}var o=we(we({},e),{},{"系统":{content:"[em9][te50][n0]$content$",data:{engineUrl:"/synth",text:"[em9][te50][n0]$content$",vid:"130062",volume:0,speed:"79",pitch:0,endFadeDownDuration:"0"}},"旁白":{content:"[te81][n0]$content$",data:{engineUrl:"/synth",text:"[te91][n0]$content$",vid:"65270",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"宝哥":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65230",volume:0,speed:"142",pitch:0,endFadeDownDuration:"0"}},"小俊":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65070",volume:0,speed:"75",pitch:0,endFadeDownDuration:"0"}},"宁宁":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"70002",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"小明":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65110",volume:0,speed:"155",pitch:0,endFadeDownDuration:"0"}}},n);return"\nstr = `\n".concat(this.customDesignText,"\n`\n\npersonDict = ").concat(JSON.stringify(o),"\nvar resList = []\nstr.replace(/[:|：]/gi,':').replace(/[)|）]/gi,')').split('\\n').map(item => {\n    if (item.trim() === '') return\n    if(item.includes(':')) {\n        var name = item.split(':')[0].trim()\n        if(name.includes(')')) {\n        name = name.split(')')[1]\n        }\n        const obj = (personDict[name] || personDict['旁白'])\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item.split(':')[1]),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item.split(':')[1])\n            }\n        })\n    } else {\n        const obj = personDict['旁白']\n        if(item.includes(')')) {\n            item = item.split(')')[1]\n        }\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item)\n            }\n        })\n    }\n})\nasync function getAudio(res) {\n    var objItem = res.data;\n    window.sc = '0000';\n    return new Promise(function (resolve, reject) {\n        var val =\n            '{\"channel\": \"' +\n            channel +\n            '\",\"synth_text_hash_code\":\"' +\n            CryptoJS.MD5(window.replaceRightTTSMark(objItem.text)) +\n            '\"}';\n        getAjax(\n            '/1.0/works_synth_sign',\n            val,\n            true,\n            function (data) {\n                var resultInfo = eval(data);\n                synthServer = objItem.engineUrl || window.__synthServer;\n                var txtcnt = encodeURIComponent(window.replaceRightTTSMark(objItem.text));\n                var url =\n                    synthServer +\n                    '?uid=' +\n                    (window.phone || '') +\n                    '&ts=' +\n                    resultInfo.time_stamp +\n                    '&sign=' +\n                    resultInfo.sign_text +\n                    '&vid=' +\n                    objItem.vid +\n                    '&f=v2&cc=' +\n                    window.sc +\n                    '&sid=' +\n                    window.web_i_ss +\n                    '&volume=' +\n                    (objItem.volume || 0) +\n                    '&speed=' +\n                    objItem.speed +\n                    '&content=' +\n                    txtcnt +\n                    '&listen=' + 0;\n                resolve(url);\n            },\n            function (err) {\n                reject(err);\n            }\n        );\n    });\n}\nasync function getUrls() {\n    const urlList =  await new Promise(async (resolve, reject) => {\n        let urls = []\n        Promise.all(resList.map(async res => {\n            return await getAudio(res)\n        })).then((result) => {\n            window.urlList= result.map(url => ('https://peiyin.xunfei.cn' + url)).join(';')\n        })\n        // resList.map(async res => {\n        //     const url = await getAudio(res)\n        //     urls.push('https://peiyin.xunfei.cn' + url)\n        //     if (urls.length === resList.length) {\n        //         resolve(urls)\n        //     }\n        // })\n    })\n    window.urlList = urlList.join(';')\n}\ngetUrls()\n")},animationjsfl2:function(){return this.animationjsfl.replace(/.mp4"/gi,'(1).mp4"')},animationjsfl3:function(){return this.animationjsfl.replace(/.mp4"/gi,'(2).mp4"')},animationjsfl4:function(){return this.animationjsfl.replace(/.mp4"/gi,'(3).mp4"')},animationjsfl:function(){var e=this;localStorage.setItem("customSrtContent",this.customSrtContent);if(!(this.customSrtContent&&this.customDesignText&&this.customAudioContent))return"请先输入设计文案、srt内容、和音频内容";var t=this.customSrtContent.split("\n").filter(function(e){return e}),n=this.customSrtContent.split("\n").filter(function(e){return e}),r=t,i=[];this.customDesignText.split("\n").filter(function(e){return e}).map(function(t){var n=t.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o=n.includes(":")?n.split(":")[1]:n,a=n.includes(":")?n.split(":")[0]:"旁白",s="",c="",u="";if(r.forEach(function(e,t){e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,"");var n=o.substring(0,2),i=e.substring(0,2);t%3!==2||s&&c||(s||(s=r[t-1].split("--\x3e")[0].trim()),n=o.substring(o.length-2),i=e.substring(e.length-2),c||n!=i||(c=r[t-1].split("--\x3e")[1].trim(),u=t))}),""===u)return e.$message.error(o);r.splice(0,u+1),i.push({name:a,content:o,endTime:c,startTime:s})});var o=[];n.forEach(function(e,t){t%3===2&&(e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o.push({content:e,startTime:n[t-1].split("--\x3e")[0].trim().replace(",","."),endTime:n[t-1].split("--\x3e")[1].trim().replace(",",".")}))});var a=this.customDesignText.split("\n").filter(function(e){return e}).map(function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,"");return t.includes(":")?t.split(":")[0]:"旁白"});a=M.a.uniq(a);var s=[];i.forEach(function(e,t){var n=we(we({},e),{},{startTime:e.startTime.replace(/,/,"."),endTime:e.endTime.replace(/,/,".")});if(0!==t){var r=s[s.length-1];r.name===n.name?s[s.length-1]=we(we({},r),{},{endTime:n.endTime}):s.push(we(we({},n),{},{startTime:r.endTime}))}else s.push(we(we({},n),{},{startTime:"00:00:00.000"}))});var c={};s.forEach(function(e,t){var n,r=e.name,i=new Date("1970-01-01T"+e.endTime+"Z").getTime(),o=new Date("1970-01-01T"+e.startTime+"Z").getTime(),a=i-o;a>((null===(n=c[r])||void 0===n?void 0:n.duration)||0)&&(c[r]={index:t,duration:a,endTime:e.endTime,startTime:e.startTime})});var u="\n#1.下载https://www.anaconda.com/download，安装\n#2 需要新增文件夹 D:FFOutput\txt-notebook\n#3.查看jupyter配置：jupyter --config-dir; 生成配置： jupyter notebook --generate-config \n#3.1 修改配置: vi ~/.jupyter/https://jupyter_notebook_config.py\n# c.NotebookApp.notebook_dir = 'D:\\FFOutput\\txt-notebook'\n# c.NotebookApp.token = 'tangxiaotang'\n\n#查看字体包\n#import matplotlib.font_manager as fm\n#fonts = fm.fontManager.ttflist\n#font_names = [font.name for font in fonts]\n#for font in font_names:\n#    print(font)\n\n# -----TextClip文字可能加不了，第一步下载https://imagemagick.org/script/download.php， 安装，C:Program FilesImageMagick-7.1.1-Q16-HDRI加到环境变量\n# 查看moviepy位置\n#import moviepy \n#print(moviepy.__file__)\n#第二步将数据 D:anacondaLibsite-packagesmoviepy的config_defaults.py 配置 IMAGEMAGICK_BINARY = r\"C:Program FilesImageMagick-7.1.1-Q16-HDRImagick.exe\"\n#-----第三重启jupyter\n\n#!pip install opencv-python\n#!pip install moviepy\nfrom moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip, AudioFileClip, TextClip\nfrom moviepy.video.compositing.concatenate import concatenate_videoclips\nfrom moviepy.video import fx\nfrom datetime import datetime\nimport numpy as np\nimport random\nimport os\nimport cv2\ndef get_all_files(path):\n    mp4_files = []\n    png_files = []\n    png1_files = []\n    \n    # 遍历路径下的所有文件和文件夹\n    for root, dirs, files in os.walk(path):\n        # 遍历文件\n        for file in files:\n            # 获取文件的完整路径\n            file_path = os.path.join(root, file)\n            \n            # 过滤出扩展名为 '.mp4' 的文件\n            if file.endswith('.mp4'):\n                # 存储文件路径到列表中\n                mp4_files.append(file_path)\n            \n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"背景\" in file:\n                # 存储文件路径到列表中\n                png_files.append(file_path)\n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"站台\" in file:\n                # 存储文件路径到列表中\n                png1_files.append(file_path)\n    return mp4_files, png_files, png1_files\n\n# 指定要查找的路径\npath = \"C:\\Users\\Administrator\\AppData\\Local\\JianyingPro\\User Data\\Cloud files\"\n\n# 调用函数获取该路径下的所有满足条件的文件路径\nmp4_files, png_files, png1_files = get_all_files(path)\n# 在png_files列表中随机选择三个文件的路径\nrandom_png_paths = random.sample(png_files, ".concat(a.length,")\nrandom_png_paths1 = random.sample(png1_files, ").concat(a.length,")\nnameList = ").concat(JSON.stringify(a),"\n# 将两个列表组合成一个对象\nnameObject = {}\n# 背景尺寸\nrandomWidthObject = {}\n# 演讲台\nyangjiangtaiObject = {}\n# 演讲台左边位置\nyangjiangtaiLeftObject = {}\nfor i in range(len(nameList)):\n    nameObject[nameList[i]] = random_png_paths[i]\n    randomWidthObject[nameList[i]] = random.randint(2020, 5000)\n    yangjiangtaiObject[nameList[i]] = random_png_paths1[i % len(random_png_paths1)]\n    yangjiangtaiLeftObject[nameList[i]] = random.randint(-100, 100)\n\ndef remove_green_screen(clip, img_file, width):\n  background_image = ImageClip(img_file)\n  bg_clip = background_image.resize(width=width)\n  offset_y = random.randint(0, (bg_clip.size[1] - clip.size[1]))\n  offset_x = random.randint(0, (bg_clip.size[0] - clip.size[0]))\n  def process_frame(get_frame, t):\n      frame = get_frame(t)\n      hsv_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)\n\n      lower_green = np.array([55, 50, 50])\n      upper_green = np.array([65, 255, 255])\n\n      mask = cv2.inRange(hsv_frame[:, :, :3], lower_green, upper_green)\n\n      kernel = np.ones((5, 5), np.uint8)\n      opening = cv2.morphologyEx(mask, cv2.MORPH_OPEN, kernel)\n      mask = cv2.bitwise_not(opening)\n      result = cv2.bitwise_and(frame, frame, mask=mask)\n      # 将背景图像与去除绿幕的视频合成\n      result_height, result_width, _ = result.shape\n      bg_height, bg_width, _ = bg_clip.get_frame(t).shape\n      result = np.where(result == 0, bg_clip.get_frame(t)[offset_y:offset_y+result_height, offset_x:offset_x+result_width], result)\n      return result\n\n  processed_clip = clip.fl(process_frame)\n  return processed_clip\n      ");for(var p in c){var l=c[p].startTime,d=c[p].endTime,f=new Date("1970-01-01T"+l+"Z").getTime(),m=new Date("1970-01-01T"+d+"Z").getTime(),h=m-f,v=new Date(h).toISOString().substr(11,12),g=c[p].index;u+="\n# 生成".concat(p,'的视频\n# 加载视频文件\nvideo = VideoFileClip("C:\\Users\\Administrator\\AppData\\Local\\JianyingPro\\User Data\\Cloud files\\').concat(p,".mp4\")\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(v,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\n# 截取指定时间段的视频\npeople').concat(g," = video.subclip(start_seconds, end_seconds)\npeople").concat(g," = remove_green_screen(people").concat(g,", nameObject['").concat(p,"'], randomWidthObject['").concat(p,"'])\n#准备log图片\nlogo = (ImageClip(yangjiangtaiObject['").concat(p,"'])\n      .set_duration(people").concat(g,".duration) # 水印持续时间\n      .resize(height=1080) # 水印的高度，会等比缩放\n      .set_pos((yangjiangtaiLeftObject['").concat(p,"'], 100))) # 水印的位置\npeople").concat(g," = CompositeVideoClip([people").concat(g,", logo])\n      ")}return s.forEach(function(t,n){var r=t.startTime,i=t.endTime,a=new Date("1970-01-01T"+r+"Z").getTime(),p=new Date("1970-01-01T"+i+"Z").getTime(),l=p-a,d=new Date(l).toISOString().substr(11,12);if(u+="\n# 生成第".concat(n+1,"个视频\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(d,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nvideo').concat(n," = people").concat(c[t.name].index," \nsubclip").concat(n," = video").concat(n,".subclip(start_seconds, end_seconds)\n"),n===s.length-1){var f,m,h="";console.log(o),h+="\n# 封面标题\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('00:00:00.100', \"%H:%M:%S.%f\")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle01 = (TextClip('".concat((null===(f=e.customTitleContent.replace(/，/gi,",").split(","))||void 0===f?void 0:f[0])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 300))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \nsubtitle02 = (TextClip('").concat((null===(m=e.customTitleContent.replace(/，/gi,",").split(","))||void 0===m?void 0:m[1])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 530))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n             "),o.forEach(function(e,t){h+="\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('".concat(e.startTime,"', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(e.endTime,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle').concat(t," = (TextClip('").concat(e.content,"', fontsize=80, color='white', font='FangSong')\n    .set_position(('center', 900))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n")});var v=(e.customAudioContent||"").trim().replace(/\//gi,"//");u+='\ncurrent_datetime = datetime.now()\nformatted_datetime = current_datetime.strftime("%Y-%m-%d_%H%M%S")\nfinal_video = concatenate_videoclips(['.concat(s.map(function(e,t){return"subclip".concat(t)}),'])\nfinal_video_duration = final_video.duration\naudio = AudioFileClip("').concat(v,'")\nif final_video_duration > audio.duration:\n    final_video_duration = audio.duration\naudio = audio.subclip(0, final_video_duration )\nfinal_video = final_video.set_audio(audio)\n# 降低帧率\nfinal_video = final_video.set_fps(20)\n#添加文案\n# 创建字幕文本剪辑\n').concat(h,"\n\nfinal_video = CompositeVideoClip([final_video,subtitle01, subtitle02, ").concat(o.map(function(e,t){return"subtitle".concat(t)}),'])\n\noriginal_path = "D:\\FFOutput\\txt_output_video.mp4"\nnew_path = original_path.replace("output_video", formatted_datetime).replace("\\", "\\\\")\nfinal_video.write_videofile(new_path)\n')}}),u.replace(/\\/gi,"\\\\")},customAudioTextTime:function(){localStorage.setItem("customAudioText",this.customAudioText);var e=this.customAudioText.replace(/：/gi,":").split("\n").filter(function(e){return e});this.textLines=e.length;var t=M.a.map(this.peopleTimeArr,function(t,n){var r,i,o,a=M.a.includes(e[n],":")?null===(r=e[n])||void 0===r?void 0:null===(i=r.split(":"))||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.trim():"旁白";return{title:a,start:t[0].toFixed(2),end:t[1].toFixed(2)}});return this.customAudioText=M.a.map(e,function(e,n){var r,i,o;return null!==t&&void 0!==t&&null!==(r=t[n])&&void 0!==r&&r.start?e.split("|")[0]+"|"+(null===(i=t[n])||void 0===i?void 0:i.start)+"-"+(null===(o=t[n])||void 0===o?void 0:o.end):e}).join("\n"),this.customAudioTextTimes=t,JSON.stringify(t)},audioText:function(){var e=this,t="";return this.textArr.map(function(n,r){return r===e.textArr.length-1?(t+="("+n.offset+"),"+n.text+"("+(n.offset+n.duration).toFixed(2)+")",n):(t+="("+n.offset+"),"+n.text,n)}),t}},created:function(){var e=[];try{var t=localStorage.getItem("textArr");e=t?JSON.parse(t):[]}catch(n){}this.textArr=e,this.customAudioText=localStorage.getItem("customAudioText")||"",this.customDesignText=localStorage.getItem("customDesignText")||"",this.customSrtContent=localStorage.getItem("customSrtContent")||"",console.log(localStorage.getItem("peiyinJosnStr"),"========="),this.peiyinJosnStr=localStorage.getItem("peiyinJosnStr")||'{\n    "旁白":"阿森", "小汀":"小鹏", "老奥":"宝哥","老拜":"河南小坤","小岸田":"小光","小耶":"希涵","小哈":"小南","小雷":"程程",\n    "老普":"皓宇","小龙":"顾辉","小马":"管哥","小龙":"小洋","老特":"辉叔","小尹":"小宇","小布":"湖北小王",\n\t"小泽":"韦香主","小朔":"小峰","老莫":"小钟",\n\t"叶韵影":"小薛","叶韵仙":"瑶瑶","系统":"成都宝儿"\n    }',this.isMobile=null!==navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},mounted:function(){var e=I.a.create({mediaType:"video",backgroundColor:"rgb(105,160,174, 0.1)",container:"#waveform",waveColor:"violet",barWidth:2,responsive:!0,scrollParent:!0,progressColor:"purple",plugins:[j.a.create({container:"#wave-timeline",primaryColor:"blue",secondaryColor:"red",primaryFontColor:"blue",secondaryFontColor:"red"}),D.a.create({})]});this.wavesurfer=e;var t=this.getParaByName("url");if(t){t="https://vkceyugu.cdn.bspapp.com"+decodeURIComponent(t),e.load(t);var n=this;e.on("ready",function(){n.animationTime=e.getDuration().toFixed(2);var t=n.getCanvasBars(e),r=e.getDuration();n.getTextTime(t,r)}),e.on("audioprocess",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)}),e.on("seek",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)})}},methods:{copyTextToClipboard:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return t.$message.success("复制成功")},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return t.$message.error("复制失败, 请手动复制")},i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){window.getSelection().removeAllRanges();var o=document.createRange();o.selectNode(i),window.getSelection().addRange(o);var a=document.execCommand("copy");return a?n():r(),window.getSelection().removeAllRanges(),void document.body.removeChild(i)}var s=document.execCommand("copy");s?n():r()}catch(c){r(c)}document.body.removeChild(i)},setShowScript:function(){this.show=!this.show},getTextTime:function(e,t){var n;e=M.a.map(e,function(e){return e>0?1:0});var r=t/e.length,i=e.length/t,o=M.a.filter(e.join().split(","+new Array(Math.floor(2*i)).fill(0).join(",")+","),function(e){return e}),a=0,s=[0];M.a.compact(M.a.map(o,function(e,t){if(a+=e.split(",").length+(0===t?0:Math.floor(2*i)),t===o.length-1)return null;s.push.apply(s,[a*r,a*r+Math.floor(2*i)*r])})),s.push(this.animationTime),this.sliceTimesArr=M.a.chunk(s,2);var c,u=0,p=M.a.map(o,function(e,t){var n=!1,i=[];return e.split(",").map(function(e,t){n||(n=!!e,n&&(i[0]=r*(t+1)+u))}),i[1]=r*e.split(",").length+u,u=i[1],i});(this.peopleTimeArr=p,null!==(n=M.a.last(p))&&void 0!==n&&n[1])&&(this.animationTime1=null===(c=M.a.last(p))||void 0===c?void 0:c[1])},getCanvasBars:function(e){var t=Math.round(e.getDuration()*e.params.minPxPerSec*e.params.pixelRatio),n=e.drawer.getWidth(),r=t,i=0,o=Math.max(i+n,r);e.params.fillParent&&(!e.params.scrollParent||t<n)&&(r=n,i=0,o=r);var a=e.backend.getPeaks(r,i,o),s=1,c=!0,u=192,p=c?2:1,l=a.length/p,d=e.params.barWidth*e.params.pixelRatio,f=null===e.params.barGap?Math.max(e.params.pixelRatio,d/2):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),m=d+f,h=l/r,v=i,g=o,y=v,b=[];for(y;y<g;y+=m){var _=0,S=Math.floor(y*h)*p,C=Math.floor((y+m)*h)*p;do{var P=Math.abs(a[S]);P>_&&(_=P),S+=p}while(S<C);var w=Math.round(_/s*u);b.push(w)}return b},changAudioRate:function(e){this.wavesurfer.setPlaybackRate(e)},stepChange:function(e){this.wavesurfer.seekAndCenter(e/100)},playWave:function(){this.wavesurfer.playPause()},getParaByName:function(e){var t=window.location.search;if(t=t.substr(1),"undefined"===typeof e)return t;for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r];if(n[r]=i.split("="),n[r][0]==e)return i.replace(e+"=","")}return""},initCancas:function(){var e=document.getElementById("canvas");this.canvas=e;var t=e.getContext("2d");t.fillStyle="#fff",this.cxt=t;var n={height:200,width:this.canvasWidth,start:"00:00:00",end:"00:20:10",size:300,x:20,y:70,w:10,h:10,mousedown:!1};this.config=n,this.showCanvas();var r=document.getElementsByClassName("blueBg")[0];this.topMoveBox=r,r.style.left="-40px",this.imgWidth=this.videoLong/this.number*100+"px",this.pickeddeng=document.getElementById("pickeddeng")},handleChange:function(e){this.uploadfile=e.target.files,this.wavesurfer.loadBlob(e.target.files[0]);var t=this;this.wavesurfer.on("ready",function(){t.animationTime=wavesurfer.getDuration().toFixed(2)})},getAudioText:function(){var e=document.getElementById("download-url");if(e&&e.href){var t=this.$loading({lock:!0,text:"生成文案中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"audio-text-loading"});this.stt(t)}else this.$message.error("请先执行命令, 生成wav文件")},trancodeWav:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(document.getElementById("download-url").href).then(function(e){return e.blob()});case 2:return t=e.sent,e.abrupt("return",new File([t],"audio.wav",{type:"audio/x-wav"}));case 4:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),getAuthToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],t||this._isExpiration()){e.next=3;break}return e.abrupt("return",localStorage.getItem("ssmlToken"));case 3:return e.next=5,fetch("https://e37cad50-87bf-4e22-8965-c7e9ed358a6c.bspapp.com/text-to-speech/get-person-token-for-speech").then(function(e){return e.json()});case 5:if(n=e.sent,!(n.token.length>50)){e.next=11;break}return r=n.token,localStorage.setItem("data_expiration","".concat(Date.parse(new Date)+18e4)),localStorage.setItem("ssmlToken",r),e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_isExpiration:function(){var e=Date.parse(new Date),t=localStorage.getItem("data_expiration");return!t||+e>+t},stt:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c,u,p,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.next=3,this.trancodeWav();case 3:return r=e.sent,i=window.SpeechSDK,e.next=7,this.getAuthToken();case 7:o=e.sent,a="eastus",s=i.AudioConfig.fromWavFileInput(r),c=i.SpeechConfig.fromAuthorizationToken(o,a),c.speechRecognitionLanguage="zh-CN",c.setServiceProperty("punctuation","explicit",i.ServicePropertyChannel.UriQueryParameter),u=new i.SpeechRecognizer(c,s),p="",l=[],u.recognizing=function(e,t){},u.recognized=function(e,n){p+=(n.result.text||"")+"\n",t.text="生成文案中: ".concat(p),l.push({offset:n.result.privOffset/1e7,duration:n.result.privDuration/1e7,text:n.result.text}),n.result.reason==ResultReason.RecognizedSpeech?console.log("RECOGNIZED: Text=".concat(n.result.text)):n.result.reason==ResultReason.NoMatch&&console.log("NOMATCH: Speech could not be recognized.")},u.canceled=function(e,n){console.log("CANCELED: Reason=".concat(n.reason)),t.close(),n.reason==CancellationReason.Error&&(console.log('"CANCELED: ErrorCode='.concat(n.errorCode)),console.log('"CANCELED: ErrorDetails='.concat(n.errorDetails)),console.log("CANCELED: Did you update the key and location/region info?")),u.stopContinuousRecognitionAsync()},u.sessionStopped=function(e,r){t.close(),n.textArr=l,localStorage.setItem("textArr",JSON.stringify(l)),u.stopContinuousRecognitionAsync()},u.startContinuousRecognitionAsync();case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},watch:{}},Oe=ke,Re=(n("9ff9"),Object(C["a"])(Oe,Se,Ce,!1,null,null,null)),Te=Re.exports,Ie=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"file"},[n("input",{attrs:{type:"file",name:"file",accept:".mp4, .m4v, .3gp, .mpg, .flv, .f4v, .swf, .avi, .gif, .wmv, .rmvb, .mov, .mts, .m2t, .webm, .ogg, .mkv, .mp3, .mp2, .mp1, .wav, .aif, .aiff, .au, .ra, .rm, .ram, .mid, .rmi"},on:{change:e.handleChange}}),e._v("上传音视频文件")]),n("div",{staticClass:"common-title"},[n("audioFormat",{attrs:{uploadfile:e.uploadfile,sliceTimesArr:e.sliceTimesArr}})],1),n("div",{staticClass:"common-title"},[n("el-button",{on:{click:function(t){return e.playWave()}}},[e._v("播放/暂停")]),n("span",{staticClass:"mgx10"},[e._v("总时长: "+e._s(this.animationTime)+"s")]),n("span",[e._v("当前时间: "+e._s(this.curPlayingTime)+"s")]),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("播放速度:")]),n("el-col",{attrs:{span:18}},[n("el-input-number",{attrs:{precision:1,step:.1,min:0,max:2},on:{change:e.changAudioRate},model:{value:e.audioRate,callback:function(t){e.audioRate=t},expression:"audioRate"}})],1)],1),n("el-row",[n("el-col",{attrs:{span:e.isMobile?6:3}},[e._v("时间进度:")]),n("el-col",{attrs:{span:18}},[n("el-slider",{attrs:{step:1},on:{change:e.stepChange},model:{value:e.sliderValue,callback:function(t){e.sliderValue=t},expression:"sliderValue"}})],1)],1)],1),n("div",{attrs:{id:"waveform"}}),n("div",{attrs:{id:"wave-timeline"}}),n("div",e._l(e.allSpeakerDict,function(t,r){return n("div",[n("h4",[e._v(e._s("undefiend"===r?"其他":r)+": ")]),e._l(t,function(r,i){return n("span",["2"==r.speakerGender&&"1"==t[i-1].speakerGender?n("br"):e._e(),e._v("\n                "+e._s("2"==r.speakerGender&&"1"==t[i-1].speakerGender?"-----(女)":"")+"\n                "+e._s(r.speakerName)+":\n            ")])})],2)}),0),n("h2",[e._v("\n        制作动画流程：\n      ")]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"1. 输入设计文案",name:"first"}},[n("div",{staticClass:"common-title"},[e._v("\n              情绪: 开心, 生气, 坏笑, 难过; 镜头改变: 对应人物静态数字 "),n("br"),e._v("\n              默认镜头顺序 = {'小唐': 1, '宝哥': 2, '小俊': 3, '宁宁': 4, '小明': 5, '系统': 6}"),n("br"),e._v("\n              // 镜头顺序 = {'小唐': 11, '宝哥': 12, '小俊': 13, '宁宁': 14, '小明': 15}"),n("br"),e._v("\n              [p500] 停顿0.5s\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:20},placeholder:"输入设计文案"},model:{value:e.customDesignText,callback:function(t){e.customDesignText=t},expression:"customDesignText"}})],1),n("el-tab-pane",{attrs:{label:"2. 生成配音",name:"second"}},[n("div",{staticClass:"common-title"},[e._v("\n            2. 生成配音"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.peiyinStr)}}},[e._v("复制")]),n("br"),e._v("\n            ("),n("br"),e._v("\n              复制内容到"),n("a",{attrs:{href:"https://peiyin.xunfei.cn/make/",target:"__blank"}},[e._v("https://peiyin.xunfei.cn/make/origin")]),n("br"),e._v("\n              按F12到Console执行内容，打印urlList，复制链接到上面的音频合并, 执行命令并下载音频;"),n("br"),e._v("\n            )\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"{'旁白': '阿森'}"},model:{value:e.peiyinJosnStr,callback:function(t){e.peiyinJosnStr=t},expression:"peiyinJosnStr"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.peiyinStr,callback:function(t){e.peiyinStr=t},expression:"peiyinStr"}}),n("div",{staticClass:"common-title"},[e._v("\n            格式化的文案"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.customAudioText1Srt)}}},[e._v("复制")]),n("br"),e._v("\n            (利用这个文案，搭配剪映, 导入配音去生成srt文件)\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},disabled:"",placeholder:"格式化的文案，可以配合剪映生成srt文件"},model:{value:e.customAudioText1Srt,callback:function(t){e.customAudioText1Srt=t},expression:"customAudioText1Srt"}})],1),n("el-tab-pane",{attrs:{label:"3. 输入srt内容;4. 自动生成动画脚本",name:"third"}},[n("div",{staticClass:"common-title"},[e._v("\n            3. 输入srt内容\n          ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"输入srt内容"},model:{value:e.customSrtContent,callback:function(t){e.customSrtContent=t},expression:"customSrtContent"}}),n("div",{staticClass:"common-title"},[e._v("\n\t\t    4. 输入音频路径, 例如：D:\\FFOutput\\audio_2023-09-03_170106.mp3\n\t\t  ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"输入音频路径"},model:{value:e.customAudioContent,callback:function(t){e.customAudioContent=t},expression:"customAudioContent"}}),n("div",{staticClass:"common-title"},[e._v("\n\t\t    5. 输入标题, 例如：什么！岸田叛变漂亮国,吓坏了来拜\n\t\t  ")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"输入音频路径"},model:{value:e.customTitleContent,callback:function(t){e.customTitleContent=t},expression:"customTitleContent"}}),n("div",{staticClass:"common-title"},[e._v("\n            6. 自动生成动画脚本\n            "),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl)}}},[e._v("复制第一套人物(例子：老奥.mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl2)}}},[e._v("复制第二套人物(例子：老奥(1).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl3)}}},[e._v("复制第二套人物(例子：老奥(2).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl4)}}},[e._v("复制第二套人物(例子：老奥(3).mp4)")]),n("br"),e._v("\n            （需要完成1、3步, 然后复制内容替换脚本文件）\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6},disabled:"",placeholder:"动画脚本"},model:{value:e.animationjsfl,callback:function(t){e.animationjsfl=t},expression:"animationjsfl"}})],1)],1)],1)},Ae=[];function je(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var De={components:{videoView:q,audioFormat:J,animationFlash:de},props:["isLandscape"],data:function(){return{sliderValue:0,isMobile:!1,textArr:[],uploadfile:null,animationTime:0,animationTime1:0,wavesurfer:null,curPlayingTime:0,audioRate:1,customAudioText:"",customDesignText:"",customSrtContent:"",customAudioContent:"D:\\FFOutput\\合成 (1).wav",customTitleContent:"老拜，什么",textLines:0,peopleTimeArr:[],customAudioTextTimes:[],sliceTimesArr:[],show:!0,activeName:"first",peiyinJosnStr:""}},computed:{allSpeakerDict:function(){var e=fe.map(function(e){var t,n;return Ee(Ee({},e),{},{tag1:null===(t=e.tag.split("|").filter(function(e){return["老年","中年","青年","少儿"].includes(e)}))||void 0===t?void 0:t[0],tag2:null===(n=e.tag.split("|").filter(function(e){return["普通话"].includes(e)}))||void 0===n?void 0:n[0]})});return M.a.groupBy(M.a.orderBy(e,["speakerGender","tag2"],"desc","asc"),function(e){return e.tag1})},customAudioText1Srt:function(){localStorage.setItem("customDesignText",this.customDesignText),localStorage.setItem("peiyinJosnStr",this.peiyinJosnStr);var e=this.customDesignText.replace(/[,|，]/gi,",").replace(/[:|：]/gi,":").replace(/[)|）]/gi,")").split("\n").filter(function(e){return e}).map(function(e){return e.includes(":")?e.split(":")[1].trim():e.includes(")")?e.split(")")[1].trim():e.trim()}).join("\n");return e},peiyinStr:function(){var e={},t=M.a.groupBy(M.a.values(me),"common_id");M.a.map(fe,function(n){var r,i,o,a;null!==t&&void 0!==t&&null!==(r=t[n.commonId])&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.speaker_no?e[n.speakerName]={content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te75][n0]$content$",vid:null===t||void 0===t?void 0:null===(o=t[n.commonId])||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.speaker_no,volume:0,speed:"140",pitch:0,endFadeDownDuration:"0"}}:console.log(n.commonId,t)});var n={};try{var r=JSON.parse(this.peiyinJosnStr);for(var i in r)n[i]=e[r[i]]||i}catch(a){}var o=Ee(Ee({},e),{},{"系统":{content:"[em9][te50][n0]$content$",data:{engineUrl:"/synth",text:"[em9][te50][n0]$content$",vid:"130062",volume:0,speed:"79",pitch:0,endFadeDownDuration:"0"}},"旁白":{content:"[te81][n0]$content$",data:{engineUrl:"/synth",text:"[te91][n0]$content$",vid:"65270",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"宝哥":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65230",volume:0,speed:"142",pitch:0,endFadeDownDuration:"0"}},"小俊":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65070",volume:0,speed:"75",pitch:0,endFadeDownDuration:"0"}},"宁宁":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"70002",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"小明":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65110",volume:0,speed:"155",pitch:0,endFadeDownDuration:"0"}}},n);return"\nstr = `\n".concat(this.customDesignText,"\n`\n\npersonDict = ").concat(JSON.stringify(o),"\nvar resList = []\nstr.replace(/[:|：]/gi,':').replace(/[)|）]/gi,')').split('\\n').map(item => {\n    if (item.trim() === '') return\n    if(item.includes(':')) {\n        var name = item.split(':')[0].trim()\n        if(name.includes(')')) {\n        name = name.split(')')[1]\n        }\n        const obj = (personDict[name] || personDict['旁白'])\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item.split(':')[1]),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item.split(':')[1])\n            }\n        })\n    } else {\n        const obj = personDict['旁白']\n        if(item.includes(')')) {\n            item = item.split(')')[1]\n        }\n        resList.push({\n            ...obj, \n            content: obj.content.replace(/\\$content\\$/gi, item),\n            data: {\n                ...obj.data,\n                text: obj.content.replace(/\\$content\\$/gi, item)\n            }\n        })\n    }\n})\nasync function getAudio(res) {\n    var objItem = res.data;\n    window.sc = '0000';\n    return new Promise(function (resolve, reject) {\n        var val =\n            '{\"channel\": \"' +\n            channel +\n            '\",\"synth_text_hash_code\":\"' +\n            CryptoJS.MD5(window.replaceRightTTSMark(objItem.text)) +\n            '\"}';\n        getAjax(\n            '/1.0/works_synth_sign',\n            val,\n            true,\n            function (data) {\n                var resultInfo = eval(data);\n                synthServer = objItem.engineUrl || window.__synthServer;\n                var txtcnt = encodeURIComponent(window.replaceRightTTSMark(objItem.text));\n                var url =\n                    synthServer +\n                    '?uid=' +\n                    (window.phone || '') +\n                    '&ts=' +\n                    resultInfo.time_stamp +\n                    '&sign=' +\n                    resultInfo.sign_text +\n                    '&vid=' +\n                    objItem.vid +\n                    '&f=v2&cc=' +\n                    window.sc +\n                    '&sid=' +\n                    window.web_i_ss +\n                    '&volume=' +\n                    (objItem.volume || 0) +\n                    '&speed=' +\n                    objItem.speed +\n                    '&content=' +\n                    txtcnt +\n                    '&listen=' + 0;\n                resolve(url);\n            },\n            function (err) {\n                reject(err);\n            }\n        );\n    });\n}\nasync function getUrls() {\n    const urlList =  await new Promise(async (resolve, reject) => {\n        let urls = []\n        Promise.all(resList.map(async res => {\n            return await getAudio(res)\n        })).then((result) => {\n            window.urlList= result.map(url => ('https://peiyin.xunfei.cn' + url)).join(';')\n        })\n        // resList.map(async res => {\n        //     const url = await getAudio(res)\n        //     urls.push('https://peiyin.xunfei.cn' + url)\n        //     if (urls.length === resList.length) {\n        //         resolve(urls)\n        //     }\n        // })\n    })\n    window.urlList = urlList.join(';')\n}\ngetUrls()\n")},animationjsfl2:function(){return this.animationjsfl.replace(/.mp4"/gi,'(1).mp4"')},animationjsfl3:function(){return this.animationjsfl.replace(/.mp4"/gi,'(2).mp4"')},animationjsfl4:function(){return this.animationjsfl.replace(/.mp4"/gi,'(3).mp4"')},animationjsfl:function(){var e=this;localStorage.setItem("customSrtContent",this.customSrtContent);if(!(this.customSrtContent&&this.customDesignText&&this.customAudioContent))return"请先输入设计文案、srt内容、和音频内容";var t=this.customSrtContent.split("\n").filter(function(e){return e}),n=this.customSrtContent.split("\n").filter(function(e){return e}),r=t,i=[];this.customDesignText.split("\n").filter(function(e){return e}).map(function(t){var n=t.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o=n.includes(":")?n.split(":")[1]:n,a=n.includes(":")?n.split(":")[0]:"旁白",s="",c="",u="";if(r.forEach(function(e,t){e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,"");var n=o.substring(0,2),i=e.substring(0,2);t%3!==2||s&&c||(s||(s=r[t-1].split("--\x3e")[0].trim()),n=o.substring(o.length-2),i=e.substring(e.length-2),c||n!=i||(c=r[t-1].split("--\x3e")[1].trim(),u=t))}),""===u)return e.$message.error(o);r.splice(0,u+1),i.push({name:a,content:o,endTime:c,startTime:s})});var o=[];n.forEach(function(e,t){t%3===2&&(e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o.push({content:e,startTime:n[t-1].split("--\x3e")[0].trim().replace(",","."),endTime:n[t-1].split("--\x3e")[1].trim().replace(",",".")}))});var a=this.customDesignText.split("\n").filter(function(e){return e}).map(function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,"");return t.includes(":")?t.split(":")[0]:"旁白"});a=M.a.uniq(a);var s=[];i.forEach(function(e,t){var n=Ee(Ee({},e),{},{startTime:e.startTime.replace(/,/,"."),endTime:e.endTime.replace(/,/,".")});if(0!==t){var r=s[s.length-1];r.name===n.name?s[s.length-1]=Ee(Ee({},r),{},{endTime:n.endTime}):s.push(Ee(Ee({},n),{},{startTime:r.endTime}))}else s.push(Ee(Ee({},n),{},{startTime:"00:00:00.000"}))});var c={};s.forEach(function(e,t){var n,r=e.name,i=new Date("1970-01-01T"+e.endTime+"Z").getTime(),o=new Date("1970-01-01T"+e.startTime+"Z").getTime(),a=i-o;a>((null===(n=c[r])||void 0===n?void 0:n.duration)||0)&&(c[r]={index:t,duration:a,endTime:e.endTime,startTime:e.startTime})});var u="\n#1.下载https://www.anaconda.com/download，安装\n#2 需要新增文件夹 D:FFOutput\txt-notebook\n#3.查看jupyter配置：jupyter --config-dir; 生成配置： jupyter notebook --generate-config \n#3.1 修改配置: vi ~/.jupyter/https://jupyter_notebook_config.py\n# c.NotebookApp.notebook_dir = 'D:\\FFOutput\\txt-notebook'\n# c.NotebookApp.token = 'tangxiaotang'\n\n#查看字体包\n#import matplotlib.font_manager as fm\n#fonts = fm.fontManager.ttflist\n#font_names = [font.name for font in fonts]\n#for font in font_names:\n#    print(font)\n\n# -----TextClip文字可能加不了，第一步下载https://imagemagick.org/script/download.php， 安装，C:Program FilesImageMagick-7.1.1-Q16-HDRI加到环境变量\n# 查看moviepy位置\n#import moviepy \n#print(moviepy.__file__)\n#第二步将数据 D:anacondaLibsite-packagesmoviepy的config_defaults.py 配置 IMAGEMAGICK_BINARY = r\"C:Program FilesImageMagick-7.1.1-Q16-HDRImagick.exe\"\n#-----第三重启jupyter\n\n#!pip install opencv-python\n#!pip install moviepy\nfrom moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip, AudioFileClip, TextClip\nfrom moviepy.video.compositing.concatenate import concatenate_videoclips\nfrom moviepy.video import fx\nfrom datetime import datetime\nimport numpy as np\nimport random\nimport os\nimport cv2\nimport subprocess\ncurrent_datetime = datetime.now()\nformatted_datetime1 = current_datetime.strftime(\"%Y-%m-%d_%H%M%S%f\")[:-3]\ndef get_all_files(path):\n    mp4_files = []\n    png_files = []\n    png1_files = []\n    \n    # 遍历路径下的所有文件和文件夹\n    for root, dirs, files in os.walk(path):\n        # 遍历文件\n        for file in files:\n            # 获取文件的完整路径\n            file_path = os.path.join(root, file)\n            \n            # 过滤出扩展名为 '.mp4' 的文件\n            if file.endswith('.mp4'):\n                # 存储文件路径到列表中\n                mp4_files.append(file_path)\n            \n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"背景\" in file:\n                # 存储文件路径到列表中\n                png_files.append(file_path)\n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"站台\" in file:\n                # 存储文件路径到列表中\n                png1_files.append(file_path)\n    return mp4_files, png_files, png1_files\n\n# 指定要查找的路径\npath = \"C:\\Users\\Administrator\\AppData\\Local\\JianyingPro\\User Data\\Cloud files\"\n\n# 调用函数获取该路径下的所有满足条件的文件路径\nmp4_files, png_files, png1_files = get_all_files(path)\n# 在png_files列表中随机选择三个文件的路径\nrandom_png_paths = random.sample(png_files, ".concat(a.length,")\nrandom_png_paths1 = random.sample(png1_files, ").concat(a.length,")\nnameList = ").concat(JSON.stringify(a),'\n# 将两个列表组合成一个对象\nnameObject = {}\n# 背景尺寸\nrandomWidthObject = {}\n# 演讲台\nyangjiangtaiObject = {}\n# 演讲台左边位置\nyangjiangtaiLeftObject = {}\nfor i in range(len(nameList)):\n    nameObject[nameList[i]] = random_png_paths[i]\n    randomWidthObject[nameList[i]] = random.randint(2020, 5000)\n    yangjiangtaiObject[nameList[i]] = random_png_paths1[i % len(random_png_paths1)]\n    yangjiangtaiLeftObject[nameList[i]] = random.randint(-100, 100)\n\ndef remove_green_screen(clip, img_file, width):\n  background_image = ImageClip(img_file)\n  bg_clip = background_image.resize(width=width)\n  offset_y = random.randint(0, (bg_clip.size[1] - clip.size[1]))\n  offset_x = random.randint(0, (bg_clip.size[0] - clip.size[0]))\n  def process_frame(get_frame, t):\n      frame = get_frame(t)\n      hsv_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)\n\n      lower_green = np.array([55, 50, 50])\n      upper_green = np.array([65, 255, 255])\n\n      mask = cv2.inRange(hsv_frame[:, :, :3], lower_green, upper_green)\n\n      kernel = np.ones((5, 5), np.uint8)\n      opening = cv2.morphologyEx(mask, cv2.MORPH_OPEN, kernel)\n      mask = cv2.bitwise_not(opening)\n      result = cv2.bitwise_and(frame, frame, mask=mask)\n      # 将背景图像与去除绿幕的视频合成\n      result_height, result_width, _ = result.shape\n      bg_height, bg_width, _ = bg_clip.get_frame(t).shape\n      result = np.where(result == 0, bg_clip.get_frame(t)[offset_y:offset_y+result_height, offset_x:offset_x+result_width], result)\n      return result\n\n  processed_clip = clip.fl(process_frame)\n  return processed_clip\ndef get_mp4_url(prefix):\n  current_datetime = datetime.now()\n  formatted_datetime = current_datetime.strftime("%Y-%m-%d_%H%M%S%f")[:-3]\n  temp_input_file = "temp_input.mp4"\n  new_path = "D:\\FFOutput\\txt_temp_audio\\temp_" + prefix + formatted_datetime + ".mp4"\n  return new_path\n  \ndef merge_png(input_video, logo_file, left, start_time, end_time):\n  output_file = get_mp4_url(\'out\')\n  ffmpeg_cmd = [\n    "ffmpeg",\n    "-i", input_video,\n    "-ss", start_time,\n    "-to", end_time,\n    "-loop", "1",\n    "-i", logo_file,\n    "-filter_complex", "[0:v][1:v] overlay=x={}:y={}:shortest=1[outv]".format(left, 100),\n    "-map", "[outv]",\n    "-c:v", "libx264",\n    "-pix_fmt", "yuv420p",\n    output_file\n  ]\n  \n  # 执行ffmpeg命令\n  subprocess.call(ffmpeg_cmd)\n  video = VideoFileClip(output_file)\n  return video\n  \nprint(\'正在生成中，请耐心等等==============\')    \n      ');for(var p in c){var l=c[p].startTime,d=c[p].endTime,f=new Date("1970-01-01T"+l+"Z").getTime(),m=new Date("1970-01-01T"+d+"Z").getTime(),h=m-f,v=new Date(h).toISOString().substr(11,12),g=c[p].index;u+="\n# 生成".concat(p,'的视频\nvideo_url = path + "\\').concat(p,'.mp4"\npeople').concat(g," = merge_png(video_url, yangjiangtaiObject['").concat(p,"'], yangjiangtaiLeftObject['").concat(p,"'], '00:00:00.000', '").concat(v,"')\npeople").concat(g," = remove_green_screen(people").concat(g,", nameObject['").concat(p,"'], randomWidthObject['").concat(p,"'])\n      ")}return s.forEach(function(t,n){var r=t.startTime,i=t.endTime,a=new Date("1970-01-01T"+r+"Z").getTime(),p=new Date("1970-01-01T"+i+"Z").getTime(),l=p-a,d=new Date(l).toISOString().substr(11,12);if(u+="\n# 生成第".concat(n+1,"个视频\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(d,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nvideo').concat(n," = people").concat(c[t.name].index," \nsubclip").concat(n," = video").concat(n,".subclip(start_seconds, end_seconds)\n"),n===s.length-1){var f,m,h="";console.log(o),h+="\n# 封面标题\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('00:00:00.100', \"%H:%M:%S.%f\")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle01 = (TextClip('".concat((null===(f=e.customTitleContent.replace(/，/gi,",").split(","))||void 0===f?void 0:f[0])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 300))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \nsubtitle02 = (TextClip('").concat((null===(m=e.customTitleContent.replace(/，/gi,",").split(","))||void 0===m?void 0:m[1])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 530))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n             "),o.forEach(function(e,t){h+="\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('".concat(e.startTime,"', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(e.endTime,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle').concat(t," = (TextClip('").concat(e.content,"', fontsize=80, color='white', font='FangSong')\n    .set_position(('center', 900))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n")});var v=(e.customAudioContent||"").trim().replace(/\//gi,"//");u+="\nfinal_video = concatenate_videoclips([".concat(s.map(function(e,t){return"subclip".concat(t)}),'])\nfinal_video_duration = final_video.duration\naudio = AudioFileClip("').concat(v,'")\nif final_video_duration > audio.duration:\n    final_video_duration = audio.duration\naudio = audio.subclip(0, final_video_duration )\nfinal_video = final_video.set_audio(audio)\n# 降低帧率\nfinal_video = final_video.set_fps(20)\n#添加文案\n# 创建字幕文本剪辑\n').concat(h,"\n\nfinal_video = CompositeVideoClip([final_video,subtitle01, subtitle02, ").concat(o.map(function(e,t){return"subtitle".concat(t)}),'])\nnew_path = "D:\\FFOutput\\txt_" + formatted_datetime1 +"output_video.mp4"\nfinal_video.write_videofile(new_path)\nprint(\'视频已生成========================\')    \n')}}),u.replace(/\\/gi,"\\\\")},customAudioTextTime:function(){localStorage.setItem("customAudioText",this.customAudioText);var e=this.customAudioText.replace(/：/gi,":").split("\n").filter(function(e){return e});this.textLines=e.length;var t=M.a.map(this.peopleTimeArr,function(t,n){var r,i,o,a=M.a.includes(e[n],":")?null===(r=e[n])||void 0===r?void 0:null===(i=r.split(":"))||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.trim():"旁白";return{title:a,start:t[0].toFixed(2),end:t[1].toFixed(2)}});return this.customAudioText=M.a.map(e,function(e,n){var r,i,o;return null!==t&&void 0!==t&&null!==(r=t[n])&&void 0!==r&&r.start?e.split("|")[0]+"|"+(null===(i=t[n])||void 0===i?void 0:i.start)+"-"+(null===(o=t[n])||void 0===o?void 0:o.end):e}).join("\n"),this.customAudioTextTimes=t,JSON.stringify(t)},audioText:function(){var e=this,t="";return this.textArr.map(function(n,r){return r===e.textArr.length-1?(t+="("+n.offset+"),"+n.text+"("+(n.offset+n.duration).toFixed(2)+")",n):(t+="("+n.offset+"),"+n.text,n)}),t}},created:function(){var e=[];try{var t=localStorage.getItem("textArr");e=t?JSON.parse(t):[]}catch(n){}this.textArr=e,this.customAudioText=localStorage.getItem("customAudioText")||"",this.customDesignText=localStorage.getItem("customDesignText")||"",this.customSrtContent=localStorage.getItem("customSrtContent")||"",console.log(localStorage.getItem("peiyinJosnStr"),"========="),this.peiyinJosnStr=localStorage.getItem("peiyinJosnStr")||'{\n    "旁白":"阿森", "小汀":"小鹏", "老奥":"宝哥","老拜":"河南小坤","小岸田":"小光","小耶":"希涵","小哈":"小南","小雷":"程程",\n    "老普":"皓宇","小龙":"顾辉","小马":"管哥","小龙":"小洋","老特":"辉叔","小尹":"小宇","小布":"湖北小王",\n\t"小泽":"韦香主","小朔":"小峰","老莫":"小钟",\n\t"叶韵影":"小薛","叶韵仙":"瑶瑶","系统":"成都宝儿"\n    }',this.isMobile=null!==navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)},mounted:function(){var e=I.a.create({mediaType:"video",backgroundColor:"rgb(105,160,174, 0.1)",container:"#waveform",waveColor:"violet",barWidth:2,responsive:!0,scrollParent:!0,progressColor:"purple",plugins:[j.a.create({container:"#wave-timeline",primaryColor:"blue",secondaryColor:"red",primaryFontColor:"blue",secondaryFontColor:"red"}),D.a.create({})]});this.wavesurfer=e;var t=this.getParaByName("url");if(t){t="https://vkceyugu.cdn.bspapp.com"+decodeURIComponent(t),e.load(t);var n=this;e.on("ready",function(){n.animationTime=e.getDuration().toFixed(2);var t=n.getCanvasBars(e),r=e.getDuration();n.getTextTime(t,r)}),e.on("audioprocess",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)}),e.on("seek",function(){n.curPlayingTime=e.getCurrentTime().toFixed(2)})}},methods:{copyTextToClipboard:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return t.$message.success("复制成功")},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return t.$message.error("复制失败, 请手动复制")},i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){window.getSelection().removeAllRanges();var o=document.createRange();o.selectNode(i),window.getSelection().addRange(o);var a=document.execCommand("copy");return a?n():r(),window.getSelection().removeAllRanges(),void document.body.removeChild(i)}var s=document.execCommand("copy");s?n():r()}catch(c){r(c)}document.body.removeChild(i)},setShowScript:function(){this.show=!this.show},getTextTime:function(e,t){var n;e=M.a.map(e,function(e){return e>0?1:0});var r=t/e.length,i=e.length/t,o=M.a.filter(e.join().split(","+new Array(Math.floor(2*i)).fill(0).join(",")+","),function(e){return e}),a=0,s=[0];M.a.compact(M.a.map(o,function(e,t){if(a+=e.split(",").length+(0===t?0:Math.floor(2*i)),t===o.length-1)return null;s.push.apply(s,[a*r,a*r+Math.floor(2*i)*r])})),s.push(this.animationTime),this.sliceTimesArr=M.a.chunk(s,2);var c,u=0,p=M.a.map(o,function(e,t){var n=!1,i=[];return e.split(",").map(function(e,t){n||(n=!!e,n&&(i[0]=r*(t+1)+u))}),i[1]=r*e.split(",").length+u,u=i[1],i});(this.peopleTimeArr=p,null!==(n=M.a.last(p))&&void 0!==n&&n[1])&&(this.animationTime1=null===(c=M.a.last(p))||void 0===c?void 0:c[1])},getCanvasBars:function(e){var t=Math.round(e.getDuration()*e.params.minPxPerSec*e.params.pixelRatio),n=e.drawer.getWidth(),r=t,i=0,o=Math.max(i+n,r);e.params.fillParent&&(!e.params.scrollParent||t<n)&&(r=n,i=0,o=r);var a=e.backend.getPeaks(r,i,o),s=1,c=!0,u=192,p=c?2:1,l=a.length/p,d=e.params.barWidth*e.params.pixelRatio,f=null===e.params.barGap?Math.max(e.params.pixelRatio,d/2):Math.max(e.params.pixelRatio,e.params.barGap*e.params.pixelRatio),m=d+f,h=l/r,v=i,g=o,y=v,b=[];for(y;y<g;y+=m){var _=0,S=Math.floor(y*h)*p,C=Math.floor((y+m)*h)*p;do{var P=Math.abs(a[S]);P>_&&(_=P),S+=p}while(S<C);var w=Math.round(_/s*u);b.push(w)}return b},changAudioRate:function(e){this.wavesurfer.setPlaybackRate(e)},stepChange:function(e){this.wavesurfer.seekAndCenter(e/100)},playWave:function(){this.wavesurfer.playPause()},getParaByName:function(e){var t=window.location.search;if(t=t.substr(1),"undefined"===typeof e)return t;for(var n=t.split("&"),r=0;r<n.length;r++){var i=n[r];if(n[r]=i.split("="),n[r][0]==e)return i.replace(e+"=","")}return""},initCancas:function(){var e=document.getElementById("canvas");this.canvas=e;var t=e.getContext("2d");t.fillStyle="#fff",this.cxt=t;var n={height:200,width:this.canvasWidth,start:"00:00:00",end:"00:20:10",size:300,x:20,y:70,w:10,h:10,mousedown:!1};this.config=n,this.showCanvas();var r=document.getElementsByClassName("blueBg")[0];this.topMoveBox=r,r.style.left="-40px",this.imgWidth=this.videoLong/this.number*100+"px",this.pickeddeng=document.getElementById("pickeddeng")},handleChange:function(e){this.uploadfile=e.target.files,this.wavesurfer.loadBlob(e.target.files[0]);var t=this;this.wavesurfer.on("ready",function(){t.animationTime=wavesurfer.getDuration().toFixed(2)})},getAudioText:function(){var e=document.getElementById("download-url");if(e&&e.href){var t=this.$loading({lock:!0,text:"生成文案中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",customClass:"audio-text-loading"});this.stt(t)}else this.$message.error("请先执行命令, 生成wav文件")},trancodeWav:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(document.getElementById("download-url").href).then(function(e){return e.blob()});case 2:return t=e.sent,e.abrupt("return",new File([t],"audio.wav",{type:"audio/x-wav"}));case 4:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),getAuthToken:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]&&i[0],t||this._isExpiration()){e.next=3;break}return e.abrupt("return",localStorage.getItem("ssmlToken"));case 3:return e.next=5,fetch("https://e37cad50-87bf-4e22-8965-c7e9ed358a6c.bspapp.com/text-to-speech/get-person-token-for-speech").then(function(e){return e.json()});case 5:if(n=e.sent,!(n.token.length>50)){e.next=11;break}return r=n.token,localStorage.setItem("data_expiration","".concat(Date.parse(new Date)+18e4)),localStorage.setItem("ssmlToken",r),e.abrupt("return",r);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),_isExpiration:function(){var e=Date.parse(new Date),t=localStorage.getItem("data_expiration");return!t||+e>+t},stt:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c,u,p,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=this,e.next=3,this.trancodeWav();case 3:return r=e.sent,i=window.SpeechSDK,e.next=7,this.getAuthToken();case 7:o=e.sent,a="eastus",s=i.AudioConfig.fromWavFileInput(r),c=i.SpeechConfig.fromAuthorizationToken(o,a),c.speechRecognitionLanguage="zh-CN",c.setServiceProperty("punctuation","explicit",i.ServicePropertyChannel.UriQueryParameter),u=new i.SpeechRecognizer(c,s),p="",l=[],u.recognizing=function(e,t){},u.recognized=function(e,n){p+=(n.result.text||"")+"\n",t.text="生成文案中: ".concat(p),l.push({offset:n.result.privOffset/1e7,duration:n.result.privDuration/1e7,text:n.result.text}),n.result.reason==ResultReason.RecognizedSpeech?console.log("RECOGNIZED: Text=".concat(n.result.text)):n.result.reason==ResultReason.NoMatch&&console.log("NOMATCH: Speech could not be recognized.")},u.canceled=function(e,n){console.log("CANCELED: Reason=".concat(n.reason)),t.close(),n.reason==CancellationReason.Error&&(console.log('"CANCELED: ErrorCode='.concat(n.errorCode)),console.log('"CANCELED: ErrorDetails='.concat(n.errorDetails)),console.log("CANCELED: Did you update the key and location/region info?")),u.stopContinuousRecognitionAsync()},u.sessionStopped=function(e,r){t.close(),n.textArr=l,localStorage.setItem("textArr",JSON.stringify(l)),u.stopContinuousRecognitionAsync()},u.startContinuousRecognitionAsync();case 21:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},watch:{}},xe=De,Me=(n("5e61"),Object(C["a"])(xe,Ie,Ae,!1,null,null,null)),Ne=Me.exports,Le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-tag",{attrs:{color:"xunfei"==e.active?"#c5d8ed":"#d9ecff"},on:{click:function(t){return e.handleSelectType("xunfei")}}},[e._v("讯飞配音")]),n("el-tag",{attrs:{color:"maker"==e.active?"#c5d8ed":"#d9ecff"},on:{click:function(t){return e.handleSelectType("maker")}}},[e._v("TTSMaker配音")]),n("h2",[e._v("\n        制作流程：\n      ")]),"xunfei"==e.active?n("div",e._l(e.allSpeakerDict,function(t,r){return n("div",[n("h4",[e._v(e._s("undefiend"===r?"其他":r)+": ")]),e._l(t,function(r,i){return n("span",["2"==r.speakerGender&&"1"==t[i-1].speakerGender?n("br"):e._e(),e._v("\n\t\t          "+e._s("2"==r.speakerGender&&"1"==t[i-1].speakerGender?"-----(女)":"")+"\n\t\t          "+e._s(r.speakerName)+":\n\t\t      ")])})],2)}),0):e._e(),"maker"==e.active?n("div",[n("div",[e._v("\n\t\t  \t\t 男生： '元芳', '樊雨', '啊星', '晓君', '郭靖', '阿短', '鱼辛', '魁峰', '郝维', '大林', '阿伟', '啊乐', '小岳', '阿飞', '小涛', '阿豪', '小龙', '大鹏', '家豪', '小琦'\n\t\t  ")]),n("div",[e._v("\n\t\t  \t\t 男孩： '萌萌'\n\t\t  ")]),n("div",[e._v("\n\t\t  \t\t 女生： '梦梦', '文君', '靖瑶', '雪青', '青曼', '菡颖', '小鱼', '江柳', '首玲', '小美', '茉莉', '娜娜', '尔琪', '如玉', '黄榕', '香莲', '昕雨', '静静', '潇潇', '璐璐', '小梦', '阿雅', '球球', '如雪', '小贝', '小雨', '熊熊', '雅婷'\n\t\t  ")]),n("div",[e._v("\n\t\t  \t\t 女孩： '甜甜', '豆豆', '雪花'\n\t\t  ")])]):e._e(),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"1. 输入设计文案",name:"first"}},[n("div",{staticClass:"common-title"},[e._v("\n\t\t人物对应关系\n\t\t\t")]),"xunfei"==e.active?n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"{'旁白': '阿森'}"},model:{value:e.peiyinJosnStr,callback:function(t){e.peiyinJosnStr=t},expression:"peiyinJosnStr"}}):e._e(),"maker"==e.active?n("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"{'旁白': '阿森'}"},model:{value:e.peiyinJosnStrv2,callback:function(t){e.peiyinJosnStrv2=t},expression:"peiyinJosnStrv2"}}):e._e(),n("div",{staticClass:"common-title"},[e._v("\n\t\t1. 输入设计文案\n\t\t\t")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:20},placeholder:"输入设计文案"},model:{value:e.customDesignTextv2,callback:function(t){e.customDesignTextv2=t},expression:"customDesignTextv2"}})],1),n("el-tab-pane",{attrs:{label:"2. 输入标题;3. 自动生成脚本",name:"third"}},[n("div",{staticClass:"common-title"},[e._v("\n\t  2. 输入标题, 例如：什么！岸田叛变漂亮国,吓坏了来拜\n\t")]),n("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"输入音频路径"},model:{value:e.customTitleContentv2,callback:function(t){e.customTitleContentv2=t},expression:"customTitleContentv2"}}),"xunfei"==e.active?n("div",{staticClass:"common-title"},[e._v("\n\t  3. "),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.peiyinStr)}}},[e._v("复制")]),n("br"),e._v("\n\t  ("),n("br"),e._v("\n\t    复制内容到"),n("a",{attrs:{href:"https://peiyin.xunfei.cn/make/",target:"__blank"}},[e._v("https://peiyin.xunfei.cn/make/origin")]),n("br"),e._v("\n\t    按F12到Console执行内容，打印urlList，复制链接到上面的音频合并, 执行命令并下载音频;"),n("br"),e._v("\n\t  )\n\t")],1):e._e(),"maker"==e.active?n("div",{staticClass:"common-title"},[e._v("\n\t  3. "),n("el-button",{on:{click:function(){return e.handleGetAudio()}}},[e._v("生成srt")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.audioUrl)}}},[e._v("复制音频路径")]),n("br")],1):e._e(),n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"音频路径"},model:{value:e.audioUrl,callback:function(t){e.audioUrl=t},expression:"audioUrl"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:2},placeholder:"srt",disabled:""},model:{value:e.customSrtContentv2,callback:function(t){e.customSrtContentv2=t},expression:"customSrtContentv2"}}),n("div",{staticClass:"common-title"},[e._v("\n            4. 自动生成脚本\n            "),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl)}}},[e._v("复制第一套人物(例子：老奥.mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl2)}}},[e._v("复制第二套人物(例子：老奥(1).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl3)}}},[e._v("复制第二套人物(例子：老奥(2).mp4)")]),n("br"),n("el-button",{on:{click:function(){return e.copyTextToClipboard(e.animationjsfl4)}}},[e._v("复制第二套人物(例子：老奥(3).mp4)")]),n("br"),e._v("\n            （需要完成1、2步, 然后复制内容到python执行）\n          ")],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:6},disabled:"",placeholder:"自动脚本"},model:{value:e.animationjsfl,callback:function(t){e.animationjsfl=t},expression:"animationjsfl"}})],1)],1)],1)},Fe=[];function ze(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var qe=10,Ue={data:function(){return{active:"xunfei",activeName:"first",customDesignTextv2:"",customTitleContentv2:"老拜，什么",peiyinJosnStrv2:"",peiyinJosnStr:"",audioUrl:"",customSrtContentv2:"",nameDict:{},isXunfeiPath:""}},computed:{peiyinStr:function(){var e={},t=M.a.groupBy(M.a.values(me),"common_id");M.a.map(fe,function(n){var r,i,o,a;null!==t&&void 0!==t&&null!==(r=t[n.commonId])&&void 0!==r&&null!==(i=r[0])&&void 0!==i&&i.speaker_no?e[n.speakerName]={content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te75][n0]$content$",vid:null===t||void 0===t?void 0:null===(o=t[n.commonId])||void 0===o?void 0:null===(a=o[0])||void 0===a?void 0:a.speaker_no,volume:0,speed:"140",pitch:0,endFadeDownDuration:"0"}}:console.log(n.commonId,t)});var n={};try{var r=JSON.parse(this.peiyinJosnStr);for(var i in r)n[i]=e[r[i]]||i}catch(s){}var o=Be(Be({},e),{},{"系统":{content:"[em9][te50][n0]$content$",data:{engineUrl:"/synth",text:"[em9][te50][n0]$content$",vid:"130062",volume:0,speed:"79",pitch:0,endFadeDownDuration:"0"}},"旁白":{content:"[te81][n0]$content$",data:{engineUrl:"/synth",text:"[te91][n0]$content$",vid:"65270",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"宝哥":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65230",volume:0,speed:"142",pitch:0,endFadeDownDuration:"0"}},"小俊":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65070",volume:0,speed:"75",pitch:0,endFadeDownDuration:"0"}},"宁宁":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"70002",volume:0,speed:"200",pitch:0,endFadeDownDuration:"0"}},"小明":{content:"[te50][n0]$content$",data:{engineUrl:"/synth",text:"[te50][n0]$content$",vid:"65110",volume:0,speed:"155",pitch:0,endFadeDownDuration:"0"}}},n),a=[];M.a.map(this.customDesignTextv2.split("\n").filter(function(e){return e}),function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。|.]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),n=t.includes(":")?t.split(":")[1]:t,r=t.includes(":")?t.split(":")[0]:"旁白",i=n.split(/[^\u4e00-\u9fa5a-zA-Z0-9.]+(?!\d)/g);a.push.apply(a,Object(W["a"])(M.a.map(i,function(e){return{name:r,content:e}})))});return"\n\t  textArr = ".concat(JSON.stringify(a),"\n\t  \n\t  personDict = ").concat(JSON.stringify(o),"\n\t  var resList = []\n\t  textArr.map(item => {\n\t\t  item = item.name + ':' + item.content\n\t      if (item.trim() === '') return\n\t      if(item.includes(':')) {\n\t          var name = item.split(':')[0].trim()\n\t          if(name.includes(')')) {\n\t          name = name.split(')')[1]\n\t          }\n\t          const obj = (personDict[name] || personDict['旁白'])\n\t          resList.push({\n\t              ...obj, \n\t              content: obj.content.replace(/\\$content\\$/gi, item.split(':')[1]),\n\t              data: {\n\t                  ...obj.data,\n\t                  text: obj.content.replace(/\\$content\\$/gi, item.split(':')[1])\n\t              }\n\t          })\n\t      } else {\n\t          const obj = personDict['旁白']\n\t          if(item.includes(')')) {\n\t              item = item.split(')')[1]\n\t          }\n\t          resList.push({\n\t              ...obj, \n\t              content: obj.content.replace(/\\$content\\$/gi, item),\n\t              data: {\n\t                  ...obj.data,\n\t                  text: obj.content.replace(/\\$content\\$/gi, item)\n\t              }\n\t          })\n\t      }\n\t  })\n\t  async function getAudio(res) {\n\t      var objItem = res.data;\n\t      window.sc = '0000';\n\t      return new Promise(function (resolve, reject) {\n\t          var val =\n\t              '{\"channel\": \"' +\n\t              channel +\n\t              '\",\"synth_text_hash_code\":\"' +\n\t              CryptoJS.MD5(window.replaceRightTTSMark(objItem.text)) +\n\t              '\"}';\n\t          getAjax(\n\t              '/1.0/works_synth_sign',\n\t              val,\n\t              true,\n\t              function (data) {\n\t                  var resultInfo = eval(data);\n\t                  synthServer = objItem.engineUrl || window.__synthServer;\n\t                  var txtcnt = encodeURIComponent(window.replaceRightTTSMark(objItem.text));\n\t                  var url =\n\t                      synthServer +\n\t                      '?uid=' +\n\t                      (window.phone || '') +\n\t                      '&ts=' +\n\t                      resultInfo.time_stamp +\n\t                      '&sign=' +\n\t                      resultInfo.sign_text +\n\t                      '&vid=' +\n\t                      objItem.vid +\n\t                      '&f=v2&cc=' +\n\t                      window.sc +\n\t                      '&sid=' +\n\t                      window.web_i_ss +\n\t                      '&volume=' +\n\t                      (objItem.volume || 0) +\n\t                      '&speed=' +\n\t                      objItem.speed +\n\t                      '&content=' +\n\t                      txtcnt +\n\t                      '&listen=' + 0;\n\t                  resolve(url);\n\t              },\n\t              function (err) {\n\t                  reject(err);\n\t              }\n\t          );\n\t      });\n\t  }\n\t  async function getUrls() {\n\t\t  window.urlList = ''\n\t      await new Promise(async (resolve, reject) => {\n\t          let urls = []\n\t          Promise.all(resList.map(async res => {\n\t              return await getAudio(res)\n\t          })).then((result) => {\n\t              window.urlList= result.map(url => ('https://peiyin.xunfei.cn' + url)).join(';')\n\t          })\n\t          // resList.map(async res => {\n\t          //     const url = await getAudio(res)\n\t          //     urls.push('https://peiyin.xunfei.cn' + url)\n\t          //     if (urls.length === resList.length) {\n\t          //         resolve(urls)\n\t          //     }\n\t          // })\n\t      })\n\t  }\n\t  getUrls()\n\t  ")},allSpeakerDict:function(){var e=fe.map(function(e){var t,n;return Be(Be({},e),{},{tag1:null===(t=e.tag.split("|").filter(function(e){return["老年","中年","青年","少儿"].includes(e)}))||void 0===t?void 0:t[0],tag2:null===(n=e.tag.split("|").filter(function(e){return["普通话"].includes(e)}))||void 0===n?void 0:n[0]})});return M.a.groupBy(M.a.orderBy(e,["speakerGender","tag2"],"desc","asc"),function(e){return e.tag1})},animationjsfl2:function(){return this.animationjsfl.replace(/.mp4"/gi,'(1).mp4"')},animationjsfl3:function(){return this.animationjsfl.replace(/.mp4"/gi,'(2).mp4"')},animationjsfl4:function(){return this.animationjsfl.replace(/.mp4"/gi,'(3).mp4"')},animationjsfl:function(){var e=this;if(!(this.customSrtContentv2&&this.customDesignTextv2&&this.audioUrl))return"请先输入设计文案，生成srt内容";var t=this.customSrtContentv2.split("\n").filter(function(e){return e}),n=this.customSrtContentv2.split("\n").filter(function(e){return e}),r=t,i=[];this.customDesignTextv2.split("\n").filter(function(e){return e}).map(function(t){var n=t.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o=n.includes(":")?n.split(":")[1]:n,a=o.split(/[^\u4e00-\u9fa5a-zA-Z0-9.]+(?!\d)/g),s=n.includes(":")?n.split(":")[0]:"旁白",c="",u="",p="";if(console.log("===========textArr",a),r.forEach(function(e,t){e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),t%3!==2||c&&u||(c||(c=r[t-1].split("--\x3e")[0].trim()),u||e!=a[a.length-1]||(u=r[t-1].split("--\x3e")[1].trim(),p=t))}),""===p)return e.$message.error(o);r.splice(0,p+1),i.push({name:s,content:o,endTime:u,startTime:c})});var o=[];n.forEach(function(e,t){t%3===2&&(e=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),o.push({content:e,startTime:n[t-1].split("--\x3e")[0].trim().replace(",","."),endTime:n[t-1].split("--\x3e")[1].trim().replace(",",".")}))});var a=this.customDesignTextv2.split("\n").filter(function(e){return e}).map(function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,"");return t.includes(":")?t.split(":")[0]:"旁白"});a=M.a.uniq(a);var s=[];i.forEach(function(e,t){var n=Be(Be({},e),{},{startTime:e.startTime.replace(/,/,"."),endTime:e.endTime.replace(/,/,".")});if(0!==t){var r=s[s.length-1];r.name===n.name?s[s.length-1]=Be(Be({},r),{},{endTime:n.endTime}):s.push(Be(Be({},n),{},{startTime:r.endTime}))}else s.push(Be(Be({},n),{},{startTime:"00:00:00.000"}))});var c={};s.forEach(function(e,t){var n,r=e.name,i=new Date("1970-01-01T"+e.endTime+"Z").getTime(),o=new Date("1970-01-01T"+e.startTime+"Z").getTime(),a=i-o;a>((null===(n=c[r])||void 0===n?void 0:n.duration)||0)&&(c[r]={index:t,duration:a,endTime:e.endTime,startTime:e.startTime})});var u="\n#需要创建这个路径的目录D:\\FFOutput\\txt_temp_audio\nstr1 = '".concat(this.audioUrl.replace(/'/gi,""),'\'\ndef download_audio(url, save_path):\n    response = requests.get(url, stream=True)\n    if response.status_code == 200:\n        with open(save_path, \'wb\') as f:\n            for chunk in response.iter_content(chunk_size=1024):\n                f.write(chunk)\n        print("音频下载中------")\n    else:\n        print("请求失败")\n\n# 定义音频链接和保存路径\naudio_urls = str1.split(\';\')\nsave_paths = []\nfor index, element in enumerate(audio_urls):\n    new_string = f"D:\\FFOutput\\txt_temp_audio\\audio{index}.mp3"\n    save_paths.append(new_string)\n\n# 下载并合并音频\ncombined_audio = AudioSegment.empty()\nfor url, path1 in zip(audio_urls, save_paths):\n    download_audio(url, path1)\n    audio = AudioSegment.from_file(path1)\n    combined_audio += audio\n\n# 保存合并后的音频文件\ncurrent_datetime = datetime.now()\nformatted_datetime = current_datetime.strftime("%Y-%m-%d_%H%M%S%f")[:-3]\naudio_path = "D:\\FFOutput\\audio_" + formatted_datetime + ".mp3"\ncombined_audio.export(audio_path, format="mp3")\n\nprint("音频合并完成,地址在：")\nprint(audio_path)\n     '),p="\n#1.下载https://www.anaconda.com/download，安装\n#2 需要新增文件夹 D:FFOutput\txt-notebook\n#3.查看jupyter配置：jupyter --config-dir; 生成配置： jupyter notebook --generate-config \n#3.1 修改配置: vi ~/.jupyter/https://jupyter_notebook_config.py\n# c.NotebookApp.notebook_dir = 'D:\\FFOutput\\txt-notebook'\n# c.NotebookApp.token = 'tangxiaotang'\n\n#查看字体包\n#import matplotlib.font_manager as fm\n#fonts = fm.fontManager.ttflist\n#font_names = [font.name for font in fonts]\n#for font in font_names:\n#    print(font)\n\n# -----TextClip文字可能加不了，第一步下载https://imagemagick.org/script/download.php， 安装，C:Program FilesImageMagick-7.1.1-Q16-HDRI加到环境变量\n# 查看moviepy位置\n#import moviepy \n#print(moviepy.__file__)\n#第二步将数据 D:anacondaLibsite-packagesmoviepy的config_defaults.py 配置 IMAGEMAGICK_BINARY = r\"C:Program FilesImageMagick-7.1.1-Q16-HDRImagick.exe\"\n#-----第三重启jupyter\n\n#!pip install opencv-python\n#!pip install moviepy\nfrom moviepy.editor import VideoFileClip, ImageClip, CompositeVideoClip, AudioFileClip, TextClip, CompositeAudioClip\nfrom moviepy.video.compositing.concatenate import concatenate_videoclips\nfrom moviepy.video import fx\nfrom datetime import datetime\nimport numpy as np\nimport random\nimport os\nimport cv2\nimport subprocess\nfrom pydub import AudioSegment\nimport requests\ncurrent_datetime = datetime.now()\nformatted_datetime1 = current_datetime.strftime(\"%Y-%m-%d_%H%M%S%f\")[:-3]\ndef get_all_files(path):\n    mp4_files = []\n    png_files = []\n    png1_files = []\n    \n    # 遍历路径下的所有文件和文件夹\n    for root, dirs, files in os.walk(path):\n        # 遍历文件\n        for file in files:\n            # 获取文件的完整路径\n            file_path = os.path.join(root, file)\n            \n            # 过滤出扩展名为 '.mp4' 的文件\n            if file.endswith('.mp4') and \"动态背景\" in file:\n                # 存储文件路径到列表中\n                mp4_files.append(file_path)\n            \n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"背景\" in file:\n                # 存储文件路径到列表中\n                png_files.append(file_path)\n            # 过滤出扩展名为 '.png' 的文件，并且文件名包含\"背景\"\n            if file.endswith('.png') and \"站台\" in file:\n                # 存储文件路径到列表中\n                png1_files.append(file_path)\n    return mp4_files, png_files, png1_files\n\n# 指定要查找的路径\npath = \"C:\\Users\\Administrator\\AppData\\Local\\JianyingPro\\User Data\\Cloud files\"\n\n# 调用函数获取该路径下的所有满足条件的文件路径\nmp4_files, png_files, png1_files = get_all_files(path)\n# 在png_files列表中随机选择三个文件的路径\nrandom_png_paths = random.sample(png_files, ".concat(a.length,")\nrandom_png_paths1 = random.sample(png1_files, ").concat(a.length,")\nnameList = ").concat(JSON.stringify(a),'\n# 将两个列表组合成一个对象\nnameObject = {}\n# 背景尺寸\nrandomWidthObject = {}\n# 演讲台\nyangjiangtaiObject = {}\n# 演讲台左边位置\nyangjiangtaiLeftObject = {}\nfor i in range(len(nameList)):\n    nameObject[nameList[i]] = random_png_paths[i]\n    randomWidthObject[nameList[i]] = random.randint(2020, 5000)\n    yangjiangtaiObject[nameList[i]] = random_png_paths1[i % len(random_png_paths1)]\n    yangjiangtaiLeftObject[nameList[i]] = random.randint(-100, 100)\n\ndef remove_green_screen(clip, img_file, width):\n  background_image = ImageClip(img_file)\n  bg_clip = background_image.resize(width=width)\n  offset_y = random.randint(0, (bg_clip.size[1] - clip.size[1]))\n  offset_x = random.randint(0, (bg_clip.size[0] - clip.size[0]))\n  def process_frame(get_frame, t):\n      frame = get_frame(t)\n      hsv_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)\n\n      lower_green = np.array([55, 50, 50])\n      upper_green = np.array([65, 255, 255])\n\n      mask = cv2.inRange(hsv_frame[:, :, :3], lower_green, upper_green)\n\n      kernel = np.ones((5, 5), np.uint8)\n      opening = cv2.morphologyEx(mask, cv2.MORPH_OPEN, kernel)\n      mask = cv2.bitwise_not(opening)\n      result = cv2.bitwise_and(frame, frame, mask=mask)\n      # 将背景图像与去除绿幕的视频合成\n      result_height, result_width, _ = result.shape\n      bg_height, bg_width, _ = bg_clip.get_frame(t).shape\n      result = np.where(result == 0, bg_clip.get_frame(t)[offset_y:offset_y+result_height, offset_x:offset_x+result_width], result)\n      return result\n\n  processed_clip = clip.fl(process_frame)\n  return processed_clip\ndef get_mp4_url(prefix):\n  current_datetime = datetime.now()\n  formatted_datetime = current_datetime.strftime("%Y-%m-%d_%H%M%S%f")[:-3]\n  temp_input_file = "temp_input.mp4"\n  new_path = "D:\\FFOutput\\txt_temp_audio\\temp_" + prefix + formatted_datetime + ".mp4"\n  return new_path\n  \ndef merge_png(input_video, logo_file, left, start_time, end_time):\n  output_file = get_mp4_url(\'out\')\n  ffmpeg_cmd = [\n    "ffmpeg",\n    "-i", input_video,\n    "-ss", start_time,\n    "-to", end_time,\n    "-loop", "1",\n    "-i", logo_file,\n    "-filter_complex", "[0:v][1:v] overlay=x={}:y={}:shortest=1[outv]".format(left, 100),\n    "-map", "[outv]",\n    "-c:v", "libx264",\n    "-pix_fmt", "yuv420p",\n    output_file\n  ]\n  \n  # 执行ffmpeg命令\n  subprocess.call(ffmpeg_cmd)\n  video = VideoFileClip(output_file)\n  return video\n  \nprint(\'正在生成中，请耐心等等==============\')    \n      ');for(var l in c){var d=c[l].startTime,f=c[l].endTime,m=new Date("1970-01-01T"+d+"Z").getTime(),h=new Date("1970-01-01T"+f+"Z").getTime(),v=h-m,g=new Date(v).toISOString().substr(11,12),y=c[l].index;p+="\n# 生成".concat(l,'的视频\nvideo_url = path + "\\').concat(l,'.mp4"\npeople').concat(y," = merge_png(video_url, yangjiangtaiObject['").concat(l,"'], yangjiangtaiLeftObject['").concat(l,"'], '00:00:00.000', '").concat(g,"')\npeople").concat(y," = remove_green_screen(people").concat(y,", nameObject['").concat(l,"'], randomWidthObject['").concat(l,"'])\n#添加动态背景\nrandom_bg_paths = random.sample(mp4_files, 1)\npeopleBg").concat(y," = VideoFileClip(random_bg_paths[0])\npeopleBg").concat(y," = peopleBg").concat(y,".set_duration(people").concat(y,".duration).set_opacity(0.15)  # 设置透明度为0.2\npeople").concat(y," = CompositeVideoClip([people").concat(y,", peopleBg").concat(y,".set_position(('center', 'center'))])\n\n      ")}return p+=u,s.forEach(function(t,n){var r=t.startTime,i=t.endTime,a=new Date("1970-01-01T"+r+"Z").getTime(),u=new Date("1970-01-01T"+i+"Z").getTime(),l=u-a,d=new Date(l).toISOString().substr(11,12);if(p+="\n# 生成第".concat(n+1,"个视频\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(d,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nvideo').concat(n," = people").concat(c[t.name].index," \nsubclip").concat(n," = video").concat(n,".subclip(start_seconds, end_seconds)\n"),n===s.length-1){var f,m,h="";console.log(o),h+="\n# 封面标题\nstart_time = datetime.strptime('00:00:00.000', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('00:00:00.100', \"%H:%M:%S.%f\")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle01 = (TextClip('".concat((null===(f=e.customTitleContentv2.replace(/，/gi,",").split(","))||void 0===f?void 0:f[0])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 300))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \nsubtitle02 = (TextClip('").concat((null===(m=e.customTitleContentv2.replace(/，/gi,",").split(","))||void 0===m?void 0:m[1])||"","', fontsize=170, color='yellow', font='FangSong')\n    .set_position(('center', 530))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n             "),o.forEach(function(e,t){h+="\n# 指定开始时间和结束时间\nstart_time = datetime.strptime('".concat(e.startTime,"', \"%H:%M:%S.%f\")\nend_time = datetime.strptime('").concat(e.endTime,'\', "%H:%M:%S.%f")\n# 将时间转换为秒\nstart_seconds = start_time.hour * 3600 + start_time.minute * 60 + start_time.second + start_time.microsecond / 1000000\nend_seconds = end_time.hour * 3600 + end_time.minute * 60 + end_time.second + end_time.microsecond / 1000000\nsubtitle').concat(t," = (TextClip('").concat(e.content,"', fontsize=80, color='white', font='FangSong')\n    .set_position(('center', 900))\n    .set_start(start_seconds)\n    .set_end(end_seconds)) \n")}),p+="\nfinal_video = concatenate_videoclips([".concat(s.map(function(e,t){return"subclip".concat(t)}),"])\nfinal_video_duration = final_video.duration\naudio = AudioFileClip(audio_path)\nprint(path + '\\背景音乐.wav')\naudio1 = AudioFileClip(path + '\\背景音乐.wav')\n\nif final_video_duration > audio.duration:\n    final_video_duration = audio.duration\naudio = audio.subclip(0, final_video_duration )\naudio1 = audio1.subclip(0, final_video_duration )\nmixed_audio = CompositeAudioClip([audio, audio1])\nfinal_video = final_video.set_audio(mixed_audio)\n# 降低帧率\nfinal_video = final_video.set_fps(20)\n#添加文案\n# 创建字幕文本剪辑\n").concat(h,"\n\nfinal_video = CompositeVideoClip([final_video,subtitle01, subtitle02, ").concat(o.map(function(e,t){return"subtitle".concat(t)}),'])\nnew_path = "D:\\FFOutput\\txt_" + formatted_datetime1 +"output_video.mp4"\nfinal_video.write_videofile(new_path)\nprint(\'视频已生成========================\')    \n')}}),p.replace(/\\/gi,"\\\\")}},created:function(){this.isXunfeiPath="/xunfei"===this.$route.path,this.customDesignTextv2=localStorage.getItem("customDesignTextv2")||"",console.log(localStorage.getItem("peiyinJosnStrv2"),"========="),this.peiyinJosnStrv2=localStorage.getItem("peiyinJosnStrv2")||'{\n    "旁白":"阿森", "小汀":"元芳", "老奥":"樊雨","老拜":"啊星","小岸田":"晓君","小耶":"梦梦","小哈":"文君","小雷":"靖瑶",\n    "老普":"郭靖","小龙":"阿短","小马":"鱼辛","小龙":"魁峰","老特":"郝维","小尹":"大林","小布":"阿伟",\n\t"小泽":"啊乐","小朔":"小岳","老莫":"阿飞"\n    }',this.peiyinJosnStr=localStorage.getItem("peiyinJosnStr")||'{\n    "旁白":"阿森", "小汀":"小鹏", "老奥":"宝哥","老拜":"河南小坤","小岸田":"小光","小耶":"希涵","小哈":"小南","小雷":"程程",\n    "老普":"皓宇","小龙":"顾辉","小马":"管哥","小龙":"小洋","老特":"辉叔","小尹":"小宇","小布":"湖北小王",\n\t"小泽":"韦香主","小朔":"小峰","老莫":"小钟",\n\t"叶韵影":"小薛","叶韵仙":"瑶瑶","系统":"成都宝儿"\n    }',this.nameDict={"元芳":345,"樊雨":999,"啊星":1001,"晓君":1006,"郭靖":1011,"阿短":1088,"鱼辛":1100,"魁峰":1102,"郝维":1104,"大林":1204,"阿伟":15032,"啊乐":1506,"小岳":1507,"阿飞":1508,"小涛":1511,"阿豪":1512,"小龙":1515,"大鹏":1518,"家豪":1602,"小琦":1701,"萌萌":1202,"梦梦":346,"文君":348,"靖瑶":555,"雪青":887,"青曼":888,"菡颖":889,"小鱼":1002,"江柳":1003,"首玲":1004,"小美":1005,"茉莉":1007,"娜娜":1502,"尔琪":1009,"如玉":1010,"黄榕":1012,"香莲":1200,"昕雨":1201,"静静":1501,"潇潇":1504,"璐璐":1505,"小梦":1509,"阿雅":1510,"球球":1513,"如雪":1516,"小贝":1517,"小雨":1519,"熊熊":1520,"雅婷":1601,"甜甜":1203,"糖豆":1522,"雪花":1523}},mounted:function(){},methods:{formatTime:function(e){e=e.toFixed(3);var t=new Date(null);t.setSeconds(e);var n=1e3*e,r=t.toISOString().slice(11,19)+","+String(n).slice(-3);return r},fetchData:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return fetch("https://api.ttsmaker.cn/v1/create-tts-order",{method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"omit",body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(r){if(n<qe)return console.log("请求失败，正在进行第 ".concat(n+1," 次重试...")),t.fetchData(e,n+1);throw new Error("请求失败次数超过最大重试次数")})},handleGetAudio:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n,r,i,o,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.$loading({lock:!0,text:"生成配音中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n={};try{n=JSON.parse(this.peiyinJosnStrv2)}catch(c){}return e.prev=3,r=[],M.a.map(this.customDesignTextv2.split("\n").filter(function(e){return e}),function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。|.]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),i=t.includes(":")?t.split(":")[1]:t,o=t.includes(":")?t.split(":")[0]:"旁白",s=i.split(/[^\u4e00-\u9fa5a-zA-Z0-9.]+(?!\d)/g);r.push.apply(r,Object(W["a"])(M.a.map(s,function(e){var t,r,i,s=(null===(t=n)||void 0===t?void 0:t[o])&&(null===(r=a.nameDict)||void 0===r?void 0:r[null===(i=n)||void 0===i?void 0:i[o]])||"";return s||a.$message.error("配音人对应不上:"+o),{name:o,content:e,voice_id:s}})))}),console.log(r,"userList========"),e.next=9,Promise.all(M.a.map(r,function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={token:"ttsmaker_demo_token",text:t.content,voice_id:t.voice_id,audio_format:"mp3",audio_speed:1.3,audio_volume:2,text_paragraph_pause_time:0},e.abrupt("return",a.fetchData(n));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 9:i=e.sent,console.log(i,"list========="),o=M.a.map(i,function(e){return e.audio_file_url}),this.audioUrl=o.join(";"),e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](3);case 17:t.close();case 18:case"end":return e.stop()}},e,this,[[3,15]])}));function t(){return e.apply(this,arguments)}return t}(),getAudioDuration:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise(function(n,r){fetch(e,{headers:{"sec-ch-ua":'"Chromium";v="112", "Google Chrome";v="112", "Not:A-Brand";v="99"',"sec-ch-ua-mobile":"?0","sec-ch-ua-platform":'"Windows"'},referrer:location.origin,referrerPolicy:"strict-origin-when-cross-origin",body:null,method:"GET",mode:"cors",credentials:"omit"}).then(function(e){return e.blob()}).then(function(i){var o=new Audio(URL.createObjectURL(i));o.addEventListener("loadedmetadata",function(){console.log("音频时长：",o.duration),n(o.duration)}),o.addEventListener("error",function(){if(0===t)throw r(!1),new Error("请求失败次数超过最大重试次数");this.getAudioDuration(e,t-1)}),o.load()})})},getAllAudioDurations:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(M.a.map(t,function(e){return n.getAudioDuration(e)})));case 1:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),handleSelectType:function(e){this.active=e},copyTextToClipboard:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return t.$message.success("复制成功")},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return t.$message.error("复制失败, 请手动复制")},i=document.createElement("textarea");i.style.position="fixed",i.style.top=0,i.style.left=0,i.style.width="2em",i.style.height="2em",i.style.padding=0,i.style.border="none",i.style.outline="none",i.style.boxShadow="none",i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{if(navigator.userAgent.match(/(iPhone|iPod|iPad);?/i)){window.getSelection().removeAllRanges();var o=document.createRange();o.selectNode(i),window.getSelection().addRange(o);var a=document.execCommand("copy");return a?n():r(),window.getSelection().removeAllRanges(),void document.body.removeChild(i)}var s=document.execCommand("copy");s?n():r()}catch(c){r(c)}document.body.removeChild(i)}},watch:{peiyinJosnStrv2:function(e){localStorage.setItem("peiyinJosnStrv2",e)},peiyinJosnStr:function(e){localStorage.setItem("peiyinJosnStr",e)},customDesignTextv2:function(e){localStorage.setItem("customDesignTextv2",e)},audioUrl:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,s,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.$loading({lock:!0,text:"生成脚本中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),t=(t||"").replace(/['|"]/g,""),console.log("=============="),this.customSrtContentv2="",t){e.next=6;break}return e.abrupt("return");case 6:return r=[],M.a.map(this.customDesignTextv2.split("\n").filter(function(e){return e}),function(e){var t=e.trim().replace(/：/g,":").replace(/[?|？|！|!|。|.]+$/g,"").replace(/[^\u4e00-\u9fa5]+$/g,""),n=t.includes(":")?t.split(":")[1]:t,i=t.includes(":")?t.split(":")[0]:"旁白",o=n.split(/[^\u4e00-\u9fa5a-zA-Z0-9.]+(?!\d)/g);r.push.apply(r,Object(W["a"])(M.a.map(o,function(e){return{name:i,content:e}})))}),e.next=10,this.getAllAudioDurations(t.split(";"));case 10:i=e.sent,o="",a="00:00:00,000",s=0,M.a.map(r,function(e,t){s+=i[t];var n=c.formatTime(s);o+="\n".concat(t+1,"\n").concat(a," --\x3e ").concat(n,"\n").concat(r[t].content,"\n"),a=n}),console.log(o,"customSrtContentv2======="),this.customSrtContentv2=o,n.close();case 18:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},He=Ue,We=(n("d81d"),Object(C["a"])(He,Le,Fe,!1,null,null,null)),Ke=We.exports,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wechat"},[r("div",{staticClass:"input"},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:10},placeholder:"输入srt内容"},model:{value:e.inputContent,callback:function(t){e.inputContent=t},expression:"inputContent"}})],1),r("div",{staticClass:"message-content"},e._l(e.contentList,function(t,i){return r("div",{key:i+"message",class:t.time?"message-content-time":t.name?"message-content-l":"message-content-r"},[!t.time&&t.name?r("img",{staticClass:"touxiang",attrs:{src:n("cc47"),alt:""}}):e._e(),t.time||t.name?e._e():r("img",{staticClass:"touxiang",attrs:{src:n("b4a3"),alt:""}}),t.time?e._e():r("div",{staticClass:"message"},[e._v(e._s(t.message))]),t.time?r("span",{staticClass:"time"},[e._v(e._s(t.time))]):e._e()])}),0)])},Ve=[],Je=n("c1df"),$e=n.n(Je),Qe={components:{},data:function(){return{inputContent:"\n      系统: 假如给你一个亿，但你要对出正确的暗号\n      宝哥：给我一个亿\n      11:20\n      (严肃)先对暗号\n      宝哥：不就是暗号吗？come on the way ABC\n      (坏笑)你过时了，请听题，人之初性本善\n      (开心)宝哥：简单，性相近，习相远\n      (无语)让你对暗号不是背三字经\n      (生气)宝哥：你确定这是暗号吗？怎么没听过？\n      (严肃)对不出来就赶紧走\n      (开心)宝哥：我知道了。人之初性本善，一到下课就干饭\n      (无语)对的什么？快走开\n      宁宁：我要三个亿\n      (,11)那要对三个暗号。来吧\n      宁宁：我准备好了\n      天王盖地虎\n      宁宁：小鸡炖蘑菇\n      智慧树上智慧果\n      宁宁：智慧树下你和我\n      雷霆嘎巴无情哈拉上\n      (开心)宁宁：ZBC\n      全部正确。给你三个亿\n      小俊：太简单，我也要兑换三个亿\n      (坏笑)确定吗？三个亿可是要对三个暗号\n      小俊：尽管放马过来\n      人之初性本善\n      小俊：不写作业是好汉\n      老师检查怎么办？\n      小俊：下楼去找奥特曼\n      奥特曼飞得慢\n      小俊：飞到凌晨三点半\n      (生气)全部正确，给你三个亿\n      (开心)小俊：太简单了，毫无挑战性。哈哈哈哈哈哈。\n      "}},computed:{contentList:function(){return this.inputContent.replace(/[:|：]/gi,":").replace(/[)|）]/gi,")").split("\n").filter(function(e){return e.trim()}).map(function(e){e.trim().includes(")")&&(e=e.split(")")[1]);var t=$e()("2020-01-01 ".concat(e.trim())).format("HH:mm");return t="Invalid date"===t?"":t,{time:t,message:e.trim().includes(":")?e.trim().split(":")[1]:e.trim(),name:e.trim().includes(":")?e.trim().split(":")[0]:""}})}},created:function(){},destroyed:function(){},methods:{renderResize:function(){}}},Ye=Qe,Ze=(n("31eb"),Object(C["a"])(Ye,Ge,Ve,!1,null,null,null)),Xe=Ze.exports;r["default"].use(k["a"]);var et=new k["a"]({mode:"hash",base:"",routes:[{path:"/wechat",name:"wechat",component:Xe},{path:"/flash",name:"home",component:_e},{path:"/python",name:"python",component:Te},{path:"/",name:"best",component:Ne},{path:"/v2",name:"v2",component:Ke}]}),tt=n("2f62");r["default"].use(tt["a"]);var nt=new tt["a"].Store({state:{},mutations:{},actions:{}}),rt=n("5c96"),it=n.n(rt);n("0fae"),n("3a10");r["default"].prototype.Event=new r["default"],r["default"].use(it.a),r["default"].config.productionTip=!1,new r["default"]({router:et,store:nt,render:function(e){return e(w)}}).$mount("#app")},"5c48":function(e,t,n){},"5e61":function(e,t,n){"use strict";var r=n("7f8c"),i=n.n(r);i.a},"6a9e":function(e,t,n){},"7c21":function(e,t,n){},"7c55":function(e,t,n){"use strict";var r=n("5c48"),i=n.n(r);i.a},"7f8c":function(e,t,n){},"9ff9":function(e,t,n){"use strict";var r=n("1071"),i=n.n(r);i.a},a3bc:function(e,t,n){"use strict";var r=n("30c3"),i=n.n(r);i.a},b4a3:function(e,t,n){e.exports=n.p+"animation-editor-assets/img/default-touxiang.decc9d33.jpg"},b5cf:function(e,t,n){},c834:function(e,t,n){},cc47:function(e,t,n){e.exports=n.p+"animation-editor-assets/img/nusheng.68b246aa.jpg"},d81d:function(e,t,n){"use strict";var r=n("c834"),i=n.n(r);i.a},da76:function(e,t,n){"use strict";var r=n("37b2"),i=n.n(r);i.a},df7f:function(e,t,n){"use strict";var r=n("7c21"),i=n.n(r);i.a},f9d6:function(e,t,n){"use strict";var r=n("b5cf"),i=n.n(r);i.a}});